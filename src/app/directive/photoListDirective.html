<div class="center padding" ng-if="showErrorView()">
    <div class="error ">
        <i class="icon icon-large ion-ios-cloud-download-outline"></i>
        <p>{{ "errorText" | translate }}</p>
        <button class="button button-primary" ng-click="onReload()">
            {{ "tryAgainText" | translate }}
        </button>
    </div>

</div>
<div class="center padding" ng-if="showEmptyView()">
    <div class="error">
        <i class="icon icon-large ion-android-alert"></i>
        <p>{{ "galleriesNotFoundText" | translate }}</p>
    </div>
</div>

<ion-refresher pulling-text="{{'loadingText'| translate}}" on-refresh="onReload()"></ion-refresher>

<div class="list card animated fadeIn" ng-repeat="gallery in data" ng-if="showGalleries()">

    <div class="item item-avatar" profile-modal user="gallery.user.obj">
        <img ng-if="profile" profile="{{ ::gallery.user}}" ng-src="{{ ::gallery.user.photo._url}}">
        <img ng-src="{{ ::gallery.user.photo._url || 'img/user.png'}}">
        <h2>{{ ::gallery.user.name}}</h2>

        <p>{{ ::gallery.user.status}}</p>
        <span>{{ ::gallery.createdAt | amTimeAgo}}</span>
    </div>

    <div class="item item-body" on-double-tap="like(gallery.id)" ng-model="gallery">
        <div class="icon ion-ios-heart heart" ng-class="gallery.isLiked ? 'happy' : 'broken' "></div>
        <i class="icon" ng-if="like"></i> <img ng-src="{{ gallery.image._url}}" id="{{ ::gallery.id}}">
    </div>
    <div class="item item-buttons">
        <div class="row">
            <div class="col col-75">
                <ion-spinner ng-show="gallery.progress"></ion-spinner>
                <button photo-like ng-model="gallery" ng-if="!gallery.progress"
                        ng-class="gallery.isLiked ? 'ion-ios-heart' : 'ion-ios-heart-outline' "
                        class="button-clear button-icon button-heart"></button>
                <button photo-comment ng-model="gallery"
                        class="button-clear button-icon ion-ios-chatbubble-outline"></button>
                <button ng-click="action(gallery)" photogram="{{ :: gallery.id }}"
                        class="button-clear button-icon ion-android-share"></button>
            </div>
            <div class="col text-right">
                <button ng-click="action(gallery)" photogram="{{ :: gallery.id }}"
                        class="button-clear button-icon ion-android-more-vertical"></button>
            </div>
        </div>
    </div>
    <div class="padding">

    <span class="likes" photo-like ng-model="gallery"><i class="icon ion-ios-heart"></i>
      <span ng-if="!gallery.progress">{{ gallery.likesTotal  }}</span> <span
                translate="likesText"></span></span>


        <div class="list-comments">
            <div class="comment-item" profile-modal user="gallery.user.obj">
                <span class="username">{{ :: gallery.user.attributes.name }}</span>
                <span class="comment">{{ :: gallery.title }}</span>
            </div>
            <div class="comment-item" profile-modal user="gallery.user.id"
                 ng-repeat="item in gallery.comments | limitTo:3 track by item.id">
                <span class="username">{{ :: item.user.attributes.name }}</span> <span class="comment">{{ :: item.text }}</span>
            </div>
            <a class="comment-item" photo-comment ng-model="gallery" ng-if="gallery.comments.length>3" translate="seeAllCommentText"></a>
        </div>

        <button class="button button-block button-clear button-comment " photo-comment ng-model="gallery"><span
                translate="addComment"></span>
        </button>
    </div>
</div>

<ion-infinite-scroll
        on-infinite="onLoadMore()"
        ng-if="moreDataCanBeLoaded()"
        spinner
        distance="1%">
</ion-infinite-scroll>
