<div class="center-ico" ng-if="data.total==0">
  <i class="icon ion-ios-camera"></i>
  <h1 translate="HOME.TITLE.NO_PHOTO"></h1>
</div>

<ion-refresher ng-if="!loading" on-refresh="loadMore(true)"></ion-refresher>
<photogram-loading loading="loading"></photogram-loading>

<div class="list card animated fadeIn" ng-repeat="gallery in data.galleries ">

  <div class="item item-avatar" ion-affix data-affix-within-parent-with-class="card" profile-modal user="gallery.user">
    <img ng-if="profile" profile="{{ ::gallery.user.id }}" ng-src="{{ ::gallery.user.attributes.img._url}}">
    <img ng-src="{{ ::gallery.userAvatar}}">
    <h2>{{ ::gallery.user.attributes.name}}</h2>

    <p>{{ :: gallery.user.attributes.status }}</p>
    <span>{{ ::gallery.created | amTimeAgo}}</span>
  </div>

  <div class="item item-body" on-double-tap="like(gallery)" ng-model="gallery">
    <div class="icon ion-ios-heart heart" ng-class="gallery.liked ? 'happy' : 'broken' "></div>
    <i class="icon" ng-if="like"></i> <img cache-src="{{ ::gallery.src}}" id="{{ ::gallery.id}}">
  </div>
  <div class="item item-buttons">
    <div class="row">
      <div class="col col-75">
        <ion-spinner ng-show="gallery.progress"></ion-spinner>
        <button photogram-like ng-model="gallery" ng-if="!gallery.progress" ng-class="gallery.liked ? 'ion-ios-heart' : 'ion-ios-heart-outline' "
          class="button-clear button-icon button-heart"></button>
        <button photogram-comment ng-model="gallery" class="button-clear button-icon ion-ios-chatbubble-outline"></button>
        <button ng-click="action(gallery)" photogram="{{ :: gallery.id }}" class="button-clear button-icon ion-android-share"></button>
      </div>
      <div class="col text-right">
        <button ng-click="action(gallery)" photogram="{{ :: gallery.id }}" class="button-clear button-icon ion-android-more-vertical"></button>
      </div>
    </div>
  </div>
  <div class="padding">

    <span class="likes" photogram-like photogram="{{ :: gallery }}"><i class="icon ion-ios-heart"></i>
            <span ng-if="!gallery.progress">{{ :: gallery.likes  }}</span> <span translate="PHOTOGRAM.LIKES"></span></span>


    <div class="list-comments">
      <div class="comment-item" profile-modal user="gallery.user">
        <span class="username">{{ :: gallery.user.attributes.name }}</span>
        <span class="comment">{{ :: gallery.item.title }}</span>
      </div>
      <div class="comment-item" profile-modal user="item.user" ng-repeat="item in gallery.comments">
        <span class="username">{{ :: item.user.attributes.name }}</span> <span class="comment">{{ :: item.text }}</span>
      </div>
    </div>

    <button class="button button-block button-clear button-comment " photogram-comment ng-model="gallery"><span
                translate="PHOTOGRAM.BUTTON.COMMENT_ADD"></span>
        </button>
  </div>
</div>

<ion-infinite-scroll ng-if="data.galleries.length<data.total" on-infinite="loadMore()"></ion-infinite-scroll>