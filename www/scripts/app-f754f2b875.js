/**
 * @license
 * Copyright 2010 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function MarkerClusterer(e,t,n){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var o=n||{};this.gridSize_=o.gridSize||60,this.minClusterSize_=o.minimumClusterSize||2,this.maxZoom_=o.maxZoom||null,this.styles_=o.styles||[],this.imagePath_=o.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=o.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=o.zoomOnClick&&(this.zoomOnClick_=o.zoomOnClick),this.averageCenter_=!1,void 0!=o.averageCenter&&(this.averageCenter_=o.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var r=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=r.map_.getZoom();r.prevZoom_!=e&&(r.prevZoom_=e,r.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){r.redraw()}),t&&t.length&&this.addMarkers(t,!1)}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,n){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=t,this.padding_=n||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}!function(){"use strict";angular.module("starter",["ionic","formlyIonic","ngMessages","ngCookies","ngStorage","pascalprecht.translate","tmh.dynamicLocale","angularMoment","ngFacebook","angular-cache","ngSanitize","mentio","ion-affix","jett.ionic.scroll.sista","ngCordova","ionic.components","app.main"])}(),function(){"use strict";angular.module("ionic.components",["ion-language","ion-location","ion-slideshow","ion-photo"])}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,n){function o(){var e=n.href;return window.cordova?window.cordova.ThemeableBrowser.open(e,"_blank",{statusbar:{color:"#ffffffff"},toolbar:{height:44,color:"#f0f0f0ff"},title:{color:"#000",showPageTitle:!0},backButtonCanClose:!0}):window.open(e),!1}t.bind("click",o)}}}angular.module("starter").directive("href",e)}(),function(){"use strict";angular.module("app.main",["ionic","ngCordova"])}(),function(){"use strict";function e(e,t,n,o){t.useLoader("$translatePartialLoader",{urlTemplate:"{part}/i18n/{lang}.json"}),t.useSanitizeValueStrategy(null),t.useLocalStorage(),o.localeLocationPattern("../bower_components/angular-i18n/angular-locale_{{locale}}.js");var r=navigator.language||navigator.userlanguage,i=r.split("-")[0],a=n.preferredLocale,s=_.some(n.locales,{code:i});s&&(a=n.locales.filter(function(e){return a==e.code})[0].code),t.preferredLanguage(a),moment.locale(a)}e.$inject=["$translatePartialLoaderProvider","$translateProvider","AppConfig","tmhDynamicLocaleProvider"],angular.module("ion-language",["ngCookies","pascalprecht.translate","tmh.dynamicLocale"]).config(e)}(),function(){"use strict";angular.module("ion-location",["ionic"])}(),function(){"use strict";angular.module("ion-photo",["ionic","ngCordova","jrCrop"]).constant("config",{path:"app/component/ion-photo"})}(),function(){"use strict";angular.module("ion-slideshow",[]).directive("ionSlideshow",["$ionicModal",function(e){function t(t,n,o){n.bind("click",function(){t.allImages=t.ngModel,t.activeSlide=t.index,console.log(t.index),e.fromTemplateUrl("app/component/ion-slideshow/image-popover.html",{scope:t}).then(function(e){t.modal=e,t.modal.show()}),t.closeModal=function(){t.modal.hide(),t.modal.remove()}})}return{restrict:"A",scope:{ngModel:"=",index:"="},link:t}}])}(),function(){"use strict";angular.module("app.main")}(),function(){"use strict";function e(e){e.debugInfoEnabled(!1)}function t(e,t,n,o,r){Parse.initialize(e.parse.appId),Parse.serverURL=e.parse.server,n.unit||(n.unit=e.map.unit),n.mapType||(n.mapType=e.map.type),r.currentUser=Parse.User.current(),console.log(r.currentUser),r.currentUser||o.path("/")}function n(e,t,n,o,r,i,a,s,l,c){t.theme=l.theme,e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.disableScroll(!0),window.StatusBar.styleLightContent()),e.registerBackButtonAction(function(e){e.preventDefault()},100),n.lang?o.use(n.lang):"undefined"!=typeof navigator.globalization&&r.getPreferredLanguage().then(function(e){o.use(e.value.split("-")[0])},null),navigator&&navigator.splashscreen&&i.hide(),Parse.User.current()&&a.init()})}function o(e){e.platform.ios.backButton.previousTitleText(" ").icon("ion-ios-arrow-left"),e.platform.android.backButton.previousTitleText(" ").icon("ion-ios-arrow-left"),e.views.swipeBackEnabled(!1),e.backButton.text(" ").icon("ion-ios-arrow-left"),e.tabs.position("bottom"),e.navBar.alignTitle("center"),e.views.maxCache(1)}function r(e,t){window.cordova||(e.setAppId(t.facebookAppId),e.setPermissions("id,name,email,user_likes,bio"))}function i(){if(!window.cordova){console.log("Facebook Browser");var e=window.navigator.language||window.navigator.userLanguage,t=e.substring(0,2)+"_"+e.substring(3,5).toUpperCase();!function(e,n,o){var r,i=e.getElementsByTagName(n)[0];e.getElementById(o)||(r=e.createElement(n),r.id=o,r.src="http://connect.facebook.net/"+t+"/sdk.js",i.parentNode.insertBefore(r,i))}(document,"script","facebook-jssdk")}}t.$inject=["AppConfig","$ionicPlatform","$localStorage","$location","$rootScope"],n.$inject=["$ionicPlatform","$rootScope","$localStorage","$translate","$cordovaGlobalization","$cordovaSplashscreen","ParsePush","ConnectMonitor","AppConfig","User"],e.$inject=["$compileProvider"],r.$inject=["$facebookProvider","AppConfig"],o.$inject=["$ionicConfigProvider"],angular.module("starter").run(t).run(n).run(i).config(e).config(r).config(o)}(),function(){"use strict";function e(){return{path:"app/module/photogram",app:{name:"Photogram",url:"http://photogramapp.com",image:"http://photogramapp.com/social-share.jpg"},routes:{home:"tab.home",login:"intro"},theme:"positive",gaTrackingId:"UA-69485876-2",facebookAppId:"1024016557617380",parse:{appId:"myAppId",server:"https://photogram.codevibe.io/parse/"},map:{unit:"mi",type:"normal"},locales:[{translation:"portugues",code:"pt"},{translation:"english",code:"en"},{translation:"turkish",code:"tr"},{translation:"persian",code:"fa"},{translation:"german",code:"de"}],preferredLocale:"en",DAO:{name:"photogram_db",tables:[{name:"User",columns:{id:"TEXT PRIMARY KEY",name:"TEXT",username:"TEXT",email:"TEXT",language:"TEXT",facebookimg:"TEXT",gender:"TEXT",img:"TEXT",facebook:"INTEGER",qtdFollow:"INTEGER",status:"TEXT",createdAt:"INTEGER",attributes:"TEXT"}},{name:"UserFollow",columns:{id:"TEXT PRIMARY KEY",user_id:"TEXT",followId:"TEXT"}},{name:"Gallery",columns:{id:"TEXT PRIMARY KEY",img:"TEXT",title:"TEXT",user_id:"TEXT",location:"TEXT",isLiked:"BOOLEAN",likes:"INTEGER",createdAt:"INTEGER"}},{name:"GalleryActivity",columns:{id:"TEXT PRIMARY KEY",action:"TEXT",img:"TEXT",userAvatar:"TEXT",userName:"TEXT",user_id:"TEXT",gallery_id:"TEXT",createdAt:"INTEGER"}},{name:"GalleryComment",columns:{id:"TEXT PRIMARY KEY",name:"TEXT",user_id:"TEXT",userName:"TEXT",gallery_id:"TEXT",createdAt:"INTEGER"}},{name:"GallerySetting",columns:{key:"TEXT",value:"TEXT"}}]}}}angular.module("ionic").constant("AppConfig",e())}(),function(){"use strict";function e(e,t,n){n.addPart("app"),e.state("loading",{url:"/",templateUrl:"app/main/loading/loading.html",controller:"LoadingCtrl",controllerAs:"vm"}).state("intro",{url:"/intro",templateUrl:"app/main/user-intro/user-intro.html",controller:"UserIntroCtrl",controllerAs:"vm"}).state("user.intro",{url:"/intro",templateUrl:"app/main/user-intro/user-intro.html",controller:"UserIntroCtrl"}).state("user",{url:"/user","abstract":!0,templateUrl:"app/main/user-layout/user-layout.html"}).state("user.avatar",{url:"/avatar",templateUrl:"app/main/user-avatar/user-avatar.html",controller:"UserAvatarCtrl",controllerAs:"vm"}).state("user.merge",{url:"/merge",controller:"UserMergeCtrl",controllerAs:"vm",templateUrl:"app/main/user-merge/merge.html"}).state("logout",{url:"/logout",template:'<ion-view view-title="Logout" cache-view="false"><ion-content></ion-content></ion-view>',controller:["User","$localStorage","AppConfig","$state",function(e,t,n,o){delete window.localStorage["Parse/"+n.parse.appId+"/currentUser"],delete window.localStorage["Parse/"+n.parse.appId+"/installationId"],t.$reset({}),o.go("user.intro",{clear:!0})}],controllerAs:"vm"}).state("profile",{url:"/profile/:username",templateUrl:"app/main/profile/profile.html",controllerAs:"vm"}).state("tab",{url:"/tab","abstract":!0,controller:"MainTabCtrl",controllerAs:"vm",templateUrl:"app/main/tab/main-tab.html"}).state("tab.home",{url:"/home",views:{tabHome:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"app/main/tab-home/home.html"}}}).state("tab.homeProfile",{url:"/home/:username",views:{tabHome:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("galleryComments",{url:"/home/:galleryId/comments",controller:"GalleryComment",controllerAs:"vm",templateUrl:"app/main/gallery-comment/gallery-comment.html"}).state("tab.homeGalleryLikers",{url:"/home/:galleryId/likers",views:{tabHome:{controller:"UserLikersCtrl",controllerAs:"vm",templateUrl:"app/main/user-likers/user-likers.html"}}}).state("tab.homeProfileFollowers",{url:"/home/:username/followers",views:{tabHome:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.homeProfileFollowing",{url:"/home/:username/follwing",views:{tabHome:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}).state("tab.homeUserlist",{url:"/home/userlist",views:{tabHome:{controller:"UserListCtrl",controllerAs:"vm",templateUrl:"app/main/user-list/user-list.html"}}}).state("tab.search",{url:"/search/:text",views:{tabSearch:{controller:"SearchCtrl",controllerAs:"vm",templateUrl:"app/main/tab-search/search.html"}}}).state("tab.searchProfile",{url:"/search/:username",views:{tabSearch:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("tab.searchProfileFollowers",{url:"/search/:username/followers",views:{tabSearch:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.map",{url:"/map",views:{tabSearch:{controller:"SearchMapCtrl",controllerAs:"vm",templateUrl:"app/main/tab-search-map/searchMap.html"}}}).state("tab.mapProfile",{url:"/map/:username",views:{tabSearch:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("tab.mapProfileFollowers",{url:"/map/:username/followers",views:{tabSearch:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.mapProfileFollowing",{url:"/map/:username/follwing",views:{tabActivity:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}).state("tab.account",{url:"/account",views:{tabProfile:{controller:"AccountCtrl",controllerAs:"vm",templateUrl:"app/main/tab-account/account.html"}}}).state("tab.accountFollowers",{url:"/account/:username/followers",views:{tabProfile:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.accountFollowing",{url:"/account/:username/follwing",views:{tabProfile:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}).state("tab.activity",{url:"/activity",views:{tabActivity:{controller:"ActivityCtrl",controllerAs:"vm",templateUrl:"app/main/tab-activity/activity.html"}}}).state("tab.activityProfile",{url:"/activity/:username",views:{tabActivity:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("tab.activityProfileFollowers",{url:"/activity/:username/followers",views:{tabActivity:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.activityProfileFollowing",{url:"/activity/:username/follwing",views:{tabActivity:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider","$translatePartialLoaderProvider"],angular.module("starter").config(e)}(),MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),n=new google.maps.LatLngBounds,o=0;e=t[o];o++)n.extend(e.getPosition());this.map_.fitBounds(n)},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(e,t){for(var n=0,o=e.length,r=o;0!==r;)r=parseInt(r/10,10),n++;return n=Math.min(n,t),{text:o,index:n}},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(e,t){for(var n,o=0;n=e[o];o++)this.pushMarkerTo_(n);t||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var n,o=0;n=this.markers_[o];o++)if(n==e){t=o;break}return-1==t?!1:(e.setMap(null),this.markers_.splice(t,1),!0)},MarkerClusterer.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n?(this.resetViewport(),this.redraw(),!0):!1},MarkerClusterer.prototype.removeMarkers=function(e,t){for(var n,o=!1,r=0;n=e[r];r++){var i=this.removeMarker_(n);o=o||i}return!t&&o?(this.resetViewport(),this.redraw(),!0):void 0},MarkerClusterer.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(e){this.map_=e},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),o=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),r=t.fromLatLngToDivPixel(n);r.x+=this.gridSize_,r.y-=this.gridSize_;var i=t.fromLatLngToDivPixel(o);i.x-=this.gridSize_,i.y+=this.gridSize_;var a=t.fromDivPixelToLatLng(r),s=t.fromDivPixelToLatLng(i);return e.extend(a),e.extend(s),e},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(e){for(var t,n=0;t=this.clusters_[n];n++)t.remove();for(var o,n=0;o=this.markers_[n];n++)o.isAdded=!1,e&&o.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,n=0;t=e[n];n++)t.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var n=6371,o=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),a=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),s=n*a;return s},MarkerClusterer.prototype.addToClosestCluster_=function(e){for(var t,n=4e4,o=null,r=(e.getPosition(),0);t=this.clusters_[r];r++){var i=t.getCenter();if(i){var a=this.distanceBetweenPoints_(i,e.getPosition());n>a&&(n=a,o=t)}}if(o&&o.isMarkerInClusterBounds(e))o.addMarker(e);else{var t=new Cluster(this);t.addMarker(e),this.clusters_.push(t)}},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),n=this.getExtendedBounds(t),o=0;e=this.markers_[o];o++)!e.isAdded&&this.isMarkerInBounds_(e,n)&&this.addToClosestCluster_(e)},Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,n=0;t=this.markers_[n];n++)if(t==e)return!0;return!1},Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,n=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,o=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(n,o),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var r=this.markers_.length;if(r<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),r==this.minClusterSize_)for(var i=0;r>i;i++)this.markers_[i].setMap(null);return r>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers(),o=0;e=n[o];o++)t.extend(e.getPosition());return t},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var n,o=0;n=this.markers_[o];o++)n.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var r=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,r);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(i),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(e){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_,e),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}var t=this.getPanes();t.overlayMouseTarget.appendChild(this.div_);var n=this,o=!1;google.maps.event.addDomListener(this.div_,"click",function(e){o||n.triggerClusterClick(e)}),google.maps.event.addDomListener(this.div_,"mousedown",function(){o=!1}),google.maps.event.addDomListener(this.div_,"mousemove",function(){o=!0})},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(t.x-=this.iconAnchor_[0],t.y-=this.iconAnchor_[1]):(t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10)),t},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition,this.iconAnchor_=t.iconAnchor},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var n=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+n+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?t.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var o=this.textColor_?this.textColor_:"black",r=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+o+"; position:absolute; font-size:"+r+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove,function(){"use strict";function e(e,t,n,o,r,i,a,s){function l(l,c,u){c.bind("click",function(){l.formFields=i.login,l.routeLogged=a.routes.home,l.form={username:"",password:""},l.submitLogin=function(e,i){var a=angular.copy(i);return e.$valid?(console.log(a),void n.signIn(a).then(function(e){console.log(e),s.currentUser=e,o.go(l.routeLogged,{clear:!0}),l.closeModal(),t.end()})["catch"](function(e){r.alert({title:"Error",text:"Incorrect username or password"}),t.end()})):!1},e.fromTemplateUrl("app/directive/SigninModalDirective.html",{scope:l,animation:"slide-in-up",focusFirstInput:!0}).then(function(e){l.modal=e,l.modal.show()}),l.closeModal=function(){l.modal.hide()},l.$on("$destroy",function(){l.modal.remove()})})}return{restrict:"A",link:l}}e.$inject=["$ionicModal","Loading","User","$state","Toast","UserForm","AppConfig","$rootScope"],angular.module("starter").directive("signinModal",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s){function l(l,c,u){c.bind("click",function(){l.formFields=e.register,l.routeLogged=t.routes.home,l.form={username:"",email:"",password:""},l.submitRegister=function(e,t){if(e.$valid){n.start();var a=angular.copy(t);o.signUp(a).then(function(e){console.log(e),o.signIn({username:a.username,password:a.password}).then(function(e){console.log(e),s.currentUser=Parse.User.current(),r.go("user.avatar",{clear:!0}),n.end(),l.closeModal()})["catch"](function(e){console.log(e),i.alert({title:"Alert",text:e.error}),n.end()})})["catch"](function(e){console.log(e),i.alert({title:"Alert",text:e.error}),n.end()})}},a.fromTemplateUrl("app/directive/SignupModalDirective.html",{scope:l,animation:"slide-in-up",focusFirstInput:!0}).then(function(e){l.modal=e,l.modal.show()}),l.closeModal=function(){l.modal.hide()},l.$on("$destroy",function(){l.modal.remove()})})}return{restrict:"A",link:l}}e.$inject=["UserForm","AppConfig","Loading","User","$state","Toast","$ionicModal","$rootScope"],angular.module("starter").directive("signupModal",e)}(),function(){"use strict";function e(e,t,n,o,r,i){function a(a,s,l){function c(){v=!0,b=!1,y=!1,w=!1}function u(){b=!0,v=!1,y=!1,w=!1}function d(){y=!0,b=!1,v=!1,w=!1}function p(){w=!0,y=!1,b=!1,v=!1}function h(e){x=!1,e>0&&(x=!0)}function m(e){for(var t=0;t<e.length;t++)a.data.push(e[t])}function f(e){a.params.page=e}function g(){e.list(a.params).then(function(e){h(e.length),f(a.params.page+1),m(e),0===a.data.length?p():u(),a.loading=!1,t.$broadcast("scroll.infiniteScrollComplete"),t.$broadcast("scroll.refreshComplete")})["catch"](function(){0===a.data.length&&d(),x=!1,a.$broadcast("scroll.refreshComplete")})}a.params={},a.params.page=1,a.data=[],a.username&&(a.params.username=a.username),a.loading=!0,t.$on("photoInclude",function(e,t){t.objectId&&(t.id=t.objectId),a.data.unshift(t)}),t.$on("gallery:search",function(e,t){console.log(e,t),a.params.search=t.text,a.onReload()}),g();var v=!1,b=!1,y=!1,w=!1,x=!1;a.onLoadMore=function(){g()},a.moreDataCanBeLoaded=function(){return x},a.showLoadingView=function(){return v},a.showGalleries=function(){return b},a.showErrorView=function(){return y},a.showEmptyView=function(){return w},a.onReload=function(){a.params.page=0,a.data=[],a.loading=!0,c(),g(),a.$broadcast("scroll.refreshComplete")},a.action=function(e){function t(t){switch(t){case 0:o.share(c);break;case 1:r.modal(e);break;case 2:n.confirm({title:"Delete photo",template:"Are you sure?"}).then(function(t){t&&Gallery.destroy(e).then(function(){console.log("Photo deleted"),a.$emit("PhotogramHome:reload")})})}return!0}var s=[{text:'<i class="icon ion-share"></i>Share'},{text:'<i class="icon ion-alert-circled"></i>Report'}];if(console.log(e),Parse.User.current().id===e.user_id){var l={text:'<i class="icon ion-trash-b"></i>Delete your photo'};s.push(l)}var c={text:e.title,image:e.img},u={buttons:s,titleText:"Photo",cancelText:"Cancel",buttonClicked:t};i.show(u)}}return{restrict:"E",scope:{username:"=",user:"=",profile:"=",onReload:"="},templateUrl:"app/directive/albumGridDirective.html",link:a}}e.$inject=["GalleryAlbum","$rootScope","$ionicPopup","Share","FeedbackModal","$ionicActionSheet"],angular.module("starter").directive("albumGrid",e)}(),function(){"use strict";function e(e,t,n,o){function r(o,r,i){r.bind("click",function(){return o.theme=e.theme,o.album?(n.fromTemplateUrl("app/directive/albumPhotoGridDirective.html",{scope:o}).then(function(e){o.modal=e,o.modal.show()}),o.closeModal=function(){o.modal.hide()},o.$on("$destroy",function(){o.modal.remove()}),void t.getAlbum({id:o.album}).then(function(e){console.log(e),o.title=e.album.attributes.title,o.data=e.photos})):!1})}return{restrict:"A",scope:{album:"="},link:r}}e.$inject=["AppConfig","Gallery","$ionicModal","$rootScope"],angular.module("starter").directive("albumPhotoGrid",e)}(),function(){"use strict";function e(e){function t(e,t){t.bind("click",function(){var e="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S";window.cordova?cordova.ThemeableBrowser.open(e,"_blank",{statusbar:{color:"#ffffffff"},toolbar:{height:44,color:"#f0f0f0ff"},title:{color:"#333333",showPageTitle:!0},closeButton:{image:"close",imagePressed:"close_pressed",align:"left",event:"closePressed"},backButtonCanClose:!0}):window.open(e,"_blank")})}return{restrict:"A",link:t}}e.$inject=["$cordovaInAppBrowser"],angular.module("starter").directive("buy",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{targetModel:"=compareTo"},require:"ngModel",link:function(e,t,n,o){var r=function(){var n=t.val(),o=e.targetModel;return null!==o?n===o:!1};e.$watch(r,function(e){o.$setValidity("errorCompareTo",e)})}}}angular.module("starter").directive("compareTo",e)}(),function(){"use strict";function e(e,t){function n(n,o,r){o.bind("click",function(){n.storage=e,n.distances=[{val:.2,text:"perto"},{val:.6,text:"longe"},{val:1,text:"1 "+n.storage.unit},{val:5,text:"5 "+n.storage.unit},{val:10,text:"10 "+n.storage.unit},{val:25,text:"25 "+n.storage.unit},{val:50,text:"50 "+n.storage.unit},{val:100,text:"100 "+n.storage.unit}],t.fromTemplateUrl("app/directive/distanceModal.html",{scope:n}).then(function(e){n.modal=e,n.modal.show()}),n.onDistanceSelected=function(e){console.log("Distance",e)},n.closeDistanceModal=function(){n.modal.hide(),n.modal.remove()}})}return{restrict:"A",link:n}}e.$inject=["$localStorage","$ionicModal"],
angular.module("starter").directive("distanceModal",e)}(),function(){"use strict";function e(e){function t(t,n,o,r){r.$asyncValidators.email=function(t,n){return console.log(n),n?e.validateEmail(n):void 0}}return{require:"ngModel",link:t}}e.$inject=["User"],angular.module("starter").directive("emailValidator",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c,u){function d(t,n,d){function p(){console.log("Facebook login"),t.loading=!0,a.logIn().then(function(n){if(console.log(n),"connected"===n.status){var d=null;return a.me().then(function(e){return d=e,l.findByEmail(e.email)}).then(function(e){if(!e.id)return l.signInViaFacebook(n);if(e.get("authData")){if(e.get("authData").facebook.id===d.id)return l.signInViaFacebook(n)}else c.tempUser=e,o.go("user.merge",{clear:!0})}).then(function(){return l.updateWithFacebookData(d)}).then(function(t){t?(c.currentUser=t,o.go(i.routes.home,{clear:!0}),console.log(t,t.attributes),c.$broadcast("onUserLogged"),e.end(),u.alert({text:r.instant("loggedInAsText")+" "+t.get("email")})):console.log("Error ")},function(n){s.alert(n),e.end(),t.loading=!1})}})["catch"](function(n){console.log("err",n),e.end(),t.loading=!1})}t.facebookStatus=null,n.bind("click",p)}return{restrict:"E",link:d,template:'<button class="button button-block button-facebook"><i class="icon ion-social-facebook"></i> <ion-spinner ng-if="loading"></ion-spinner> <span ng-if="!loading">{{ me.name || \'loginWithFacebook\'| translate}}</span> </button>'}}e.$inject=["Loading","$q","$ionicPlatform","$state","$translate","AppConfig","Facebook","Dialog","User","$rootScope","Toast"],angular.module("starter").directive("facebookLogin",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",link:function(n,o,r){function i(){e(function(){o[0].focus(),o[0].click(),window.cordova&&cordova.plugins.Keyboard.show()},750)}t.$on("openKeyboard",i),i()}}}e.$inject=["$timeout","$rootScope"],angular.module("starter").directive("focusMe",e)}(),function(){"use strict";function e(e,t,n){function o(o,r,i){function a(){var r=t.defer();return o.loading=!0,o.params={},o.params.page=0,n.list(o.params).then(function(e){o.data=e,o.loading=!1}),e.fromTemplateUrl("app/directive/galleryAlbumModalDirective.html",{scope:o,focusFirstInput:!0}).then(function(e){o.modal=e,o.modal.show()}),o.$on("selectAlbum",function(e,t){console.log("selectAlbum",e),console.log("selectAlbum",t),o.ngModel=t,o.closeModal()}),o.closeModal=function(){o.modal.hide()},o.$on("$destroy",function(){o.modal.remove()}),o.selectAlbum=function(e){o.ngModel=e,o.closeModal()},r.promise}r.bind("click",a)}return{restrict:"A",link:o,scope:{ngModel:"="}}}e.$inject=["$ionicModal","$q","GalleryAlbum"],angular.module("starter").directive("galleryAlbumModal",e)}(),function(){"use strict";function e(e,t,n){function o(o,r,i){function a(){var r=t.defer();return o.form={title:"",description:""},e.fromTemplateUrl("app/directive/galleryNewAlbumModalDirective.html",{scope:o,focusFirstInput:!0}).then(function(e){o.modal=e,o.modal.show()}),o.createAlbum=function(e,t){console.log(e,t),e.$valid&&n.create(angular.copy(t)).then(function(e){console.log("album created",e),o.ngModel=e,o.closeModal(),o.$emit("selectAlbum",e)})},o.closeModal=function(){o.modal.hide()},o.$on("$destroy",function(){o.modal.remove()}),o.selectAlbum=function(e){o.ngModel=e,o.closeModal()},r.promise}r.bind("click",a)}return{restrict:"A",link:o,scope:{ngModel:"="}}}e.$inject=["$ionicModal","$q","GalleryAlbum"],angular.module("starter").directive("galleryNewAlbumModal",e)}(),function(){"use strict";function e(){function e(e,t,n){t.bind("click",function(){console.log(e.item),t.addClass("happy")})}return{restrict:"A",scope:{item:"="},link:e}}angular.module("starter").directive("heart",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{icon:"@",loading:"="},template:'<div class="padding text-center loading" ng-show="loading"><ion-spinner icon="{{ icon }}"></ion-spinner></div>'}}function t(e,t){e.$on("ionicLoading:true",function(n){e.loading=!0,t.show(n)}),e.$on("ionicLoading:false",function(){e.loading=!1,t.hide()})}function n(e,t){function n(t){e.$broadcast("ionicLoading:true",t)}function o(){t(function(){e.$broadcast("ionicLoading:false")},parseInt(r+"000"))}var r=0;return{start:n,end:o}}t.$inject=["$rootScope","$ionicLoading"],n.$inject=["$rootScope","$timeout"],angular.module("starter").directive("ionLoading",e).run(t).factory("Loading",n)}(),function(){"use strict";function e(){return{restrict:"E",scope:{loading:"=",icon:"@"},template:'<div class="padding text-center loading" ng-show="loading"><ion-spinner icon="{{ icon }}"></ion-spinner></div>'}}angular.module("starter").directive("loading",e)}(),function(){"use strict";function e(e,t,n,o,r,i){function a(e,a,s){function l(){e.galleries=[],m(),f();var t={latitude:-18.8800397,longitude:-47.05878999999999},n={center:u(t),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};e.map=new google.maps.Map(document.getElementById("map_canvas"),n)}function c(){r.getCurrentPosition().then(function(t){console.log(t),e.params.location={latitude:t.coords.latitude,longitude:t.coords.longitude};var n={position:u(e.params.location),title:"I am here",id:0};d(n),e.map.setCenter(u(e.params.location)),h()},function(t){e.params.location=null;var n;n=1===t.code||3===t.code?"errorGpsDisabledText":"errorLocationMissingText",i.alert(n)})}function u(e){return e?new google.maps.LatLng(e.latitude,e.longitude):void 0}function d(t){var n={id:t.id,map:e.map,position:t.position,title:t.title,animation:google.maps.Animation.DROP};if(t.icon){var o=40;n.icon={url:t.icon,size:new google.maps.Size(o,o),scaledSize:new google.maps.Size(o,o),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(o/4,o/4)}}var r=new google.maps.Marker(n);google.maps.event.addListener(r,"click",function(){console.log(t.username)}),g.push(r),new MarkerClusterer(e.map,g,{imagePath:"../img/m"}),v.extend(t.position),e.map.fitBounds(v)}function p(t){e.galleries=t,t.map(function(t){if(t.location){var n={map:e.map,id:t.id,position:u(t.location),title:t.title,image:t.image.url(),icon:t.imageThumb.url()};d(n)}})}function h(){e.loading=!0,o.feed(e.params).then(function(t){t.length>0?p(t):i.alert("galleriesNotFoundText"),e.loading=!1},function(){n.show("errorText")})}function m(){e.galleries=[]}function f(){g.map(function(e){e.setMap(null)}),g=[]}var g=[],v=new google.maps.LatLngBounds;e.maxRating=5,e.storage=t,e.galleries=[],e.params={location:null,distance:100,page:1,limit:10,username:e.username},e.loading=!0,e.map,l(),c(),e.onSearchHere=function(){e.params.location.latitude=e.map.getCenter().lat(),e.params.location.longitude=e.map.getCenter().lng(),m(),f(),h()},e.onGalleryClicked=function(e){console.log(e)}}return{restrict:"E",link:a,scope:{username:"=",load:"=",onReload:"="},templateUrl:"app/directive/mapPhotoUserDirective.html"}}e.$inject=["$state","$localStorage","Toast","Gallery","Geolocation","Dialog"],angular.module("starter").directive("mapPhotoUser",e)}(),function(){"use strict";function e(e,t,n){var o=t.path;return{restrict:"A",scope:{user:"="},link:function(t,r,i){function a(){e.fromTemplateUrl(o+"/directive/follow/photogram.follow.modal.html",{scope:t}).then(function(e){t.modalFollow=e,console.log("Open modal follow",t.user),n.getFollow(t.user).then(function(e){console.log(e),t.data=e,t.modalFollow.show()})})}function s(){t.modalFollow.hide(),t.modalFollow.remove()}r.bind("click",a),t.closeModal=s}}}e.$inject=["$ionicModal","AppConfig","Photogram"],angular.module("starter").directive("photogramFollow",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c,u,d){return{restrict:"A",scope:{ngModel:"="},link:function(t,p){function h(){t.currentUser=Parse.User.current(),t.nocomments=!1,t.loading=!1,t.form={gallery:t.ngModel.galleryObj,text:""}}function m(){console.log(t.ngModel),h(),t.loading=!0,t.formFields=d.formComment,t.submitComment=b,t.deleteComment=f,t.editComment=g,t.closeModal=function(){t.modal.hide(),t.modal.remove()},v(),t.myIndexValue="5",t.searchPeople=function(e){var o=[];return a.getFollowing().then(function(r){return _.each(r,function(t){t.imageUrl=t.photo?t.photo._url:"img/user.png",t.bio=t.status,t.name.toUpperCase().indexOf(e.toUpperCase())>=0&&o.push(t)}),t.people=o,console.log(o),n.when(o)})},t.getPeopleTextRaw=function(e){return"@"+e.username},e.fromTemplateUrl("app/directive/photoCommentDirective.html",{scope:t,focusFirstInput:!0}).then(function(e){t.modal=e,t.modal.show()})}function f(e){console.log(e),s.confirm("Delete comment","You are sure?").then(function(t){console.log(t),t&&u.destroy(e).then(function(e){console.log(e),v()})})}function g(e){console.log(e),t.data=angular.copy(e),i.show({template:'<input type="text" ng-model="data.text">',title:"Edit comment",scope:scope,buttons:[{text:"Cancel"},{text:"<b>OK</b>",type:"button-positive",onTap:function(e){return console.log(t.data),t.data.text?t.data:void e.preventDefault()}}]}).then(function(e){console.log(e),e&&u.update(e).then(function(e){console.log(e),v()})})}function v(){t.loading=!0,c.comments({galleryId:t.ngModel.id}).then(function(e){t.comments=e,t.ngModel.comments=e,t.loading=!1,$timeout(function(){o.scrollBottom()},1)})}function b(e,n){if(e.$valid){var o=angular.copy(n);console.log(o),r.start(),u.create(o).then(function(e){console.log(e),v(),l.$emit("openKeyboard"),r.end(),t.closeModal()})}}p.bind("click",m)}}}e.$inject=["$ionicModal","$http","$q","$ionicScrollDelegate","Loading","$ionicPopup","User","Dialog","$rootScope","Gallery","GalleryComment","GalleryForm"],angular.module("starter").directive("photoComment",e)}(),function(){"use strict";function e(e,t,n,o,r,i){function a(a,s,l){function c(){v=!0,b=!1,y=!1,w=!1}function u(){b=!0,v=!1,y=!1,w=!1}function d(){y=!0,b=!1,v=!1,w=!1}function p(){w=!0,y=!1,b=!1,v=!1}function h(e){x=!1,e>0&&(x=!0)}function m(e){for(var t=0;t<e.length;t++)a.data.push(e[t])}function f(e){a.params.page=e}function g(){e.feed(a.params).then(function(e){h(e.length),f(a.params.page+1),m(e),0===a.data.length?p():u(),a.loading=!1,t.$broadcast("scroll.infiniteScrollComplete"),t.$broadcast("scroll.refreshComplete")})["catch"](function(){0===a.data.length&&d(),x=!1,a.$broadcast("scroll.refreshComplete")})}a.params={},a.params.page=1,a.data=[],a.username&&(a.params.username=a.username),a.loading=!0,t.$on("photoInclude",function(e,t){t.objectId&&(t.id=t.objectId),a.data.unshift(t)}),t.$on("gallery:search",function(e,t){console.log(e,t),a.params.search=t.text,a.onReload()}),g();var v=!1,b=!1,y=!1,w=!1,x=!1;a.onLoadMore=function(){g()},a.moreDataCanBeLoaded=function(){return x},a.showLoadingView=function(){return v},a.showGalleries=function(){return b},a.showErrorView=function(){return y},a.showEmptyView=function(){return w},a.onReload=function(){a.params.page=0,a.data=[],a.loading=!0,c(),g(),a.$broadcast("scroll.refreshComplete")},a.action=function(t){function s(i){switch(i){case 0:o.share(u);break;case 1:r.modal(t);break;case 2:n.confirm({title:"Delete photo",template:"Are you sure?"}).then(function(n){n&&e.destroy(t).then(function(){console.log("Photo deleted"),a.$emit("PhotogramHome:reload")})})}return!0}var l=[{text:'<i class="icon ion-share"></i>Share'},{text:'<i class="icon ion-alert-circled"></i>Report'}];if(console.log(t),Parse.User.current().id===t.user_id){var c={text:'<i class="icon ion-trash-b"></i>Delete your photo'};l.push(c)}var u={text:t.title,image:t.img},d={buttons:l,titleText:"Photo",cancelText:"Cancel",buttonClicked:s};i.show(d)}}return{restrict:"E",scope:{username:"=",user:"=",profile:"=",onReload:"="},templateUrl:"app/directive/photoGridDirective.html",link:a}}e.$inject=["Gallery","$rootScope","$ionicPopup","Share","FeedbackModal","$ionicActionSheet"],angular.module("starter").directive("photoGrid",e)}(),function(){"use strict";function e(e){return{restrict:"A",scope:{ngModel:"="},link:function(t,n){n.bind("click",function(){var n=t.ngModel;n.progress=!0,n.liked=!n.liked,e.likeGallery({galleryId:t.ngModel.id}).then(function(e){console.log(e),n.likes=e.likes,n.progress=!1,console.log(n,e),"like"===e.action&&(t.ngModel.isLiked=!0,t.ngModel.likesTotal+=1),"unlike"===e.action&&(t.ngModel.isLiked=!1,t.ngModel.likesTotal-=1)})})}}}e.$inject=["Gallery"],angular.module("starter").directive("photoLike",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l){function c(c,u,d){function p(){w=!0,x=!1,k=!1,T=!1}function h(){x=!0,w=!1,k=!1,T=!1}function m(){k=!0,x=!1,w=!1,T=!1}function f(){T=!0,k=!1,x=!1,w=!1}function g(e){_=!1,e>0&&(_=!0)}function v(e){for(var t=0;t<e.length;t++)c.data.push(e[t])}function b(e){c.params.page=e}function y(){e.feed(c.params).then(function(e){console.log(e),g(e.length),b(c.params.page+1),v(e),0===c.data.length?f():h(),c.loading=!1,t.$broadcast("scroll.infiniteScrollComplete"),t.$broadcast("scroll.refreshComplete")})["catch"](function(e){console.log(e),0===c.data.length&&m(),_=!1,c.$broadcast("scroll.refreshComplete")})}c.params={},c.params.page=0,c.data=[],c.username&&(c.params.username=c.username),c.id&&(c.params.id=c.id),c.loading=!0,t.$on("photoInclude",function(e,t){t.objectId&&(t.id=t.objectId),c.data.unshift(t)}),c.openComment=function(e){r.go("galleryComments",{galleryId:e})},c.share=i.open,y();var w=!1,x=!1,k=!1,T=!1,_=!1;c.onLoadMore=function(){y()},c.moreDataCanBeLoaded=function(){return _},c.showLoadingView=function(){return w},c.showGalleries=function(){return x},c.showErrorView=function(){return k},c.showEmptyView=function(){return T},c.onReload=function(){c.params.page=0,c.data=[],p(),y(),c.$broadcast("scroll.refreshComplete")},t.$on("onUserLogged",c.onReload),c.action=function(t){function r(r){switch(r){case 0:s.modal(t.galleryObj);break;case 1:n.confirm({title:o.instant("deleteGalleryConfirmText"),template:o.instant("areSure")}).then(function(n){n&&e.destroy(t.galleryObj).then(function(){console.log("Photo deleted"),a.alert({title:"Photo",text:"Photo deleted"}),c.onReload()})})}return!0}var i=[{text:'<i class="icon ion-alert-circled"></i>'+o.instant("reportText")}];if(console.log(t),Parse.User.current().id===t.user.obj.id){var u={text:'<i class="icon ion-trash-b"></i>'+o.instant("deleteGallery")};i.push(u)}var d=({text:t.title,image:t.img},{buttons:i,cancelText:o.instant("cancelText"),buttonClicked:r});l.show(d)}}return{restrict:"E",scope:{username:"=",profile:"=",load:"=",openLikers:"=",onReload:"=",id:"="},templateUrl:"app/directive/photoListDirective.html",link:c}}e.$inject=["Gallery","$rootScope","$ionicPopup","$translate","$state","Share","Toast","FeedbackModal","$ionicActionSheet"],angular.module("starter").directive("photoList",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a){return{restrict:"A",scope:{user:"="},template:"",link:function(s,l){function c(){s.theme=t.theme;var e=Parse.User.current().attributes;s.form={name:e.name,email:e.email,status:e.status,photo:e.photo,username:e.username,gender:e.gender,facebook:e.facebook},s.formFields=i.profile}function u(){s.linkFacebook=p,s.logout=d,s.submitUpdateProfile=h,s.closeModal=m,s.currentUser=t.currentUser,c(),e.fromTemplateUrl("app/directive/profile-edit-modal.html",{scope:s}).then(function(e){s.modal=e,s.modal.show()}),s.$on("$destroy",function(){s.modal.remove()})}function d(){delete window.localStorage["Parse/myAppId/currentUser"],delete window.localStorage["Parse/myAppId/installationId"],n.$reset({}),a.go("user.intro",{clear:!0}),s.closeModal()}function p(){o.facebookLink().then(function(e){console.log(e)})}function h(){var e=angular.copy(s.form);r.start(),o.update(e).then(function(e){s.user=e,t.currentUser=e,r.end(),s.closeModal()})}function m(){s.modal.hide()}l.bind("click",u)}}}e.$inject=["$ionicModal","$rootScope","$localStorage","User","Loading","UserForm","$state"],angular.module("starter").directive("profileModalEdit",e)}(),function(){"use strict";function e(e,t){function n(n,o){function r(){console.log(n.user.attributes),e.fromTemplateUrl("app/directive/profile-modal.html",{scope:n}).then(function(e){function o(){n.loadingFollow=!0;var e;e=n.user.follow?!1:!0,t.follow(n.user.userObj.id).then(function(e){console.log("Follow result",e),n.user.isFollow="follow"===e?!0:!1,"follow"==e&&(n.user.followersTotal+=1),"unfollow"==e&&(n.user.followersTotal-=1),n.loadingFollow=!1})}function r(){delete n.data,n.modalProfile.hide()}n.modalProfile=e,n.loadingFollow=!0,n.changeTab=i,n.follow=o,n.closeModal=r,n.modalProfile.show(),i("list")}),n.$on("$destroy",function(){n.modalProfile.remove()})}function i(e){"list"===e?n.tab={list:!0,grid:!1}:n.tab={list:!1,grid:!0}}o.bind("click",function(){console.log(n.username),t.profile(n.username).then(function(e){console.log(e),n.user=e,r()})})}return{restrict:"A",scope:{username:"="},link:n}}e.$inject=["$ionicModal","User"],angular.module("starter").directive("profileModal",e)}(),function(){"use strict";function e(e){return{restrict:"E",scope:{getData:"&source",ngModel:"=?",search:"=?filter"},templateUrl:"app/module/photogram/directive/search/search-directive.html",link:function(t,n,o){function r(n){n.length>o.minLength?e(function(){t.getData({str:n}).then(function(e){t.ngModel=e})},1e3):t.ngModel=[]}o.minLength=o.minLength||0,t.placeholder=o.placeholder||"",t.clear=function(){console.log("Limpar campo"),t.input="",t.$apply()},o["class"]&&n.addClass(o["class"]),o.source&&t.$watch("search.value",r)}}}e.$inject=["$timeout"],angular.module("starter").directive("ionSearch",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l){return{restrict:"A",template:"",link:function(o,a){function c(){o.form=i.getLoggedUser(),o.formFields=s.profile,o.languages=n.locales,o.language=t.use()}function u(){c(),e.fromTemplateUrl("app/directive/settings-modal.html",{scope:o}).then(function(e){o.modal=e,o.modal.show()})}function d(e){l.go(e),o.closeModal()}function p(){o.modal.hide(),o.modal.remove()}a.bind("click",u),o.closeModal=p,o.link=d,o.share=r.share,o.logout=function(){l.go(n.routes.login),o.closeModal()}}}}e.$inject=["$ionicModal","$translate","AppConfig","$cordovaInAppBrowser","Share","Auth","User","UserForm","$state"],angular.module("starter").directive("settingsModal",e)}(),function(){"use strict";function e(e){function t(t,n,o,r){r.$asyncValidators.username=function(t,n){return n?e.validateUsername(n):void 0}}return{require:"ngModel",restrict:"A",link:t}}e.$inject=["User"],angular.module("starter").directive("usernameValidator",e)}(),function(){"use strict";function e(e){return function(t,n){if(!t)return t;var o=e("linky")(t,n),r="";angular.isDefined(n)&&(r=n);var i=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;o=t.replace(i,'$1<a href="#/tab/search/%23$2"'+r+">#$2</a>");var a=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return o=o.replace(a,'$1<a href="#/tab/home/$2" >@$2</a>')}}e.$inject=["$filter"],angular.module("starter").filter("hashtag",e)}(),function(){"use strict";function e(){return function(e,t){if(isNaN(t))return e;if(0>=t)return"";if(e){var n=e.split(/\s+/);n.length>t&&(e=n.slice(0,t).join(" ")+"…")}return e}}angular.module("starter").filter("words",e)}(),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.io=e()}}(function(){var e;return function t(e,n,o){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return r(n?n:t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){function o(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o=r(e),i=o.source,c=o.id,u=o.path,d=l[c]&&u in l[c].nsps,p=t.forceNew||t["force new connection"]||!1===t.multiplex||d;return p?(s("ignoring socket cache for %s",i),n=a(i,t)):(l[c]||(s("new io instance for %s",i),l[c]=a(i,t)),n=l[c]),n.socket(o.path)}var r=e("./url"),i=e("socket.io-parser"),a=e("./manager"),s=e("debug")("socket.io-client");t.exports=n=o;var l=n.managers={};n.protocol=i.protocol,n.connect=o,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":2,"./socket":4,"./url":5,debug:14,"socket.io-parser":40}],2:[function(e,t,n){function o(e,t){return this instanceof o?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new o(e,t)}var r=e("engine.io-client"),i=e("./socket"),a=e("component-emitter"),s=e("socket.io-parser"),l=e("./on"),c=e("component-bind"),u=e("debug")("socket.io-client:manager"),d=e("indexof"),p=e("backo2"),h=Object.prototype.hasOwnProperty;t.exports=o,o.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},o.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},a(o.prototype),o.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},o.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},o.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},o.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},o.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},o.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},o.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},o.prototype.open=o.prototype.connect=function(e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=l(t,"open",function(){n.onopen(),e&&e()}),i=l(t,"error",function(t){if(u("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var o=new Error("Connection error");o.data=t,e(o)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;u("connect attempt will timeout after %d",a);var s=setTimeout(function(){u("connect attempt timed out after %d",a),o.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(o),this.subs.push(i),this},o.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",c(this,"ondata"))),this.subs.push(l(e,"ping",c(this,"onping"))),this.subs.push(l(e,"pong",c(this,"onpong"))),this.subs.push(l(e,"error",c(this,"onerror"))),this.subs.push(l(e,"close",c(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",c(this,"ondecoded")))},o.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},o.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},o.prototype.ondata=function(e){this.decoder.add(e)},o.prototype.ondecoded=function(e){this.emit("packet",e)},o.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},o.prototype.socket=function(e){function t(){~d(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[e];if(!n){n=new i(this,e),this.nsps[e]=n;var o=this;n.on("connecting",t),n.on("connect",function(){n.id=o.engine.id}),this.autoConnect&&t()}return n},o.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},o.prototype.packet=function(e){u("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var o=0;o<n.length;o++)t.engine.write(n[o],e.options);t.encoding=!1,t.processPacketQueue()}))},o.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},o.prototype.cleanup=function(){u("cleanup");for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},o.prototype.close=o.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},o.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},o.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},o.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":3,"./socket":4,backo2:8,"component-bind":11,"component-emitter":12,debug:14,"engine.io-client":16,indexof:32,"socket.io-parser":40}],3:[function(e,t,n){function o(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=o},{}],4:[function(e,t,n){function o(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var r=e("socket.io-parser"),i=e("component-emitter"),a=e("to-array"),s=e("./on"),l=e("component-bind"),c=e("debug")("socket.io-client:socket"),u=e("has-binary");t.exports=n=o;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=i.prototype.emit;i(o.prototype),o.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",l(this,"onopen")),s(e,"packet",l(this,"onpacket")),s(e,"close",l(this,"onclose"))]}},o.prototype.open=o.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},o.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},o.prototype.emit=function(e){if(d.hasOwnProperty(e))return p.apply(this,arguments),this;var t=a(arguments),n=r.EVENT;u(t)&&(n=r.BINARY_EVENT);var o={type:n,data:t};return o.options={},o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags,this},o.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},o.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},o.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},o.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(e);break;case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:this.onack(e);break;case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},o.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},o.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var o=a(arguments);c("sending ack %j",o);var i=u(o)?r.BINARY_ACK:r.ACK;t.packet({type:i,id:e,data:o})}}},o.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},o.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},o.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},o.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},o.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},o.prototype.close=o.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},o.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":3,"component-bind":11,"component-emitter":12,debug:14,"has-binary":30,"socket.io-parser":40,"to-array":43}],5:[function(e,t,n){(function(n){function o(e,t){var o=e,t=t||n.location;null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),o=r(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var a=-1!==o.host.indexOf(":"),s=a?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port,o.href=o.protocol+"://"+s+(t&&t.port==o.port?"":":"+o.port),o}var r=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{debug:14,parseuri:38}],6:[function(e,t,n){function o(e,t,n){function o(e,r){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=n):0!==o.count||i||t(null,r)}var i=!1;return n=n||r,o.count=e,0===e?t():o}function r(){}t.exports=o},{}],7:[function(e,t,n){t.exports=function(e,t,n){var o=e.byteLength;if(t=t||0,n=n||o,e.slice)return e.slice(t,n);if(0>t&&(t+=o),0>n&&(n+=o),n>o&&(n=o),t>=o||t>=n||0===o)return new ArrayBuffer(0);for(var r=new Uint8Array(e),i=new Uint8Array(n-t),a=t,s=0;n>a;a++,s++)i[s]=r[a];return i.buffer}},{}],8:[function(e,t,n){function o(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,
this.attempts=0}t.exports=o,o.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},o.prototype.reset=function(){this.attempts=0},o.prototype.setMin=function(e){this.ms=e},o.prototype.setMax=function(e){this.max=e},o.prototype.setJitter=function(e){this.jitter=e}},{}],9:[function(e,t,n){/*
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),o=0;o<e.length;o++)t[e.charCodeAt(o)]=o;n.encode=function(t){var n,o=new Uint8Array(t),r=o.length,i="";for(n=0;r>n;n+=3)i+=e[o[n]>>2],i+=e[(3&o[n])<<4|o[n+1]>>4],i+=e[(15&o[n+1])<<2|o[n+2]>>6],i+=e[63&o[n+2]];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i},n.decode=function(e){var n,o,r,i,a,s=.75*e.length,l=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),d=new Uint8Array(u);for(n=0;l>n;n+=4)o=t[e.charCodeAt(n)],r=t[e.charCodeAt(n+1)],i=t[e.charCodeAt(n+2)],a=t[e.charCodeAt(n+3)],d[c++]=o<<2|r>>4,d[c++]=(15&r)<<4|i>>2,d[c++]=(3&i)<<6|63&a;return u}}()},{}],10:[function(e,t,n){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var o=n.buffer;if(n.byteLength!==o.byteLength){var r=new Uint8Array(n.byteLength);r.set(new Uint8Array(o,n.byteOffset,n.byteLength)),o=r.buffer}e[t]=o}}}function o(e,t){t=t||{};var o=new i;n(e);for(var r=0;r<e.length;r++)o.append(e[r]);return t.type?o.getBlob(t.type):o.getBlob()}function r(e,t){return n(e),new Blob(e,t||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,a=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),s=a&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),l=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return a?s?e.Blob:r:l?o:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],11:[function(e,t,n){var o=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=o.call(arguments,2);return function(){return t.apply(e,n.concat(o.call(arguments)))}}},{}],12:[function(e,t,n){function o(e){return e?r(e):void 0}function r(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}t.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o,r=0;r<n.length;r++)if(o=n[r],o===t||o.fn===t){n.splice(r,1);break}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var o=0,r=n.length;r>o;++o)n[o].apply(this,t)}return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],13:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],14:[function(e,t,n){function o(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var o="color: "+this.color;e=[e[0],o,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,o),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function s(){var e;try{e=n.storage.debug}catch(t){}return e}function l(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=i,n.formatArgs=r,n.save=a,n.load=s,n.useColors=o,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(s())},{"./debug":15}],15:[function(e,t,n){function o(){return n.colors[u++%n.colors.length]}function r(e){function t(){}function r(){var e=r,t=+new Date,i=t-(c||t);e.diff=i,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=o());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,o){if("%%"===t)return t;s++;var r=n.formatters[o];if("function"==typeof r){var i=a[s];t=r.call(e,i),a.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(e,a));var l=r.log||n.log||console.log.bind(console);l.apply(e,a)}t.enabled=!1,r.enabled=!0;var i=n.enabled(e)?r:t;return i.namespace=e,i}function i(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),o=t.length,r=0;o>r;r++)t[r]&&(e=t[r].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function s(e){var t,o;for(t=0,o=n.skips.length;o>t;t++)if(n.skips[t].test(e))return!1;for(t=0,o=n.names.length;o>t;t++)if(n.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=r,n.coerce=l,n.disable=a,n.enable=i,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var c,u=0},{ms:35}],16:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":17}],17:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":18,"engine.io-parser":27}],18:[function(e,t,n){(function(n){function o(e,t){if(!(this instanceof o))return new o(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate?t.perMessageDeflate||{}:!1,!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?!0:t.rejectUnauthorized;var r="object"==typeof n&&n;r.global===r&&t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),this.open()}function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var i=e("./transports"),a=e("component-emitter"),s=e("debug")("engine.io-client:socket"),l=e("indexof"),c=e("engine.io-parser"),u=e("parseuri"),d=e("parsejson"),p=e("parseqs");t.exports=o,o.priorWebsocketSuccess=!1,a(o.prototype),o.protocol=c.protocol,o.Socket=o,o.Transport=e("./transport"),o.transports=e("./transports"),o.parser=e("engine.io-parser"),o.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=r(this.query);t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new i[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return n},o.prototype.open=function(){var e;if(this.rememberUpgrade&&o.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},o.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},o.prototype.probe=function(e){function t(){if(p.onlyBinaryUpgrades){var t=!this.supportsBinary&&p.transport.supportsBinary;d=d||t}d||(s('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!d)if("pong"==t.type&&"probe"==t.data){if(s('probe transport "%s" pong',e),p.upgrading=!0,p.emit("upgrading",u),!u)return;o.priorWebsocketSuccess="websocket"==u.name,s('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){d||"closed"!=p.readyState&&(s("changing transport and sending upgrade packet"),c(),p.setTransport(u),u.send([{type:"upgrade"}]),p.emit("upgrade",u),u=null,p.upgrading=!1,p.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=u.name,p.emit("upgradeError",n)}}))}function n(){d||(d=!0,c(),u.close(),u=null)}function r(t){var o=new Error("probe error: "+t);o.transport=u.name,n(),s('probe transport "%s" failed because of error: %s',e,t),p.emit("upgradeError",o)}function i(){r("transport closed")}function a(){r("socket closed")}function l(e){u&&e.name!=u.name&&(s('"%s" works - aborting "%s"',e.name,u.name),n())}function c(){u.removeListener("open",t),u.removeListener("error",r),u.removeListener("close",i),p.removeListener("close",a),p.removeListener("upgrading",l)}s('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),d=!1,p=this;o.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",r),u.once("close",i),this.once("close",a),this.once("upgrading",l),u.open()},o.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",o.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},o.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},o.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},o.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},o.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},o.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},o.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},o.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},o.prototype.write=o.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},o.prototype.sendPacket=function(e,t,n,o){if("function"==typeof t&&(o=t,t=void 0),"function"==typeof n&&(o=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){n=n||{},n.compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),o&&this.once("flush",o),this.flush()}},o.prototype.close=function(){function e(){o.onClose("forced close"),s("socket closing - telling transport to close"),o.transport.close()}function t(){o.removeListener("upgrade",t),o.removeListener("upgradeError",t),e()}function n(){o.once("upgrade",t),o.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var o=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},o.prototype.onError=function(e){s("socket error %j",e),o.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},o.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},o.prototype.filterUpgrades=function(e){for(var t=[],n=0,o=e.length;o>n;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./transport":19,"./transports":20,"component-emitter":26,debug:14,"engine.io-parser":27,indexof:32,parsejson:36,parseqs:37,parseuri:38}],19:[function(e,t,n){function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}var r=e("engine.io-parser"),i=e("component-emitter");t.exports=o,i(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":26,"engine.io-parser":27}],20:[function(e,t,n){(function(t){function o(e){var n,o=!1,s=!1,l=!1!==e.jsonp;if(t.location){var c="https:"==location.protocol,u=location.port;u||(u=c?443:80),o=e.hostname!=location.hostname||u!=e.port,s=e.secure!=c}if(e.xdomain=o,e.xscheme=s,n=new r(e),"open"in n&&!e.forceJSONP)return new i(e);if(!l)throw new Error("JSONP disabled");return new a(e)}var r=e("xmlhttprequest-ssl"),i=e("./polling-xhr"),a=e("./polling-jsonp"),s=e("./websocket");n.polling=o,n.websocket=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling-jsonp":21,"./polling-xhr":22,"./websocket":24,"xmlhttprequest-ssl":25}],21:[function(e,t,n){(function(n){function o(){}function r(e){i.call(this,e),this.query=this.query||{},s||(n.___eio||(n.___eio=[]),s=n.___eio),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=o)},!1)}var i=e("./polling"),a=e("component-inherit");t.exports=r;var s,l=/\n/g,c=/\\n/g;a(r,i),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},r.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var o="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);o&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype.doWrite=function(e,t){function n(){o(),t()}function o(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';i=document.createElement(t)}catch(e){i=document.createElement("iframe"),i.name=r.iframeId,i.src="javascript:0"}i.id=r.iframeId,r.form.appendChild(i),r.iframe=i}var r=this;if(!this.form){var i,a=document.createElement("form"),s=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=u,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),o(),e=e.replace(c,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(d){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":23,"component-inherit":13}],22:[function(e,t,n){(function(n){function o(){}function r(e){if(l.call(this,e),n.location){var t="https:"==location.protocol,o=location.port;o||(o=t?443:80),this.xd=e.hostname!=n.location.hostname||o!=e.port,this.xs=e.secure!=t}else this.extraHeaders=e.extraHeaders}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function a(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var s=e("xmlhttprequest-ssl"),l=e("./polling"),c=e("component-emitter"),u=e("component-inherit"),d=e("debug")("engine.io-client:polling-xhr");t.exports=r,t.exports.Request=i,u(r,l),r.prototype.supportsBinary=!0,r.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new i(e)},r.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,o=this.request({method:"POST",data:e,isBinary:n}),r=this;o.on("success",t),o.on("error",function(e){r.onError("xhr post error",e)}),this.sendXhr=o},r.prototype.doPoll=function(){d("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(i.prototype),i.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new s(e),o=this;try{d("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}}catch(a){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){o.onLoad()},t.onerror=function(){o.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?o.onLoad():setTimeout(function(){o.onError(t.status)},0))},d("xhr data %s",this.data),t.send(this.data)}catch(a){return void setTimeout(function(){o.onError(a)},0)}n.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},i.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=o:this.xhr.onreadystatechange=o,e)try{this.xhr.abort()}catch(t){}n.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(n){for(var o=new Uint8Array(this.xhr.response),r=[],i=0,a=o.length;a>i;i++)r.push(o[i]);e=String.fromCharCode.apply(null,r)}else e=this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},i.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},n.document&&(i.requestsCount=0,i.requests={},n.attachEvent?n.attachEvent("onunload",a):n.addEventListener&&n.addEventListener("beforeunload",a,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":23,"component-emitter":26,"component-inherit":13,debug:14,"xmlhttprequest-ssl":25}],23:[function(e,t,n){function o(e){var t=e&&e.forceBase64;(!u||t)&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),i=e("parseqs"),a=e("engine.io-parser"),s=e("component-inherit"),l=e("yeast"),c=e("debug")("engine.io-client:polling");t.exports=o;var u=function(){var t=e("xmlhttprequest-ssl"),n=new t({xdomain:!1});return null!=n.responseType}();s(o,r),o.prototype.name="polling",o.prototype.doOpen=function(){this.poll()},o.prototype.pause=function(e){function t(){c("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(c("we are currently polling - waiting to pause"),o++,this.once("pollComplete",function(){c("pre-pause polling complete"),--o||t()})),this.writable||(c("we are currently writing - waiting to pause"),o++,this.once("drain",function(){c("pre-pause writing complete"),--o||t()}))}else t()},o.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},o.prototype.onData=function(e){var t=this;c("polling got data %s",e);var n=function(e,n,o){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},o.prototype.doClose=function(){function e(){c("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},o.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},o.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e);var o=-1!==this.hostname.indexOf(":");return t+"://"+(o?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":19,"component-inherit":13,debug:14,"engine.io-parser":27,parseqs:37,"xmlhttprequest-ssl":25,yeast:45}],24:[function(e,t,n){(function(n){function o(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,r.call(this,e)}var r=e("../transport"),i=e("engine.io-parser"),a=e("parseqs"),s=e("component-inherit"),l=e("yeast"),c=e("debug")("engine.io-client:websocket"),u=n.WebSocket||n.MozWebSocket,d=u;if(!d&&"undefined"==typeof window)try{d=e("ws")}catch(p){}t.exports=o,s(o,r),o.prototype.name="websocket",o.prototype.supportsBinary=!0,o.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.ws=u?new d(e):new d(e,t,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},o.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(o.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}),o.prototype.write=function(e){function t(){o.emit("flush"),setTimeout(function(){o.writable=!0,o.emit("drain")},0)}var o=this;this.writable=!1;for(var r=e.length,a=0,s=r;s>a;a++)!function(e){i.encodePacket(e,o.supportsBinary,function(i){if(!u){var a={};if(e.options&&(a.compress=e.options.compress),o.perMessageDeflate){var s="string"==typeof i?n.Buffer.byteLength(i):i.length;s<o.perMessageDeflate.threshold&&(a.compress=!1)}}try{u?o.ws.send(i):o.ws.send(i,a)}catch(l){c("websocket closed before onclose event")}--r||t()})}(e[a])},o.prototype.onClose=function(){r.prototype.onClose.call(this)},o.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},o.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e);var o=-1!==this.hostname.indexOf(":");return t+"://"+(o?"["+this.hostname+"]":this.hostname)+n+this.path+e},o.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===o.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"../transport":19,"component-inherit":13,debug:14,"engine.io-parser":27,parseqs:37,ws:void 0,yeast:45}],25:[function(e,t,n){var o=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||o))return new XMLHttpRequest}catch(i){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(i){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}},{"has-cors":31}],26:[function(e,t,n){function o(e){return e?r(e):void 0}function r(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}t.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){o.off(e,n),t.apply(this,arguments)}var o=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o,r=0;r<n.length;r++)if(o=n[r],o===t||o.fn===t){n.splice(r,1);break}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var o=0,r=n.length;r>o;++o)n[o].apply(this,t)}return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],27:[function(e,t,n){(function(t){function o(e,t){var o="b"+n.packets[e.type]+e.data.data;return t(o)}function r(e,t,o){if(!t)return n.encodeBase64Packet(e,o);var r=e.data,i=new Uint8Array(r),a=new Uint8Array(1+r.byteLength);a[0]=v[e.type];for(var s=0;s<i.length;s++)a[s+1]=i[s];return o(a.buffer)}function i(e,t,o){if(!t)return n.encodeBase64Packet(e,o);var r=new FileReader;return r.onload=function(){e.data=r.result,n.encodePacket(e,t,!0,o)},r.readAsArrayBuffer(e.data)}function a(e,t,o){if(!t)return n.encodeBase64Packet(e,o);if(g)return i(e,t,o);var r=new Uint8Array(1);r[0]=v[e.type];var a=new w([r.buffer,e.data]);return o(a)}function s(e,t,n){for(var o=new Array(e.length),r=p(e.length,n),i=function(e,n,r){t(n,function(t,n){o[e]=n,r(t,o);
})},a=0;a<e.length;a++)i(a,e[a],r)}var l=e("./keys"),c=e("has-binary"),u=e("arraybuffer.slice"),d=e("base64-arraybuffer"),p=e("after"),h=e("utf8"),m=navigator.userAgent.match(/Android/i),f=/PhantomJS/i.test(navigator.userAgent),g=m||f;n.protocol=3;var v=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=l(v),y={type:"error",data:"parser error"},w=e("blob");n.encodePacket=function(e,n,i,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof i&&(s=i,i=null);var l=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&l instanceof ArrayBuffer)return r(e,n,s);if(w&&l instanceof t.Blob)return a(e,n,s);if(l&&l.base64)return o(e,s);var c=v[e.type];return void 0!==e.data&&(c+=i?h.encode(String(e.data)):String(e.data)),s(""+c)},n.encodeBase64Packet=function(e,o){var r="b"+n.packets[e.type];if(w&&e.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];o(r+e)},i.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(s){for(var l=new Uint8Array(e.data),c=new Array(l.length),u=0;u<l.length;u++)c[u]=l[u];a=String.fromCharCode.apply(null,c)}return r+=t.btoa(a),o(r)},n.decodePacket=function(e,t,o){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(o)try{e=h.decode(e)}catch(r){return y}var i=e.charAt(0);return Number(i)==i&&b[i]?e.length>1?{type:b[i],data:e.substring(1)}:{type:b[i]}:y}var a=new Uint8Array(e),i=a[0],s=u(e,1);return w&&"blob"===t&&(s=new w([s])),{type:b[i],data:s}},n.decodeBase64Packet=function(e,n){var o=b[e.charAt(0)];if(!t.ArrayBuffer)return{type:o,data:{base64:!0,data:e.substr(1)}};var r=d.decode(e.substr(1));return"blob"===n&&w&&(r=new w([r])),{type:o,data:r}},n.encodePayload=function(e,t,o){function r(e){return e.length+":"+e}function i(e,o){n.encodePacket(e,a?t:!1,!0,function(e){o(null,r(e))})}"function"==typeof t&&(o=t,t=null);var a=c(e);return t&&a?w&&!g?n.encodePayloadAsBlob(e,o):n.encodePayloadAsArrayBuffer(e,o):e.length?void s(e,i,function(e,t){return o(t.join(""))}):o("0:")},n.decodePayload=function(e,t,o){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,o);"function"==typeof t&&(o=t,t=null);var r;if(""==e)return o(y,0,1);for(var i,a,s="",l=0,c=e.length;c>l;l++){var u=e.charAt(l);if(":"!=u)s+=u;else{if(""==s||s!=(i=Number(s)))return o(y,0,1);if(a=e.substr(l+1,i),s!=a.length)return o(y,0,1);if(a.length){if(r=n.decodePacket(a,t,!0),y.type==r.type&&y.data==r.data)return o(y,0,1);var d=o(r,l+i,c);if(!1===d)return}l+=i,s=""}}return""!=s?o(y,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function o(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void s(e,o,function(e,n){var o=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),r=new Uint8Array(o),i=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var o=new Uint8Array(e.length),a=0;a<e.length;a++)o[a]=e.charCodeAt(a);n=o.buffer}t?r[i++]=0:r[i++]=1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)r[i++]=parseInt(s[a]);r[i++]=255;for(var o=new Uint8Array(n),a=0;a<o.length;a++)r[i++]=o[a]}),t(r.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function o(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var o=new Uint8Array(e.length),r=0;r<e.length;r++)o[r]=e.charCodeAt(r);e=o.buffer,n[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,a=i.toString(),s=new Uint8Array(a.length+1),r=0;r<a.length;r++)s[r]=parseInt(a[r]);if(s[a.length]=255,w){var l=new w([n.buffer,s.buffer,e]);t(null,l)}})}s(e,o,function(e,n){return t(new w(n))})},n.decodePayloadAsBinary=function(e,t,o){"function"==typeof t&&(o=t,t=null);for(var r=e,i=[],a=!1;r.byteLength>0;){for(var s=new Uint8Array(r),l=0===s[0],c="",d=1;255!=s[d];d++){if(c.length>310){a=!0;break}c+=s[d]}if(a)return o(y,0,1);r=u(r,2+c.length),c=parseInt(c);var p=u(r,0,c);if(l)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(h){var m=new Uint8Array(p);p="";for(var d=0;d<m.length;d++)p+=String.fromCharCode(m[d])}i.push(p),r=u(r,c)}var f=i.length;i.forEach(function(e,r){o(n.decodePacket(e,t,!0),r,f)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./keys":28,after:6,"arraybuffer.slice":7,"base64-arraybuffer":9,blob:10,"has-binary":29,utf8:44}],28:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var o in e)n.call(e,o)&&t.push(o);return t}},{}],29:[function(e,t,n){(function(n){function o(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(r(e)){for(var o=0;o<e.length;o++)if(t(e[o]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0}return!1}return t(e)}var r=e("isarray");t.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:33}],30:[function(e,t,n){(function(n){function o(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(r(e)){for(var o=0;o<e.length;o++)if(t(e[o]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0}return!1}return t(e)}var r=e("isarray");t.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:33}],31:[function(e,t,n){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(o){t.exports=!1}},{}],32:[function(e,t,n){var o=[].indexOf;t.exports=function(e,t){if(o)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],33:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],34:[function(t,n,o){(function(t){(function(){function r(e,t){function n(e){if(n[e]!==g)return n[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=t.stringify,u="function"==typeof l&&y;if(u){(a=function(){return 1}).toJSON=a;try{u="0"===l(0)&&"0"===l(new o)&&'""'==l(new i)&&l(b)===g&&l(g)===g&&l()===g&&"1"===l(a)&&"[1]"==l([a])&&"[null]"==l([g])&&"null"==l(null)&&"[null,null,null]"==l([g,b,null])&&l({a:[a,!0,!1,null,"\x00\b\n\f\r	"]})==s&&"1"===l(null,a)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new c(-1))}catch(d){u=!1}}r=u}if("json-parse"==e){var p=t.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){a=p(s);var h=5==a.a.length&&1===a.a[0];if(h){try{h=!p('"	"')}catch(d){}if(h)try{h=1!==p("01")}catch(d){}if(h)try{h=1!==p("1.")}catch(d){}}}}catch(d){h=!1}r=h}}return n[e]=!!r}e||(e=l.Object()),t||(t=l.Object());var o=e.Number||l.Number,i=e.String||l.String,s=e.Object||l.Object,c=e.Date||l.Date,u=e.SyntaxError||l.SyntaxError,d=e.TypeError||l.TypeError,p=e.Math||l.Math,h=e.JSON||l.JSON;"object"==typeof h&&h&&(t.stringify=h.stringify,t.parse=h.parse);var m,f,g,v=s.prototype,b=v.toString,y=new c(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(w){}if(!n("json")){var x="[object Function]",k="[object Date]",T="[object Number]",_="[object String]",C="[object Array]",A="[object Boolean]",P=n("bug-string-char-index");if(!y)var E=p.floor,S=[0,31,59,90,120,151,181,212,243,273,304,334],M=function(e,t){return S[t]+365*(e-1970)+E((e-1969+(t=+(t>1)))/4)-E((e-1901+t)/100)+E((e-1601+t)/400)};if((m=v.hasOwnProperty)||(m=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=b?m=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,m=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,m.call(this,e)}),f=function(e,t){var n,o,r,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n;for(r in o)m.call(o,r)&&i++;return n=o=null,i?f=2==i?function(e,t){var n,o={},r=b.call(e)==x;for(n in e)r&&"prototype"==n||m.call(o,n)||!(o[n]=1)||!m.call(e,n)||t(n)}:function(e,t){var n,o,r=b.call(e)==x;for(n in e)r&&"prototype"==n||!m.call(e,n)||(o="constructor"===n)||t(n);(o||m.call(e,n="constructor"))&&t(n)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],f=function(e,t){var n,r,i=b.call(e)==x,s=!i&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||m;for(n in e)i&&"prototype"==n||!s.call(e,n)||t(n);for(r=o.length;n=o[--r];s.call(e,n)&&t(n));}),f(e,t)},!n("json-stringify")){var $={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},F="000000",R=function(e,t){return(F+(t||0)).slice(-e)},U="\\u00",j=function(e){for(var t='"',n=0,o=e.length,r=!P||o>10,i=r&&(P?e.split(""):e);o>n;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=$[a];break;default:if(32>a){t+=U+R(2,a.toString(16));break}t+=r?i[n]:e.charAt(n)}}return t+'"'},D=function(e,t,n,o,r,i,a){var s,l,c,u,p,h,v,y,w,x,P,S,$,F,U,L;try{s=t[e]}catch(O){}if("object"==typeof s&&s)if(l=b.call(s),l!=k||m.call(s,"toJSON"))"function"==typeof s.toJSON&&(l!=T&&l!=_&&l!=C||m.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&1/0>s){if(M){for(p=E(s/864e5),c=E(p/365.2425)+1970-1;M(c+1,0)<=p;c++);for(u=E((p-M(c,0))/30.42);M(c,u+1)<=p;u++);p=1+p-M(c,u),h=(s%864e5+864e5)%864e5,v=E(h/36e5)%24,y=E(h/6e4)%60,w=E(h/1e3)%60,x=h%1e3}else c=s.getUTCFullYear(),u=s.getUTCMonth(),p=s.getUTCDate(),v=s.getUTCHours(),y=s.getUTCMinutes(),w=s.getUTCSeconds(),x=s.getUTCMilliseconds();s=(0>=c||c>=1e4?(0>c?"-":"+")+R(6,0>c?-c:c):R(4,c))+"-"+R(2,u+1)+"-"+R(2,p)+"T"+R(2,v)+":"+R(2,y)+":"+R(2,w)+"."+R(3,x)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if(l=b.call(s),l==A)return""+s;if(l==T)return s>-1/0&&1/0>s?""+s:"null";if(l==_)return j(""+s);if("object"==typeof s){for(F=a.length;F--;)if(a[F]===s)throw d();if(a.push(s),P=[],U=i,i+=r,l==C){for($=0,F=s.length;F>$;$++)S=D($,s,n,o,r,i,a),P.push(S===g?"null":S);L=P.length?r?"[\n"+i+P.join(",\n"+i)+"\n"+U+"]":"["+P.join(",")+"]":"[]"}else f(o||s,function(e){var t=D(e,s,n,o,r,i,a);t!==g&&P.push(j(e)+":"+(r?" ":"")+t)}),L=P.length?r?"{\n"+i+P.join(",\n"+i)+"\n"+U+"}":"{"+P.join(",")+"}":"{}";return a.pop(),L}};t.stringify=function(e,t,n){var o,r,i,s;if(a[typeof t]&&t)if((s=b.call(t))==x)r=t;else if(s==C){i={};for(var l,c=0,u=t.length;u>c;l=t[c++],s=b.call(l),(s==_||s==T)&&(i[l]=1));}if(n)if((s=b.call(n))==T){if((n-=n%1)>0)for(o="",n>10&&(n=10);o.length<n;o+=" ");}else s==_&&(o=n.length<=10?n:n.slice(0,10));return D("",(l={},l[""]=e,l),r,i,o,"",[])}}if(!n("json-parse")){var L,O,I=i.fromCharCode,B={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},N=function(){throw L=O=null,u()},q=function(){for(var e,t,n,o,r,i=O,a=i.length;a>L;)switch(r=i.charCodeAt(L)){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=P?i.charAt(L):i[L],L++,e;case 34:for(e="@",L++;a>L;)if(r=i.charCodeAt(L),32>r)N();else if(92==r)switch(r=i.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=B[r],L++;break;case 117:for(t=++L,n=L+4;n>L;L++)r=i.charCodeAt(L),r>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||N();e+=I("0x"+i.slice(t,L));break;default:N()}else{if(34==r)break;for(r=i.charCodeAt(L),t=L;r>=32&&92!=r&&34!=r;)r=i.charCodeAt(++L);e+=i.slice(t,L)}if(34==i.charCodeAt(L))return L++,e;N();default:if(t=L,45==r&&(o=!0,r=i.charCodeAt(++L)),r>=48&&57>=r){for(48==r&&(r=i.charCodeAt(L+1),r>=48&&57>=r)&&N(),o=!1;a>L&&(r=i.charCodeAt(L),r>=48&&57>=r);L++);if(46==i.charCodeAt(L)){for(n=++L;a>n&&(r=i.charCodeAt(n),r>=48&&57>=r);n++);n==L&&N(),L=n}if(r=i.charCodeAt(L),101==r||69==r){for(r=i.charCodeAt(++L),(43==r||45==r)&&L++,n=L;a>n&&(r=i.charCodeAt(n),r>=48&&57>=r);n++);n==L&&N(),L=n}return+i.slice(t,L)}if(o&&N(),"true"==i.slice(L,L+4))return L+=4,!0;if("false"==i.slice(L,L+5))return L+=5,!1;if("null"==i.slice(L,L+4))return L+=4,null;N()}return"$"},z=function(e){var t,n;if("$"==e&&N(),"string"==typeof e){if("@"==(P?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=q(),"]"!=e;n||(n=!0))n&&(","==e?(e=q(),"]"==e&&N()):N()),","==e&&N(),t.push(z(e));return t}if("{"==e){for(t={};e=q(),"}"!=e;n||(n=!0))n&&(","==e?(e=q(),"}"==e&&N()):N()),(","==e||"string"!=typeof e||"@"!=(P?e.charAt(0):e[0])||":"!=q())&&N(),t[e.slice(1)]=z(q());return t}N()}return e},G=function(e,t,n){var o=H(e,t,n);o===g?delete e[t]:e[t]=o},H=function(e,t,n){var o,r=e[t];if("object"==typeof r&&r)if(b.call(r)==C)for(o=r.length;o--;)G(r,o,n);else f(r,function(e){G(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,o;return L=0,O=""+e,n=z(q()),"$"!=q()&&N(),L=O=null,t&&b.call(t)==x?H((o={},o[""]=n,o),"",t):n}}}return t.runInContext=r,t}var i="function"==typeof e&&e.amd,a={"function":!0,object:!0},s=a[typeof o]&&o&&!o.nodeType&&o,l=a[typeof window]&&window||this,c=s&&a[typeof n]&&n&&!n.nodeType&&"object"==typeof t&&t;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(l=c),s&&!i)r(l,s);else{var u=l.JSON,d=l.JSON3,p=!1,h=r(l,l.JSON3={noConflict:function(){return p||(p=!0,l.JSON=u,l.JSON3=d,u=d=null),h}});l.JSON={parse:h.parse,stringify:h.stringify}}i&&e(function(){return h})}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],35:[function(e,t,n){function o(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),o=(t[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return n*d;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*l;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=l?Math.round(e/l)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return a(e,u,"day")||a(e,c,"hour")||a(e,l,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,l=60*s,c=60*l,u=24*c,d=365.25*u;t.exports=function(e,t){return t=t||{},"string"==typeof e?o(e):t["long"]?i(e):r(e)}},{}],36:[function(e,t,n){(function(e){/**
 * JSON parse.
 *
 * @see Based on jQuery#parseJSON (MIT) and JSON2
 * @api private
 */
var n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(o,"@").replace(r,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],37:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),o=0,r=n.length;r>o;o++){var i=n[o].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},{}],38:[function(e,t,n){/**
 * Parses an URI
 *
 * @author Steven Levithan <stevenlevithan.com> (MIT license)
 * @api private
 */
var o=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));for(var a=o.exec(e||""),s={},l=14;l--;)s[r[l]]=a[l]||"";return-1!=n&&-1!=i&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],39:[function(e,t,n){(function(t){var o=e("isarray"),r=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(r(e)){var i={_placeholder:!0,num:n.length};return n.push(e),i}if(o(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var l in e)a[l]=t(e[l]);return a}return e}var n=[],i=e.data,a=e;return a.data=t(i),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var r=t[e.num];return r}if(o(e)){for(var i=0;i<e.length;i++)e[i]=n(e[i]);return e}if(e&&"object"==typeof e){for(var a in e)e[a]=n(e[a]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function i(e,l,c){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var u=new FileReader;u.onload=function(){c?c[l]=this.result:s=this.result,--a||n(s)},u.readAsArrayBuffer(e)}else if(o(e))for(var d=0;d<e.length;d++)i(e[d],d,e);else if(e&&"object"==typeof e&&!r(e))for(var p in e)i(e[p],p,e)}var a=0,s=e;i(s),a||n(s)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./is-buffer":41,isarray:33}],40:[function(e,t,n){function o(){}function r(e){var t="",o=!1;return t+=e.type,(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(o=!0,t+=e.nsp),null!=e.id&&(o&&(t+=",",o=!1),t+=e.id),null!=e.data&&(o&&(t+=","),t+=d.stringify(e.data)),u("encoded %j as %s",e,t),t}function i(e,t){function n(e){var n=h.deconstructPacket(e),o=r(n.packet),i=n.buffers;i.unshift(o),t(i)}h.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var t={},o=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return c();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var r="";"-"!=e.charAt(++o)&&(r+=e.charAt(o),o!=e.length););if(r!=Number(r)||"-"!=e.charAt(o))throw new Error("Illegal attachments");t.attachments=Number(r)}if("/"==e.charAt(o+1))for(t.nsp="";++o;){var i=e.charAt(o);if(","==i)break;if(t.nsp+=i,o==e.length)break}else t.nsp="/";var a=e.charAt(o+1);if(""!==a&&Number(a)==a){for(t.id="";++o;){var i=e.charAt(o);if(null==i||Number(i)!=i){--o;break}if(t.id+=e.charAt(o),o==e.length)break}t.id=Number(t.id)}if(e.charAt(++o))try{t.data=d.parse(e.substr(o))}catch(s){return c()}return u("decoded %s as %j",e,t),t}function l(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:n.ERROR,data:"parser error"}}var u=e("debug")("socket.io-parser"),d=e("json3"),p=(e("isarray"),e("component-emitter")),h=e("./binary"),m=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=o,n.Decoder=a,o.prototype.encode=function(e,t){if(u("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)i(e,t);else{var o=r(e);t([o])}},p(a.prototype),a.prototype.add=function(e){var t;if("string"==typeof e)t=s(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new l(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!m(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":39,"./is-buffer":41,"component-emitter":42,debug:14,isarray:33,json3:34}],41:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],42:[function(e,t,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],43:[function(e,t,n){function o(e,t){var n=[];t=t||0;for(var o=t||0;o<e.length;o++)n[o-t]=e[o];return n}t.exports=o},{}],44:[function(t,n,o){(function(t){!function(r){function i(e){for(var t,n,o=[],r=0,i=e.length;i>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&i>r?(n=e.charCodeAt(r++),56320==(64512&n)?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),r--)):o.push(t);return o}function a(e){for(var t,n=e.length,o=-1,r="";++o<n;)t=e[o],t>65535&&(t-=65536,r+=w(t>>>10&1023|55296),t=56320|1023&t),r+=w(t);return r}function s(e){if(e>=55296&&57343>=e)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function l(e,t){return w(e>>t&63|128)}function c(e){if(0==(4294967168&e))return w(e);var t="";return 0==(4294965248&e)?t=w(e>>6&31|192):0==(4294901760&e)?(s(e),t=w(e>>12&15|224),t+=l(e,6)):0==(4292870144&e)&&(t=w(e>>18&7|240),t+=l(e,12),t+=l(e,6)),t+=w(63&e|128)}function u(e){for(var t,n=i(e),o=n.length,r=-1,a="";++r<o;)t=n[r],a+=c(t);return a}function d(){if(y>=b)throw Error("Invalid byte index");var e=255&v[y];if(y++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function p(){var e,t,n,o,r;if(y>b)throw Error("Invalid byte index");if(y==b)return!1;if(e=255&v[y],y++,0==(128&e))return e;if(192==(224&e)){var t=d();if(r=(31&e)<<6|t,r>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=d(),n=d(),r=(15&e)<<12|t<<6|n,r>=2048)return s(r),r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=d(),n=d(),o=d(),r=(15&e)<<18|t<<12|n<<6|o,r>=65536&&1114111>=r))return r;throw Error("Invalid UTF-8 detected")}function h(e){v=i(e),b=v.length,y=0;for(var t,n=[];(t=p())!==!1;)n.push(t);return a(n)}var m="object"==typeof o&&o,f="object"==typeof n&&n&&n.exports==m&&n,g="object"==typeof t&&t;(g.global===g||g.window===g)&&(r=g);var v,b,y,w=String.fromCharCode,x={version:"2.0.0",encode:u,decode:h};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return x});else if(m&&!m.nodeType)if(f)f.exports=x;else{var k={},T=k.hasOwnProperty;for(var _ in x)T.call(x,_)&&(m[_]=x[_])}else r.utf8=x}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],45:[function(e,t,n){"use strict";function o(e){var t="";do t=s[e%l]+t,e=Math.floor(e/l);while(e>0);return t}function r(e){var t=0;for(d=0;d<e.length;d++)t=t*l+c[e.charAt(d)];return t}function i(){var e=o(+new Date);return e!==a?(u=0,a=e):e+"."+o(u++)}for(var a,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),l=64,c={},u=0,d=0;l>d;d++)c[s[d]]=d;i.encode=o,i.decode=r,t.exports=i},{}]},{},[1])(1)}),angular.module("ngLocale",[],["$provide",function(e){var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"],ERANAMES:["Antes de Cristo","Ano do Senhor"],ERAS:["a.C.","d.C."],FIRSTDAYOFWEEK:6,MONTH:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],SHORTDAY:["dom","seg","ter","qua","qui","sex","sáb"],SHORTMONTH:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],STANDALONEMONTH:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"d 'de' MMM 'de' y HH:mm:ss",mediumDate:"d 'de' MMM 'de' y",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"R$",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"pt-br",pluralCat:function(e,n){return e>=0&&2>=e&&2!=e?t.ONE:t.OTHER}})}]),function(){"use strict";var e=window.moment.defineLocale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"segs",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"});return e}(),function(){"use strict";function e(e){var t=[{key:"title",type:"input",templateOptions:{type:"text",placeholder:e.instant("PHOTOGRAM.FORM.TITLE"),icon:"icon-envelope",required:!0,iconPlaceholder:!0,focus:!0}},{key:"geo",type:"toggle",templateOptions:{label:e.instant("PHOTOGRAM.FORM.GEOLOCATION"),toggleClass:"positive"}}],n=[{key:"text",type:"input",templateOptions:{placeholder:e.instant("addComment"),type:"text",required:!0,focus:!0}}],o=[{key:"facebook",type:"toggle",templateOptions:{label:"Facebook",toggleClass:"positive"}},{key:"twitter",type:"toggle",templateOptions:{label:"Twitter",toggleClass:"positive"}},{key:"whatsapp",type:"toggle",templateOptions:{label:"Whatsapp",toggleClass:"positive"}},{key:"SMS",type:"toggle",templateOptions:{label:"SMS",toggleClass:"positive"}},{key:"email",type:"toggle",templateOptions:{label:"Email",toggleClass:"positive"}}];return{form:t,formComment:n,formShare:o}}e.$inject=["$translate"],angular.module("starter").factory("GalleryForm",e)}(),function(){"use strict";function e(e){function t(){return[{type:"input",key:"username",templateOptions:{type:"text",placeholder:e.instant("username"),icon:"icon-user",required:!0,iconPlaceholder:!0}},{type:"input",key:"password",templateOptions:{type:"password",placeholder:e.instant("password"),icon:"icon-lock",required:!0,iconPlaceholder:!0}}]}function n(){return[{type:"input",key:"username",templateOptions:{type:"text",placeholder:e.instant("username"),icon:"icon-user",required:!0,iconPlaceholder:!0}},{type:"input",key:"email",templateOptions:{type:"email",placeholder:e.instant("email"),icon:"icon-envelope",required:!0,iconPlaceholder:!0}},{type:"input",key:"password",templateOptions:{type:"password",placeholder:e.instant("password"),icon:"icon-lock",required:!0,iconPlaceholder:!0}}]}function o(){return[{key:"username",type:"input",templateOptions:{type:"text",placeholder:e.instant("username"),icon:"icon-ios-at",required:!0,iconPlaceholder:!0}},{key:"name",type:"input",templateOptions:{type:"text",placeholder:e.instant("name"),icon:"icon-user",required:!0,iconPlaceholder:!0}},{key:"status",type:"input",templateOptions:{type:"text",placeholder:e.instant("status"),icon:"ion-quote",required:!0,iconPlaceholder:!0}},{type:"select",key:"gender",templateOptions:{label:e.instant("gender"),options:[{label:e.instant("man"),id:"male"},{label:e.instant("woman"),id:"female"}],valueProp:"id",labelProp:"label"}}]}return{login:t(),register:n(),profile:o()}}e.$inject=["$translate"],angular.module("app.main").factory("UserForm",e)}(),function(){"use strict";function e(e,t,n,o){function r(){var e=o.defer();return i({title:"Choose an option",cancelText:"Cancel",options:[{text:"Photo Library"},{text:"Photo"}]}).then(function(e){var n;return 1===e&&(n="photoLibrary"),2===e&&(n="camera"),t.getPicture({sourceType:n})}).then(e.resolve)["catch"](e.reject),e.promise}function i(t){var r=o.defer();if(window.cordova){var i={title:t.title,buttonLabels:_.map(t.options,function(e){return e.text}),addCancelButtonWithLabel:t.cancelText,androidEnableCancelButton:!0,androidTheme:window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT};n.show(i).then(function(e){3!==e&&r.resolve(e),r.reject("cancel")})}else var a=e.show({buttons:t.options,titleText:t.title,cancelText:t.cancelText,cancel:function(){a()},buttonClicked:function(e){a(),3!==e&&r.resolve(e),r.reject("cancel")}});return r.promise}return{show:i,image:r}}e.$inject=["$ionicActionSheet","Camera","$cordovaActionSheet","$q"],angular.module("starter").factory("ActionSheet",e)}(),function(){"use strict";angular.module("starter").factory("Auth",["$q",function(e){function t(){return Parse.User.current()}function n(e){l=e}function o(){var t=e.defer();return null===l?(t.reject("Session token invalid"),t.promise):(Parse.User.current()?t.resolve(Parse.User.current()):Parse.User.become(l).then(t.resolve,t.reject),t.promise)}function r(t){var n=e.defer();return Parse.User.requestPasswordReset(t,{success:n.resolve,error:n.reject}),n.promise}function i(t){var n=e.defer();return Parse.User.requestPasswordReset(t,{success:n.resolve,error:n.reject}),n.promise}function a(t){var n=e.defer();return Parse.User.logIn(t.username,t.password,{success:n.resolve,error:n.reject}),n.promise}function s(){var t=e.defer();return Parse.User.logOut().then(t.resolve,t.reject),t.promise}var l=null;return{getLoggedUser:t,setSessionToken:n,ensureLoggedIn:o,recoverPassword:r,resetPassword:i,logIn:a,logOut:s}}])}(),function(){"use strict";function e(e,t){function n(n){var o=t.defer();if(window.cordova){var r=n.sourceType||Camera.PictureSourceType.CAMERA;"photoLibrary"===n.sourceType&&(r=Camera.PictureSourceType.PHOTOLIBRARY),"camera"===n.sourceType&&(r=Camera.PictureSourceType.CAMERA);var i={quality:70,targetWidth:800,targetHeight:800,saveToPhotoAlbum:!1,correctOrientation:!0,sourceType:r,destinationType:Camera.DestinationType.DATA_URL,encodingType:Camera.EncodingType.JPEG};e.getPicture(i).then(o.resolve,o.reject)}else{console.log("Input File");var a=angular.element('<input type="file" accept="image/x-png, image/gif, image/jpeg" max-size="2048" />');a[0].click(),a.on("change",function(e){var t=e.currentTarget.files[0],n=new FileReader;n.onload=function(e){o.resolve(e.target.result)},n.readAsDataURL(t)})}return o.promise}function o(e,n,o){var r=t.defer();return window.imageResizer.resizeImage(r.resolve,r.reject,e,n||1,o||1,{imageDataType:ImageResizer.IMAGE_DATA_TYPE_URL,resizeType:ImageResizer.RESIZE_TYPE_FACTOR,format:"jpg"}),r.promise}function r(e,n,o){var r=t.defer();return window.imageResizer.resizeImage(r.resolve,r.reject,e,n||640,o||640,{imageDataType:ImageResizer.IMAGE_DATA_TYPE_URL,resizeType:ImageResizer.RESIZE_TYPE_MIN_PIXEL,pixelDensity:!0,storeImage:!1,photoAlbum:!1,format:"jpg"}),r.promise}return{getPicture:n,resizeImage:r,toBase64Image:o}}e.$inject=["$cordovaCamera","$q"],angular.module("starter").service("Camera",e)}(),function(){"use strict";function e(e,t){function n(){ionic.Platform.isWebView()?(e.onLine=t.isOnline(),e.$apply(),e.$on("$cordovaNetwork:online",function(t,n){console.log("went online"),e.onLine=!0,e.$apply()}),e.$on("$cordovaNetwork:offline",function(t,n){console.log("went offline"),e.onLine=!1,e.$apply()})):(e.onLine=navigator.onLine,e.$apply(),window.addEventListener("online",function(t){console.log("went online"),e.onLine=!0,e.$apply()},!1),window.addEventListener("offline",function(t){console.log("went offline"),e.onLine=!1,e.$apply()},!1))}return{watch:n}}e.$inject=["$rootScope","$cordovaNetwork"],angular.module("starter").factory("ConnectMonitor",e)}(),function(){"use strict";function e(e,t){function n(e){l||(l=void 0!==window.sqlitePlugin?window.sqlitePlugin.openDatabase({name:e.name,location:2,createFromLocation:1}):window.openDatabase(e.name,"1.0","Database",2e5));var n=[];return angular.forEach(e.tables,function(e){var t=[];angular.forEach(e.columns,function(e,n){t.push(n+" "+e)}),i("DROP TABLE "+e.name);var o="CREATE TABLE IF NOT EXISTS "+e.name+" ("+t.join(",")+")";n.push(i(o)),c.push(e)}),t.all(n)}function o(e,n){var o=t.defer();return i("SELECT MAX("+n+") as lastSync FROM "+e).then(function(e){var t=e.rows.item[0].lastSync;o.resolve(t)}),o.promise}function r(e){var n=t.defer(),o=[],r=[];angular.forEach(e.columns,function(e,t){o.push(t),"number"==typeof e?r.push(e):r.push("'"+e+"'")});var a="INSERT OR REPLACE INTO "+e.table+" ("+o.join(",")+") VALUES ("+r.join(",")+")";return i(a).then(n.resolve)["catch"](n.reject),n.promise}function i(e,n){n="undefined"!=typeof n?n:[];var o=t.defer();return l.transaction(function(t){t.executeSql(e,n,function(e,t){var n={rows:[]};if(t&&t.rows)for(var r=0;r<t.rows.length;r++)n.rows.push(angular.copy(t.rows[r]));o.resolve(n)},function(e,t){console.log(e,t),o.reject(t)})}),o.promise}function a(e,n,o,r,a,s,l){var c=t.defer();void 0===l&&(l=-1);var u=n,d=s?s:10,p="SELECT SUM(id) as TOTAL FROM "+e+"  "+o,h="SELECT "+u+" FROM "+e+"  "+o+" "+r+" "+a+" LIMIT "+d+" OFFSET "+l;return console.log("query",p),console.log("query",h),i(p).then(function(e){var t={page:l,total:e.rows[0].TOTAL,rows:[]};i(h).then(function(e){console.log(e),t.rows=e.rows,c.resolve(t)})}),c.promise}function s(e){for(var t=[],n=0;n<e.rows.length;n++)t.push(e.rows.item(n));return t}var l,c=[];return{init:n,insert:r,query:i,getLastSync:o,paginate:a,fetchAll:s}}e.$inject=["$interval","$q"],angular.module("starter").factory("DAO",e)}(),function(){"use strict";function e(){function e(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])}function t(e){return new Date(e).toLocaleDateString()}function n(){var e=new Date,t="00",n=e.getFullYear(),o=(t+(e.getMonth()+1)).slice(-t.length),r=(t+e.getDate()).slice(-t.length);return n+"-"+o+"-"+r}function o(e){var t=new Date(e),n="00",o=t.getFullYear(),r=(n+(t.getMonth()+1)).slice(-n.length),i=(n+t.getDate()).slice(-n.length);return o+"-"+r+"-"+i}function r(e){var t=["Janeiro","Feveiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return t[e.getMonth()]}function i(e){var t=e.getFullYear(),n=e.getMonth();return new Date(t,n,1)}function a(e){var t=e.getFullYear(),n=e.getMonth()+1;return new Date(t,n,0)}return{parseData:e,parseString:t,getDate:n,formatDate:o,getMonthName:r,getFirstDay:i,getLastDay:a}}angular.module("starter").factory("DataUtil",e)}(),function(){"use strict";function e(e,t,n){function o(o,r){var i=n.defer();return window.cordova?e.alert(o,r).then(i.resolve):t.alert({title:r,template:o}),i.promise}function r(o,r,i){var a=n.defer();return window.cordova?e.confirm(o,r,i).then(function(e){2===e&&a.resolve(!0),a.reject(!0)}):t.confirm({title:r,template:o}).then(function(e){e?a.resolve(!0):a.reject(!0)}),a.promise}return{alert:o,confirm:r}}e.$inject=["$cordovaDialogs","$ionicPopup","$q"],angular.module("starter").service("Dialog",e)}(),function(){"use strict";function e(e,t,n){function o(){return m.getLoginStatus()}function r(){return console.log("facebook login",m),m.login(["public_profile","email"])}function i(){var t=e.defer();return n.logout().then(t.resolve,t.reject),t.promise}function a(t){var n=e.defer();return m.api("/me/feed",{method:"feed",name:t.title,link:"https://photogram.codevibe.io/",picture:t.image.url(),caption:t.title,description:t.title},{scope:"publish_actions"},n.resolve),n.promise}function s(t){var n=e.defer();return m.api("/me/feed","post",{message:t.title,picture:t.image.url()},n.resolve),n.promise}function l(){var t=e.defer();return m.api("/me/friends",t.resolve),t.promise}function c(){var t=e.defer();return window.cordova?n.api("me?fields=name,first_name,last_name,gender,email",["public_profile"]).then(t.resolve,t.reject):m.api("/me",{fields:"name, first_name, last_name, gender, email"}).then(function(e){!e||e.error?t.reject(e.error):t.resolve(e)}),t.promise}function u(){var t=e.defer();return window.cordova?m.showDialog({method:"apprequests",message:"Venha para o nosso clube!"}).then(t.resolve,t.reject):m.ui({method:"apprequests",message:"Venha para o nosso clube!"}).then(t.resolve,t.reject),t.promise}function d(){var t=e.defer();return m.api("me/friends").then(t.resolve,t.reject),t.promise}function p(t){var n=e.defer();return m.api(t).then(n.resolve,n.reject),n.promise}function h(t){var n=e.defer();return t?m.login(["email"]).then(function(e){console.log("facebook login",e),console.log(t,e,data),Parse.FacebookUtils.link(t,{id:String(e.authResponse.userID),access_token:e.authResponse.accessToken,expiration_date:((new Date).getTime()+1e3).toString()},{success:function(t){console.log("User",t),t.set("facebook",e.authResponse.userID),t.set("facebookimg","https://graph.facebook.com/"+e.authResponse.userID+"/picture?width=250&height=250"),t.set("facebook_complete",Boolean(!0)),t.save().then(n.resolve)}})},n.resolve):n.reject("not logged"),n.promise}var m=window.cordova?n:t;return{logIn:r,logOut:i,me:c,invite:u,friends:d,api:p,getCurrentUser:o,getFriends:l,postImage:a,postImage1:s,link:h}}e.$inject=["$q","$facebook","$cordovaFacebook"],angular.module("starter").service("Facebook",e)}(),function(){"use strict";angular.module("starter").factory("GalleryActivity",["$q","ParseCloud","moment",function(e,t,n){var o=Parse.Object.extend("GalleryActivity",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},feed:function(e){return t.run("feedActivity",e)},all:function(t){var o=e.defer(),r=new Parse.Query(this);if(""!=t.filter&&r.contains("words",t.filter),t.order&&(t.order.indexOf("-")<-1?r.ascending(t.order):r.descending(t.order.replace("-"))),t.date&&null!==t.date){var i=n(t.date).startOf("day"),a=n(t.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return t.status&&null!==t.status&&("pending"===t.status?r.doesNotExist("isApproved"):"rejected"===t.status?r.equalTo("isApproved",!1):"approved"===t.status&&r.equalTo("isApproved",!0)),r.include("gallery"),r.include("user"),r.limit(t.limit),r.skip(t.page*t.limit-t.limit),r.find({success:o.resolve,error:o.reject}),o.promise},count:function(t){var o=e.defer(),r=new Parse.Query(this);if(""!=t.filter&&r.contains("words",t.filter),t.date&&null!==t.date){var i=n(t.date).startOf("day"),a=n(t.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return t.status&&null!==t.status&&("pending"===t.status?r.doesNotExist("isApproved"):"rejected"===t.status?r.equalTo("isApproved",!1):"approved"===t.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){o.resolve(e)},error:function(e){o.reject(e)}}),o.promise}});return Object.defineProperty(o.prototype,"fromUser",{get:function(){return this.get("fromUser")},set:function(e){this.set("fromUser",e)}}),Object.defineProperty(o.prototype,"toUser",{get:function(){return this.get("toUser")},set:function(e){this.set("toUser",e)}}),Object.defineProperty(o.prototype,"gallery",{get:function(){return this.get("gallery")},set:function(e){this.set("gallery",e)}}),Object.defineProperty(o.prototype,"title",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(o.prototype,"hashtags",{get:function(){return this.get("hashtags")},set:function(e){this.set("hashtags",e)}}),Object.defineProperty(o.prototype,"words",{get:function(){return this.get("words")},set:function(e){this.set("words",e)}}),Object.defineProperty(o.prototype,"address",{get:function(){return this.get("address")},set:function(e){this.set("address",e)}}),Object.defineProperty(o.prototype,"image",{get:function(){return this.get("image")},set:function(e){this.set("image",e)}}),Object.defineProperty(o.prototype,"imageThumb",{get:function(){return this.get("imageThumb")},set:function(e){this.set("imageThumb",e)}}),Object.defineProperty(o.prototype,"location",{get:function(){return this.get("location")},set:function(e){this.set("location",new Parse.GeoPoint({latitude:e.latitude,longitude:e.longitude}))}}),Object.defineProperty(o.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(o.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),o}])}(),function(){"use strict";function e(e,t,n){var o=Parse.Object.extend("GalleryAlbum",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var n=e.defer(),r=new o;return r.save(t,{success:n.resolve,error:n.reject}),n.promise},update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},photos:function(e){return t.run("photoAlbum",e)},list:function(e){return t.run("listAlbum",e)},get:function(t){var n=e.defer();return new Parse.Query(this).get(t,{success:n.resolve,error:n.reject}),n.promise}});return Object.defineProperty(o.prototype,"title",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(o.prototype,"qtyPhotos",{get:function(){return this.get("qtyPhotos")},set:function(e){this.set("qtyPhotos",e)}}),Object.defineProperty(o.prototype,"image",{get:function(){return this.get("image")},set:function(e){this.set("image",e)}}),Object.defineProperty(o.prototype,"imageThumb",{get:function(){return this.get("imageThumb")},set:function(e){this.set("imageThumb",e)}}),Object.defineProperty(o.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(o.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),o}e.$inject=["$q","ParseCloud","moment"],angular.module("starter").factory("GalleryAlbum",e)}(),function(){"use strict";angular.module("starter").factory("GalleryComment",["$q","moment",function(e,t){var n=Parse.Object.extend("GalleryComment",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{get:function(t){var n=e.defer();return new Parse.Query(this).get(t,{success:n.resolve,error:n.reject}),n.promise},create:function(t){var o=e.defer();return(new n).save(t,{success:o.resolve,error:o.reject}),o.promise},update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},all:function(t){var n=e.defer(),o=new Parse.Query(this);return o.include("user"),o.ascending("createdAt"),o.equalTo("gallery",t.gallery),o.limit(t.limit),o.skip(t.page*t.limit-t.limit),o.find({success:n.resolve,error:n.reject}),n.promise},count:function(n){var o=e.defer(),r=new Parse.Query(this);if(""!=n.filter&&r.contains("words",n.filter),n.date&&null!==n.date){var i=t(n.date).startOf("day"),a=t(n.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return n.status&&null!==n.status&&("pending"===n.status?r.doesNotExist("isApproved"):"rejected"===n.status?r.equalTo("isApproved",!1):"approved"===n.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){o.resolve(e)},error:function(e){o.reject(e)}}),o.promise}});return Object.defineProperty(n.prototype,"user",{get:function(){return this.get("user")},set:function(e){this.set("user",e)}}),Object.defineProperty(n.prototype,"text",{get:function(){return this.get("text")},set:function(e){this.set("text",e)}}),n}])}(),function(){"use strict";function e(e,t,n){var o=Parse.Object.extend("Gallery",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var n=e.defer(),r=new o;return t.address.geo&&(t.location=new Parse.GeoPoint(t.address.geo)),r.save(t,{success:n.resolve,error:n.reject}),n.promise},update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},comments:function(e){return t.run("commentGallery",e)},getAlbum:function(e){return t.run("getAlbum",e)},feed:function(e){return t.run("feedGallery",e)},search:function(e){return t.run("searchGallery",e)},follow:function(e){return console.log("Follow",e),t.run("followUser",e)},likeGallery:function(e){return console.log(e),t.run("likeGallery",{galleryId:e.galleryId})},get:function(t){var n=e.defer();return new Parse.Query(this).get(t,{success:n.resolve,error:n.reject}),n.promise},all:function(t){var n=e.defer(),o=new Parse.Query(this);return t.order&&(t.order.indexOf("-")<-1?o.ascending(t.order):o.descending(t.order.replace("-"))),t.status&&null!==t.status&&("pending"===t.status?o.doesNotExist("isApproved"):"rejected"===t.status?o.equalTo("isApproved",!1):"approved"===t.status&&o.equalTo("isApproved",!0)),o.limit(t.limit),o.skip(t.page*t.limit-t.limit),o.find({success:n.resolve,error:n.reject}),n.promise},count:function(t){var o=e.defer(),r=new Parse.Query(this);if(""!=t.filter&&r.contains("words",t.filter),t.date&&null!==t.date){var i=n(t.date).startOf("day"),a=n(t.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return t.status&&null!==t.status&&("pending"===t.status?r.doesNotExist("isApproved"):"rejected"===t.status?r.equalTo("isApproved",!1):"approved"===t.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){o.resolve(e)},error:function(e){o.reject(e)}}),o.promise}});return Object.defineProperty(o.prototype,"likesTotal",{get:function(){return this.get("likesTotal")},set:function(e){this.set("likesTotal",e)}}),Object.defineProperty(o.prototype,"user",{get:function(){return this.get("user")},set:function(e){this.set("user",e)}}),Object.defineProperty(o.prototype,"title",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(o.prototype,"hashtags",{get:function(){return this.get("hashtags")},set:function(e){this.set("hashtags",e)}}),Object.defineProperty(o.prototype,"words",{get:function(){return this.get("words")},set:function(e){this.set("words",e)}}),Object.defineProperty(o.prototype,"location",{get:function(){return this.get("location")},set:function(e){this.set("location",new Parse.GeoPoint({latitude:e.latitude,longitude:e.longitude}))}}),Object.defineProperty(o.prototype,"address",{get:function(){return this.get("address")},set:function(e){this.set("address",e)}}),Object.defineProperty(o.prototype,"image",{get:function(){return this.get("image")},set:function(e){this.set("image",e)}}),Object.defineProperty(o.prototype,"icon",{get:function(){return this.get("icon");
},set:function(e){this.set("icon",e)}}),Object.defineProperty(o.prototype,"imageThumb",{get:function(){return this.get("imageThumb")},set:function(e){this.set("imageThumb",e)}}),Object.defineProperty(o.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(o.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),o}e.$inject=["$q","ParseCloud","moment"],angular.module("starter").factory("Gallery",e)}(),function(){"use strict";angular.module("starter").factory("GalleryFeedback",["$q","moment",function(e,t){var n=Parse.Object.extend("GalleryFeedback",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var o=e.defer(),r=new n;return t.user=Parse.User.current(),r.save(t,{success:o.resolve,error:o.reject}),o.promise},update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},all:function(n){var o=e.defer(),r=new Parse.Query(this);if(""!=n.filter&&r.contains("words",n.filter),n.date&&null!==n.date){var i=t(n.date).startOf("day"),a=t(n.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return n.status&&null!==n.status&&("pending"===n.status?r.doesNotExist("isApproved"):"rejected"===n.status?r.equalTo("isApproved",!1):"approved"===n.status&&r.equalTo("isApproved",!0)),r.include("gallery"),r.include("User"),r.descending("createdAt"),r.limit(n.limit),r.skip(n.page*n.limit-n.limit),r.find({success:o.resolve,error:o.reject}),o.promise},count:function(n){var o=e.defer(),r=new Parse.Query(this);if(""!=n.filter&&r.contains("words",n.filter),n.date&&null!==n.date){var i=t(n.date).startOf("day"),a=t(n.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return n.order&&(n.order.indexOf("-")<-1?r.ascending(n.order):r.descending(n.order.replace("-"))),n.status&&null!==n.status&&("pending"===n.status?r.doesNotExist("isApproved"):"rejected"===n.status?r.equalTo("isApproved",!1):"approved"===n.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){o.resolve(e)},error:function(e){o.reject(e)}}),o.promise}});return Object.defineProperty(n.prototype,"user",{get:function(){return this.get("user")},set:function(e){this.set("user",e)}}),Object.defineProperty(n.prototype,"subject",{get:function(){return this.get("subject")},set:function(e){this.set("subject",e)}}),Object.defineProperty(n.prototype,"title",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(n.prototype,"hashtags",{get:function(){return this.get("hashtags")},set:function(e){this.set("hashtags",e)}}),Object.defineProperty(n.prototype,"words",{get:function(){return this.get("words")},set:function(e){this.set("words",e)}}),Object.defineProperty(n.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(n.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),n}])}(),function(){"use strict";angular.module("starter").factory("GallerySetting",["$q","moment",function(e,t){var n=Parse.Object.extend("GallerySetting",{getStatus:function(){return t().toDate()>=this.expiresAt?"Expired":this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var o=e.defer(),r=new n;return r.save(t,{success:o.resolve,error:o.reject}),o.promise},update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},all:function(t){var n=e.defer(),o=new Parse.Query(this);return""!=t.filter&&o.contains("canonical",t.filter),o.descending("createdAt"),o.limit(t.limit),o.skip(t.page*t.limit-t.limit),o.find({success:n.resolve,error:n.reject}),n.promise},count:function(t){var n=e.defer(),o=new Parse.Query(this);return o.count({success:n.resolve,error:n.reject}),n.promise}});return Object.defineProperty(n.prototype,"key",{get:function(){return this.get("key")},set:function(e){this.set("key",e)}}),Object.defineProperty(n.prototype,"value",{get:function(){return this.get("value")},set:function(e){this.set("value",e)}}),n}])}(),function(){"use strict";function e(e,t){function n(n){var o=t.defer();return e.ready(function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){console.log(e),o.resolve(e)},function(e){o.reject(e)},{timeout:3e4,enableHighAccuracy:!0,maximumAge:75e3})}),o.promise}return{getCurrentPosition:n}}e.$inject=["$ionicPlatform","$q"],angular.module("starter").factory("Geolocation",e)}(),function(){"use strict";function e(e){function t(t){null!==t&&""!==t&&window.cordova?(e.debugMode(),e.startTrackerWithId(t),a=!0):console.warn("["+i+"]: Invalid Tracker ID or not using emulator")}function n(t,n,o){a&&e.trackEvent(t,n,o)}function o(t){a&&e.trackView(t)}function r(t,n){a&&e.trackException(t,n)}var i="AnalyticsService",a=!1;return{init:t,trackView:o,trackEvent:n,trackException:r}}e.$inject=["$cordovaGoogleAnalytics"],angular.module("starter").factory("GoogleAnalytics",e)}(),function(){"use strict";function e(e){function t(t){return e.run("install",t)}function n(t){return e.run("status",t)}return{start:t,status:n}}e.$inject=["ParseCloud"],angular.module("starter").factory("Install",e)}(),function(){"use strict";function e(e){function t(t,n){var o=e.defer();return Parse.Cloud.run(t,n,{success:o.resolve,error:o.reject}),o.promise}return{run:t}}e.$inject=["$q"],angular.module("starter").factory("ParseCloud",e)}(),function(){"use strict";angular.module("starter").factory("ParseFile",["$q",function(e){function t(t,n){var o=e.defer(),r="file.jpg";return n&&r.replace(".jpg",n),new Parse.File(r,t).save({success:o.resolve,error:o.reject}),o.promise}return{upload:t}}])}(),function(){"use strict";function e(e,t){function n(e){var n=Parse.Object.extend("UserDevice");return(new n).set("device",t.getDevice()).set("cordova",t.getCordova()).set("model",t.getModel()).set("platform",t.getPlatform()).set("uuid",t.getUUID()).set("version",t.getVersion()).set("user",Parse.User.current()).set("installationId",e).save()}function o(){window.ParsePushPlugin&&(ParsePushPlugin.getInstallationId(function(e){console.log("device installationId: "+e),n(e)},function(e){console.log("error",e)}),ParsePushPlugin.getSubscriptions(function(e){console.log(e)},function(e){console.log("error",e)}),i("receivePN",function(e){console.log("yo i got this push notification:"+JSON.stringify(e))}),i("openPN",function(e){console.log("a notification was opened:"+JSON.stringify(e))}))}function r(){var e=Parse.User.current();if(window.ParsePushPlugin&&e){var t="user_"+e.attributes.username;a(t)}}function i(e,t){window.ParsePushPlugin&&ParsePushPlugin.on(e,t)}function a(t){var n=e.defer();return window.ParsePushPlugin&&ParsePushPlugin.subscribe(t,function(e){console.log("Subcribe in channel",t),n.resolve(e)},function(e){console.log("Not Subcribe in channel",t),n.reject(e)}),n.promise}function s(t){var n=e.defer();return window.ParsePushPlugin&&ParsePushPlugin.unsubscribe(t,function(e){console.log("Unsubcribe in channel",t),n.resolve(e)},function(e){console.log("Not Unsubcribe in channel",t),n.reject(e)}),n.promise}return{init:o,on:i,subscribe:a,unsubscribe:s,subscribeUser:r}}e.$inject=["$q","$cordovaDevice"],angular.module("starter").factory("ParsePush",e)}(),function(){"use strict";function e(e,t,n,o){function r(e,n){var r=t.defer();return e&&(i.image=e),n&&(i.title=n),o.plugins.socialsharing.shareWithOptions(i,r.success,r.reject),r.promise}var i={title:n.instant("Join me from ")+e.app.name+"!",subject:n.instant("I'm at ")+e.app.name+"!. Install the application and follow me! "+e.app.url,image:e.app.image,link:e.app.url};return{open:r}}e.$inject=["AppConfig","$q","$translate","$window"],angular.module("starter").factory("Share",e)}(),function(){"use strict";function e(e,t){function n(n){window.cordova?e.show(n.text,"short","bottom"):t.alert({title:n.title,template:n.text,okType:"button button-clear button-assertive"})}function o(e,n){return t.confirm({title:e,template:n})}return{alert:n,confirm:o}}e.$inject=["$cordovaToast","$ionicPopup"],angular.module("starter").factory("Toast",e)}(),function(){"use strict";function e(e,t,n,o){var r=Parse.User.extend({},{profile:function(e){return n.run("profile",{username:e})},list:function(e){return n.run("listUsers",e)},getFollowers:function(e){return n.run("getFollowers",{username:e})},getLikers:function(e){return n.run("getLikers",{galleryId:e})},getFollowing:function(e){return n.run("getFollowing",{username:e})},signIn:function(n){var i=e.defer();return Parse.User.logIn(n.username,n.password,{success:function(e){var n;n=window.cordova?{device:t.getDevice(),cordova:t.getCordova(),model:t.getModel(),platform:t.getPlatform(),uuid:t.getUUID(),version:t.getVersion()}:{device:{device:window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\/([0-9]+)\./)[0]},cordova:"",model:window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\/([0-9]+)\./)[0],platform:window.navigator.platform,uuid:"",version:window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\/([0-9]+)\./)[1]},console.log(e),console.log(n),r.update(n).then(function(){i.resolve(e)})["catch"](i.reject),o.init().then(function(){o.subscribeUser()}),console.log("updateUser",n)},error:i.reject}),i.promise},signUp:function(e){var t=(new Parse.User).set({name:e.name}).set({username:e.username}).set({email:e.email}).set({password:e.password}).set({roleName:"User"}),n=new Parse.ACL;return n.setPublicReadAccess(!1),n.setPublicWriteAccess(!1),t.setACL(n),t.save(null)},signInViaFacebook:function(t){var n={id:t.authResponse.userID,access_token:t.authResponse.accessToken,expiration_date:((new Date).getTime()+1e3).toString()};console.log(t,n);var o=e.defer();return Parse.FacebookUtils.logIn(n,{success:function(e){console.log("User",e),o.resolve(e)},error:o.reject}),o.promise},logOut:function(){return Parse.User.logOut()},findByEmail:function(e){return n.run("findUserByEmail",{email:e})},updateWithFacebookData:function(t){var o=e.defer();return n.run("saveFacebookPicture",{}).then(function(){var e=Parse.User.current();""===e.attributes.username&&e.set({username:t.email}),e.set({email:t.email}),e.set({name:t.name}),e.setACL(new Parse.ACL(e)),e.save(null,{success:function(){e.fetch().then(function(e){o.resolve(e)},function(e){o.reject(e)})}})})["catch"](o.reject),o.promise},getPublicData:function(t){console.log(t);var n=e.defer();return new Parse.Query("UserData").equalTo("user",t).first().then(function(e){e?n.resolve(e):n.reject(Parse.Promise.error({code:1,message:"User Data not found"}))},n.reject),n.promise},recoverPassword:function(e){return Parse.User.requestPasswordReset(e)},destroy:function(){return Parse.User.current().destroy()},setPhoto:function(t){var n=e.defer(),o=Parse.User.current();return o.set({photo:t}),o.save(null,{success:n.resolve,error:n.reject}),n.promise},follow:function(e){return n.run("followUser",{userId:e})},all:function(e){return n.run("getUsers",e)},validateUsername:function(e){return n.run("validateUsername",{username:e})},validateEmail:function(e){return n.run("validateEmail",{email:e})},update:function(e){var t=Parse.User.current();return angular.forEach(e,function(e,n){t.set(n,e)}),t.save()},"delete":function(e){return n.run("destroyUser",e)},fetch:function(){var t=e.defer();return Parse.User.current()?Parse.User.current().fetch().then(t.resolve,t.reject):t.reject(),t.promise}});return Object.defineProperty(r.prototype,"name",{get:function(){return this.get("name")},set:function(e){this.set("name",e)}}),Object.defineProperty(r.prototype,"username",{get:function(){return this.get("username")},set:function(e){this.set("username",e)}}),Object.defineProperty(r.prototype,"status",{get:function(){return this.get("status")},set:function(e){this.set("status",e)}}),Object.defineProperty(r.prototype,"gender",{get:function(){return this.get("gender")},set:function(e){this.set("gender",e)}}),Object.defineProperty(r.prototype,"email",{get:function(){return this.get("email")},set:function(e){this.set("email",e)}}),Object.defineProperty(r.prototype,"photo",{get:function(){return this.get("photo")},set:function(e){this.set("photo",e)}}),Object.defineProperty(r.prototype,"photoThumb",{get:function(){return this.get("photoThumb")},set:function(e){this.set("photoThumb",e)}}),Object.defineProperty(r.prototype,"roleName",{get:function(){return this.get("roleName")},set:function(e){this.set("roleName",e)}}),r}e.$inject=["$q","$cordovaDevice","ParseCloud","ParsePush"],angular.module("starter").factory("User",e)}(),function(){"use strict";function e(e,n,o,r,i){function a(a,s,l){function c(){window.cordova&&window.StatusBar.styleDefault(),a.closeModal=function(){a.modal.hide(),window.cordova&&window.StatusBar.styleLightContent()},a.searchValue="",a.selectLanguage=function(e){console.log(e),n.use(e.code),moment.locale(e.code),a.language=e,r.start(),a.closeModal(),o(function(){r.end()},1e3)},i.fromTemplateUrl(t+"/modal-language.html",{scope:a,focusFirstInput:!0}).then(function(e){a.modal=e,a.modal.show()})}a.languages=e.locales,a.language=a.languages.filter(function(e){return e.code===n.use()})[0],console.log(a.language),s.bind("click",c)}return{restrict:"E",link:a,templateUrl:t+"/ion-language.html"}}e.$inject=["AppConfig","$translate","$timeout","Loading","$ionicModal"];var t="app/component/ion-language";angular.module("ion-language").directive("ionLanguage",e)}(),function(){"use strict";function e(e,t,n,o,r,i){function a(){var e=i.defer();if(x.location)r(function(){e.resolve(x.location)},1e3);else{var t={timeout:1e4,enableHighAccuracy:!1};n.getCurrentPosition(t).then(function(t){x.location={latitude:t.coords.latitude,longitude:t.coords.longitude},e.resolve(x.location)},function(t){o.alert({title:"Geo Error",template:t.message}),e.reject(t)})}return e.promise}function s(){var e=i.defer();return a().then(function(t){console.log(t),c(t.latitude,t.longitude).success(function(n){n.geolocation=t,console.log(n),e.resolve(n)}).error(l)}),e.promise}function l(e){console.log(e)}function c(t,n){return e.get("http://maps.google.com/maps/api/geocode/json?latlng="+t+","+n+"&sensor=true").success(function(e){e.address_normal=e.results[0].formatted_address,e.address=u(e.results[0].address_components),e.src=d(t,n,18,500,300)})}function u(e){return e?{numero:e[0].short_name,rua:e[1].long_name,bairro:e[2].short_name,cidade:e[3].short_name,estado:e[5].long_name,uf:e[5].short_name,pais:e[6].long_name,paisCode:e[6].short_name,cep:e[7].short_name}:!1}function d(e,t,n,o,r){return"http://maps.google.com/maps/api/staticmap?center="+e+","+t+"&zoom="+n+"&size="+o+"x"+r+"&maptype=roadmap&sensor=true"}function p(e){var t=i.defer();console.log("parseAddress",e),e||t.reject("not place");for(var n={resume:"",geo:{latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()}},o=f(n.geo.latitude,n.geo.longitude,16,900,200),r=0;r<e.address_components.length;r++){var a=e.address_components[r].types[0];if(y[a]){var s=e.address_components[r][y[a]];n[w[a]]=s}}return n.name=e.name,n.street=n.street+", "+n.number,n.image=o,n.resume=n.street+" - "+n.city+", "+n.state+", "+n.country,t.resolve(n),t.promise}function h(e){var t=i.defer();return v.getQueryPredictions({input:e},function(e){t.resolve(e)}),t.promise}function m(e){var t=i.defer();return b.getDetails({placeId:e},function(e){t.resolve(e)}),t.promise}function f(e,t,n,o,r){console.log("src latitude",e,t,n,o,r);var i="http://maps.googleapis.com/maps/api/staticmap?center="+e+","+t+"&zoom="+n+"&scale=1&size="+o+"x"+r+"&maptype=roadmap&format=jpg&visual_refresh=true&markers=size:small%7Ccolor:0xff2600%7Clabel:0%7C"+e+","+t+"&sensor=true";return console.log(i),i}var g={types:["geocode"]},v=new t.google.maps.places.AutocompleteService,b=new t.google.maps.places.PlacesService(t.document.createElement("input"),g),y={street_number:"long_name",route:"long_name",locality:"long_name",sublocality:"long_name",neighborhood:"long_name",political:"long_name",administrative_area_level_1:"long_name",country:"long_name",postal_code:"long_name"},w={street_number:"number",route:"street",locality:"city",administrative_area_level_1:"state",country:"country",postal_code:"zipcode",neighborhood:"district"},x={coords:{},src:""};return{src:f,getDetails:m,searchAddress:h,parseAddress:p,findMe:s}}e.$inject=["$http","$window","$cordovaGeolocation","$ionicPopup","$timeout","$q"],angular.module("ion-location").factory("GeoService",e)}(),function(){"use strict";function e(e,t){function n(n,o){o.bind("click",function(){function o(){n.search={},n.search.suggestions=[],n.search.query=""}function r(e){t.getDetails(e).then(function(e){t.parseAddress(e).then(function(e){console.log(e),n.location=e,n.closeModalLocation()})})}o(),n.findMe=function(){n.loading=!0,t.findMe().then(function(e){t.searchAddress(e.address_normal).then(function(e){console.log(e),n.search.suggestions=e,n.loading=!1})})},n.findMe(),n.choosePlace=function(e){r(e.place_id)},n.modalLocation=e.fromTemplate('<ion-modal-view><ion-header-bar class="bar bar-light item-input-inset"><ion-spinner ng-if="loading"></ion-spinner><button class="button button-clear button-icon ion-navigate" ng-click="findMe()" ng-hide="loading"></button><label class="item-input-wrapper"><input type="search" ng-model="search.query" ng-model-options="{ debounce: 1500 }" placeholder="{{ \'searchText\' | translate }}"></label><button class="button button-clear" ng-click="closeModalLocation()" translate="cancel"></button></ion-header-bar><ion-content padding="false"><ion-list><div class="center padding" ng-if="loading1"><ion-spinner ></ion-spinner></div><ion-item ng-repeat="suggestion in search.suggestions" ng-click="choosePlace(suggestion)" ng-bind="suggestion.description"></ion-item><ion-item class="item-divider"><img src="https://developers.google.com/maps/documentation/places/images/powered-by-google-on-white.png"alt=""/></ion-item></ion-list></ion-content></ion-modal-view>',{scope:n,focusFirstInput:!0}),n.modalLocation.show(),n.closeModalLocation=function(){n.modalLocation.hide(),n.modalLocation.remove()},n.$watch("search.query",function(e){e&&(n.loading1=!0,n.search.suggestions=[],t.searchAddress(e).then(function(e){console.log(e),n.search.suggestions=e,n.loading1=!1}))})})}return{restrict:"A",scope:{location:"=ngModel"},link:n}}e.$inject=["$ionicModal","GeoService"],angular.module("ion-location").directive("ionLocation",e)}(),function(){function e(e,t,n,o,r,i,a,s){function l(e){function t(){var e=angular.copy(l.form);a.start(),n.create(e).then(function(e){a.end(),s()})}function s(){l.modal.hide(),l.modal.remove(),delete l.modal}var l=o.$new();l.formFields=r.form,l.submitFeedback=t,l.closeModal=s,l.form={photogramId:e.id,subject:"complaint"},i.fromTemplateUrl("app/main/feedback/feedback-modal.html",{scope:l,focusFirstInput:!0}).then(function(e){l.modal=e,l.modal.show()})}t.path;return{modal:l}}e.$inject=["$q","AppConfig","GalleryFeedback","$rootScope","GalleryFeedbackForm","$ionicModal","Loading","Toast"],angular.module("app.main").factory("FeedbackModal",e)}(),function(){"use strict";function e(e){var t=[{key:"title",type:"input",templateOptions:{type:"text",placeholder:e.instant("feedbackTitle"),required:!0}},{key:"subject",type:"select",templateOptions:{label:e.instant("subject"),options:[{label:e.instant("complaint"),id:"complaint"},{label:e.instant("bug"),id:"bug"},{label:e.instant("suggestion"),id:"suggestion"}],valueProp:"id",labelProp:"label",icon:"icon-list",iconPlaceholder:!0}},{key:"status",type:"textarea",templateOptions:{type:"text",placeholder:e.instant("message"),icon:"ion-quote",required:!0,iconPlaceholder:!0}}];return{form:t}}e.$inject=["$translate"],angular.module("app.main").factory("GalleryFeedbackForm",e)}(),function(){"use strict";function e(e,t,n,o,r){t.path;return{restrict:"A",scope:{photogram:"@"},template:"",link:function(t,i,a){function s(){t.form={photogramId:t.photogram},t.formFields=o.form}function l(){s(),e.fromTemplateUrl("app/main/feedback/feedback-modal.html",{scope:t,focusFirstInput:!0}).then(function(e){t.modal=e,t.modal.show()})}function c(e){r.go(e),t.closeModal()}function u(){var e=angular.copy(t.form);n.submit(e).then(function(e){console.log(e),s(),t.closeModal()})}function d(){t.modal.hide(),t.modal.remove()}t.link=c,t.submitFeedback=u,t.closeModal=d,i.bind("click",l)}}}e.$inject=["$ionicModal","AppConfig","PhotogramFeedback","PhotogramFeedbackForm","$state"],angular.module("app.main").directive("feedback",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c,u,d,p){function h(){e.nocomments=!1,u.get(t.galleryId).then(function(t){e.form={gallery:t,text:""}})}function m(){e.loading=!0,u.comments({galleryId:t.galleryId}).then(function(t){e.comments=[],t.map(function(t){console.log(t),t.canEdit=t.user.obj.id===e.currentUser.id?!0:!1,e.comments.push(t)}),e.loading=!1,o.scrollBottom()})}e.currentUser=Parse.User.current(),e.loading=!0,e.formFields=p.formComment,e.backButton=function(){r.goBack()},m(),h(),e.myIndexValue="5",e.searchPeople=function(t){var o=[];return s.getFollowing().then(function(r){return _.each(r,function(e){e.imageUrl=e.photo?e.photo._url:"img/user.png",e.bio=e.status,e.name?e.name.toUpperCase().indexOf(t.toUpperCase())>=0&&o.push(e):(e.name="Not name",o.push(e))}),e.people=o,console.log(o),n.when(o)})},e.getPeopleTextRaw=function(e){return"@"+e.username},e.deleteComment=function(t,n){console.log(t),l.confirm("Delete comment","You are sure?").then(function(o){o&&d.get(t.id).then(function(t){d.destroy(t).then(function(t){e.comments.splice(n,1)})})})},e.editComment=function(t,n){console.log(t),e.formEdit={id:t.id,text:t.text},a.show({template:'<input type="text" ng-model="formEdit.text">',title:"Edit comment",scope:e,buttons:[{text:"Cancel"},{text:"<b>OK</b>",type:"button-positive",onTap:function(t){return console.log(e.formEdit),e.formEdit.text?e.formEdit:void t.preventDefault()}}]}).then(function(o){console.log(o),o&&d.get(t.id).then(function(t){t.text=o.text,e.comments[n].text=o.text,t.save()})})},e.submitComment=function(t,n){if(t.$valid){var o=angular.copy(n);e.loading=!0,d.create(o).then(function(t){m(),e.form.text=""})}}}e.$inject=["$scope","$stateParams","$q","$ionicScrollDelegate","$ionicHistory","Loading","$ionicPopup","User","Dialog","$timeout","Gallery","GalleryComment","GalleryForm"],angular.module("starter").controller("GalleryComment",e)}(),function(){"use strict";function e(e,t,n,o,r,i){var a=t.currentUser;a?(console.log(a),a.name?i.go(r.routes.home,{clear:!0}):i.go("user.avatar",{clear:!0})):i.go(r.routes.login,{clear:!0}),e.$on("$ionicView.loaded",function(){n.ready(function(){navigator&&navigator.splashscreen&&o.hide()})})}e.$inject=["$scope","$rootScope","$ionicPlatform","$cordovaSplashscreen","AppConfig","$state"],angular.module("app.main").controller("LoadingCtrl",e)}(),function(){"use strict";function e(e,t,n){function o(){r.data={total:!1,galleries:[]},r.page=0,r.empty=!1,r.more=!1}var r=this;r.loading=!0,e.profile(n.username).then(function(e){console.log(e),console.log(Parse.User.current()),r.isMe=Parse.User.current().id===e.id?!0:!1,r.user=e,r.loading=!1}),r.openFollowers=function(){switch(console.log(t,n),t.current.name){case"tab.homeProfile":t.go("tab.homeProfileFollowers",{username:n.username});break;case"tab.activityProfile":t.go("tab.activityProfileFollowers",{username:n.username})}},r.openFollowing=function(){switch(console.log(t,n),t.current.name){case"tab.homeProfile":t.go("tab.homeProfileFollowing",{username:n.username});break;case"tab.activityProfile":t.go("tab.activityProfileFollowing",{username:n.username})}},r.follow=function(){r.loadingFollow=!0,e.follow(r.user.obj.id).then(function(e){console.log("Follow result",e),r.user.isFollow="follow"===e?!0:!1,"follow"==e&&(r.user.followersTotal+=1),"unfollow"==e&&(r.user.followersTotal-=1),r.loadingFollow=!1})},o(),r.tab={grid:!0,list:!1,album:!1,map:!1},r.changeTab=function(e){Object.keys(r.tab).map(function(t){t==e?r.tab[t]=!0:r.tab[t]=!1})}}e.$inject=["User","$state","$stateParams"],angular.module("app.main").controller("ProfileCtrl",e)}(),function(){"use strict";function e(e){var t=this;t.id=e.id}e.$inject=["$stateParams"],angular.module("app.main").controller("ProfilePhotoCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a){var s=this;t.storage=e,s.postPhoto=function(){var e={jrCrop:!0,filterImage:!0};n.open(e).then(n.modalPost).then(function(e){a.start(),i.upload({base64:e.image}).then(function(n){e.image=n,r.create(e).then(function(e){t.$emit("photoInclude",e),a.end()})})})}}e.$inject=["$localStorage","$scope","PhotoService","$ionicPlatform","Gallery","ParseFile","Loading"],angular.module("app.main").controller("MainTabCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r){function i(){s.data={total:!1,galleries:[]},s.page=0,s.empty=!1,s.more=!1,a()}function a(){s.loadingFollowers=!0,s.loadingFollowing=!0,s.loadingPhotos=!0}var s=this;s.user=r.currentUser,s.photo=r.currentUser.attributes.photo,s.loading=!0,e.buttonTheme="button-"+t.theme,n.getPublicData(Parse.User.current()).then(function(e){console.log("Profile",e.attributes),s.user=e,s.loading=!1}),s.openFollowers=function(){o.go("tab.accountFollowers",{username:r.currentUser.attributes.username})},s.openFollowing=function(){o.go("tab.accountFollowing",{username:r.currentUser.attributes.username})},i(),s.tab={grid:!0,list:!1,album:!1,map:!1},s.changeTab=function(e){Object.keys(s.tab).map(function(t){t==e?s.tab[t]=!0:s.tab[t]=!1})}}e.$inject=["$scope","AppConfig","User","$state","$rootScope"],angular.module("app.main").controller("AccountCtrl",e)}(),function(){"use strict";function e(e,t,n){function o(){p=!0,h=!1,m=!1,f=!1}function r(){h=!0,p=!1,m=!1,f=!1}function i(){m=!0,h=!1,p=!1,f=!1}function a(){f=!0,m=!1,h=!1,p=!1}function s(e){g=!1,e>0&&(g=!0)}function l(e){for(var t=0;t<e.length;t++)d.data.push(e[t])}function c(e){d.params.page=e}function u(){n.feed(d.params).then(function(t){s(t.length),c(d.params.page+1),l(t),0===d.data.length?a():r(),e.$broadcast("scroll.infiniteScrollComplete"),e.$broadcast("scroll.refreshComplete"),e.loading=!1})["catch"](function(){0===d.data.length&&i(),g=!1,e.$broadcast("scroll.refreshComplete")})}var d=this;d.params={},d.params.page=1,d.params.limit=30,d.data=[],d.openProfile=function(e){t.go("tab.activityProfile",{username:e})},e.loading=!0,u();var p=!1,h=!1,m=!1,f=!1,g=!1;d.onLoadMore=function(){u()},d.moreDataCanBeLoaded=function(){return g},d.showLoadingView=function(){return p},d.showGalleries=function(){return h},d.showErrorView=function(){return m},d.showEmptyView=function(){return f},d.onReload=function(){d.params.page=0,d.data=[],o(),u(),e.$broadcast("scroll.refreshComplete")}}e.$inject=["$scope","$state","GalleryActivity"],angular.module("app.main").controller("ActivityCtrl",e)}(),function(){"use strict";function e(e){var t=this;t.openProfile=function(t){e.go("tab.homeProfile",{username:t})},t.openLikers=function(t){e.go("tab.homeGalleryLikers",{galleryId:t})}}e.$inject=["$state"],angular.module("app.main").controller("HomeCtrl",e)}(),function(){"use strict";function e(e,t,n,o){function r(){p=!0,h=!1,m=!1,f=!1}function i(){h=!0,p=!1,m=!1,f=!1}function a(){m=!0,h=!1,p=!1,f=!1}function s(){f=!0,m=!1,h=!1,p=!1}function l(e){g=!1,e>0&&(g=!0)}function c(t){for(var n=0;n<t.length;n++)e.data.push(t[n])}function u(t){e.params.page=t}function d(){n.search(e.params).then(function(t){l(t.length),u(e.params.page+1),c(t),0===e.data.length?s():i(),e.loading=!1,o.$broadcast("scroll.infiniteScrollComplete"),o.$broadcast("scroll.refreshComplete")})["catch"](function(){0===e.data.length&&a(),g=!1,e.$broadcast("scroll.refreshComplete")})}e.onSearch=function(){var n=t("lowercase")(e.params.search);e.params.search=n,e.onReload()},e.params={},e.params.page=1,e.params.text="",e.data=[],e.username&&(e.params.username=e.username),e.loading=!0,d();var p=!1,h=!1,m=!1,f=!1,g=!1;e.onLoadMore=function(){d()},e.moreDataCanBeLoaded=function(){return g},e.showLoadingView=function(){return p},e.showGalleries=function(){return h},e.showErrorView=function(){return m},e.showEmptyView=function(){return f},e.onReload=function(){e.params.page=0,e.data=[],e.loading=!0,r(),d(),e.$broadcast("scroll.refreshComplete")}}e.$inject=["$scope","$filter","Gallery","$rootScope"],angular.module("app.main").controller("SearchCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a){function s(){e.galleries=[],h(),m();var t={latitude:-18.8800397,longitude:-47.05878999999999},n={center:c(t),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};e.map=new google.maps.Map(document.getElementById("map_canvas"),n)}function l(){i.getCurrentPosition().then(function(t){console.log(t),e.params.location={latitude:t.coords.latitude,longitude:t.coords.longitude};var n={position:c(e.params.location),title:"I am here",id:0};u(n),e.map.setCenter(c(e.params.location)),p()},function(t){e.params.location=null;var n;n=1===t.code||3===t.code?"errorGpsDisabledText":"errorLocationMissingText",a.alert(n)})}function c(e){return e?new google.maps.LatLng(e.latitude,e.longitude):void 0}function u(n){var o={id:n.id,map:e.map,position:n.position,title:n.title,animation:google.maps.Animation.DROP};if(n.icon){var r=40;o.icon={url:n.icon,size:new google.maps.Size(r,r),scaledSize:new google.maps.Size(r,r),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(r/4,r/4)}}var i=new google.maps.Marker(o);google.maps.event.addListener(i,"click",function(){n.username&&t.go("tab.mapProfile",{username:n.username})}),f.push(i),new MarkerClusterer(e.map,f,{imagePath:"../img/m"}),g.extend(n.position),e.map.fitBounds(g)}function d(t){e.galleries=t,t.map(function(t){if(t.location){var n={map:e.map,id:t.id,position:c(t.location),title:t.title,image:t.image.url(),icon:t.imageThumb.url(),username:t.attributes.user.attributes.username};u(n)}})}function p(){e.loading=!0,r.all(e.params).then(function(t){t.length>0?d(t):a.alert("galleriesNotFoundText"),e.loading=!1},function(){o.show("errorText")})}function h(){e.galleries=[]}function m(){f.map(function(e){e.setMap(null)}),f=[]}var f=[],g=new google.maps.LatLngBounds;e.maxRating=5,e.storage=n,e.galleries=[],e.params={location:null,distance:100,page:1,limit:10},e.loading=!0,e.map,e.$on("$ionicView.enter",function(t,n){e.map||(s(),l())}),e.onSearchHere=function(){e.params.location.latitude=e.map.getCenter().lat(),e.params.location.longitude=e.map.getCenter().lng(),h(),m(),p()},e.onGalleryClicked=function(e){console.log(e)}}e.$inject=["$scope","$state","$localStorage","Toast","Gallery","Geolocation","Dialog"],angular.module("app.main").controller("SearchMapCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a){function s(){var e=t.getLoggedUser();c.form={name:e.name,email:e.email,status:e.status,gender:e.gender,img:e.img,username:e.username},c.formFields=a.profile,console.log(c.form),console.log(c.formFields)}function l(){if(console.log(c.rForm),c.rForm.$valid){var t=angular.copy(c.form);console.log(t),e.update(t).then(function(e){console.log(e),o.currentUser=Parse.User.current(),r.go(n.routes.home,{clear:!0})})}else i.alert({title:"Invalid form",text:"Fill out the fields in red"})}var c=this;c.submitAvatar=l,s(),c.photo=Parse.User.current().attributes.photo}e.$inject=["User","Auth","AppConfig","$rootScope","$state","Toast","UserForm"],angular.module("app.main").controller("UserAvatarCtrl",e)}(),function(){"use strict";function e(e,t,n,o){return{restrict:"A",scope:{ngModel:"="},link:function(r,i){function a(){var i,a=r.ngModel,s=t.currentUser;return console.log(a),console.log(s),a.id!=s.id?!1:void e.image().then(function(e){return i=e,e}).then(function(e){r.loading=!0,n.upload({
base64:e}).then(function(e){o.setPhoto(e).then(function(e){t.currentUser.photo=e.attributes.photo,r.loading=!1})})})}i.bind("click",a)}}}e.$inject=["ActionSheet","$rootScope","ParseFile","User"],angular.module("app.main").directive("userAvatar",e)}(),function(){"use strict";function e(e,t,n,o){var r=this;r.loading=!0,e.getFollowers(n.username).then(function(e){console.log(e),r.users=e,r.loading=!1}),t.clearSearch=function(){t.searchValue=""},r.openProfile=function(e){console.log("user",e),o.go("tab.homeProfile",{username:e.username})},r.follow=function(t){r.loadingFollow=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),r.loadingFollow=!1})}}e.$inject=["User","$scope","$stateParams","$state"],angular.module("starter").controller("UserFollowerCtrl",e)}(),function(){"use strict";function e(e,t,n,o){var r=this;r.loading=!0,e.getFollowing(n.username).then(function(e){console.log(e),r.users=e,r.loading=!1}),t.clearSearch=function(){t.searchValue=""},r.openProfile=function(e){console.log("user",e),o.go("tab.homeProfile",{username:e.username})},r.follow=function(t){r.loadingFollow=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),r.loadingFollow=!1})}}e.$inject=["User","$scope","$stateParams","$state"],angular.module("starter").controller("UserFollowingCtrl",e)}(),function(){"use strict";function e(e,t,n){var o=this,r=window.ionic.Platform.platform();o.slideIndex=0,o.slideChanged=function(e){o.slideIndex=e},o.next=function(){$ionicSlideBoxDelegate.next()},o.previous=function(){$ionicSlideBoxDelegate.previous()},r?o.device="android"===r?"android":"iphone":o.device="android",o.slides=[{text:"STEP1",img:"img/intro1.png"},{text:"STEP2",img:"img/intro2.png"},{text:"STEP3",img:"img/intro3.png"},{text:"STEP4",img:"img/intro4.png"},{text:"STEP5",img:"img/intro5.png"},{text:"STEP6",img:"img/intro6.png"},{text:"STEP7",img:"img/intro7.png"}],window.localStorage.walkthrough=!0,e.$on("$ionicView.loaded",function(){t.ready(function(){navigator&&navigator.splashscreen&&(n.hide(),window.StatusBar.styleLightContent())})})}e.$inject=["$scope","$ionicPlatform","$cordovaSplashscreen"],angular.module("starter").controller("UserIntroCtrl",e)}(),function(){"use strict";function e(e,t,n,o){var r=this;r.loading=!0,e.getLikers(n.galleryId).then(function(e){console.log(e),r.users=e,r.loading=!1}),t.clearSearch=function(){t.searchValue=""},r.openProfile=function(e){console.log("user",e),o.go("tab.homeProfile",{username:e.username})},r.follow=function(t){r.loadingFollow=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),r.loadingFollow=!1})}}e.$inject=["User","$scope","$stateParams","$state"],angular.module("starter").controller("UserLikersCtrl",e)}(),function(){"use strict";function e(e,t,n){function o(){p=!0,h=!1,m=!1,f=!1}function r(){h=!0,p=!1,m=!1,f=!1}function i(){m=!0,h=!1,p=!1,f=!1}function a(){f=!0,m=!1,h=!1,p=!1}function s(e){g=!1,e>0&&(g=!0)}function l(e){for(var t=0;t<e.length;t++)d.data.push(e[t])}function c(e){d.params.page=e}function u(){e.list(d.params).then(function(e){s(e.length),c(d.params.page+1),l(e),0===d.data.length?a():r(),t.$broadcast("scroll.infiniteScrollComplete"),t.$broadcast("scroll.refreshComplete"),d.loading=!1})["catch"](function(){0===d.data.length&&i(),g=!1,t.$broadcast("scroll.refreshComplete")})}var d=this;d.params={},d.params.page=1,d.params.limit=30,d.data=[],d.loading=!0,u();var p=!1,h=!1,m=!1,f=!1,g=!1;d.onLoadMore=function(){u()},d.moreDataCanBeLoaded=function(){return g},d.showLoadingView=function(){return p},d.showGalleries=function(){return h},d.showErrorView=function(){return m},d.showEmptyView=function(){return f},d.onReload=function(){d.params.page=0,d.data=[],o(),u(),t.$broadcast("scroll.refreshComplete")},d.openProfile=function(e){console.log("user",e),n.go("tab.homeProfile",{username:e.username})},d.follow=function(t){t.loading=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),t.loading=!1})}}e.$inject=["User","$scope","$state"],angular.module("starter").controller("UserListCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a){function s(){t.tempUser?l.form={email:t.tempUser.attributes.email,username:t.tempUser.attributes.username,password:""}:r.go("user.intro",{clear:!0})}var l=this;l.formFields=a.register,s(),l.submit=function(a,s){console.log(a),console.table(s),""!==l.form.password?(console.log(s),e.logIn(s).then(function(a){console.log(a),t.currentUser=a,e.getLoggedUser()&&o.link(Parse.User.current()).then(function(e){console.log(e),r.go(n.routes.home,{clear:!0})})["catch"](function(e){console.log(e),i.alert({title:"Ops",text:e.message})})})["catch"](function(e){i.alert({title:"Ops",text:e.message})})):i.alert({title:"Invalid form",text:"Please enter your email"})}}e.$inject=["Auth","$rootScope","AppConfig","Facebook","$state","Toast","UserForm"],angular.module("app.main").controller("UserMergeCtrl",e)}(),function(){"use strict";function e(e,t,n,o){return{restrict:"A",scope:{login:"@",register:"@"},link:function(r,i){function a(){r.form={recovery:""},r.erro="",r.text={button:"",input:"Email"},t.show({scope:r,template:'<div class="popup-recovery"><form name="form.recovery" form-manager><label class="item item-input"><i class="icon ion-email placeholder-icon"></i><input type="email" ng-model="email" id="email" name="email" placeholder="{{ text.input }}" required ng-maxlength="80"></label><span class="error-msg">{{erro}}</span></form></div>',title:"A new password will be sent to your e-mail address",buttons:[{text:"Cancel",type:"button-calm"},{text:"Send",type:"button-positive",onTap:function(e){return r.form.recovery.$valid?r.form.recovery.email.$viewValue:(e.preventDefault(),void(r.erro="Invalid Email"))}}]}).then(function(t){if(!angular.isUndefined(t)){var r=t;console.log(t),n.start(),e.forgot(r).then(function(e){console.log(e),o.alert({login:"Forgot your password",text:"Access your accout mail"}),n.end()})["catch"](function(e){o.alert({login:"Ops",text:e}),n.end()})}})}i.bind("click",a)}}}e.$inject=["User","$ionicPopup","Loading","Toast"],angular.module("app.main").directive("recoveryPass",e)}(),function(){"use strict";function e(e,t){function n(){e.forgot(o.form).then(function(e){console.log(e)})["catch"](function(e){t.alert("Ops",e)})}var o=this;o.form={},o.submitForgot=n}e.$inject=["User","Toast"],angular.module("app.main").controller("UserRecoveryPassCtrl",e)}(),function(){"use strict";function e(e,t,n){function o(t,o){function r(){document.getElementById("browseBtn").click()}function i(){n.show({buttons:[{text:'<i class="icon ion-camera"></i>Photo Camera'},{text:'<i class="icon ion-images"></i> Photo Album'}],titleText:"Change Image",cancelText:"Cancel",cancel:function(){},buttonClicked:function(e){return 0===e&&console.log("Photo Camera"),1===e&&document.getElementById("browseBtn").click(),!0}})}function a(e){var n=e.target.files[0],o=new FileReader;o.readAsDataURL(n),o.onload=function(e){var n=e.target.result;t.crop(n)},angular.element(document.getElementById("browseBtn")).val("")}function s(n){console.log(t.option),e.crop({url:n,width:t.option?t.option.width:200,height:t.option?t.option.height:200,cancelText:"Cancel",chooseText:"Save"}).then(function(e){var n=e.toDataURL();console.log(n),t.ngModel=n})}t.action=i,o.bind("click",r),t.crop=s,angular.element(document.getElementById("browseBtn")).on("change",a)}return{restrict:"A",scope:{ngModel:"=",option:"=",cropSave:"&"},template:'<div><input type="file" id="browseBtn" image="image" accept="image/*" style="display: none"/></div>',link:o}}e.$inject=["$jrCrop","$translate","$ionicActionSheet"],angular.module("ion-photo").directive("ionCrop",e)}(),function(){"use strict";function e(){function e(e,t,n){console.log(e.filter),e.$watch("filter.slider.value",function(t){t&&(e.filter.slider.value=parseInt(t),e.filter.setSlider(e.filter.slider))})}return{restrict:"E",link:e,scope:{filter:"="},template:'<div class="item range range-positive"> <input type="range" name="filter.slider.name" min="-100" max="100" step="1" ng-model="filter.slider.value"  > </div>'}}angular.module("ion-photo").directive("sliderFilter",e)}(),function(){"use strict";function e(e,t){function n(n){var o=e.defer();return s=document.getElementById(n),c=d.texture(s),d.draw(c).update(),s.src=d.toDataURL("image/jpeg",.8),t(function(){g.map(function(e){var t=document.getElementById(e.id);if(t){var n=new Image;n.src=s.src,p.draw(p.texture(n)).brightnessContrast(e.filter.brightness,e.filter.contrast).hueSaturation(e.filter.hue,e.filter.saturation).vibrance(e.filter.vibrance).denoise(100*e.filter.denoise).unsharpMask(100*e.filter.radius,e.filter.strength).noise(e.filter.noise).sepia(e.filter.sepia).vignette(e.filter.size,e.filter.amount).update(),t.src=p.toDataURL("image/jpeg",.7)}}),o.resolve()},100),o.promise}function o(e,t,n,o,r,i){this.name=e,this.icon=t,this.func=n,this.update=r,this.imageFile=i,this.slider={},this.nubs=[],o.call(this)}function r(e){f=e,d.draw(c).brightnessContrast(f.brightness,f.contrast).hueSaturation(f.hue,f.saturation).vibrance(f.vibrance).denoise(100*f.denoise).unsharpMask(100*f.radius,f.strength).noise(f.noise).sepia(f.sepia).vignette(f.size,f.amount).update(),s.src=d.toDataURL("image/png")}function i(){_.map(v.Adjust,function(e){e.slider.value=0,e.setSlider(e.slider)}),f={brightness:0,contrast:0,hue:0,denoise:20,saturation:0,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0},d.draw(c).brightnessContrast(f.brightness,f.contrast).hueSaturation(f.hue,f.saturation).vibrance(f.vibrance).denoise(100*f.denoise).unsharpMask(100*f.radius,f.strength).noise(f.noise).sepia(f.sepia).vignette(f.size,f.amount).update(),s.src=d.toDataURL("image/jpeg",.8)}function a(){var t=e.defer(),n=new Image;return n.src=s.src,l=document.getElementById("image3"),u=h.texture(n),h.draw(u).update(),t.resolve(h.toDataURL("image/jpeg",.8)),t.promise}var s,l,c,u;try{var d=fx.canvas(),p=fx.canvas(),h=fx.canvas()}catch(m){return void alert(m)}var f={brightness:0,contrast:0,hue:0,denoise:20,saturation:0,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0},g=[{name:"Normal",id:"normal",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:0,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Claredon",id:"claredon",filter:{brightness:.3,contrast:0,hue:0,denoise:20,saturation:0,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Gingham",id:"gingham",filter:{brightness:0,contrast:.5,hue:0,denoise:20,saturation:.1,vibrance:.3,radius:0,strength:0,noise:0,sepia:0,size:0,amount:.3}},{name:"Moon",id:"moon",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:-1,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:.8}},{name:"Lark",id:"lark",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:0,vibrance:-.3,radius:.2,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Reyes",id:"reyes",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:-1,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Juno",id:"juno",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:-1,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Slumber",id:"slumber",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:-1,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Crema",id:"crema",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:-1,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}}];o.prototype.addNub=function(e,t,n){this.nubs.push({name:e,x:t,y:n})},o.prototype.addSlider=function(e,t,n,o,r,i){this.slider={name:e,label:t,min:n,max:o,value:r,step:i}},o.prototype.setSlider=function(e){this[e.name]=e.value/100,this.update()},o.prototype.setCode=function(e){f[Object.keys(e)[0]]=e[Object.keys(e)[0]],d.draw(c).brightnessContrast(f.brightness,f.contrast).hueSaturation(f.hue,f.saturation).vibrance(f.vibrance).denoise(100*f.denoise).unsharpMask(100*f.radius,f.strength).noise(f.noise).sepia(f.sepia).vignette(f.size,f.amount).update(),s.src=d.toDataURL("image/jpeg",.8)};var v={Adjust:[new o("Brightness","ion-ios-sunny-outline","brightnessContrast",function(){this.addSlider("brightness","Brightness",-100,100,0,.1)},function(){this.setCode({brightness:this.brightness})}),new o("Contrast","ion-contrast","brightnessContrast",function(){this.addSlider("contrast","Contrast",-100,100,0,.1)},function(){this.setCode({contrast:this.contrast})}),new o("Hue","ion-ios-color-filter-outline","hueSaturation",function(){this.addSlider("hue","Hue",-100,100,0,.1)},function(){this.setCode({hue:this.hue})}),new o("Saturation","ion-ios-partlysunny-outline","hueSaturation",function(){this.addSlider("saturation","Saturation",-100,100,0,.1)},function(){this.setCode({saturation:this.saturation})}),new o("Vibrance","ion-ios-flower-outline","vibrance",function(){this.addSlider("amount","Amount",-100,100,.5,.1)},function(){this.setCode({vibrance:this.amount})}),new o("Denoise","ion-ios-eye-outline","denoise",function(){this.addSlider("exponent","Exponent",0,50,20,1)},function(){this.setCode({denoise:this.exponent})}),new o("Noise","ion-ios-analytics-outline","noise",function(){this.addSlider("amount","Amount",0,100,5,1)},function(){this.setCode({noise:this.amount})}),new o("Sepia","ion-ios-partlysunny-outline","sepia",function(){this.addSlider("amount","Amount",0,100,0,1)},function(){this.setCode({sepia:this.amount})}),new o("Vignette","ion-ios-glasses-outline","vignette",function(){this.addSlider("amount","Amount",0,100,0,1)},function(){this.setCode({amount:this.amount})})]};return{filters:v,imageFilters:g,init:n,reset:i,apply:r,getImage:a}}e.$inject=["$q","$timeout"],angular.module("ion-photo").factory("PhotoFilter",e)}();/*
 * glfx.js
 * http://evanw.github.com/glfx.js/
 *
 * Copyright 2011 Evan Wallace
 * Released under the MIT license
 */
var fx=function(){function e(e,t,n){return Math.max(e,Math.min(t,n))}function t(e){return{_:e,loadContentsOf:function(e){I=this._.gl,this._.loadContentsOf(e)},destroy:function(){I=this._.gl,this._.destroy()}}}function n(e){return t(N.fromElement(e))}function o(e,t){var n=I.UNSIGNED_BYTE;if(I.getExtension("OES_texture_float")&&I.getExtension("OES_texture_float_linear")){var o=new N(100,100,I.RGBA,I.FLOAT);try{o.drawTo(function(){n=I.FLOAT})}catch(r){}o.destroy()}this._.texture&&this._.texture.destroy(),this._.spareTexture&&this._.spareTexture.destroy(),this.width=e,this.height=t,this._.texture=new N(e,t,I.RGBA,n),this._.spareTexture=new N(e,t,I.RGBA,n),this._.extraTexture=this._.extraTexture||new N(0,0,I.RGBA,n),this._.flippedShader=this._.flippedShader||new B(null,"uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,vec2(texCoord.x,1.0-texCoord.y));}"),this._.isInitialized=!0}function r(e,t,n){return this._.isInitialized&&e._.width==this.width&&e._.height==this.height||o.call(this,t?t:e._.width,n?n:e._.height),e._.use(),this._.texture.drawTo(function(){B.getDefaultShader().drawRect()}),this}function i(){return this._.texture.use(),this._.flippedShader.drawRect(),this}function a(e,t,n,o){(n||this._.texture).use(),this._.spareTexture.drawTo(function(){e.uniforms(t).drawRect()}),this._.spareTexture.swapWith(o||this._.texture)}function s(e){return e.parentNode.insertBefore(this,e),e.parentNode.removeChild(e),this}function l(){var e=new N(this._.texture.width,this._.texture.height,I.RGBA,I.UNSIGNED_BYTE);return this._.texture.use(),e.drawTo(function(){B.getDefaultShader().drawRect()}),t(e)}function c(){var e=this._.texture.width,t=this._.texture.height,n=new Uint8Array(4*e*t);return this._.texture.drawTo(function(){I.readPixels(0,0,e,t,I.RGBA,I.UNSIGNED_BYTE,n)}),n}function u(e){return function(){return I=this._.gl,e.apply(this,arguments)}}function d(e,t,n,o,r,i,a,s){var l=n-r,c=o-i,u=a-r,d=s-i;r=e-n+r-a,i=t-o+i-s;var p=l*d-u*c,u=(r*d-u*i)/p,l=(l*i-r*c)/p;return[n-e+u*n,o-t+u*o,u,a-e+l*a,s-t+l*s,l,e,t,1]}function p(e){var t=e[0],n=e[1],o=e[2],r=e[3],i=e[4],a=e[5],s=e[6],l=e[7];e=e[8];var c=t*i*e-t*a*l-n*r*e+n*a*s+o*r*l-o*i*s;return[(i*e-a*l)/c,(o*l-n*e)/c,(n*a-o*i)/c,(a*s-r*e)/c,(t*e-o*s)/c,(o*r-t*a)/c,(r*l-i*s)/c,(n*s-t*l)/c,(t*i-n*r)/c]}function h(e){var t=e.length;this.xa=[],this.ya=[],this.u=[],this.y2=[],e.sort(function(e,t){return e[0]-t[0]});for(var n=0;t>n;n++)this.xa.push(e[n][0]),this.ya.push(e[n][1]);for(this.u[0]=0,this.y2[0]=0,n=1;t-1>n;++n){e=this.xa[n+1]-this.xa[n-1];var o=(this.xa[n]-this.xa[n-1])/e,r=o*this.y2[n-1]+2;this.y2[n]=(o-1)/r,this.u[n]=(6*((this.ya[n+1]-this.ya[n])/(this.xa[n+1]-this.xa[n])-(this.ya[n]-this.ya[n-1])/(this.xa[n]-this.xa[n-1]))/e-o*this.u[n-1])/r}for(this.y2[t-1]=0,n=t-2;n>=0;--n)this.y2[n]=this.y2[n]*this.y2[n+1]+this.u[n]}function m(e,t){return new B(null,e+"uniform sampler2D texture;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 coord=texCoord*texSize;"+t+"gl_FragColor=texture2D(texture,coord/texSize);vec2 clampedCoord=clamp(coord,vec2(0.0),texSize);if(coord!=clampedCoord){gl_FragColor.a*=max(0.0,1.0-length(coord-clampedCoord));}}")}function f(t,n){return I.brightnessContrast=I.brightnessContrast||new B(null,"uniform sampler2D texture;uniform float brightness;uniform float contrast;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.rgb+=brightness;if(contrast>0.0){color.rgb=(color.rgb-0.5)/(1.0-contrast)+0.5;}else{color.rgb=(color.rgb-0.5)*(1.0+contrast)+0.5;}gl_FragColor=color;}"),a.call(this,I.brightnessContrast,{brightness:e(-1,t,1),contrast:e(-1,n,1)}),this}function g(t){t=new h(t);for(var n=[],o=0;256>o;o++)n.push(e(0,Math.floor(256*t.interpolate(o/255)),255));return n}function v(e,t,n){e=g(e),1==arguments.length?t=n=e:(t=g(t),n=g(n));for(var o=[],r=0;256>r;r++)o.splice(o.length,0,e[r],t[r],n[r],255);return this._.extraTexture.initFromBytes(256,1,o),this._.extraTexture.use(1),I.curves=I.curves||new B(null,"uniform sampler2D texture;uniform sampler2D map;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.r=texture2D(map,vec2(color.r)).r;color.g=texture2D(map,vec2(color.g)).g;color.b=texture2D(map,vec2(color.b)).b;gl_FragColor=color;}"),I.curves.textures({map:1}),a.call(this,I.curves,{}),this}function b(e){I.denoise=I.denoise||new B(null,"uniform sampler2D texture;uniform float exponent;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec4 center=texture2D(texture,texCoord);vec4 color=vec4(0.0);float total=0.0;for(float x=-4.0;x<=4.0;x+=1.0){for(float y=-4.0;y<=4.0;y+=1.0){vec4 sample=texture2D(texture,texCoord+vec2(x,y)/texSize);float weight=1.0-abs(dot(sample.rgb-center.rgb,vec3(0.25)));weight=pow(weight,exponent);color+=sample*weight;total+=weight;}}gl_FragColor=color/total;}");for(var t=0;2>t;t++)a.call(this,I.denoise,{exponent:Math.max(0,e),texSize:[this.width,this.height]});return this}function y(t,n){return I.hueSaturation=I.hueSaturation||new B(null,"uniform sampler2D texture;uniform float hue;uniform float saturation;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float angle=hue*3.14159265;float s=sin(angle),c=cos(angle);vec3 weights=(vec3(2.0*c,-sqrt(3.0)*s-c,sqrt(3.0)*s-c)+1.0)/3.0;float len=length(color.rgb);color.rgb=vec3(dot(color.rgb,weights.xyz),dot(color.rgb,weights.zxy),dot(color.rgb,weights.yzx));float average=(color.r+color.g+color.b)/3.0;if(saturation>0.0){color.rgb+=(average-color.rgb)*(1.0-1.0/(1.001-saturation));}else{color.rgb+=(average-color.rgb)*(-saturation);}gl_FragColor=color;}"),a.call(this,I.hueSaturation,{hue:e(-1,t,1),saturation:e(-1,n,1)}),this}function w(t){return I.noise=I.noise||new B(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec4 color=texture2D(texture,texCoord);float diff=(rand(texCoord)-0.5)*amount;color.r+=diff;color.g+=diff;color.b+=diff;gl_FragColor=color;}"),a.call(this,I.noise,{amount:e(0,t,1)}),this}function x(t){return I.sepia=I.sepia||new B(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float r=color.r;float g=color.g;float b=color.b;color.r=min(1.0,(r*(1.0-(0.607*amount)))+(g*(0.769*amount))+(b*(0.189*amount)));color.g=min(1.0,(r*0.349*amount)+(g*(1.0-(0.314*amount)))+(b*0.168*amount));color.b=min(1.0,(r*0.272*amount)+(g*0.534*amount)+(b*(1.0-(0.869*amount))));gl_FragColor=color;}"),a.call(this,I.sepia,{amount:e(0,t,1)}),this}function k(e,t){return I.unsharpMask=I.unsharpMask||new B(null,"uniform sampler2D blurredTexture;uniform sampler2D originalTexture;uniform float strength;uniform float threshold;varying vec2 texCoord;void main(){vec4 blurred=texture2D(blurredTexture,texCoord);vec4 original=texture2D(originalTexture,texCoord);gl_FragColor=mix(blurred,original,1.0+strength);}"),this._.extraTexture.ensureFormat(this._.texture),this._.texture.use(),this._.extraTexture.drawTo(function(){B.getDefaultShader().drawRect()}),this._.extraTexture.use(1),this.triangleBlur(e),I.unsharpMask.textures({originalTexture:1}),a.call(this,I.unsharpMask,{strength:t}),this._.extraTexture.unuse(1),this}function T(t){return I.vibrance=I.vibrance||new B(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;float mx=max(color.r,max(color.g,color.b));float amt=(mx-average)*(-amount*3.0);color.rgb=mix(color.rgb,vec3(mx),amt);gl_FragColor=color;}"),a.call(this,I.vibrance,{amount:e(-1,t,1)}),this}function _(t,n){return I.vignette=I.vignette||new B(null,"uniform sampler2D texture;uniform float size;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float dist=distance(texCoord,vec2(0.5,0.5));color.rgb*=smoothstep(0.8,size*0.799,dist*(amount+size));gl_FragColor=color;}"),a.call(this,I.vignette,{size:e(0,t,1),amount:e(0,n,1)}),this}function C(t,n,o){I.lensBlurPrePass=I.lensBlurPrePass||new B(null,"uniform sampler2D texture;uniform float power;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color=pow(color,vec4(power));gl_FragColor=vec4(color);}");var r="uniform sampler2D texture0;uniform sampler2D texture1;uniform vec2 delta0;uniform vec2 delta1;uniform float power;varying vec2 texCoord;"+q+"vec4 sample(vec2 delta){float offset=random(vec3(delta,151.7182),0.0);vec4 color=vec4(0.0);float total=0.0;for(float t=0.0;t<=30.0;t++){float percent=(t+offset)/30.0;color+=texture2D(texture0,texCoord+delta*percent);total+=1.0;}return color/total;}";I.lensBlur0=I.lensBlur0||new B(null,r+"void main(){gl_FragColor=sample(delta0);}"),I.lensBlur1=I.lensBlur1||new B(null,r+"void main(){gl_FragColor=(sample(delta0)+sample(delta1))*0.5;}"),I.lensBlur2=I.lensBlur2||new B(null,r+"void main(){vec4 color=(sample(delta0)+2.0*texture2D(texture1,texCoord))/3.0;gl_FragColor=pow(color,vec4(power));}").textures({texture1:1});for(var r=[],i=0;3>i;i++){var s=o+2*i*Math.PI/3;r.push([t*Math.sin(s)/this.width,t*Math.cos(s)/this.height])}return t=Math.pow(10,e(-1,n,1)),a.call(this,I.lensBlurPrePass,{power:t}),this._.extraTexture.ensureFormat(this._.texture),a.call(this,I.lensBlur0,{delta0:r[0]},this._.texture,this._.extraTexture),a.call(this,I.lensBlur1,{delta0:r[1],delta1:r[2]},this._.extraTexture,this._.extraTexture),a.call(this,I.lensBlur0,{delta0:r[1]}),this._.extraTexture.use(1),a.call(this,I.lensBlur2,{power:1/t,delta0:r[2]}),this}function A(e,t,n,o,r,i){I.tiltShift=I.tiltShift||new B(null,"uniform sampler2D texture;uniform float blurRadius;uniform float gradientRadius;uniform vec2 start;uniform vec2 end;uniform vec2 delta;uniform vec2 texSize;varying vec2 texCoord;"+q+"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);vec2 normal=normalize(vec2(start.y-end.y,end.x-start.x));float radius=smoothstep(0.0,1.0,abs(dot(texCoord*texSize-start,normal))/gradientRadius)*blurRadius;for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta/texSize*percent*radius);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}");var s=n-e,l=o-t,c=Math.sqrt(s*s+l*l);return a.call(this,I.tiltShift,{blurRadius:r,gradientRadius:i,start:[e,t],end:[n,o],delta:[s/c,l/c],texSize:[this.width,this.height]}),a.call(this,I.tiltShift,{blurRadius:r,gradientRadius:i,start:[e,t],end:[n,o],delta:[-l/c,s/c],texSize:[this.width,this.height]}),this}function P(e){return I.triangleBlur=I.triangleBlur||new B(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+q+"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta*percent);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}"),a.call(this,I.triangleBlur,{delta:[e/this.width,0]}),a.call(this,I.triangleBlur,{delta:[0,e/this.height]}),this}function E(e,t,n){return I.zoomBlur=I.zoomBlur||new B(null,"uniform sampler2D texture;uniform vec2 center;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;"+q+"void main(){vec4 color=vec4(0.0);float total=0.0;vec2 toCenter=center-texCoord*texSize;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=0.0;t<=40.0;t++){float percent=(t+offset)/40.0;float weight=4.0*(percent-percent*percent);vec4 sample=texture2D(texture,texCoord+toCenter*percent*strength/texSize);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}"),a.call(this,I.zoomBlur,{center:[e,t],strength:n,texSize:[this.width,this.height]}),this}function S(e,t,n,o){return I.colorHalftone=I.colorHalftone||new B(null,"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(float angle){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);vec3 cmy=1.0-color.rgb;float k=min(cmy.x,min(cmy.y,cmy.z));cmy=(cmy-k)/(1.0-k);cmy=clamp(cmy*10.0-3.0+vec3(pattern(angle+0.26179),pattern(angle+1.30899),pattern(angle)),0.0,1.0);k=clamp(k*10.0-5.0+pattern(angle+0.78539),0.0,1.0);gl_FragColor=vec4(1.0-cmy-k,color.a);}"),a.call(this,I.colorHalftone,{center:[e,t],angle:n,scale:Math.PI/o,texSize:[this.width,this.height]}),this}function M(e,t,n,o){return I.dotScreen=I.dotScreen||new B(null,"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;gl_FragColor=vec4(vec3(average*10.0-5.0+pattern()),color.a);}"),a.call(this,I.dotScreen,{center:[e,t],angle:n,scale:Math.PI/o,texSize:[this.width,this.height]}),this}function $(e){return I.edgeWork1=I.edgeWork1||new B(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+q+"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec3 sample=texture2D(texture,texCoord+delta*percent).rgb;float average=(sample.r+sample.g+sample.b)/3.0;color.x+=average*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=average*weight;total.y+=weight;}}gl_FragColor=vec4(color/total,0.0,1.0);}"),I.edgeWork2=I.edgeWork2||new B(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+q+"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec2 sample=texture2D(texture,texCoord+delta*percent).xy;color.x+=sample.x*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=sample.y*weight;total.y+=weight;}}float c=clamp(10000.0*(color.y/total.y-color.x/total.x)+0.5,0.0,1.0);gl_FragColor=vec4(c,c,c,1.0);}"),a.call(this,I.edgeWork1,{delta:[e/this.width,0]}),a.call(this,I.edgeWork2,{delta:[0,e/this.height]}),this}function F(e,t,n){return I.hexagonalPixelate=I.hexagonalPixelate||new B(null,"uniform sampler2D texture;uniform vec2 center;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 tex=(texCoord*texSize-center)/scale;tex.y/=0.866025404;tex.x-=tex.y*0.5;vec2 a;if(tex.x+tex.y-floor(tex.x)-floor(tex.y)<1.0)a=vec2(floor(tex.x),floor(tex.y));else a=vec2(ceil(tex.x),ceil(tex.y));vec2 b=vec2(ceil(tex.x),floor(tex.y));vec2 c=vec2(floor(tex.x),ceil(tex.y));vec3 TEX=vec3(tex.x,tex.y,1.0-tex.x-tex.y);vec3 A=vec3(a.x,a.y,1.0-a.x-a.y);vec3 B=vec3(b.x,b.y,1.0-b.x-b.y);vec3 C=vec3(c.x,c.y,1.0-c.x-c.y);float alen=length(TEX-A);float blen=length(TEX-B);float clen=length(TEX-C);vec2 choice;if(alen<blen){if(alen<clen)choice=a;else choice=c;}else{if(blen<clen)choice=b;else choice=c;}choice.x+=choice.y*0.5;choice.y*=0.866025404;choice*=scale/texSize;gl_FragColor=texture2D(texture,choice+center/texSize);}"),a.call(this,I.hexagonalPixelate,{center:[e,t],scale:n,texSize:[this.width,this.height]}),this}function R(e){return I.ink=I.ink||new B(null,"uniform sampler2D texture;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 dx=vec2(1.0/texSize.x,0.0);vec2 dy=vec2(0.0,1.0/texSize.y);vec4 color=texture2D(texture,texCoord);float bigTotal=0.0;float smallTotal=0.0;vec3 bigAverage=vec3(0.0);vec3 smallAverage=vec3(0.0);for(float x=-2.0;x<=2.0;x+=1.0){for(float y=-2.0;y<=2.0;y+=1.0){vec3 sample=texture2D(texture,texCoord+dx*x+dy*y).rgb;bigAverage+=sample;bigTotal+=1.0;if(abs(x)+abs(y)<2.0){smallAverage+=sample;smallTotal+=1.0;}}}vec3 edge=max(vec3(0.0),bigAverage/bigTotal-smallAverage/smallTotal);gl_FragColor=vec4(color.rgb-dot(edge,edge)*strength*100000.0,color.a);}"),a.call(this,I.ink,{strength:e*e*e*e*e,texSize:[this.width,this.height]}),this}function U(t,n,o,r){return I.bulgePinch=I.bulgePinch||m("uniform float radius;uniform float strength;uniform vec2 center;","coord-=center;float distance=length(coord);if(distance<radius){float percent=distance/radius;if(strength>0.0){coord*=mix(1.0,smoothstep(0.0,radius/distance,percent),strength*0.75);}else{coord*=mix(1.0,pow(percent,1.0+strength*0.75)*radius/distance,1.0-percent);}}coord+=center;"),a.call(this,I.bulgePinch,{radius:o,strength:e(-1,r,1),center:[t,n],texSize:[this.width,this.height]}),this}function j(e,t,n){if(I.matrixWarp=I.matrixWarp||m("uniform mat3 matrix;uniform bool useTextureSpace;","if(useTextureSpace)coord=coord/texSize*2.0-1.0;vec3 warp=matrix*vec3(coord,1.0);coord=warp.xy/warp.z;if(useTextureSpace)coord=(coord*0.5+0.5)*texSize;"),e=Array.prototype.concat.apply([],e),4==e.length)e=[e[0],e[1],0,e[2],e[3],0,0,0,1];else if(9!=e.length)throw"can only warp with 2x2 or 3x3 matrix";return a.call(this,I.matrixWarp,{matrix:t?p(e):e,texSize:[this.width,this.height],useTextureSpace:0|n}),this}function D(e,t){var n=d.apply(null,t),o=d.apply(null,e),n=p(n);return this.matrixWarp([n[0]*o[0]+n[1]*o[3]+n[2]*o[6],n[0]*o[1]+n[1]*o[4]+n[2]*o[7],n[0]*o[2]+n[1]*o[5]+n[2]*o[8],n[3]*o[0]+n[4]*o[3]+n[5]*o[6],n[3]*o[1]+n[4]*o[4]+n[5]*o[7],n[3]*o[2]+n[4]*o[5]+n[5]*o[8],n[6]*o[0]+n[7]*o[3]+n[8]*o[6],n[6]*o[1]+n[7]*o[4]+n[8]*o[7],n[6]*o[2]+n[7]*o[5]+n[8]*o[8]])}function L(e,t,n,o){return I.swirl=I.swirl||m("uniform float radius;uniform float angle;uniform vec2 center;","coord-=center;float distance=length(coord);if(distance<radius){float percent=(radius-distance)/radius;float theta=percent*percent*angle;float s=sin(theta);float c=cos(theta);coord=vec2(coord.x*c-coord.y*s,coord.x*s+coord.y*c);}coord+=center;"),a.call(this,I.swirl,{radius:n,center:[e,t],angle:o,texSize:[this.width,this.height]}),this}var O={};!function(){function e(e){if(!e.getExtension("OES_texture_float"))return!1;var t=e.createFramebuffer(),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),t=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.FLOAT,new Float32Array([2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]));var n=e.createProgram(),o=e.createShader(e.VERTEX_SHADER),r=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(o,"attribute vec2 vertex;void main(){gl_Position=vec4(vertex,0.0,1.0);}"),e.shaderSource(r,"uniform sampler2D texture;void main(){gl_FragColor=texture2D(texture,vec2(0.5));}"),e.compileShader(o),e.compileShader(r),e.attachShader(n,o),e.attachShader(n,r),e.linkProgram(n),o=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STREAM_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),o=new Uint8Array(4),e.useProgram(n),e.viewport(0,0,1,1),e.bindTexture(e.TEXTURE_2D,t),e.drawArrays(e.POINTS,0,1),e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,o),127===o[0]||128===o[0]}function t(){}function n(e){return"OES_texture_float_linear"===e?(void 0===this.$OES_texture_float_linear$&&Object.defineProperty(this,"$OES_texture_float_linear$",{enumerable:!1,configurable:!1,writable:!1,value:new t}),e=this.$OES_texture_float_linear$):e=a.call(this,e),e}function o(){var e=s.call(this);return-1===e.indexOf("OES_texture_float_linear")&&e.push("OES_texture_float_linear"),e}try{var r=document.createElement("canvas").getContext("experimental-webgl")}catch(i){}if(r&&-1===r.getSupportedExtensions().indexOf("OES_texture_float_linear")&&e(r)){var a=WebGLRenderingContext.prototype.getExtension,s=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getExtension=n,WebGLRenderingContext.prototype.getSupportedExtensions=o}}();var I;O.canvas=function(){var e=document.createElement("canvas");try{I=e.getContext("experimental-webgl",{premultipliedAlpha:!1})}catch(t){I=null}if(!I)throw"This browser does not support WebGL";return e._={gl:I,isInitialized:!1,texture:null,spareTexture:null,flippedShader:null},e.texture=u(n),e.draw=u(r),e.update=u(i),e.replace=u(s),e.contents=u(l),e.getPixelArray=u(c),e.brightnessContrast=u(f),e.hexagonalPixelate=u(F),e.hueSaturation=u(y),e.colorHalftone=u(S),e.triangleBlur=u(P),e.unsharpMask=u(k),e.perspective=u(D),e.matrixWarp=u(j),e.bulgePinch=u(U),e.tiltShift=u(A),e.dotScreen=u(M),e.edgeWork=u($),e.lensBlur=u(C),e.zoomBlur=u(E),e.noise=u(w),e.denoise=u(b),e.curves=u(v),e.swirl=u(L),e.ink=u(R),e.vignette=u(_),e.vibrance=u(T),e.sepia=u(x),e},O.splineInterpolate=g;var B=function(){function e(e,t){var n=I.createShader(e);if(I.shaderSource(n,t),I.compileShader(n),!I.getShaderParameter(n,I.COMPILE_STATUS))throw"compile error: "+I.getShaderInfoLog(n);return n}function t(t,r){if(this.texCoordAttribute=this.vertexAttribute=null,this.program=I.createProgram(),t=t||n,r=r||o,r="precision highp float;"+r,I.attachShader(this.program,e(I.VERTEX_SHADER,t)),I.attachShader(this.program,e(I.FRAGMENT_SHADER,r)),I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw"link error: "+I.getProgramInfoLog(this.program)}var n="attribute vec2 vertex;attribute vec2 _texCoord;varying vec2 texCoord;void main(){texCoord=_texCoord;gl_Position=vec4(vertex*2.0-1.0,0.0,1.0);}",o="uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,texCoord);}";return t.prototype.destroy=function(){I.deleteProgram(this.program),this.program=null},t.prototype.uniforms=function(e){I.useProgram(this.program);for(var t in e)if(e.hasOwnProperty(t)){var n=I.getUniformLocation(this.program,t);if(null!==n){var o=e[t];if("[object Array]"==Object.prototype.toString.call(o))switch(o.length){case 1:I.uniform1fv(n,new Float32Array(o));break;case 2:I.uniform2fv(n,new Float32Array(o));break;case 3:I.uniform3fv(n,new Float32Array(o));break;case 4:I.uniform4fv(n,new Float32Array(o));break;case 9:I.uniformMatrix3fv(n,!1,new Float32Array(o));break;case 16:I.uniformMatrix4fv(n,!1,new Float32Array(o));break;default:throw"dont't know how to load uniform \""+t+'" of length '+o.length}else{if("[object Number]"!=Object.prototype.toString.call(o))throw'attempted to set uniform "'+t+'" to invalid value '+(o||"undefined").toString();I.uniform1f(n,o)}}}return this},t.prototype.textures=function(e){I.useProgram(this.program);for(var t in e)e.hasOwnProperty(t)&&I.uniform1i(I.getUniformLocation(this.program,t),e[t]);return this},t.prototype.drawRect=function(e,t,n,o){var r=I.getParameter(I.VIEWPORT);t=void 0!==t?(t-r[1])/r[3]:0,e=void 0!==e?(e-r[0])/r[2]:0,n=void 0!==n?(n-r[0])/r[2]:1,o=void 0!==o?(o-r[1])/r[3]:1,null==I.vertexBuffer&&(I.vertexBuffer=I.createBuffer()),I.bindBuffer(I.ARRAY_BUFFER,I.vertexBuffer),I.bufferData(I.ARRAY_BUFFER,new Float32Array([e,t,e,o,n,t,n,o]),I.STATIC_DRAW),null==I.texCoordBuffer&&(I.texCoordBuffer=I.createBuffer(),I.bindBuffer(I.ARRAY_BUFFER,I.texCoordBuffer),I.bufferData(I.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),I.STATIC_DRAW)),null==this.vertexAttribute&&(this.vertexAttribute=I.getAttribLocation(this.program,"vertex"),I.enableVertexAttribArray(this.vertexAttribute)),null==this.texCoordAttribute&&(this.texCoordAttribute=I.getAttribLocation(this.program,"_texCoord"),I.enableVertexAttribArray(this.texCoordAttribute)),I.useProgram(this.program),I.bindBuffer(I.ARRAY_BUFFER,I.vertexBuffer),I.vertexAttribPointer(this.vertexAttribute,2,I.FLOAT,!1,0,0),I.bindBuffer(I.ARRAY_BUFFER,I.texCoordBuffer),I.vertexAttribPointer(this.texCoordAttribute,2,I.FLOAT,!1,0,0),I.drawArrays(I.TRIANGLE_STRIP,0,4)},t.getDefaultShader=function(){return I.defaultShader=I.defaultShader||new t,I.defaultShader},t}();h.prototype.interpolate=function(e){for(var t=0,n=this.ya.length-1;n-t>1;){var o=n+t>>1;this.xa[o]>e?n=o:t=o}var o=this.xa[n]-this.xa[t],r=(this.xa[n]-e)/o;return e=(e-this.xa[t])/o,r*this.ya[t]+e*this.ya[n]+((r*r*r-r)*this.y2[t]+(e*e*e-e)*this.y2[n])*o*o/6};var N=function(){function e(e,t,n,o){this.gl=I,this.id=I.createTexture(),this.width=e,this.height=t,this.format=n,this.type=o,I.bindTexture(I.TEXTURE_2D,this.id),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),e&&t&&I.texImage2D(I.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null)}function t(e){return null==n&&(n=document.createElement("canvas")),n.width=e.width,n.height=e.height,e=n.getContext("2d"),e.clearRect(0,0,n.width,n.height),e}e.fromElement=function(t){var n=new e(0,0,I.RGBA,I.UNSIGNED_BYTE);return n.loadContentsOf(t),n},e.prototype.loadContentsOf=function(e){this.width=e.width||e.videoWidth,this.height=e.height||e.videoHeight,I.bindTexture(I.TEXTURE_2D,this.id),I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,this.type,e)},e.prototype.initFromBytes=function(e,t,n){this.width=e,this.height=t,this.format=I.RGBA,this.type=I.UNSIGNED_BYTE,I.bindTexture(I.TEXTURE_2D,this.id),I.texImage2D(I.TEXTURE_2D,0,I.RGBA,e,t,0,I.RGBA,this.type,new Uint8Array(n))},e.prototype.destroy=function(){I.deleteTexture(this.id),this.id=null},e.prototype.use=function(e){I.activeTexture(I.TEXTURE0+(e||0)),I.bindTexture(I.TEXTURE_2D,this.id)},e.prototype.unuse=function(e){I.activeTexture(I.TEXTURE0+(e||0)),I.bindTexture(I.TEXTURE_2D,null)},e.prototype.ensureFormat=function(e,t,n,o){if(1==arguments.length){var r=arguments[0];e=r.width,t=r.height,n=r.format,o=r.type}(e!=this.width||t!=this.height||n!=this.format||o!=this.type)&&(this.width=e,this.height=t,this.format=n,this.type=o,I.bindTexture(I.TEXTURE_2D,this.id),I.texImage2D(I.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null))},e.prototype.drawTo=function(e){if(I.framebuffer=I.framebuffer||I.createFramebuffer(),I.bindFramebuffer(I.FRAMEBUFFER,I.framebuffer),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,this.id,0),I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw Error("incomplete framebuffer");I.viewport(0,0,this.width,this.height),e(),I.bindFramebuffer(I.FRAMEBUFFER,null)};var n=null;return e.prototype.fillUsingCanvas=function(e){return e(t(this)),this.format=I.RGBA,this.type=I.UNSIGNED_BYTE,I.bindTexture(I.TEXTURE_2D,this.id),I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,n),this},e.prototype.toImage=function(e){this.use(),B.getDefaultShader().drawRect();var o=4*this.width*this.height,r=new Uint8Array(o),i=t(this),a=i.createImageData(this.width,this.height);I.readPixels(0,0,this.width,this.height,I.RGBA,I.UNSIGNED_BYTE,r);for(var s=0;o>s;s++)a.data[s]=r[s];i.putImageData(a,0,0),e.src=n.toDataURL()},e.prototype.swapWith=function(e){var t;t=e.id,e.id=this.id,this.id=t,t=e.width,e.width=this.width,this.width=t,t=e.height,e.height=this.height,this.height=t,t=e.format,e.format=this.format,this.format=t},e}(),q="float random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}";return O}();!function(){"use strict";/**
     * jr-crop - A simple ionic plugin to crop your images.
     * @version 1.0.0
     * @link https://github.com/JrSchild/jr-crop
     * @author Joram Ruitenschild
     * @license MIT
     */
angular.module("jrCrop",[]).factory("$jrCrop",["$ionicModal","$rootScope","$q",function(e,t,n){var o='<div class="jr-crop modal"><div class="jr-crop-center-container"><div class="jr-crop-img" ng-style="{width: width + \'px\', height: height + \'px\'}"></div></div><div class="jr-crop-center-container"><div class="jr-crop-select" style="overflow: hidden" ng-style="{width: width + \'px\', height: height + \'px\'}"></div></div><div class="bar bar-footer bar-dark jr-crop-footer"><button class="button button-clear" ng-click="cancel()">{{cancelText}}</button><div class="title">{{title}}</div><button class="button button-clear" ng-click="crop()">{{chooseText}}</button></div></div>',r=ionic.views.View.inherit({promise:null,imgWidth:null,imgHeight:null,imgSelect:null,imgFull:null,posX:0,posY:0,scale:1,rotate:0,last_scale:1,last_posX:0,last_posY:0,last_rotate:0,initialize:function(e){var t=this;t.options=e,t.promise=n.defer(),t.loadImage().then(function(e){t.imgWidth=e.naturalWidth,t.imgHeight=e.naturalHeight,t.options.modal.el.querySelector(".jr-crop-img").appendChild(t.imgSelect=e.cloneNode()),t.options.modal.el.querySelector(".jr-crop-select").appendChild(t.imgFull=e.cloneNode()),t.bindHandlers(),t.initImage()}),t.options.cancel=this.cancel.bind(this),t.options.crop=this.crop.bind(this)},initImage:function(){if(this.options.height<this.imgHeight||this.options.width<this.imgWidth){var e=this.imgWidth/this.imgHeight,t=this.options.width/this.options.height;t>e?this.scale=this.last_scale=this.options.width/this.imgWidth:this.scale=this.last_scale=this.options.height/this.imgHeight}var n=(this.imgWidth-this.options.width)/2,o=(this.imgHeight-this.options.height)/2;this.posX=this.last_posX=-n,this.posY=this.last_posY=-o,this.setImageTransform()},cancel:function(){var e=this;e.options.modal.remove().then(function(){e.promise.reject("canceled")})},bindHandlers:function(){function e(){t(),o.posX>r&&(o.posX=r),o.posX<a&&(o.posX=a),o.posY>i&&(o.posY=i),o.posY<s&&(o.posY=s)}function t(){var e=o.scale*o.imgWidth,t=o.scale*o.imgHeight;r=(e-o.imgWidth)/2,i=(t-o.imgHeight)/2,a=-(e-r-o.options.width),s=-(t-i-o.options.height)}var n,o=this,r=0,i=0,a=0,s=0,l=0,c=0,u=1,d=o.imgWidth/o.imgHeight,p=o.options.width/o.options.height;n=d>p?o.options.height/o.imgHeight:o.options.width/o.imgWidth;var h={prevent_default_directions:["left","right","up","down"]};ionic.onGesture("touch transform drag dragstart dragend rotate",function(t){switch(t.type){case"touch":o.last_scale=o.scale;break;case"drag":o.posX=o.last_posX+t.gesture.deltaX-l,o.posY=o.last_posY+t.gesture.deltaY-c,e();break;case"transform":o.scale=Math.max(n,Math.min(o.last_scale*t.gesture.scale,u)),e();break;case"dragend":o.last_posX=o.posX,o.last_posY=o.posY;break;case"dragstart":o.last_scale=o.scale,t.gesture.deltaX>1||t.gesture.deltaX<-1?(l=t.gesture.deltaX,c=t.gesture.deltaY):(l=0,c=0);break;case"rotate":o.rotate=o.last_rotate+t.gesture.rotation}o.setImageTransform()},o.options.modal.el,h)},setImageTransform:function(){var e=this,t="translate3d("+e.posX+"px,"+e.posY+"px, 0) scale3d("+e.scale+","+e.scale+", 1)rotate("+e.rotate+"deg)";e.imgSelect.style[ionic.CSS.TRANSFORM]=t,e.imgFull.style[ionic.CSS.TRANSFORM]=t},crop:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.options.width/this.scale,e.height=this.options.height/this.scale;var n=this.imgWidth*this.scale,o=this.imgHeight*this.scale,r=(n-this.imgWidth)/2,i=(o-this.imgHeight)/2,a=(this.posX-r)/this.scale,s=(this.posY-i)/this.scale;t.translate(a,s),t.translate(this.imgWidth/2,this.imgHeight/2),t.rotate(this.rotate*Math.PI/180),t.drawImage(this.imgFull,this.imgWidth/2*-1,this.imgHeight/2*-1),this.options.modal.remove(),this.promise.resolve(e)},loadImage:function(){var e=n.defer();return angular.element("<img />").bind("load",function(t){e.resolve(this)}).bind("error",e.reject).prop("src",this.options.url),e.promise}});return{defaultOptions:{width:0,height:0,aspectRatio:0,cancelText:"Cancel",chooseText:"Choose"},crop:function(n){n=this.initOptions(n);var i=t.$new(!0);return ionic.extend(i,n),i.modal=e.fromTemplate(o,{scope:i}),i.modal.show().then(function(){return new r(i).promise.promise})},initOptions:function(e){var t;return t=ionic.extend({},this.defaultOptions),t=ionic.extend(t,e),t.aspectRatio&&(!t.width&&t.height&&(t.width=200),t.width?t.height=t.width/t.aspectRatio:t.height&&(t.width=t.height*t.aspectRatio)),t}}}])}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c,u,d,p,h,m){function f(e){function t(e){var o=d.$new(!0);k=e,o.form={photo:e},o.theme=d.theme,p.fromTemplateUrl("app/component/ion-photo/view/filter.modal.html",{scope:o,focusFirstInput:!0}).then(function(t){o.modalFilter=t,o.modalFilter.show(),o.loading=!0,r(function(){i.init("image",e).then(function(){o.loading=!1})},500)}),o.actionShowFilter=function(e){o.showFilter=e},o.closeModalFilter=function(){o.modalFilter.hide()},o.cropImage=function(){o.modalFilter.remove(),v(k).then(t)},o.filters=i.filters.Adjust,o.imageFilters=i.imageFilters,o.reset=i.reset,o.applyFilter=function(e){i.apply(e.filter)},o.filterEdit=!1,o.showFilter=!0,o.selectFilter=function(e){console.log("filter",e),o.filter=e,o.filterEdit=!0},o.doneFilter=function(){o.filterEdit=!1},o.cancelFilter=function(e){e.slider.value=0,e.setSlider(e.slider),o.filterEdit=!1},o.$watch("scope.filterSelected",function(e){if(e){var t=_.find(o.filters,{func:e});o.filter=t,o.sliders=t.sliders,console.log(t)}}),o.$watch("filter.slider.value",function(e){e&&(o.filter.slider.value=parseInt(e),o.filter.setSlider(o.filter.slider))}),o.closeFilter=function(){n.reject(),o.modalFilter.hide()},o.submitFilter=function(){var e=i.getImage();o.modalFilter.remove(),n.resolve(e)},o.$on("$destroy",function(){o.modal.remove()})}var n=m.defer();return C.filterImage?t(e):n.resolve(e),n.promise}function g(t){function n(e){console.log(e),l(),b(e,i).then(v).then(f).then(r.resolve)["catch"](o)}function o(e){l(e)}var r=m.defer();console.log(w),t&&(Object.keys(t).map(function(e,n){C[e]=t[e]}),console.log(C));var i={quality:C.quality,aspectRatio:C.aspectRatio,allowRotation:C.allowRotation,allowEdit:C.allowEdit,correctOrientation:C.correctOrientation,targetWidth:C.targetWidth,targetHeight:C.targetHeight,saveToPhotoAlbum:C.saveToPhotoAlbum,destinationType:window.cordova?Camera.DestinationType.DATA_URL:null,encodingType:window.cordova?Camera.EncodingType.JPEG:null,popoverOptions:window.cordova?CameraPopoverOptions:null},s=[{text:'<i class="icon ion-images"></i>'+a.instant("capturePhoto")},{text:'<i class="icon ion-ios-camera"></i>'+a.instant("captureLibrary")}],l=e.show({buttons:s,titleText:a.instant("submit"),cancelText:a.instant("cancel"),cancel:o,buttonClicked:n});return r.promise}function v(e){var t=m.defer();return window.cordova&&(e="data:image/jpeg;base64,"+e),C.jrCrop?u.crop({url:e,aspectRatio:1,allowRotation:C.allowRotation,width:C.targetWidth,height:C.targetHeight,cancelText:a.instant("cancel"),chooseText:a.instant("submit")}).then(function(e){t.resolve(e.toDataURL())})["catch"](t.reject):t.resolve(e),t.promise}function b(e,n){function r(e){if(0===e&&T&&(n.sourceType=Camera.PictureSourceType.CAMERA),1===e&&T&&(n.sourceType=Camera.PictureSourceType.PHOTOLIBRARY),T)o.getPicture(n).then(a.resolve,a.reject);else{var t=angular.element('<input type="file" accept="image/x-png, image/gif, image/jpeg" max-size="2048" />');t[0].click(),t.on("change",function(e){k=e.currentTarget.files[0];var t=new FileReader;t.onload=function(e){a.resolve(e.target.result)},t.readAsDataURL(k)})}}function i(){t.captureVideo({limit:1,duration:5}).then(function(e){k=e[0].fullPath,a.resolve(k)},a.reject)}var a=m.defer();return 0===e&&r(0),1===e&&r(1),2===e&&i(),a.promise}function y(e){var t=m.defer(),o=d.$new();return o.image=e,o.form={title:""},o.editFilter=function(){i.load(k).then(function(e){o.image=e})},o.searchPeople=function(e){var t=[];return n.getFollowing().then(function(n){return _.each(n,function(n){n.imageUrl=n.photo?n.photo._url:"img/user.png",n.bio=n.status,n.name.toUpperCase().indexOf(e.toUpperCase())>=0&&t.push(n)}),o.people=t,m.when(t)})},o.getPeopleTextRaw=function(e){return"@"+e.username},o.theme=d.theme,p.fromTemplateUrl("app/main/share/share-modal.html",{scope:o,focusFirstInput:!0}).then(function(e){o.modalFilter=e,o.modalFilter.show()}),o.form.address={},o.closeAddress=function(){o.form.address={}},o.close=function(){o.modalFilter.hide()},o.$on("$destroy",function(){o.modal.remove()}),o.submit=function(e,n){if(e.$valid){var n=angular.copy(o.form);n.image=o.image,k="",o.close(),t.resolve(n)}else console.log("Error",e)},t.promise}var w=ionic.Platform.device(),x=ionic.Platform.isIOS();console.log("isIOS",x);var k,T=window.cordova,C={jrCrop:!0,filterImage:!0,quality:90,allowEdit:!1,filter:!0,correctOrientation:!0,targetWidth:320,targetHeight:320,saveToPhotoAlbum:!1,allowRotation:!1,aspectRatio:0};return{open:g,crop:v,filter:f,modalPost:y}}e.$inject=["$ionicActionSheet","$cordovaCapture","User","$cordovaCamera","$timeout","PhotoFilter","$translate","AppConfig","Share","$cordovaActionSheet","$jrCrop","$rootScope","$ionicModal","ActionSheet","$q"],angular.module("ion-photo").factory("PhotoService",e)}(),function(){"use strict";function e(e,t){function n(t){e.resolveLocalFileSystemURL(t,function(e){return o(e)},a)}function o(t){var n=t.fullPath.substr(t.fullPath.lastIndexOf("/")+1),o=s()+n;e.resolveLocalFileSystemURL(cordova.file.dataDirectory,function(e){t.copyTo(e,o,function(e){return r(e)},a)},a)}function r(t){var n=t.nativeURL.slice(0,-4);e.PKVideoThumbnail.createThumbnail(t.nativeURL,n+".png",function(e){return i(e)},a)}function i(e){var t=e.slice(0,-4);t+=".MOV",l.resolve(t)}function a(e){console.log("FAIL: "+e.code),l.reject("ERROR")}function s(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;5>n;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var l=t.defer();return{saveVideo:function(e){return n(e[0].localURL),promise}}}e.$inject=["$window","$q"],angular.module("ion-photo").factory("Video",e)}(),function(){"use strict";angular.module("ionic").run(["$templateCache",function(e){e.put("app/directive/SigninModalDirective.html",'<ion-modal-view id="user-layout" class="modal-auth bg-animate" cache-view="false"><ion-header-bar><h1 class="title" \ntranslate="signin"></h1><a ng-click="closeModal()" class="button button-icon icon ion-ios-close-empty"></a>\n</ion-header-bar><ion-content class="padding" scroll="false"><div class="step2"><form name="myForm" \nnovalidate="novalidate" ng-submit="submitLogin(myForm, form)"><label class="item item-input"><i \nclass="icon icon-user placeholder-icon"></i> <input required="required" type="text" name="username" \nng-model="form.username" ng-minlength="4" ng-maxlength="12" ng-model-options="{debounce: 1000}" \nng-pattern="/^[a-zA-Z\'. -]+$/" placeholder="{{\'yourLogin\' | translate}}"></label><div ng-if="myForm.username.$dirty">\n<div ng-messages="myForm.email.$error" class="validation-error"><div ng-message="required" \ntranslate="usernameRequired"></div><div ng-message="email" translate="usernameInUse"></div></div><div \nng-messages="myForm.email.$pending" class="validation-pending"><div ng-message="email" translate="checkingUsername">\n</div></div></div><label class="item item-input"><i class="icon icon-lock placeholder-icon"></i> <input required \ntype="password" name="password" ng-model="form.password" placeholder="{{\'password\'|translate}}"></label><button \nclass="button button-block button-outline button-light" type="submit" translate="{{\'submit\' | translate}}"></button>\n</form><span class="term">{{\'termAccept\' | translate}} <a href="https://photogramapp.com">{{\'terms\' | translate}}</a>\n</span></div></ion-content></ion-modal-view>'),e.put("app/directive/SignupModalDirective.html",'<ion-modal-view id="user-layout" class="modal-auth bg-animate" cache-view="false"><ion-header-bar><h1 class="title" \ntranslate="register"></h1><a ng-click="closeModal()" class="button button-icon icon ion-ios-close-empty"></a>\n</ion-header-bar><ion-content class="padding" scroll="false"><div class="step2"><form name="myForm" \nnovalidate="novalidate" ng-submit="submitRegister(myForm, form)"><label class="item item-input"><i \nclass="icon icon-envelope placeholder-icon"></i> <input required="required" type="email" name="email" \nng-model="form.email" email-validator ng-model-options="{debounce: 1000}" placeholder="user@example.com"></label><div \nng-if="myForm.email.$dirty"><div ng-messages="myForm.email.$error" class="validation-error"><div ng-message="required" \ntranslate="emailRequired"></div><div ng-message="email" translate="emailInUse"></div></div><div \nng-messages="myForm.email.$pending" class="validation-pending"><div ng-message="email" translate="checkingEmail"></div>\n</div></div><label class="item item-input"><i class="icon icon-user placeholder-icon"></i> <input required="required" \ntype="text" name="username" ng-model="form.username" username-validator ng-minlength="4" ng-maxlength="12" \nng-model-options="{debounce: 1000}" ng-pattern="/^[a-zA-Z\'. -]+$/" placeholder="{{\'yourLogin\' | translate}}"></label>\n<div ng-if="myForm.username.$dirty"><div ng-messages="myForm.email.$error" class="validation-error"><div \nng-message="required" translate="usernameRequired"></div><div ng-message="email" translate="usernameInUse"></div></div>\n<div ng-messages="myForm.email.$pending" class="validation-pending"><div ng-message="email" \ntranslate="checkingUsername"></div></div></div><label class="item item-input"><i \nclass="icon icon-lock placeholder-icon"></i> <input required type="password" name="password" ng-model="form.password" \nplaceholder="{{\'password\'|translate}}"></label><button class="button button-block button-outline button-light" \ntype="submit" translate="{{\'submit\' | translate}}"></button></form><span class="term">{{\'termAccept\' | translate}} <a \nhref="https://photogramapp.com">{{\'terms\' | translate}}</a></span></div></ion-content></ion-modal-view>'),e.put("app/directive/albumGridDirective.html",'<div class="center padding" ng-if="showErrorView()"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView()"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="loading"><ion-spinner>\n</ion-spinner></div><div class="row animated fadeIn" ng-if="$index % 2 === 0" \nng-repeat="image in data | orderBy:\'createdAt\':true"><div class="col col-50 item-animate1" \nng-if="$index < data.length" album-photo-grid album="data[$index].id"><img \nng-src="{{ ::data[$index].imageThumb._url}}" width="100%"><div class="desc"><h2>{{::data[$index].title}}</h2><p>\n{{::data[$index].qtyPhotos}} photos</p></div></div><div class="col col-50 item-animate1" \nng-if="$index + 1 < data.length" album-photo-grid album="data[$index+1].id"><img \nng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"><div class="desc"><h2>{{::data[$index+1].title}}</h2><p>\n{{::data[$index+1].qtyPhotos}} photos</p></div></div></div><ion-infinite-scroll on-infinite="onLoadMore()" \nng-if="moreDataCanBeLoaded()" spinner distance="1%"></ion-infinite-scroll>'),e.put("app/directive/albumPhotoGridDirective.html",'<ion-modal-view cache-view="false"><ion-header-bar class="bar bar-{{theme}}"><h1 class="title" ng-bind="title"></h1><a \nng-click="closeModal()" class="button button-icon icon ion-ios-close-empty"></a></ion-header-bar><ion-content \nclass="padding"><div class="row" ng-if="$index % 3 === 0" ng-repeat="image in data | orderBy:\'createdAt\':true"><div \nclass="col col-33 item-animate1" ng-if="$index < data.length"><img ng-if="profile" profile-modal \nuser="data[$index].user.obj" ng-src="{{ ::data[$index].imageThumb._url}}" width="100%"> <img ng-if="!profile" \nion-slideshow ng-model="data" index="$index" ng-src="{{ ::data[$index].imageThumb._url}}" width="100%"></div><div \nclass="col col-33 item-animate1" ng-if="$index + 1 < data.length"><img ng-if="profile" profile-modal \nuser="data[$index + 1].user.obj" ng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"> <img ng-if="!profile" \nion-slideshow ng-model="data" index="$index+1" ng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"></div><div\n class="col col-33 item-animate1" ng-if="$index + 2 < data.length"><img ng-if="profile" profile-modal \nuser="data[$index + 2].user.obj" ng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"> <img ng-if="!profile" \nion-slideshow ng-model="data" index="$index+2" ng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"></div>\n</div></ion-content></ion-modal-view>'),e.put("app/directive/distanceModal.html",'<ion-modal-view><ion-header-bar class="bar-light"><div class="buttons"><button \nclass="button button-clear button-icon ion-ios-close-empty" ng-click="closeDistanceModal()"></button></div><div \nclass="title">{{ "chooseDistanceText" | translate }}</div></ion-header-bar><ion-content><ion-list><ion-item \nclass="item item-icon-right" ng-repeat="distance in distances" ng-click="onDistanceSelected(distance.val)" bindonce><h2\n bo-bind="distance.text"></h2><i class="icon ion-checkmark" ng-show="params.distance === distance.val"></i></ion-item>\n</ion-list></ion-content></ion-modal-view>'),e.put("app/directive/follow.modal.html",'<ion-modal-view class="modal-profile photogram-profile"><ion-header-bar class="bar-positive"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\nFollow Users</div></ion-header-bar><ion-content><div class="list"><div class="item item-avatar item-button-right" \nng-repeat="item in data"><img ng-src="{{ ::item.src }}"><h2>{{ ::item.name }}</h2><p>{{ ::item.status }}</p><button \nclass="button" ng-click="item.follow = !item.follow" ng-class="item.follow ? \'button-positive\' : \'button-stable\'"><i \nclass="icon" ng-class="item.follow? \'ion-thumbsup\' : \'ion-plus\'"></i></button></div></div></ion-content>\n</ion-modal-view>'),e.put("app/directive/galleryAlbumModalDirective.html",'<ion-modal-view><ion-header-bar class="bar bar-{{theme}}"><a ng-click="closeModal()" \nclass="button button-clear button-positive" translate="cancel"></a><h1 class="title" translate="selectAlbumText"></h1>\n</ion-header-bar><ion-content><div class="list"><div class="item item-thumbnail-left" gallery-new-album-modal \nng-model="ngModel"><img src="img/albumnew.png"><h2>Create Album</h2></div><div class="item item-thumbnail-left" \nng-repeat="item in data | filter:searchValue" ng-click="selectAlbum(item)"><img \nng-src="{{item.imageThumb._url || \'img/albumnone.png\'}}"><h2 ng-bind="item.title"></h2><p>{{item.qtyPhotos}} photos</p>\n</div></div></ion-content></ion-modal-view>'),e.put("app/directive/galleryNewAlbumModalDirective.html",'<ion-modal-view><form name="rForm" novalidate><ion-header-bar class="bar bar-{{theme}}"><a ng-click="closeModal()" \nclass="button button-clear button-positive" translate="cancel"></a><h1 class="title" translate="createAlbum"></h1><a \nng-click="createAlbum(rForm, form)" class="button button-clear button-positive" translate="submit"></a>\n</ion-header-bar><ion-content><div class="list"><label class="item item-input"><input type="text" name="title" \nplaceholder="{{\'albumName\' | translate}}" ng-model="form.title" required></label><label class="item item-input">\n<textarea name="description" placeholder="{{\'albumDesc\' | translate}}" ng-model="form.description"></textarea></label>\n</div></ion-content></form></ion-modal-view>'),e.put("app/directive/likeDirective.html",'<ion-modal-view class="modal-comment"><ion-header-bar class="bar-dark"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\n{{ ::\'Likes\' | translate }} ({{ ::likes.length }})</div></ion-header-bar><ion-content><div class="list step1"><div \nng-repeat="item in likes" class="item item-avatar item-button-right"><img ng-src="{{ ::item.user.img }}"><h2>\n{{ ::item.user.name }}</h2><div>{{ ::item.text }}</div><p>{{ ::item.created | amTimeAgo }}</p><button \nclass="button button-positive button-outline"><i class="icon ion-ios-plus-empty"></i> {{ ::\'Follow\' }}</button></div>\n</div></ion-content></ion-modal-view>'),e.put("app/directive/mapPhotoUserDirective.html",'<div id="map_canvas" data-tap-disabled="true"></div>'),e.put("app/directive/photoCommentDirective.html",'<ion-modal-view class="modal-comment"><ion-header-bar class="bar bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\n<span translate="commentPhotoText"></span>({{ comments.length }})</div></ion-header-bar><ion-content><div \nclass="padding center" ng-if="loading"><ion-spinner></ion-spinner></div><ion-list class="list" \nng-show="comments.length" can-swipe="true"><ion-item ng-repeat="item in comments | orderBy:createdAt" \nclass="item item-avatar"><img ng-src="{{ ::item.user.photo._url || \'./img/user.png\'}}"><div class="row"><h2>\n{{ ::item.user.name }}</h2></div><div class="row"><div class="text">{{ ::item.text }}</div></div><div class="row"><p>\n{{ ::item.createdAt | amTimeAgo }}</p></div><div ng-if="item.user.id === currentUser.id"><ion-option-button \nclass="button-info" ng-click="editComment(item)" translate="edit">Edit</ion-option-button><ion-option-button \nclass="button-assertive" ng-click="deleteComment(item)" translate="remove">Remove</ion-option-button></div></ion-item>\n</ion-list><div class="center-ico" ng-if="nocomments"><i class="icon ion-ios-chatbubble-outline"></i><h1 \ntranslate="noComments"></h1></div></ion-content><form name="rForm" ng-submit="submitComment(rForm, form)" novalidate>\n<ion-footer-bar class="bar-stable item-input-inset message-footer" keyboard-attach><label class="item-input-wrapper"><i\n class="icon ion-ios-compose-outline placeholder-icon"></i><textarea mentio mentio-trigger-char="\'@\'" \nmentio-items="people" mentio-template-url="app/mentio/people-mentions.html" mentio-search="searchPeople(term)" \nmentio-select="getPeopleTextRaw(item)" mentio-id="\'theTextArea\'" ng-trim="false" ng-model="form.text" \nplaceholder="Send a comment..." required minlength="1" maxlength="1500">\n                </textarea></label><div \nclass="footer-btn-wrap"><button class="button button-positive button-outline" type="submit" \nng-disabled="!form.text || form.text === \'\'">Publish</button></div></ion-footer-bar></form></ion-modal-view>'),e.put("app/directive/photoGridDirective.html",'<div class="center padding" ng-if="showErrorView()"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView()"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="loading"><ion-spinner>\n</ion-spinner></div><div class="row animated fadeIn" ng-if="$index % 3 === 0" \nng-repeat="image in data | orderBy:\'createdAt\':true"><div class="col col-33 item-animate1" \nng-if="$index < data.length"><img ng-if="profile" profile-modal user="data[$index].user.obj" \nng-src="{{ ::data[$index].imageThumb._url}}" width="100%"> <img ng-if="!profile" ion-slideshow ng-model="data" \nindex="$index" ng-src="{{ ::data[$index].imageThumb._url}}" width="100%"></div><div class="col col-33 item-animate1" \nng-if="$index + 1 < data.length"><img ng-if="profile" profile-modal user="data[$index + 1].user.obj" \nng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"> <img ng-if="!profile" ion-slideshow ng-model="data" \nindex="$index+1" ng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"></div><div \nclass="col col-33 item-animate1" ng-if="$index + 2 < data.length"><img ng-if="profile" profile-modal \nuser="data[$index + 2].user.obj" ng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"> <img ng-if="!profile" \nion-slideshow ng-model="data" index="$index+2" ng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"></div>\n</div><ion-infinite-scroll on-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded()" spinner distance="1%">\n</ion-infinite-scroll>'),e.put("app/directive/photoListDirective.html",'<div class="center padding" ng-if="showErrorView()"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView()"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="loading"><ion-spinner>\n</ion-spinner></div><div class="list card" ng-repeat="gallery in data | orderBy:\'createdAt\':true" \nng-if="showGalleries()"><div class="item item-avatar" ng-click="load(gallery.user.username)" ion-affix \ndata-affix-within-parent-with-class="card"><img ng-if="profile" ng-src="{{ ::gallery.user.photo._url}}"> <img \nng-src="{{ ::gallery.user.photo._url || \'img/user.png\'}}"><h2>{{ ::gallery.user.name}}</h2><p>\n{{ ::gallery.user.status}}</p><span>{{ ::gallery.createdAt | amTimeAgo}}</span></div><div class="item item-body" \non-double-tap="like(gallery.id)" ng-model="gallery"><div class="icon ion-ios-heart heart" \nng-class="gallery.isLiked ? \'happy\' : \'broken\' "></div><i class="icon" ng-if="like"></i> <img \nng-src="{{ gallery.image._url}}" id="{{ ::gallery.id}}"></div><div class="item item-buttons"><div class="row"><div \nclass="col col-30"><ion-spinner ng-show="gallery.progress"></ion-spinner><button photo-like ng-model="gallery" \nng-if="!gallery.progress" ng-class="gallery.isLiked ? \'ion-ios-heart\' : \'ion-ios-heart-outline\' " \nclass="button-clear button-icon button-heart"></button> <button ng-click="openComment(gallery.id)" ng-model="gallery" \nclass="button-clear button-icon ion-ios-chatbubble-outline"></button> <button \nng-click="share(gallery.image._url, gallery.title)" photogram="{{ :: gallery.id }}" \nclass="button-clear button-icon ion-android-share"></button></div><div class="col album-name text-center" \nalbum-photo-grid album="gallery.album.id"><div ng-bind="gallery.album.attributes.title"></div></div><div \nclass="col text-right"><button ng-click="action(gallery)" photogram="{{ :: gallery.id }}" \nclass="button-clear button-icon ion-android-more-vertical"></button></div></div></div><div class="padding"><span \nclass="likes" ng-click="openLikers(gallery.id)"><i class="icon ion-ios-heart"></i> <span ng-if="!gallery.progress">\n{{ gallery.likesTotal }}</span> <span translate="likesText"></span></span><div class="list-comments"><div \nclass="comment-item"><span profile-modal username="gallery.user.username" class="username">{{ :: gallery.user.name }}\n</span> <span class="comment" ng-bind-html="gallery.title | hashtag "></span></div><div class="comment-item" \nng-repeat="item in gallery.comments |limitTo:3 | orderBy:\'createdAt\':true"><span class="username" profile-modal \nusername="gallery.user.username">{{ :: item.user.name }}</span> <span class="comment" \nng-bind-html="item.text | hashtag"></span></div><a class="comment-item" photo-comment ng-model="gallery" \nng-if="gallery.commentsTotal>3" translate="seeAllCommentText"></a></div><button \nclass="button button-block button-clear button-comment" photo-comment ng-model="gallery"><span translate="addComment">\n</span></button></div></div><ion-infinite-scroll on-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded() && !id " \nspinner></ion-infinite-scroll>'),e.put("app/directive/profile-edit-modal.html",'<ion-modal-view class="profile-edit"><ion-header-bar class="bar bar-{{theme}}"><button class="button button-clear" \nng-click="closeModal()" translate="cancel"></button><div class="title">{{ ::\'editProfile\' | translate }}</div>\n</ion-header-bar><ion-content class="view-avatar"><div class="step2"><form name="rForm" \nng-submit="submitUpdateProfile(rForm, form)" novalidate><img class="avatar" user-avatar ng-model="currentUser" \nng-src="{{ currentUser.photo.url() || \'img/user.png\' }}"><label class="item item-input"><i \nclass="icon ion-clipboard placeholder-icon"></i> <input required="required" type="text" name="name" \nng-model="form.name" placeholder="{{\'name\' | translate}}"></label><label class="item item-input"><i \nclass="icon ion-pound placeholder-icon"></i> <input required="required" type="text" name="username" \nng-model="form.username" ng-minlength="4" ng-maxlength="12" ng-pattern="/^[a-zA-Z\'. -]+$/" \nplaceholder="{{\'username\' | translate}}"></label><label class="item item-input"><i \nclass="icon ion-earth placeholder-icon"></i> <input type="url" name="website" ng-model="form.website" \nplaceholder="{{\'site\' | translate}}"></label><label class="item item-input"><i \nclass="icon ion-information-circled placeholder-icon"></i> <input required="required" type="text" name="status" \nng-model="form.status" placeholder="{{\'status\' | translate}}"></label><ion-item class="item-divider" \ntranslate="privateInformation"></ion-item><label class="item item-input"><i \nclass="icon icon-envelope placeholder-icon"></i> <input type="email" name="email" ng-model="form.email" \ndisabled="disabled" ng-model-options="{debounce: 1000}" placeholder="user@example.com"></label><label \nclass="item item-input"><i class="icon ion-iphone placeholder-icon"></i> <input required="required" type="tel" \nname="phone" ng-model="form.phone" placeholder="{{\'phone\' | translate }}"></label><div class="padding"><button \ntype="submit" class="button button-block button-positive" translate="submit"></button></div></form></div></ion-content>\n</ion-modal-view>'),e.put("app/directive/profile-modal.html",'<ion-modal-view id="account-view"><ion-header-bar class="bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\n{{ user.name }}</div></ion-header-bar><ion-content overflow-scroll="true"><div class="profile-top"><div class="row">\n<div class="col-25"><img class="avatar" ng-src="{{ user.photo._url || \'img/user.png\'}}"></div><div \nclass="col col-statics"><div class="row"><div class="row"><div class="col"><span class="text-center">\n{{ ::user.galleriesTotal || 0}}</span><h3 translate="postsText"></h3></div><div class="col"><span class="text-center">\n{{ user.followersTotal || 0}}</span><h3 translate="followersText"></h3></div><div class="col"><span \nclass="text-center">{{ ::user.followingsTotal || 0}}</span><h3 translate="followingText"></h3></div></div></div><div \nclass="row col-edit"><div class="col"><photogram-loading loading="loadingFollow"></photogram-loading><button \nng-class="{\'button-unfollow\': user.isFollow, \'button-follow\': !user.isFollow}" ng-click="follow()" class="button"><span\n ng-show="!user.isFollow" translate>Follow</span> <span ng-show="user.isFollow" translate>Following</span></button>\n</div></div></div></div><div class="padding"><span class="user-username">{{ user.name }}</span><p class="user-status">\n{{ user.status }}</p></div></div><div class="item bar"><div class="button-bar"><button \nclass="button button-icon icon ion-grid" ng-class="{active: tab.grid}" ng-click="changeTab(\'grid\')"></button> <button \nclass="button button-icon icon ion-drag" ng-class="{active: tab.list}" ng-click="changeTab(\'list\')"></button> <button \nclass="button button-icon icon ion-ios-location"></button></div></div><div class="item item-divider" \ntranslate="recent"></div><div class="tab" ng-if="tab.list"></div><div class="tab" ng-if="tab.grid"></div></ion-content>\n</ion-modal-view>'),
e.put("app/directive/search-directive.html",'<label class="item item-input"><i class="icon ion-search placeholder-icon"></i> <input type="search" ng-model="input" \nplaceholder="{{\'SEARCH.FORM.INPUT\' | translate }}"> <button class="button button-icon" ng-if="input.length" \nng-click="clearSearch()"><i class="icon ion-close"></i></button></label>'),e.put("app/directive/settings-modal.html",'<ion-modal-view class="modal-profile"><ion-header-bar class="bar bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title" \ntranslate="settingTitle"></div></ion-header-bar><ion-content class="animated fadeIn"><div class="list"><ion-language>\n</ion-language><ion-toggle class="toggle-positive" ng-model="form.push"><h3><small translate="notificationText">\n</small></h3><p ng-if="form.push" translate="on"></p><p ng-if="!form.push" translate="off"></p></ion-toggle><ion-item \nclass="item-icon-right" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S"><h3>\n<small translate="buy"></small></h3><i class="icon ion-ios-arrow-right"></i></ion-item><ion-item \nclass="item-icon-right" href="http://photogramapp.com"><h3><small translate="help"></small></h3><i \nclass="icon ion-ios-arrow-right"></i></ion-item><ion-item class="item-icon-right" href="http://photogramapp.com"><h3>\n<small translate="terms"></small></h3><i class="icon ion-ios-arrow-right"></i></ion-item><ion-item \nclass="item-icon-right" ng-click="show();"><h3><small translate="report"></small></h3><i \nclass="icon ion-ios-arrow-right"></i></ion-item></div><div class="padding"><button ng-click="logout()" \nclass="button button-block button-positive" translate="logout"></button></div></ion-content></ion-modal-view>'),e.put("app/mentio/people-mentions.html",'<ul class="list-group user-search"><li mentio-menu-item="person" ng-repeat="person in items" class="list-group-item">\n<img ng-src="{{person.imageUrl}}" class="user-photo"><div class="description"><span class="text-primary" \nng-bind-html="person.username | mentioHighlight:typedTerm:\'menu-highlighted\' | unsafe"></span> <em class="text-muted" \nng-bind="person.status | words:5"></em></div></li></ul>'),e.put("app/mentio/photo-mentions.html",'<ul class="list-group product-search demo-scrollable-menu"><li mentio-menu-item="product" ng-repeat="product in items" \nclass="list-group-item clearfix"><div class="row"><div class="col-xs-2 text-center"><img ng-src="{{product.imageUrl}}" \nclass="product-photo"></div><div class="col-xs-10"><h4 class="list-group-item-heading">{{product.title | words:5}}</h4>\n<p class="list-group-item-text">{{product.description | words:7}}</p></div></div></li></ul>'),e.put("app/component/ion-language/ion-language.html",'<button class="button button-block button-clear button-{{theme}} button-language">{{language.translation | translate}} \n<i class="icon ion-android-arrow-dropdown"></i></button>'),e.put("app/component/ion-language/modal-language.html",'<ion-modal-view><ion-header-bar><h1 class="title" translate="selectLanguageText"></h1><a ng-click="closeModal()" \nclass="button button-icon icon ion-close"></a></ion-header-bar><div \nclass="bar bar-subheader item-input-inset bar-stable"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="search" placeholder="{{\'searchText\' | translate}}" \nng-model="searchValue"></label><button type="button" class="button button-clear" ng-show="searchValue.length" \nng-click="searchValue=\'\'">Clear</button></div><ion-content class="has-subheader has-header"><ion-list><ion-item \nclass="item" ng-click="selectLanguage(item)" ng-repeat="item in languages | filter:searchValue" \nng-bind-html="item.translation | translate"></ion-item></ion-list></ion-content></ion-modal-view>'),e.put("app/component/ion-slideshow/image-popover.html",'<div class="modal image-modal transparent" ng-click="closeModal()"><ion-slide-box \non-slide-changed="slideChanged(index)" show-pager="true" active-slide="activeSlide"><ion-slide \nng-repeat="item in allImages"><img ng-src="{{item.image._url}}" class="fullscreen-image"></ion-slide></ion-slide-box>\n</div>'),e.put("app/component/ion-slideshow/video-popover.html",'<div class="modal transparent fullscreen-player" ng-click="closeModal()"><video ng-src="{{clipSrc}}" class="centerme" \ncontrols="controls" autoplay></video></div>'),e.put("app/main/account-friend-list/account-friend-list.html","<ion-view><ion-content></ion-content></ion-view>"),e.put("app/main/feedback/feedback-modal.html",'<ion-modal-view class="modal-profile"><ion-header-bar class="bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title" \ntranslate="feedbackTitle"></div></ion-header-bar><ion-content><formly-form model="form" form="rForm" \nfields="formFields"></formly-form><div class="padding"><button class="button button-block button-positive" \nng-click="submitFeedback()"><span translate="submit"></span></button></div></ion-content></ion-modal-view>'),e.put("app/main/gallery-comment/gallery-comment.html",'<ion-view class="modal-comment" cache-view="false"><ion-nav-bar class="bar bar-{{theme}}"><ion-nav-buttons side="left">\n<button class="button button-icon button-clear ion-ios-arrow-left" ng-click="$ionicGoBack()"></button>\n</ion-nav-buttons><ion-nav-title><div class="title"><span translate="commentPhotoText"></span>({{ comments.length }})\n</div></ion-nav-title></ion-nav-bar><ion-content><div class="padding center" ng-if="loading"><ion-spinner>\n</ion-spinner></div><ion-list class="list" ng-if="!loading" can-swipe="true"><ion-item \nng-repeat="item in comments | orderBy:\'createdAt\':false" class="item item-avatar"><img \nng-src="{{ ::item.user.photo._url || \'./img/user.png\'}}"><div class="row"><h2>{{ ::item.user.name }}</h2></div><div \nclass="row"><div class="text">{{ ::item.text }}</div></div><div class="row"><p>{{ ::item.createdAt | amTimeAgo }}</p>\n</div><div ng-if="item.canEdit"><ion-option-button class="button-info" ng-click="editComment(item, $index)" \ntranslate="edit">Edit</ion-option-button><ion-option-button class="button-assertive" \nng-click="deleteComment(item, $index)" translate="remove">Remove</ion-option-button></div></ion-item></ion-list><div \nclass="center-ico" ng-if="nocomments"><i class="icon ion-ios-chatbubble-outline"></i><h1 translate="noComments"></h1>\n</div></ion-content><form name="rForm" ng-submit="submitComment(rForm, form)" novalidate><ion-footer-bar \nng-hide="loading" class="bar-stable item-input-inset message-footer" keyboard-attach><label class="item-input-wrapper">\n<i class="icon ion-ios-compose-outline placeholder-icon"></i><textarea mentio mentio-trigger-char="\'@\'" \nmentio-items="people" mentio-template-url="app/mentio/people-mentions.html" mentio-search="searchPeople(term)" \nmentio-select="getPeopleTextRaw(item)" mentio-id="\'theTextArea\'" ng-trim="false" ng-model="form.text" focus-me \nid="textComment" placeholder="Send a comment..." required minlength="1" maxlength="1500">\n                </textarea>\n</label><div class="footer-btn-wrap"><button class="button button-positive button-outline" type="submit" \nng-disabled="!form.text || form.text === \'\'">Publish</button></div></ion-footer-bar></form></ion-view>'),e.put("app/main/loading/loading.html",'<ion-view id="user-layout" class="bg-animate"><ion-content></ion-content></ion-view>'),e.put("app/main/profile/profile.html",'<ion-view cache-view="false" id="account-view"><ion-nav-bar class="bar bar-{{theme}}"><ion-nav-back-button>\n</ion-nav-back-button></ion-nav-bar><ion-nav-title><span>{{ vm.user.name }}</span></ion-nav-title><ion-content \nscroll-sista="header-tabs" class="animated fadeIn"><ion-refresher pulling-text="Loading" on-refresh="onReload()">\n</ion-refresher><div class="profile-top"><div class="row"><div class="col-25"><img class="avatar" user-avatar \nng-model="vm.user" ng-src="{{ vm.user.photo._url || \'img/user.png\' }}"></div><div class="col col-statics"><div \nclass="row"><div class="col"><span class="text-center">{{ vm.user.galleriesTotal || 0}}</span><h3 \ntranslate="postsText"></h3></div><div class="col" ng-click="vm.openFollowers()"><span class="text-center">\n{{ vm.user.followersTotal || 0}}</span><h3 translate="followersText"></h3></div><div class="col" \nng-click="vm.openFollowing()"><span class="text-center">{{ vm.user.followingsTotal || 0}}</span><h3 \ntranslate="followingText"></h3></div></div><div class="row col-edit"><div class="col center" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="col" ng-if="vm.isMe && !vm.loading"><button profile-modal-edit \nuser="vm.user" class="button"><div translate="editProfile"></div></button></div><div class="col" \nng-if="!vm.isMe && !vm.loading"><button \nng-class="{\'button-unfollow\': vm.user.isFollow, \'button-follow\': !vm.user.isFollow}" ng-click="vm.follow()" \nclass="button"><span ng-show="!vm.user.isFollow" translate>Follow</span> <span ng-show="vm.user.isFollow" translate>\nFollowing</span></button></div></div></div></div><div class="padding"><span class="user-username">{{ vm.user.name }}\n</span><p class="user-status">{{ vm.user.status }}</p></div></div><div class="item bar"><div class="button-bar"><button\n class="button button-icon icon ion-grid" ng-class="{\'active\': vm.tab.grid}" ng-click="vm.changeTab(\'grid\')"></button> \n<button class="button button-icon icon ion-ios-camera-outline" ng-class="{\'active\': vm.tab.album}" \nng-click="vm.changeTab(\'album\')"></button> <button class="button button-icon icon ion-drag" \nng-class="{\'active\': vm.tab.list}" ng-click="vm.changeTab(\'list\')"></button> <button \nclass="button button-icon icon ion-ios-location-outline" ng-class="{\'active\': vm.tab.map}" \nng-click="vm.changeTab(\'map\')"></button></div></div><div ng-if="!vm.loading"><div class="tab" \nng-if="vm.tab.grid && !vm.loading"><div class="item item-divider" translate="recent"></div><photo-grid \nusername="vm.user.username" on-reload="onReload"></photo-grid></div><div class="tab" \nng-if="vm.tab.album && !vm.loading"><div class="item item-divider" translate="albums"></div><album-grid \nusername="vm.user.username" on-reload="onReload"></album-grid></div><div class="tab" \nng-if="vm.tab.list && !vm.loading"><div class="item item-divider" translate="recent"></div><photo-list \nusername="vm.user.username" on-reload="onReload"></photo-list></div><div class="tab" ng-if="vm.tab.map && !vm.loading">\n<div class="item item-divider" translate="map"></div><map-photo-user username="vm.user.username" on-reload="onReload">\n</map-photo-user></div></div></ion-content></ion-view>'),e.put("app/main/profile-photo/profile-photo.html",'<ion-view cache-view="false" id="account-view"><ion-nav-bar class="bar bar-{{theme}}"><ion-nav-back-button>\n</ion-nav-back-button></ion-nav-bar><ion-nav-title><span translate="photo"></span></ion-nav-title><ion-content \nscroll-sista="header-tabs" class="animated fadeIn"><photo-list id="vm.id" profile="true" load="vm.openProfile" \nopen-likers="vm.openLikers" on-reload="onReload"></photo-list></ion-content></ion-view>'),e.put("app/main/share/post-modal.html",'<ion-modal-view class="modal-post"><ion-header-bar class="bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closePost()"></button><div class="title" \ntranslate="SHARE.TITLE"></div><button class="button button-positive" ng-click="submitPost(form)"><i \nclass="icon ion-arrow-right-b"></i></button></ion-header-bar><ion-content><div id="image"><img ng-src="{{image}}">\n</div><ul class="list"><li class="item"><textarea ng-model="form.title" \nplaceholder="{{ \'SHARE.FORM.LEGEND\' | translate }}"></textarea></li></ul></ion-content></ion-modal-view>'),e.put("app/main/share/share-modal.html",'<ion-modal-view class="modal-share"><form name="rForm" novalidate><ion-header-bar class="bar bar-{{theme}}"><button \nclass="button button-clear button-clear button-light" ng-click="close()" translate="cancel"></button><div \nclass="title" translate="shareGalleryText"></div><button class="button button-clear button-light" \nng-click="submit(rForm, form)" translate="submit"></button></ion-header-bar><ion-content><div class="list"><div \nclass="item item-thumbnail-left"><img ng-src="{{image}}" ng-click="editFilter()"><textarea mentio \nmentio-trigger-char="\'@\'" mentio-items="people" mentio-template-url="app/mentio/people-mentions.html" \nmentio-search="searchPeople(term)" mentio-select="getPeopleTextRaw(item)" mentio-id="\'theTextArea\'" ng-trim="false" \ntype="text" ng-model="form.title" placeholder="{{ \'description\'|translate }}"></textarea></div><div \nclass="item item-divider" translate="shareLocation"></div><div class="item item-icon-left" ion-location \nng-model="form.address" ng-if="!form.address.resume"><i class="icon ion-ios-location"></i> <span translate="addLocale">\n</span></div><a class="item item-icon-left item-button-right" ng-if="form.address.resume"><i \nclass="icon ion-ios-location"></i><h2>{{form.address.name || form.address.resume}}</h2><p>{{form.address.resume}}</p>\n<button class="button button-icon" ng-click="closeAddress()"><i class="icon ion-ios-close"></i></button></a><div \nclass="item item-divider" translate="selectAlbumText"></div><div class="item item-thumbnail-left" gallery-album-modal \nng-model="form.album"><img ng-src="{{form.album.imageThumb._url || \'img/albumnone.png\'}}"><h2 \nng-if="!form.album.title" translate="clickSelectAlbum"></h2><h2 ng-if="form.album" ng-bind="form.album.title"></h2><p \nng-if="form.album">{{form.album.qtyPhotos}} photos</p></div><div class="item item-divider" translate="shareSocial">\n</div><li class="item item-toggle">Compartilhar no Facebook?<label class="toggle toggle-assertive"><input \ntype="checkbox"><div class="track"><div class="handle"></div></div></label></li></div></ion-content></form>\n</ion-modal-view>'),e.put("app/main/tab/main-tab.html",'<ion-view><ion-nav-bar class="bar bar-{{theme}}"><ion-nav-back-button></ion-nav-back-button></ion-nav-bar><ion-tabs \nclass="tabs-{{theme}} tabs-photogram"><ion-tab title="{{ \'PHOTOGRAM.TITLE.HOME\' | translate }}" icon-on="ion-ios-home" \nicon-off="ion-ios-home-outline" ui-sref="tab.home"><ion-nav-view name="tabHome"></ion-nav-view></ion-tab><ion-tab \ntitle="{{ \'PHOTOGRAM.TITLE.SEARCH\' | translate }}" icon-on="ion-ios-world" icon-off="ion-ios-world-outline" \nui-sref="tab.search"><ion-nav-view name="tabSearch"></ion-nav-view></ion-tab><ion-tab \ntitle="{{ \'PHOTOGRAM.TITLE.SHARE\' | translate }}" icon-on="ion-ios-camera" icon-off="ion-ios-camera-outline" \nng-click="vm.postPhoto()"><ion-nav-view name="tabCapture"></ion-nav-view></ion-tab><ion-tab \ntitle="{{ \'PHOTOGRAM.TITLE.ACTIVITY\' | translate }}" icon-on="ion-ios-heart" icon-off="ion-ios-heart-outline" \nui-sref="tab.activity"><ion-nav-view name="tabActivity"></ion-nav-view></ion-tab><ion-tab \ntitle="{{ \'PHOTOGRAM.TITLE.PROFILE\' | translate }}" icon-on="ion-ios-person" icon-off="ion-ios-person-outline" \nui-sref="tab.account"><ion-nav-view name="tabProfile"></ion-nav-view></ion-tab></ion-tabs></ion-view>'),e.put("app/main/tab-account/account.html",'<ion-view cache-view="false" id="account-view"><ion-nav-title><span>{{ vm.user.attributes.name }}</span>\n</ion-nav-title><ion-nav-buttons side="right"><button settings-modal class="button button-icon icon ion-gear-a">\n</button></ion-nav-buttons><ion-content><div class="profile-top"><div class="row"><div class="col-25"><img \nclass="avatar" user-avatar ng-model="currentUser" ng-src="{{ currentUser.photo.url() || \'img/user.png\' }}"></div><div \nclass="col col-statics"><div class="row"><div class="col"><span ng-if="!vm.loading" class="text-center">\n{{ vm.user.attributes.galleriesTotal || 0}}</span><ion-spinner ng-if="vm.loading"></ion-spinner><h3 \ntranslate="postsText"></h3></div><div class="col" ng-click="vm.openFollowers()"><span ng-if="!vm.loading" \nclass="text-center">{{ vm.user.attributes.followersTotal || 0}}</span><ion-spinner ng-if="vm.loading"></ion-spinner><h3\n translate="followersText"></h3></div><div class="col" ng-click="vm.openFollowing()"><span ng-if="!vm.loading" \nclass="text-center">{{ vm.user.attributes.followingsTotal || 0}}</span><ion-spinner ng-if="vm.loading"></ion-spinner>\n<h3 translate="followingText"></h3></div></div><div class="row col-edit"><div class="col"><button profile-modal-edit \nuser="vm.user" class="button"><div translate="editProfile"></div></button></div></div></div></div><div class="padding">\n<span class="user-username">{{ vm.user.attributes.name }}</span><p class="user-status">{{ vm.user.attributes.status }}\n</p></div></div><div class="item bar"><div class="button-bar"><button class="button button-icon icon ion-grid" \nng-class="{\'active\': vm.tab.grid}" ng-click="vm.changeTab(\'grid\')"></button> <button \nclass="button button-icon icon ion-ios-camera-outline" ng-class="{\'active\': vm.tab.album}" \nng-click="vm.changeTab(\'album\')"></button> <button class="button button-icon icon ion-drag" \nng-class="{\'active\': vm.tab.list}" ng-click="vm.changeTab(\'list\')"></button> <button \nclass="button button-icon icon ion-ios-location-outline" ng-class="{\'active\': vm.tab.map}" \nng-click="vm.changeTab(\'map\')"></button></div></div><div class="tab" ng-if="vm.tab.grid && !vm.loading"><div \nclass="item item-divider" translate="recent"></div><photo-grid username="vm.user.username" on-reload="onReload">\n</photo-grid></div><div class="tab" ng-if="vm.tab.album && !vm.loading"><div class="item item-divider" \ntranslate="albums"></div><album-grid username="vm.user.username" on-reload="onReload"></album-grid></div><div \nclass="tab" ng-if="vm.tab.list && !vm.loading"><div class="item item-divider" translate="recent"></div><photo-list \nusername="vm.user.username" on-reload="onReload"></photo-list></div><div class="tab" ng-if="vm.tab.map && !vm.loading">\n<div class="item item-divider" translate="map"></div><map-photo-user username="vm.user.username" on-reload="onReload">\n</map-photo-user></div></ion-content></ion-view>'),e.put("app/main/tab-activity/activity.html",'<ion-view class="list-activity"><ion-nav-title><span translate="activities"></span></ion-nav-title><ion-content \nscroll-sista=""><div class="center padding" ng-if="loading"><ion-spinner></ion-spinner></div><div \nclass="center padding" ng-if="vm.showErrorView()"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-positive" ng-click="vm.onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="vm.showEmptyView()"><div class="error"><i class="icon icon-large ion-android-alert"></i>\n<p>{{ "activityNotFoundText" | translate }}</p></div></div><ion-refresher pulling-text="{{\'loadingText\'| translate}}" \non-refresh="onReload()"></ion-refresher><div class="list"><div class="item item-avatar item-animate1" \nng-repeat="item in vm.data | orderBy:\'createdAt\':true"><img ng-src="{{ item.user.photo._url  || \'./img/user.png\'}}"><h2\n ng-click="vm.openProfile(item.user.username)">{{ item.user.name}}</h2><div class="text">{{ item.action | translate }}\n</div><p>{{ item.createdAt | amTimeAgo }}</p><div class="img-right" ng-if="item.item.gallery"><img \nng-src="{{ item.item.gallery.attributes.imageThumb._url}}"></div><div class="item-button-right" \nng-if="!item.item.gallery"><button class="button button-positive button-outline icon" \nng-class="{\'ion-ios-person-outline\': item.user.isFollow, \'ion-ios-personadd-outline\': !item.user.isFollow}" \nng-click="vm.follow(user)"></button></div></div></div><ion-infinite-scroll on-infinite="onLoadMore()" \nng-if="vm.moreDataCanBeLoaded()" spinner distance="1%"></ion-infinite-scroll></ion-content></ion-view>'),e.put("app/main/tab-home/home.html",'<ion-view class="view-home"><ion-nav-buttons side="left"><button \nclass="button button-icon icon ion-ios-personadd-outline" ui-sref="tab.homeUserlist"></button></ion-nav-buttons>\n<ion-nav-title><span class="icon2-logo"></span></ion-nav-title><ion-content><ion-refresher pulling-text="Loading" \non-refresh="onReload()"></ion-refresher><photo-list profile="true" load="vm.openProfile" open-likers="vm.openLikers" \non-reload="onReload"></photo-list></ion-content></ion-view>'),e.put("app/main/tab-search/search.html",'<ion-view><ion-nav-title><span>{{ \'searchText\' | translate }}</span></ion-nav-title><ion-nav-buttons side="right">\n<button class="button button-icon ion-ios-location" ui-sref="tab.map"></button></ion-nav-buttons><ion-header-bar \nclass="bar bar-{{theme}} bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="search" ng-model="params.search" ng-change="onSearch()" \nng-model-options="{debounce:1000}" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-clear" ng-if="search.length" ng-click="clearSearch()">{{ "cancelText" | translate }}</button>\n</ion-header-bar><ion-content class="has-subheader"><ion-refresher pulling-text="Loading" on-refresh="onReload()">\n</ion-refresher><div class="center padding" ng-if="showErrorView()"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView()"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="loading"><ion-spinner>\n</ion-spinner></div><div class="row animated fadeIn" ng-if="$index % 3 === 0" \nng-repeat="image in data | orderBy:\'createdAt\':true"><div class="col col-33 item-animate1" \nng-if="$index < data.length" ui-sref="tab.searchProfile({username: data[$index].user.username})"><img ng-if="profile" \nprofile-modal user="data[$index].user.obj" ng-src="{{ ::data[$index].imageThumb._url}}" width="100%"> <img \nng-if="!profile" ng-src="{{ ::data[$index].imageThumb._url}}" width="100%"></div><div class="col col-33 item-animate1" \nng-if="$index + 1 < data.length" ui-sref="tab.searchProfile({username: data[$index].user.username})"><img \nng-if="profile" profile-modal user="data[$index + 1].user.obj" ng-src="{{ ::data[$index + 1].imageThumb._url}}" \nwidth="100%"> <img ng-if="!profile" ng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"></div><div \nclass="col col-33 item-animate1" ng-if="$index + 2 < data.length" \nui-sref="tab.searchProfile({username: data[$index].user.username})"><img ng-if="profile" profile-modal \nuser="data[$index + 2].user.obj" ng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"> <img ng-if="!profile" \nng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"></div></div><ion-infinite-scroll \non-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded()" spinner distance="1%"></ion-infinite-scroll></ion-content>\n</ion-view>'),e.put("app/main/tab-search-map/searchMap.html",'<ion-view id="view-map"><ion-nav-title>{{ \'mapTitle\' | translate }}</ion-nav-title><ion-content scroll="false"><div \nid="map_canvas" data-tap-disabled="true"></div></ion-content><ion-footer-bar><div class="row" ng-if="loading"><div \nclass="col"><div class="center"><ion-spinner></ion-spinner></div></div></div><button ng-if="!loading" \nclass="button button-positive button-block button-outline" ng-click="onSearchHere()">{{ \'searchInHere\' | translate }}\n</button></ion-footer-bar></ion-view>'),e.put("app/main/user-avatar/user-avatar.html",'<ion-view id="user-layout" class="bg-animate"><ion-content class="padding view-avatar"><div class="row step1"><div \nclass="col"><img class="avatar" user-avatar ng-model="vm.user" ng-src="{{ vm.user._url || \'img/user.png\' }}"></div>\n</div><div class="step2"><form><label class="item item-input"><i class="icon icon-envelope placeholder-icon"></i> \n<input type="email" name="email" ng-model="vm.form.email" disabled="disabled"></label></form><formly-form \nmodel="vm.form" fields="vm.formFields" form="vm.rForm"></formly-form></div><div class="step3"><button \nng-click="vm.submitAvatar()" class="button button-block button-positive" translate="submit"></button></div>\n</ion-content></ion-view>'),e.put("app/main/user-followers/user-followers.html",'<ion-view id="user-list"><ion-nav-title><span translate="followersText"></span></ion-nav-title><ion-header-bar \nclass="bar bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="list"><div ng-repeat="user in vm.users | filter:searchValue"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" \nng-click="vm.follow(user)"><div ng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>\nUnfollow</div></button> </a><span class="row"><span class="col" ng-repeat="gallery in user.galleries"><img \nng-src="{{ gallery.imageThumb._url}}" id="{{ ::gallery.id}}"></span></span></div></div></ion-content></ion-view>'),e.put("app/main/user-following/user-following.html",'<ion-view id="user-list"><ion-nav-title><span translate="followingText"></span></ion-nav-title><ion-header-bar \nclass="bar bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="list"><div ng-repeat="user in vm.users | filter:searchValue"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" \nng-click="vm.follow(user)"><div ng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>\nUnfollow</div></button> </a><span class="row"><span class="col" ng-repeat="gallery in user.galleries"><img \nng-src="{{ gallery.imageThumb._url}}" id="{{ ::gallery.id}}"></span></span></div></div></ion-content></ion-view>'),e.put("app/main/user-intro/user-intro.html",'<ion-view id="user-layout" class="view-intro bg-animate" cache-view="false"><div class="bar bar-header"><ion-language>\n</ion-language></div><ion-content scroll="false"><div class="intro-slider"><ion-slide-box active-slide="slideIndex" \nshow-pager="true" on-slide-changed="vm.slideChanged($index)"><ion-slide ng-repeat="item in vm.slides track by $index">\n<div class="content" ng-if="$index == vm.slideIndex"><span class="top"><h2>{{ item.text | translate }}</h2></span><div \nclass="phone {{ vm.device }}"><img ng-src="{{ item.img }}"></div></div></ion-slide></ion-slide-box></div><button \nclass="button button-positive button-fab left" ng-if="vm.slideIndex" ng-click="vm.previous()"><i \nclass="icon ion-ios-arrow-left"></i></button> <button class="button button-positive button-fab right" \nng-hide="vm.slideIndex === vm.slides.length-1" ng-click="vm.next()"><i class="icon ion-ios-arrow-right"></i></button>\n</ion-content><ion-footer-bar><facebook-login></facebook-login><div class="row"><button \nclass="button button-block button-calm" translate="register" signup-modal></button> <button \nclass="button button-block button-positive" translate="signin" signin-modal></button></div></ion-footer-bar></ion-view>'),e.put("app/main/user-layout/user-layout.html",'<ion-view id="user-layout" class="bg-animate"><ion-content padding="false"><ion-nav-view></ion-nav-view></ion-content>\n</ion-view>'),e.put("app/main/user-likers/user-likers.html",'<ion-view id="user-list"><ion-nav-title><span translate="likersText"></span></ion-nav-title><ion-header-bar \nclass="bar bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="list"><div ng-repeat="user in vm.users | filter:searchValue"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" \nng-click="vm.follow(user)"><div ng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>\nUnfollow</div></button> </a><span class="row"><span class="col" ng-repeat="gallery in user.galleries"><img \nng-src="{{ gallery.imageThumb._url}}" id="{{ ::gallery.id}}"></span></span></div></div></ion-content></ion-view>'),e.put("app/main/user-list/user-list.html",'<ion-view id="user-list" cache-view="false"><ion-nav-title><span translate="findPeople"></span></ion-nav-title>\n<ion-header-bar class="bar bar-{{theme}} bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="showErrorView()"><div \nclass="error"><i class="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button\n class="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView()"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="vm.loading"><ion-spinner>\n</ion-spinner></div><ion-refresher pulling-text="{{\'loadingText\'| translate}}" on-refresh="vm.onReload()">\n</ion-refresher><div class="list"><div ng-repeat="user in vm.data | filter:searchValue | orderBy:\'createdAt\':true"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-disabled="user.loading" \nng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" ng-click="vm.follow(user)"><div \nng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>Unfollow</div></button> </a><span\n class="row"><span class="col" ng-repeat="gallery in user.galleries"><img ng-src="{{ gallery.imageThumb._url}}" \nid="{{ ::gallery.id}}"></span></span></div></div><ion-infinite-scroll on-infinite="vm.onLoadMore()" \nng-if="vm.moreDataCanBeLoaded()" spinner distance="1%"></ion-infinite-scroll></ion-content></ion-view>'),
e.put("app/main/user-merge/merge.html",'<ion-view id="user-layout" class="bg-animate" cache-view="false"><ion-content class="view-avatar padding"><div \nclass="row step1"><div class="col"><img class="avatar" user-avatar \nng-src="{{ tempUser.attributes.photo._url || \'./img/user.png\' }}"></div></div><div class="step2"><formly-form \nmodel="vm.form" fields="vm.formFields" form="rForm"><input type="hidden" ng-model="vm.form.facebookimg"></formly-form>\n</div><div class="padding step3"><button ng-click="vm.submit(rForm, vm.form)" \nclass="button button-block button-facebook"><i class="icon ion-social-facebook"></i> <span translate="mergeAccount">\n</span></button></div></ion-content></ion-view>'),e.put("app/component/ion-photo/view/filter.modal.html",'<ion-modal-view id="photo-filter"><ion-header-bar class="bar bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModalFilter()"></button><div \nclass="title">{{ \'Filter\' | translate }}</div><button class="button button-icon" ng-click="submitFilter()"><i \nclass="icon ion-ios-arrow-thin-right"></i></button></ion-header-bar><ion-content><div class="box-image"><img \nid="image" src="{{form.photo}}" ng-hide="loading"><ion-spinner ng-show="loading"></ion-spinner></div><img id="image3" \nsrc="" style="display: none"><div ng-show="showFilter" class="slider-filters animate1"><ion-scroll direction="x" \nclass="image-filter"><a ng-repeat="filter in imageFilters" ng-click="applyFilter(filter)"><p>{{ filter.name }}</p><img \nid="{{filter.id}}" class="img-filter" src=""></a></ion-scroll><div class="row"><div class="col"><button \nclass="button button-block bold">Filter</button></div><div class="col"><button class="button button-block" \nng-click="actionShowFilter(false)">Edit</button></div></div></div><div ng-hide="showFilter" class="slider-filters"><div\n ng-show="filterEdit" class="slider-filters"><p class="text-center">{{filter.name}}</p><div \nclass="item range range-positive"><input type="range" min="-100" max="100" ng-model="filter.slider.value" \nng-model-options="{debounce:100}" step="0.1"></div><div class="row"><div class="col"><button \nclass="button button-block" ng-click="cancelFilter(filter)">Cancel</button></div><div class="col"><button \nclass="button button-block bold" ng-click="doneFilter()">Done</button></div></div></div><div ng-show="!filterEdit" \nclass="slider-filters"><ion-scroll direction="x"><a ng-repeat="filter in filters" ng-click="selectFilter(filter)"><p>\n{{ filter.name }}</p><i class="icon {{filter.icon}}"></i> </a><a ng-click="reset()"><p>Reset</p><i \nclass="icon ion-android-refresh"></i></a></ion-scroll><div class="row"><div class="col"><button \nclass="button button-block" ng-click="actionShowFilter(true)">Filter</button></div><div class="col"><button \nclass="button button-block bold">Edit</button></div></div></div></div></ion-content></ion-modal-view>'),e.put("app/component/ion-photo/view/modal.share.photo.html",'<ion-modal-view class="modal-share"><ion-header-bar class="bar-dark"><div class="title">{{ ::\'Share\' | translate }}\n</div><button class="button button-positive" ng-click="modal.hide()"><i class="icon ion-arrow-right-b"></i></button>\n</ion-header-bar><ion-content ng-cloak><div id="image"><img ng-src="{{ ::form.photo}}"><div class="title">\n{{ ::form.title }}</div></div><ul class="list"><li class="padding"><button ng-repeat="social in sociais" \nng-click="share(form, social)" class="button button-block button-{{ social }}"><i class="icon ion-social-{{ social }}">\n</i> {{ ::social | uppercase }}</button></li></ul></ion-content></ion-modal-view>')}])}();
//# sourceMappingURL=../maps/scripts/app-f754f2b875.js.map
