/**
 * @license
 * Copyright 2010 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function MarkerClusterer(e,t,o){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var n=o||{};this.gridSize_=n.gridSize||60,this.minClusterSize_=n.minimumClusterSize||2,this.maxZoom_=n.maxZoom||null,this.styles_=n.styles||[],this.imagePath_=n.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=n.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=n.zoomOnClick&&(this.zoomOnClick_=n.zoomOnClick),this.averageCenter_=!1,void 0!=n.averageCenter&&(this.averageCenter_=n.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var r=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=r.map_.getZoom();r.prevZoom_!=e&&(r.prevZoom_=e,r.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){r.redraw()}),t&&t.length&&this.addMarkers(t,!1)}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,o){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=t,this.padding_=o||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}!function(){"use strict";angular.module("starter",["ionic","formlyIonic","ngMessages","ngCookies","ngStorage","pascalprecht.translate","tmh.dynamicLocale","angularMoment","ngFacebook","angular-cache","ngSanitize","mentio","ion-affix","jett.ionic.scroll.sista","ngCordova","ionic.components","app.main"])}(),function(){"use strict";angular.module("ionic.components",["ion-language","ion-location","ion-photo"])}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,o){function n(){var e=o.href;return window.cordova?window.cordova.ThemeableBrowser.open(e,"_blank",{statusbar:{color:"#ffffffff"},toolbar:{height:44,color:"#f0f0f0ff"},title:{color:"#000",showPageTitle:!0},backButtonCanClose:!0}):window.open(e),!1}t.bind("click",n)}}}angular.module("starter").directive("href",e)}(),function(){"use strict";angular.module("app.main",["ionic","ngCordova"])}(),function(){"use strict";function e(e,t,o,n){t.useLoader("$translatePartialLoader",{urlTemplate:"{part}/i18n/{lang}.json"}),t.useSanitizeValueStrategy(null),t.useLocalStorage(),n.localeLocationPattern("../bower_components/angular-i18n/angular-locale_{{locale}}.js");var r=navigator.language||navigator.userlanguage,i=r.split("-")[0],a=o.preferredLocale,s=_.some(o.locales,{code:i});s&&(a=o.locales.filter(function(e){return a==e.code})[0].code),t.preferredLanguage(a),moment.locale(a)}e.$inject=["$translatePartialLoaderProvider","$translateProvider","AppConfig","tmhDynamicLocaleProvider"],angular.module("ion-language",["ngCookies","pascalprecht.translate","tmh.dynamicLocale"]).config(e)}(),function(){"use strict";angular.module("ion-location",["ionic"])}(),function(){"use strict";angular.module("ion-photo",["ionic","ngCordova","jrCrop"]).constant("config",{path:"app/component/ion-photo"})}(),function(){"use strict";angular.module("app.main")}(),function(){"use strict";function e(e){e.debugInfoEnabled(!1)}function t(e,t,o,n){Parse.initialize(e.parse.appId),Parse.serverURL=e.parse.server,n.currentUser=Parse.User.current(),t.unit||(t.unit=e.map.unit),t.mapType||(t.mapType=e.map.type),console.log(n.currentUser),n.currentUser||o.path("/")}function o(e,t,o,n,r,i,a,s){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.disableScroll(!0),window.StatusBar.styleLightContent()),e.registerBackButtonAction(function(e){e.preventDefault()},100),t.lang?o.use(t.lang):"undefined"!=typeof navigator.globalization&&n.getPreferredLanguage().then(function(e){o.use(e.value.split("-")[0])},null),navigator&&navigator.splashscreen&&r.hide()})}function n(e){e.platform.ios.backButton.previousTitleText(" ").icon("ion-ios-arrow-left"),e.platform.android.backButton.previousTitleText(" ").icon("ion-ios-arrow-left"),e.views.swipeBackEnabled(!1),e.backButton.text(" ").icon("ion-ios-arrow-left"),e.tabs.position("bottom"),e.navBar.alignTitle("center"),e.views.maxCache(1)}function r(e,t){window.cordova||(e.setAppId(t.facebookAppId),e.setPermissions("id,name,email,user_likes,bio"))}function i(){if(!window.cordova){console.log("Facebook Browser");var e=window.navigator.language||window.navigator.userLanguage,t=e.substring(0,2)+"_"+e.substring(3,5).toUpperCase();!function(e,o,n){var r,i=e.getElementsByTagName(o)[0];e.getElementById(n)||(r=e.createElement(o),r.id=n,r.src="http://connect.facebook.net/"+t+"/sdk.js",i.parentNode.insertBefore(r,i))}(document,"script","facebook-jssdk")}}t.$inject=["AppConfig","$localStorage","$location","$rootScope"],o.$inject=["$ionicPlatform","$localStorage","$translate","$cordovaGlobalization","$cordovaSplashscreen","ConnectMonitor","AppConfig","User"],e.$inject=["$compileProvider"],r.$inject=["$facebookProvider","AppConfig"],n.$inject=["$ionicConfigProvider"],angular.module("starter").run(t).run(o).run(i).config(e).config(r).config(n)}(),function(){"use strict";function e(){return{path:"app/module/photogram",app:{name:"Photogram",url:"http://photogramapp.com",image:"http://photogramapp.com/social-share.jpg"},routes:{home:"tab.home",login:"user.intro"},statusBarColor:"#00796B",gaTrackingId:"UA-69485876-2",facebookAppId:"1024016557617380",parse:{appId:"myAppId",server:"https://photogramapp.com/parse/"},onesignal:{id:"7b08c66d-d5a3-47b9-b091-b7f4a5bb7624",google:"AIzaSyCEBeAMSs4nrAC-2cvG6N6Q_KqJpnUrnh0"},map:{unit:"mi",type:"normal"},locales:[{translation:"portugues",code:"pt"},{translation:"english",code:"en"},{translation:"turkish",code:"tr"},{translation:"persian",code:"fa"},{translation:"german",code:"de"}],preferredLocale:"en",DAO:{name:"photogram_db",tables:[{name:"User",columns:{id:"TEXT PRIMARY KEY",name:"TEXT",username:"TEXT",email:"TEXT",language:"TEXT",facebookimg:"TEXT",gender:"TEXT",img:"TEXT",facebook:"INTEGER",qtdFollow:"INTEGER",status:"TEXT",createdAt:"INTEGER",attributes:"TEXT"}},{name:"UserFollow",columns:{id:"TEXT PRIMARY KEY",user_id:"TEXT",followId:"TEXT"}},{name:"Gallery",columns:{id:"TEXT PRIMARY KEY",img:"TEXT",title:"TEXT",user_id:"TEXT",location:"TEXT",isLiked:"BOOLEAN",likes:"INTEGER",createdAt:"INTEGER"}},{name:"GalleryActivity",columns:{id:"TEXT PRIMARY KEY",action:"TEXT",img:"TEXT",userAvatar:"TEXT",userName:"TEXT",user_id:"TEXT",gallery_id:"TEXT",createdAt:"INTEGER"}},{name:"GalleryComment",columns:{id:"TEXT PRIMARY KEY",name:"TEXT",user_id:"TEXT",userName:"TEXT",gallery_id:"TEXT",createdAt:"INTEGER"}},{name:"GallerySetting",columns:{key:"TEXT",value:"TEXT"}}]}}}angular.module("ionic").constant("AppConfig",e())}(),function(){"use strict";function e(e,t,o){o.addPart("app"),e.state("loading",{url:"/",templateUrl:"app/main/loading/loading.html",controller:"LoadingCtrl",controllerAs:"vm"}).state("walkthrough",{url:"/walkthrough",templateUrl:"app/main/walkthrough/walkthrough.html",controller:"WalkthroughCtrl",controllerAs:"vm"}).state("user",{url:"/user","abstract":!0,templateUrl:"app/main/user-layout/user-layout.html"}).state("user.avatar",{url:"/avatar",templateUrl:"app/main/user-avatar/user-avatar.html",controller:"UserAvatarCtrl",controllerAs:"vm"}).state("user.intro",{url:"/intro",templateUrl:"app/main/user-intro/user-intro.html",controller:"UserIntroCtrl"}).state("user.merge",{url:"/merge",controller:"UserMergeCtrl",controllerAs:"vm",templateUrl:"app/main/user-merge/merge.html"}).state("logout",{url:"/logout",template:'<ion-view view-title="Logout" cache-view="false"><ion-content></ion-content></ion-view>',controller:["User","$state",function(e,t){e.logOut(),t.go("user.login",{clear:!0})}],controllerAs:"vm"}).state("profile",{url:"/profile/:username",templateUrl:"app/main/profile/profile.html",controllerAs:"vm"}).state("tab",{url:"/tab","abstract":!0,controller:"MainTabCtrl",controllerAs:"vm",templateUrl:"app/main/tab/main-tab.html"}).state("tab.home",{url:"/home",views:{tabHome:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"app/main/tab-home/home.html"}}}).state("tab.homeProfile",{url:"/home/:username",views:{tabHome:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("galleryComments",{url:"/home/:galleryId/comments",controller:"GalleryComment",controllerAs:"vm",templateUrl:"app/main/gallery-comment/gallery-comment.html"}).state("tab.homeGalleryLikers",{url:"/home/:galleryId/likers",views:{tabHome:{controller:"UserLikersCtrl",controllerAs:"vm",templateUrl:"app/main/user-likers/user-likers.html"}}}).state("tab.homeProfileFollowers",{url:"/home/:username/followers",views:{tabHome:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.homeProfileFollowing",{url:"/home/:username/follwing",views:{tabHome:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}).state("tab.homeUserlist",{url:"/home/userlist",views:{tabHome:{controller:"UserListCtrl",controllerAs:"vm",templateUrl:"app/main/user-list/user-list.html"}}}).state("tab.search",{url:"/search/:text",views:{tabSearch:{controller:"SearchCtrl",controllerAs:"vm",templateUrl:"app/main/tab-search/search.html"}}}).state("tab.map",{url:"/map",views:{tabSearch:{controller:"SearchMapCtrl",controllerAs:"vm",templateUrl:"app/main/tab-search-map/searchMap.html"}}}).state("tab.mapProfile",{url:"/map/:username",views:{tabSearch:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("tab.mapProfileFollowers",{url:"/map/:username/followers",views:{tabSearch:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.mapProfileFollowing",{url:"/map/:username/follwing",views:{tabActivity:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}).state("tab.account",{url:"/account",views:{tabProfile:{controller:"AccountCtrl",controllerAs:"vm",templateUrl:"app/main/tab-account/account.html"}}}).state("tab.accountFollowers",{url:"/account/:username/followers",views:{tabProfile:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.accountFollowing",{url:"/account/:username/follwing",views:{tabProfile:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}).state("tab.activity",{url:"/activity",views:{tabActivity:{controller:"ActivityCtrl",controllerAs:"vm",templateUrl:"app/main/tab-activity/activity.html"}}}).state("tab.activityProfile",{url:"/activity/:username",views:{tabActivity:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("tab.activityProfileFollowers",{url:"/activity/:username/followers",views:{tabActivity:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.activityProfileFollowing",{url:"/activity/:username/follwing",views:{tabActivity:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider","$translatePartialLoaderProvider"],angular.module("starter").config(e)}(),MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),o=new google.maps.LatLngBounds,n=0;e=t[n];n++)o.extend(e.getPosition());this.map_.fitBounds(o)},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(e,t){for(var o=0,n=e.length,r=n;0!==r;)r=parseInt(r/10,10),o++;return o=Math.min(o,t),{text:n,index:o}},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(e,t){for(var o,n=0;o=e[n];n++)this.pushMarkerTo_(o);t||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var o,n=0;o=this.markers_[n];n++)if(o==e){t=n;break}return-1==t?!1:(e.setMap(null),this.markers_.splice(t,1),!0)},MarkerClusterer.prototype.removeMarker=function(e,t){var o=this.removeMarker_(e);return!t&&o?(this.resetViewport(),this.redraw(),!0):!1},MarkerClusterer.prototype.removeMarkers=function(e,t){for(var o,n=!1,r=0;o=e[r];r++){var i=this.removeMarker_(o);n=n||i}return!t&&n?(this.resetViewport(),this.redraw(),!0):void 0},MarkerClusterer.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(e){this.map_=e},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),o=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),n=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),r=t.fromLatLngToDivPixel(o);r.x+=this.gridSize_,r.y-=this.gridSize_;var i=t.fromLatLngToDivPixel(n);i.x-=this.gridSize_,i.y+=this.gridSize_;var a=t.fromDivPixelToLatLng(r),s=t.fromDivPixelToLatLng(i);return e.extend(a),e.extend(s),e},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(e){for(var t,o=0;t=this.clusters_[o];o++)t.remove();for(var n,o=0;n=this.markers_[o];o++)n.isAdded=!1,e&&n.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,o=0;t=e[o];o++)t.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var o=6371,n=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),a=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),s=o*a;return s},MarkerClusterer.prototype.addToClosestCluster_=function(e){for(var t,o=4e4,n=null,r=(e.getPosition(),0);t=this.clusters_[r];r++){var i=t.getCenter();if(i){var a=this.distanceBetweenPoints_(i,e.getPosition());o>a&&(o=a,n=t)}}if(n&&n.isMarkerInClusterBounds(e))n.addMarker(e);else{var t=new Cluster(this);t.addMarker(e),this.clusters_.push(t)}},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),o=this.getExtendedBounds(t),n=0;e=this.markers_[n];n++)!e.isAdded&&this.isMarkerInBounds_(e,o)&&this.addToClosestCluster_(e)},Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,o=0;t=this.markers_[o];o++)if(t==e)return!0;return!1},Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,o=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,n=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(o,n),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var r=this.markers_.length;if(r<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),r==this.minClusterSize_)for(var i=0;r>i;i++)this.markers_[i].setMap(null);return r>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),o=this.getMarkers(),n=0;e=o[n];n++)t.extend(e.getPosition());return t},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var o,n=0;o=this.markers_[n];n++)o.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var r=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,r);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(i),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(e){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_,e),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}var t=this.getPanes();t.overlayMouseTarget.appendChild(this.div_);var o=this,n=!1;google.maps.event.addDomListener(this.div_,"click",function(e){n||o.triggerClusterClick(e)}),google.maps.event.addDomListener(this.div_,"mousedown",function(){n=!1}),google.maps.event.addDomListener(this.div_,"mousemove",function(){n=!0})},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(t.x-=this.iconAnchor_[0],t.y-=this.iconAnchor_[1]):(t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10)),t},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition,this.iconAnchor_=t.iconAnchor},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var o=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+o+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?t.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var n=this.textColor_?this.textColor_:"black",r=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+n+"; position:absolute; font-size:"+r+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove,function(){"use strict";function e(e){return function(t,o){if(!t)return t;var n=e("linky")(t,o),r="";angular.isDefined(o)&&(r=o);var i=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;n=t.replace(i,'$1<a href="#/tab/search/%23$2"'+r+">#$2</a>");var a=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return n=n.replace(a,'$1<a href="#/tab/home/$2" >@$2</a>')}}e.$inject=["$filter"],angular.module("starter").filter("hashtag",e)}(),function(){"use strict";function e(){return function(e,t){if(isNaN(t))return e;if(0>=t)return"";if(e){var o=e.split(/\s+/);o.length>t&&(e=o.slice(0,t).join(" ")+"…")}return e}}angular.module("starter").filter("words",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a,s){function l(l,c,u){c.bind("click",function(){l.formFields=i.login,l.routeLogged=a.routes.home,l.form={username:"",password:""},l.submitLogin=function(e,i){var a=angular.copy(i);return e.$valid?(t.start(),void o.signIn(a).then(function(e){console.log(e),s.currentUser=e,n.go(l.routeLogged,{clear:!0}),l.closeModal(),t.end()})["catch"](function(e){r.alert({title:"Error",text:"Incorrect username or password"}),t.end()})):!1},e.fromTemplateUrl("app/directive/SigninModalDirective.html",{scope:l,animation:"slide-in-up",focusFirstInput:!0}).then(function(e){l.modal=e,l.modal.show()}),l.closeModal=function(){l.modal.hide()},l.$on("$destroy",function(){l.modal.remove()})})}return{restrict:"A",link:l}}e.$inject=["$ionicModal","Loading","User","$state","Toast","UserForm","AppConfig","$rootScope"],angular.module("starter").directive("signinModal",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a,s){function l(l,c,u){c.bind("click",function(){l.formFields=e.register,l.routeLogged=t.routes.home,l.form={username:"",email:"",password:""},l.submitRegister=function(e,t){if(e.$valid){o.start();var a=angular.copy(t);n.signUp(a).then(function(e){console.log(e),n.signIn({username:a.username,password:a.password}).then(function(e){console.log(e),s.currentUser=Parse.User.current(),r.go("user.avatar",{clear:!0}),o.end(),l.closeModal()})["catch"](function(e){console.log(e),i.alert({title:"Alert",text:e.error}),o.end()})})["catch"](function(e){console.log(e),i.alert({title:"Alert",text:e.error}),o.end()})}},a.fromTemplateUrl("app/directive/SignupModalDirective.html",{scope:l,animation:"slide-in-up",focusFirstInput:!0}).then(function(e){l.modal=e,l.modal.show()}),l.closeModal=function(){l.modal.hide()},l.$on("$destroy",function(){l.modal.remove()})})}return{restrict:"A",link:l}}e.$inject=["UserForm","AppConfig","Loading","User","$state","Toast","$ionicModal","$rootScope"],angular.module("starter").directive("signupModal",e)}(),function(){"use strict";function e(e){function t(e,t){t.bind("click",function(){var e="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S";window.cordova?cordova.ThemeableBrowser.open(e,"_blank",{statusbar:{color:"#ffffffff"},toolbar:{height:44,color:"#f0f0f0ff"},title:{color:"#333333",showPageTitle:!0},closeButton:{image:"close",imagePressed:"close_pressed",align:"left",event:"closePressed"},backButtonCanClose:!0}):window.open(e,"_blank")})}return{restrict:"A",link:t}}e.$inject=["$cordovaInAppBrowser"],angular.module("starter").directive("buy",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{targetModel:"=compareTo"},require:"ngModel",link:function(e,t,o,n){var r=function(){var o=t.val(),n=e.targetModel;return null!==n?o===n:!1};e.$watch(r,function(e){n.$setValidity("errorCompareTo",e)})}}}angular.module("starter").directive("compareTo",e)}(),function(){"use strict";function e(e,t){function o(o,n,r){n.bind("click",function(){o.storage=e,o.distances=[{val:.2,text:"perto"},{val:.6,text:"longe"},{val:1,text:"1 "+o.storage.unit},{val:5,text:"5 "+o.storage.unit},{val:10,text:"10 "+o.storage.unit},{val:25,text:"25 "+o.storage.unit},{val:50,text:"50 "+o.storage.unit},{val:100,text:"100 "+o.storage.unit}],t.fromTemplateUrl("app/directive/distanceModal.html",{scope:o}).then(function(e){o.modal=e,o.modal.show()}),o.onDistanceSelected=function(e){console.log("Distance",e)},o.closeDistanceModal=function(){o.modal.hide(),o.modal.remove()}})}return{restrict:"A",link:o}}e.$inject=["$localStorage","$ionicModal"],angular.module("starter").directive("distanceModal",e)}(),function(){"use strict";function e(e){function t(t,o,n,r){r.$asyncValidators.email=function(t,o){return console.log(o),o?e.validateEmail(o):void 0}}return{require:"ngModel",link:t}}e.$inject=["User"],angular.module("starter").directive("emailValidator",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a,s,l,c){function u(u,d,m){function p(){console.log("Facebook login"),u.loading=!0,i.logIn().then(function(t){if(console.log(t),"connected"===t.status){var u=null;return i.me().then(function(e){return u=e,s.findByEmail(e.email)}).then(function(e){return e.id?e.get("authData").facebook.id===u.id?s.signInViaFacebook(t):void 0:s.signInViaFacebook(t)}).then(function(){return s.updateWithFacebookData(u)}).then(function(t){l.currentUser=t,o.go(r.routes.home,{clear:!0}),console.log(t,t.attributes),l.$broadcast("onUserLogged"),e.end(),c.alert({text:n.instant("loggedInAsText")+" "+t.get("email")})},function(e){a.alert(e)})}})["catch"](function(t){console.log("err"),e.end()})}u.facebookStatus=null,t.ready(function(){i.me().then(function(e){console.log(e),u.me=e})["catch"](function(){console.log("Not logged")})}),d.bind("click",p)}return{restrict:"E",link:u,template:'<button class="button button-block button-facebook"><i class="icon ion-social-facebook"></i> <ion-spinner ng-if="loading"></ion-spinner> <span ng-if="!loading">{{ me.name || \'loginWithFacebook\'| translate}}</span> </button>'}}e.$inject=["Loading","$ionicPlatform","$state","$translate","AppConfig","Facebook","Dialog","User","$rootScope","Toast"],angular.module("starter").directive("facebookLogin",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",link:function(o,n,r){function i(){e(function(){n[0].focus(),n[0].click(),window.cordova&&cordova.plugins.Keyboard.show()},750)}t.$on("openKeyboard",i),i()}}}e.$inject=["$timeout","$rootScope"],angular.module("starter").directive("focusMe",e)}(),function(){"use strict";function e(){function e(e,t,o){t.bind("click",function(){console.log(e.item),t.addClass("happy")})}return{restrict:"A",scope:{item:"="},link:e}}angular.module("starter").directive("heart",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{icon:"@",loading:"="},template:'<div class="padding text-center loading" ng-show="loading"><ion-spinner icon="{{ icon }}"></ion-spinner></div>'}}function t(e,t){e.$on("ionicLoading:true",function(o){e.loading=!0,t.show(o)}),e.$on("ionicLoading:false",function(){e.loading=!1,t.hide()})}function o(e,t){function o(t){e.$broadcast("ionicLoading:true",t)}function n(){t(function(){e.$broadcast("ionicLoading:false")},parseInt(r+"000"))}var r=0;return{start:o,end:n}}t.$inject=["$rootScope","$ionicLoading"],o.$inject=["$rootScope","$timeout"],angular.module("starter").directive("ionLoading",e).run(t).factory("Loading",o)}(),function(){"use strict";function e(){return{restrict:"E",scope:{loading:"=",icon:"@"},template:'<div class="padding text-center loading" ng-show="loading"><ion-spinner icon="{{ icon }}"></ion-spinner></div>'}}angular.module("starter").directive("loading",e)}(),function(){"use strict";
function e(e,t,o){var n=t.path;return{restrict:"A",scope:{user:"="},link:function(t,r,i){function a(){e.fromTemplateUrl(n+"/directive/follow/photogram.follow.modal.html",{scope:t}).then(function(e){t.modalFollow=e,console.log("Open modal follow",t.user),o.getFollow(t.user).then(function(e){console.log(e),t.data=e,t.modalFollow.show()})})}function s(){t.modalFollow.hide(),t.modalFollow.remove()}r.bind("click",a),t.closeModal=s}}}e.$inject=["$ionicModal","AppConfig","Photogram"],angular.module("starter").directive("photogramFollow",e)}(),function(){"use strict";function e(e,t,o,n,r,i){function a(a,s,l){function c(){v=!0,b=!1,w=!1,y=!1}function u(){b=!0,v=!1,w=!1,y=!1}function d(){w=!0,b=!1,v=!1,y=!1}function m(){y=!0,w=!1,b=!1,v=!1}function p(e){x=!1,e>0&&(x=!0)}function g(e){for(var t=0;t<e.length;t++)a.data.push(e[t])}function h(e){a.params.page=e}function f(){e.feed(a.params).then(function(e){p(e.length),h(a.params.page+1),g(e),0===a.data.length?m():u(),a.$broadcast("scroll.infiniteScrollComplete"),a.$broadcast("scroll.refreshComplete"),a.loading=!1})["catch"](function(){0===a.data.length&&d(),x=!1,a.$broadcast("scroll.refreshComplete")})}a.params={},a.params.page=1,a.data=[],a.username&&(a.params.username=a.username),a.loading=!0,t.$on("photoInclude",function(e,t){t.objectId&&(t.id=t.objectId),a.data.unshift(t)}),f();var v=!1,b=!1,w=!1,y=!1,x=!1;a.onLoadMore=function(){f()},a.moreDataCanBeLoaded=function(){return x},a.showLoadingView=function(){return v},a.showGalleries=function(){return b},a.showErrorView=function(){return w},a.showEmptyView=function(){return y},a.onReload=function(){a.params.page=0,a.data=[],c(),f(),a.$broadcast("scroll.refreshComplete")},a.action=function(t){function s(i){switch(i){case 0:n.share(u);break;case 1:r.modal(t);break;case 2:o.confirm({title:"Delete photo",template:"Are you sure?"}).then(function(o){o&&e.destroy(t).then(function(){console.log("Photo deleted"),a.$emit("PhotogramHome:reload")})})}return!0}var l=[{text:'<i class="icon ion-share"></i>Share'},{text:'<i class="icon ion-alert-circled"></i>Report'}];if(console.log(t),Parse.User.current().id===t.user_id){var c={text:'<i class="icon ion-trash-b"></i>Delete your photo'};l.push(c)}var u={text:t.title,image:t.img},d={buttons:l,titleText:"Photo",cancelText:"Cancel",buttonClicked:s};i.show(d)}}return{restrict:"E",scope:{username:"=",user:"=",profile:"="},templateUrl:"app/directive/photoGridDirective.html",link:a}}e.$inject=["Gallery","$rootScope","$ionicPopup","Share","FeedbackModal","$ionicActionSheet"],angular.module("starter").directive("photoGrid",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a,s,l,c,u,d){return{restrict:"A",scope:{ngModel:"="},link:function(t,m){function p(){t.currentUser=Parse.User.current(),t.nocomments=!1,t.loading=!1,t.form={gallery:t.ngModel.galleryObj,text:""}}function g(){console.log(t.ngModel),p(),t.loading=!0,t.formFields=d.formComment,t.submitComment=b,t.deleteComment=h,t.editComment=f,t.closeModal=function(){t.modal.hide(),t.modal.remove()},v(),t.myIndexValue="5",t.searchPeople=function(e){var n=[];return a.getFollowing().then(function(r){return _.each(r,function(t){t.imageUrl=t.photo?t.photo._url:"img/user.png",t.bio=t.status,t.name.toUpperCase().indexOf(e.toUpperCase())>=0&&n.push(t)}),t.people=n,console.log(n),o.when(n)})},t.getPeopleTextRaw=function(e){return"@"+e.username},e.fromTemplateUrl("app/directive/photoCommentDirective.html",{scope:t,focusFirstInput:!0}).then(function(e){t.modal=e,t.modal.show()})}function h(e){console.log(e),s.confirm("Delete comment","You are sure?").then(function(t){console.log(t),t&&u.destroy(e).then(function(e){console.log(e),v()})})}function f(e){console.log(e),t.data=angular.copy(e),i.show({template:'<input type="text" ng-model="data.text">',title:"Edit comment",scope:scope,buttons:[{text:"Cancel"},{text:"<b>OK</b>",type:"button-positive",onTap:function(e){return console.log(t.data),t.data.text?t.data:void e.preventDefault()}}]}).then(function(e){console.log(e),e&&u.update(e).then(function(e){console.log(e),v()})})}function v(){t.loading=!0,c.comments({galleryId:t.ngModel.id}).then(function(e){t.comments=e,t.ngModel.comments=e,t.loading=!1,$timeout(function(){n.scrollBottom()},1)})}function b(e,o){if(e.$valid){var n=angular.copy(o);console.log(n),r.start(),u.create(n).then(function(e){console.log(e),v(),l.$emit("openKeyboard"),r.end(),t.closeModal()})}}m.bind("click",g)}}}e.$inject=["$ionicModal","$http","$q","$ionicScrollDelegate","Loading","$ionicPopup","User","Dialog","$rootScope","Gallery","GalleryComment","GalleryForm"],angular.module("starter").directive("photoComment",e)}(),function(){"use strict";function e(e){return{restrict:"A",scope:{ngModel:"="},link:function(t,o){o.bind("click",function(){var o=t.ngModel;o.progress=!0,o.liked=!o.liked,e.likeGallery({galleryId:t.ngModel.galleryObj.id}).then(function(e){console.log(e),o.likes=e.likes,o.progress=!1,console.log(o,e),"like"===e.action&&(t.ngModel.isLiked=!0,t.ngModel.likesTotal+=1),"unlike"===e.action&&(t.ngModel.isLiked=!1,t.ngModel.likesTotal-=1)})})}}}e.$inject=["Gallery"],angular.module("starter").directive("photoLike",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a,s,l){function c(c,u,d){function m(){y=!0,x=!1,T=!1,_=!1}function p(){x=!0,y=!1,T=!1,_=!1}function g(){T=!0,x=!1,y=!1,_=!1}function h(){_=!0,T=!1,x=!1,y=!1}function f(e){k=!1,e>0&&(k=!0)}function v(e){for(var t=0;t<e.length;t++)c.data.push(e[t])}function b(e){c.params.page=e}function w(){e.feed(c.params).then(function(e){f(e.length),b(c.params.page+1),v(e),0===c.data.length?h():p(),c.loading=!1,c.$broadcast("scroll.infiniteScrollComplete"),c.$broadcast("scroll.refreshComplete")})["catch"](function(){0===c.data.length&&g(),k=!1,c.$broadcast("scroll.refreshComplete")})}c.params={},c.params.page=0,c.data=[],c.username&&(c.params.username=c.username),c.loading=!0,t.$on("photoInclude",function(e,t){t.objectId&&(t.id=t.objectId),c.data.unshift(t)}),c.openComment=function(e){r.go("galleryComments",{galleryId:e})},c.share=i.open,w();var y=!1,x=!1,T=!1,_=!1,k=!1;c.onLoadMore=function(){w()},c.moreDataCanBeLoaded=function(){return k},c.showLoadingView=function(){return y},c.showGalleries=function(){return x},c.showErrorView=function(){return T},c.showEmptyView=function(){return _},c.onReload=function(){c.params.page=0,c.data=[],m(),w(),c.$broadcast("scroll.refreshComplete")},t.$on("onUserLogged",c.onReload),c.action=function(t){function r(r){switch(r){case 0:s.modal(t.galleryObj);break;case 1:o.confirm({title:n.instant("deleteGalleryConfirmText"),template:n.instant("areSure")}).then(function(o){o&&e.destroy(t.galleryObj).then(function(){console.log("Photo deleted"),a.alert({title:"Photo",text:"Photo deleted"}),c.onReload()})})}return!0}var i=[{text:'<i class="icon ion-alert-circled"></i>'+n.instant("reportText")}];if(console.log(t),Parse.User.current().id===t.user.obj.id){var u={text:'<i class="icon ion-trash-b"></i>'+n.instant("deleteGallery")};i.push(u)}var d=({text:t.title,image:t.img},{buttons:i,cancelText:n.instant("cancelText"),buttonClicked:r});l.show(d)}}return{restrict:"E",scope:{username:"=",profile:"=",load:"=",openLikers:"="},templateUrl:"app/directive/photoListDirective.html",link:c}}e.$inject=["Gallery","$rootScope","$ionicPopup","$translate","$state","Share","Toast","FeedbackModal","$ionicActionSheet"],angular.module("starter").directive("photoList",e)}(),function(){"use strict";function e(e,t,o,n,r,i){return{restrict:"A",scope:{user:"="},template:"",link:function(a,s){function l(){var e=Parse.User.current().attributes;a.form={name:e.name,email:e.email,status:e.status,photo:e.photo,username:e.username,gender:e.gender,facebook:e.facebook},a.formFields=r.profile}function c(){a.linkFacebook=d,a.logout=u,a.submitUpdateProfile=m,a.closeModal=p,a.currentUser=t.currentUser,l(),e.fromTemplateUrl("app/directive/profile-edit-modal.html",{scope:a}).then(function(e){a.modal=e,a.modal.show()}),a.$on("$destroy",function(){a.modal.remove()})}function u(){i.go("logout"),a.closeModal()}function d(){o.facebookLink().then(function(e){console.log(e)})}function m(){var e=angular.copy(a.form);n.start(),o.update(e).then(function(e){a.user=e,t.currentUser=e,n.end(),a.closeModal()})}function p(){a.modal.hide()}s.bind("click",c)}}}e.$inject=["$ionicModal","$rootScope","User","Loading","UserForm","$state"],angular.module("starter").directive("profileModalEdit",e)}(),function(){"use strict";function e(e,t){function o(o,n){function r(){console.log(o.user.attributes),e.fromTemplateUrl("app/directive/profile-modal.html",{scope:o}).then(function(e){function n(){o.loadingFollow=!0;var e;e=o.user.follow?!1:!0,t.follow(o.user.userObj.id).then(function(e){console.log("Follow result",e),o.user.isFollow="follow"===e?!0:!1,"follow"==e&&(o.user.followersTotal+=1),"unfollow"==e&&(o.user.followersTotal-=1),o.loadingFollow=!1})}function r(){delete o.data,o.modalProfile.hide()}o.modalProfile=e,o.loadingFollow=!0,o.changeTab=i,o.follow=n,o.closeModal=r,o.modalProfile.show(),i("list")}),o.$on("$destroy",function(){o.modalProfile.remove()})}function i(e){"list"===e?o.tab={list:!0,grid:!1}:o.tab={list:!1,grid:!0}}n.bind("click",function(){console.log(o.username),t.profile(o.username).then(function(e){console.log(e),o.user=e,r()})})}return{restrict:"A",scope:{username:"="},link:o}}e.$inject=["$ionicModal","User"],angular.module("starter").directive("profileModal",e)}(),function(){"use strict";function e(e){return{restrict:"E",scope:{getData:"&source",ngModel:"=?",search:"=?filter"},templateUrl:"app/module/photogram/directive/search/search-directive.html",link:function(t,o,n){function r(o){o.length>n.minLength?e(function(){t.getData({str:o}).then(function(e){t.ngModel=e})},1e3):t.ngModel=[]}n.minLength=n.minLength||0,t.placeholder=n.placeholder||"",t.clear=function(){console.log("Limpar campo"),t.input="",t.$apply()},n["class"]&&o.addClass(n["class"]),n.source&&t.$watch("search.value",r)}}}e.$inject=["$timeout"],angular.module("starter").directive("ionSearch",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a,s,l){return{restrict:"A",template:"",link:function(n,a){function c(){n.form=i.getLoggedUser(),n.formFields=s.profile,n.languages=o.locales,n.language=t.use()}function u(){c(),e.fromTemplateUrl("app/directive/settings-modal.html",{scope:n}).then(function(e){n.modal=e,n.modal.show()})}function d(e){l.go(e),n.closeModal()}function m(){n.modal.hide(),n.modal.remove()}a.bind("click",u),n.closeModal=m,n.link=d,n.share=r.share,n.logout=function(){l.go(o.routes.login),n.closeModal()}}}}e.$inject=["$ionicModal","$translate","AppConfig","$cordovaInAppBrowser","Share","Auth","User","UserForm","$state"],angular.module("starter").directive("settingsModal",e)}(),function(){"use strict";function e(e){function t(t,o,n,r){r.$asyncValidators.username=function(t,o){return o?e.validateUsername(o):void 0}}return{require:"ngModel",restrict:"A",link:t}}e.$inject=["User"],angular.module("starter").directive("usernameValidator",e)}(),angular.module("ngLocale",[],["$provide",function(e){var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"],ERANAMES:["Antes de Cristo","Ano do Senhor"],ERAS:["a.C.","d.C."],FIRSTDAYOFWEEK:6,MONTH:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],SHORTDAY:["dom","seg","ter","qua","qui","sex","sáb"],SHORTMONTH:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],STANDALONEMONTH:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"d 'de' MMM 'de' y HH:mm:ss",mediumDate:"d 'de' MMM 'de' y",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"R$",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"pt-br",pluralCat:function(e,o){return e>=0&&2>=e&&2!=e?t.ONE:t.OTHER}})}]),function(){"use strict";var e=window.moment.defineLocale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"segs",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"});return e}(),function(){"use strict";function e(e){var t=[{key:"title",type:"input",templateOptions:{type:"text",placeholder:e.instant("PHOTOGRAM.FORM.TITLE"),icon:"icon-envelope",required:!0,iconPlaceholder:!0,focus:!0}},{key:"geo",type:"toggle",templateOptions:{label:e.instant("PHOTOGRAM.FORM.GEOLOCATION"),toggleClass:"positive"}}],o=[{key:"text",type:"input",templateOptions:{placeholder:e.instant("addComment"),type:"text",required:!0,focus:!0}}],n=[{key:"facebook",type:"toggle",templateOptions:{label:"Facebook",toggleClass:"positive"}},{key:"twitter",type:"toggle",templateOptions:{label:"Twitter",toggleClass:"positive"}},{key:"whatsapp",type:"toggle",templateOptions:{label:"Whatsapp",toggleClass:"positive"}},{key:"SMS",type:"toggle",templateOptions:{label:"SMS",toggleClass:"positive"}},{key:"email",type:"toggle",templateOptions:{label:"Email",toggleClass:"positive"}}];return{form:t,formComment:o,formShare:n}}e.$inject=["$translate"],angular.module("starter").factory("GalleryForm",e)}(),function(){"use strict";function e(e){function t(){return[{type:"input",key:"username",templateOptions:{type:"text",placeholder:e.instant("username"),icon:"icon-user",required:!0,iconPlaceholder:!0}},{type:"input",key:"password",templateOptions:{type:"password",placeholder:e.instant("password"),icon:"icon-lock",required:!0,iconPlaceholder:!0}}]}function o(){return[{type:"input",key:"username",templateOptions:{type:"text",placeholder:e.instant("username"),icon:"icon-user",required:!0,iconPlaceholder:!0}},{type:"input",key:"email",templateOptions:{type:"email",placeholder:e.instant("email"),icon:"icon-envelope",required:!0,iconPlaceholder:!0}},{type:"input",key:"password",templateOptions:{type:"password",placeholder:e.instant("password"),icon:"icon-lock",required:!0,iconPlaceholder:!0}}]}function n(){return[{key:"username",type:"input",templateOptions:{type:"text",placeholder:e.instant("username"),icon:"icon-ios-at",required:!0,iconPlaceholder:!0}},{key:"name",type:"input",templateOptions:{type:"text",placeholder:e.instant("name"),icon:"icon-user",required:!0,iconPlaceholder:!0}},{key:"status",type:"input",templateOptions:{type:"text",placeholder:e.instant("status"),icon:"ion-quote",required:!0,iconPlaceholder:!0}},{type:"select",key:"gender",templateOptions:{label:e.instant("gender"),options:[{label:e.instant("man"),id:"male"},{label:e.instant("woman"),id:"female"}],valueProp:"id",labelProp:"label"}}]}return{login:t(),register:o(),profile:n()}}e.$inject=["$translate"],angular.module("app.main").factory("UserForm",e)}(),function(){"use strict";function e(e,t,o,n){function r(){var e=n.defer();return i({title:"Choose an option",cancelText:"Cancel",options:[{text:"Photo Library"},{text:"Photo"}]}).then(function(e){var o;return 1===e&&(o="photoLibrary"),2===e&&(o="camera"),t.getPicture({sourceType:o})}).then(e.resolve)["catch"](e.reject),e.promise}function i(t){var r=n.defer();if(window.cordova){var i={title:t.title,buttonLabels:_.map(t.options,function(e){return e.text}),addCancelButtonWithLabel:t.cancelText,androidEnableCancelButton:!0,androidTheme:window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT};o.show(i).then(function(e){3!==e&&r.resolve(e),r.reject("cancel")})}else var a=e.show({buttons:t.options,titleText:t.title,cancelText:t.cancelText,cancel:function(){a()},buttonClicked:function(e){a(),3!==e&&r.resolve(e),r.reject("cancel")}});return r.promise}return{show:i,image:r}}e.$inject=["$ionicActionSheet","Camera","$cordovaActionSheet","$q"],angular.module("starter").factory("ActionSheet",e)}(),function(){"use strict";angular.module("starter").factory("Auth",["$q",function(e){function t(){return Parse.User.current()}function o(e){l=e}function n(){var t=e.defer();return null===l?(t.reject("Session token invalid"),t.promise):(Parse.User.current()?t.resolve(Parse.User.current()):Parse.User.become(l).then(t.resolve,t.reject),t.promise)}function r(t){var o=e.defer();return Parse.User.requestPasswordReset(t,{success:o.resolve,error:o.reject}),o.promise}function i(t){var o=e.defer();return Parse.User.requestPasswordReset(t,{success:o.resolve,error:o.reject}),o.promise}function a(t){var o=e.defer();return Parse.User.logIn(t.username,t.password,{success:o.resolve,error:o.reject}),o.promise}function s(){var t=e.defer();return Parse.User.logOut().then(t.resolve,t.reject),t.promise}var l=null;return{getLoggedUser:t,setSessionToken:o,ensureLoggedIn:n,recoverPassword:r,resetPassword:i,logIn:a,logOut:s}}])}(),function(){"use strict";function e(e,t){function o(o){var n=t.defer();if(window.cordova){var r=o.sourceType||Camera.PictureSourceType.CAMERA;"photoLibrary"===o.sourceType&&(r=Camera.PictureSourceType.PHOTOLIBRARY),"camera"===o.sourceType&&(r=Camera.PictureSourceType.CAMERA);var i={quality:70,targetWidth:800,targetHeight:800,saveToPhotoAlbum:!1,correctOrientation:!0,sourceType:r,destinationType:Camera.DestinationType.DATA_URL,encodingType:Camera.EncodingType.JPEG};e.getPicture(i).then(n.resolve,n.reject)}else{console.log("Input File");var a=angular.element('<input type="file" accept="image/x-png, image/gif, image/jpeg" max-size="2048" />');a[0].click(),a.on("change",function(e){var t=e.currentTarget.files[0],o=new FileReader;o.onload=function(e){n.resolve(e.target.result)},o.readAsDataURL(t)})}return n.promise}function n(e,o,n){var r=t.defer();return window.imageResizer.resizeImage(r.resolve,r.reject,e,o||1,n||1,{imageDataType:ImageResizer.IMAGE_DATA_TYPE_URL,resizeType:ImageResizer.RESIZE_TYPE_FACTOR,format:"jpg"}),r.promise}function r(e,o,n){var r=t.defer();return window.imageResizer.resizeImage(r.resolve,r.reject,e,o||640,n||640,{imageDataType:ImageResizer.IMAGE_DATA_TYPE_URL,resizeType:ImageResizer.RESIZE_TYPE_MIN_PIXEL,pixelDensity:!0,storeImage:!1,photoAlbum:!1,format:"jpg"}),r.promise}return{getPicture:o,resizeImage:r,toBase64Image:n}}e.$inject=["$cordovaCamera","$q"],angular.module("starter").service("Camera",e)}(),function(){"use strict";function e(e,t){function o(){ionic.Platform.isWebView()?(e.onLine=t.isOnline(),e.$apply(),e.$on("$cordovaNetwork:online",function(t,o){console.log("went online"),e.onLine=!0,e.$apply()}),e.$on("$cordovaNetwork:offline",function(t,o){console.log("went offline"),e.onLine=!1,e.$apply()})):(e.onLine=navigator.onLine,e.$apply(),window.addEventListener("online",function(t){console.log("went online"),e.onLine=!0,e.$apply()},!1),window.addEventListener("offline",function(t){console.log("went offline"),e.onLine=!1,e.$apply()},!1))}return{watch:o}}e.$inject=["$rootScope","$cordovaNetwork"],angular.module("starter").factory("ConnectMonitor",e)}(),function(){"use strict";function e(e,t){function o(e){l||(l=void 0!==window.sqlitePlugin?window.sqlitePlugin.openDatabase({name:e.name,location:2,createFromLocation:1}):window.openDatabase(e.name,"1.0","Database",2e5));var o=[];return angular.forEach(e.tables,function(e){var t=[];angular.forEach(e.columns,function(e,o){t.push(o+" "+e)}),i("DROP TABLE "+e.name);var n="CREATE TABLE IF NOT EXISTS "+e.name+" ("+t.join(",")+")";o.push(i(n)),c.push(e)}),t.all(o)}function n(e,o){var n=t.defer();return i("SELECT MAX("+o+") as lastSync FROM "+e).then(function(e){var t=e.rows.item[0].lastSync;n.resolve(t)}),n.promise}function r(e){var o=t.defer(),n=[],r=[];angular.forEach(e.columns,function(e,t){n.push(t),"number"==typeof e?r.push(e):r.push("'"+e+"'")});var a="INSERT OR REPLACE INTO "+e.table+" ("+n.join(",")+") VALUES ("+r.join(",")+")";return i(a).then(o.resolve)["catch"](o.reject),o.promise}function i(e,o){o="undefined"!=typeof o?o:[];var n=t.defer();return l.transaction(function(t){t.executeSql(e,o,function(e,t){var o={rows:[]};if(t&&t.rows)for(var r=0;r<t.rows.length;r++)o.rows.push(angular.copy(t.rows[r]));n.resolve(o)},function(e,t){console.log(e,t),n.reject(t)})}),n.promise}function a(e,o,n,r,a,s,l){var c=t.defer();void 0===l&&(l=-1);var u=o,d=s?s:10,m="SELECT SUM(id) as TOTAL FROM "+e+"  "+n,p="SELECT "+u+" FROM "+e+"  "+n+" "+r+" "+a+" LIMIT "+d+" OFFSET "+l;return console.log("query",m),console.log("query",p),i(m).then(function(e){var t={page:l,total:e.rows[0].TOTAL,rows:[]};i(p).then(function(e){console.log(e),t.rows=e.rows,c.resolve(t)})}),c.promise}function s(e){for(var t=[],o=0;o<e.rows.length;o++)t.push(e.rows.item(o));return t}var l,c=[];return{init:o,insert:r,query:i,getLastSync:n,paginate:a,fetchAll:s}}e.$inject=["$interval","$q"],angular.module("starter").factory("DAO",e)}(),function(){"use strict";function e(){function e(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])}function t(e){return new Date(e).toLocaleDateString()}function o(){var e=new Date,t="00",o=e.getFullYear(),n=(t+(e.getMonth()+1)).slice(-t.length),r=(t+e.getDate()).slice(-t.length);return o+"-"+n+"-"+r}function n(e){var t=new Date(e),o="00",n=t.getFullYear(),r=(o+(t.getMonth()+1)).slice(-o.length),i=(o+t.getDate()).slice(-o.length);return n+"-"+r+"-"+i}function r(e){var t=["Janeiro","Feveiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return t[e.getMonth()]}function i(e){var t=e.getFullYear(),o=e.getMonth();return new Date(t,o,1)}function a(e){var t=e.getFullYear(),o=e.getMonth()+1;return new Date(t,o,0)}return{parseData:e,parseString:t,getDate:o,formatDate:n,getMonthName:r,getFirstDay:i,getLastDay:a}}angular.module("starter").factory("DataUtil",e)}(),function(){"use strict";function e(e,t,o){function n(n,r){var i=o.defer();return window.cordova?e.alert(n,r).then(i.resolve):t.alert({title:r,template:n}),i.promise}function r(n,r,i){var a=o.defer();return window.cordova?e.confirm(n,r,i).then(function(e){2===e&&a.resolve(!0),a.reject(!0)}):t.confirm({title:r,template:n}).then(function(e){e?a.resolve(!0):a.reject(!0)}),a.promise}return{alert:n,confirm:r}}e.$inject=["$cordovaDialogs","$ionicPopup","$q"],angular.module("starter").service("Dialog",e)}(),function(){"use strict";function e(e,t,o){function n(){return m.getLoginStatus()}function r(){return console.log("facebook login",m),m.login(["public_profile","email"])}function i(){var t=e.defer();return o.logout().then(t.resolve,t.reject),t.promise}function a(){var t=e.defer();return d&&t.resolve(d),window.cordova?o.api("me?fields=name,first_name,last_name,gender,email",["public_profile"]).then(t.resolve,t.reject):m.api("/me",{fields:"name, first_name, last_name, gender, email"}).then(function(e){!e||e.error?t.reject(e.error):t.resolve(e)}),t.promise}function s(){var t=e.defer();return window.cordova?m.showDialog({method:"apprequests",message:"Venha para o nosso clube!"}).then(t.resolve,t.reject):m.ui({method:"apprequests",message:"Venha para o nosso clube!"}).then(t.resolve,t.reject),t.promise}function l(){var t=e.defer();return m.api("me/friends").then(t.resolve,t.reject),t.promise}function c(t){var o=e.defer();return m.api(t).then(o.resolve,o.reject),o.promise}function u(t){var o=e.defer();return t?m.login(["email"]).then(function(e){console.log("facebook login",e);var n=new Date((new Date).getTime()+1e3*e.authResponse.expiresIn);console.log(t,e,n),Parse.FacebookUtils.link(t,{id:e.authResponse.userID,access_token:e.authResponse.accessToken,expiration_date:n},{success:function(t){console.log("User",t),t.set("facebook",e.authResponse.userID),t.set("facebookimg","https://graph.facebook.com/"+e.authResponse.userID+"/picture?width=250&height=250"),t.set("facebook_complete",Boolean(!0)),t.save().then(o.resolve)}})},o.resolve):o.reject("not logged"),o.promise}var d,m=window.cordova?o:t;return{getCurrentUser:n,logIn:r,logOut:i,me:a,invite:s,friends:l,api:c,link:u}}e.$inject=["$q","$facebook","$cordovaFacebook"],angular.module("starter").service("Facebook",e)}(),function(){"use strict";angular.module("starter").factory("GalleryActivity",["$q","ParseCloud","moment",function(e,t,o){var n=Parse.Object.extend("GalleryActivity",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{update:function(t){var o=e.defer();return t.save(null,{success:o.resolve,error:o.reject}),o.promise},destroy:function(t){var o=e.defer();return t.destroy({success:o.resolve,error:o.reject}),o.promise},feed:function(e){return t.run("feedActivity",e)},all:function(t){var n=e.defer(),r=new Parse.Query(this);if(""!=t.filter&&r.contains("words",t.filter),t.order&&(t.order.indexOf("-")<-1?r.ascending(t.order):r.descending(t.order.replace("-"))),t.date&&null!==t.date){var i=o(t.date).startOf("day"),a=o(t.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return t.status&&null!==t.status&&("pending"===t.status?r.doesNotExist("isApproved"):"rejected"===t.status?r.equalTo("isApproved",!1):"approved"===t.status&&r.equalTo("isApproved",!0)),r.include("gallery"),r.include("user"),r.limit(t.limit),r.skip(t.page*t.limit-t.limit),r.find({success:n.resolve,error:n.reject}),n.promise},count:function(t){var n=e.defer(),r=new Parse.Query(this);if(""!=t.filter&&r.contains("words",t.filter),t.date&&null!==t.date){var i=o(t.date).startOf("day"),a=o(t.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return t.status&&null!==t.status&&("pending"===t.status?r.doesNotExist("isApproved"):"rejected"===t.status?r.equalTo("isApproved",!1):"approved"===t.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){n.resolve(e)},error:function(e){n.reject(e)}}),n.promise}});return Object.defineProperty(n.prototype,"fromUser",{get:function(){return this.get("fromUser")},set:function(e){this.set("fromUser",e)}}),Object.defineProperty(n.prototype,"toUser",{get:function(){return this.get("toUser")},set:function(e){this.set("toUser",e)}}),Object.defineProperty(n.prototype,"gallery",{get:function(){return this.get("gallery")},set:function(e){this.set("gallery",e)}}),Object.defineProperty(n.prototype,"title",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(n.prototype,"hashtags",{get:function(){return this.get("hashtags")},set:function(e){this.set("hashtags",e)}}),Object.defineProperty(n.prototype,"words",{get:function(){return this.get("words")},set:function(e){this.set("words",e)}}),Object.defineProperty(n.prototype,"address",{get:function(){return this.get("address")},set:function(e){this.set("address",e)}}),Object.defineProperty(n.prototype,"image",{get:function(){return this.get("image")},set:function(e){this.set("image",e)}}),Object.defineProperty(n.prototype,"imageThumb",{get:function(){return this.get("imageThumb")},set:function(e){this.set("imageThumb",e)}}),Object.defineProperty(n.prototype,"location",{get:function(){return this.get("location")},set:function(e){this.set("location",new Parse.GeoPoint({latitude:e.latitude,longitude:e.longitude}))}}),Object.defineProperty(n.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(n.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),n}])}(),function(){"use strict";angular.module("starter").factory("GalleryComment",["$q","moment",function(e,t){var o=Parse.Object.extend("GalleryComment",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{get:function(t){var o=e.defer();return new Parse.Query(this).get(t,{success:o.resolve,error:o.reject}),o.promise},create:function(t){var n=e.defer();return(new o).save(t,{success:n.resolve,error:n.reject}),n.promise},update:function(t){var o=e.defer();return t.save(null,{success:o.resolve,error:o.reject}),o.promise},destroy:function(t){var o=e.defer();return t.destroy({success:o.resolve,error:o.reject}),o.promise},all:function(t){var o=e.defer(),n=new Parse.Query(this);return n.include("user"),n.ascending("createdAt"),n.equalTo("gallery",t.gallery),n.limit(t.limit),n.skip(t.page*t.limit-t.limit),n.find({success:o.resolve,error:o.reject}),o.promise},count:function(o){var n=e.defer(),r=new Parse.Query(this);if(""!=o.filter&&r.contains("words",o.filter),o.date&&null!==o.date){var i=t(o.date).startOf("day"),a=t(o.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return o.status&&null!==o.status&&("pending"===o.status?r.doesNotExist("isApproved"):"rejected"===o.status?r.equalTo("isApproved",!1):"approved"===o.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){n.resolve(e)},error:function(e){n.reject(e)}}),n.promise}});return Object.defineProperty(o.prototype,"user",{get:function(){return this.get("user")},set:function(e){this.set("user",e)}}),Object.defineProperty(o.prototype,"text",{get:function(){return this.get("text")},set:function(e){this.set("text",e)}}),o}])}(),function(){"use strict";function e(e,t,o){var n=Parse.Object.extend("Gallery",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var o=e.defer(),r=new n;return t.address.geo&&(t.location=new Parse.GeoPoint(t.address.geo)),r.save(t,{success:o.resolve,error:o.reject}),o.promise},update:function(t){var o=e.defer();return t.save(null,{success:o.resolve,error:o.reject}),o.promise},destroy:function(t){var o=e.defer();return t.destroy({success:o.resolve,error:o.reject}),o.promise},comments:function(e){return t.run("commentGallery",e)},feed:function(e){return t.run("feedGallery",e)},follow:function(e){return console.log("Follow",e),t.run("followUser",e)},likeGallery:function(e){return console.log(e),t.run("likeGallery",{galleryId:e.galleryId})},get:function(t){var o=e.defer();return new Parse.Query(this).get(t,{success:o.resolve,error:o.reject}),o.promise},all:function(t){var o=e.defer(),n=new Parse.Query(this);return t.order&&(t.order.indexOf("-")<-1?n.ascending(t.order):n.descending(t.order.replace("-"))),t.status&&null!==t.status&&("pending"===t.status?n.doesNotExist("isApproved"):"rejected"===t.status?n.equalTo("isApproved",!1):"approved"===t.status&&n.equalTo("isApproved",!0)),n.limit(t.limit),n.skip(t.page*t.limit-t.limit),n.find({success:o.resolve,error:o.reject}),o.promise},count:function(t){var n=e.defer(),r=new Parse.Query(this);if(""!=t.filter&&r.contains("words",t.filter),t.date&&null!==t.date){var i=o(t.date).startOf("day"),a=o(t.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return t.status&&null!==t.status&&("pending"===t.status?r.doesNotExist("isApproved"):"rejected"===t.status?r.equalTo("isApproved",!1):"approved"===t.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){n.resolve(e)},error:function(e){n.reject(e)}}),n.promise}});return Object.defineProperty(n.prototype,"likesTotal",{
get:function(){return this.get("likesTotal")},set:function(e){this.set("likesTotal",e)}}),Object.defineProperty(n.prototype,"user",{get:function(){return this.get("user")},set:function(e){this.set("user",e)}}),Object.defineProperty(n.prototype,"title",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(n.prototype,"hashtags",{get:function(){return this.get("hashtags")},set:function(e){this.set("hashtags",e)}}),Object.defineProperty(n.prototype,"words",{get:function(){return this.get("words")},set:function(e){this.set("words",e)}}),Object.defineProperty(n.prototype,"location",{get:function(){return this.get("location")},set:function(e){this.set("location",new Parse.GeoPoint({latitude:e.latitude,longitude:e.longitude}))}}),Object.defineProperty(n.prototype,"address",{get:function(){return this.get("address")},set:function(e){this.set("address",e)}}),Object.defineProperty(n.prototype,"image",{get:function(){return this.get("image")},set:function(e){this.set("image",e)}}),Object.defineProperty(n.prototype,"icon",{get:function(){return this.get("icon")},set:function(e){this.set("icon",e)}}),Object.defineProperty(n.prototype,"imageThumb",{get:function(){return this.get("imageThumb")},set:function(e){this.set("imageThumb",e)}}),Object.defineProperty(n.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(n.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),n}e.$inject=["$q","ParseCloud","moment"],angular.module("starter").factory("Gallery",e)}(),function(){"use strict";angular.module("starter").factory("GalleryFeedback",["$q","moment",function(e,t){var o=Parse.Object.extend("GalleryFeedback",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var n=e.defer(),r=new o;return t.user=Parse.User.current(),r.save(t,{success:n.resolve,error:n.reject}),n.promise},update:function(t){var o=e.defer();return t.save(null,{success:o.resolve,error:o.reject}),o.promise},destroy:function(t){var o=e.defer();return t.destroy({success:o.resolve,error:o.reject}),o.promise},all:function(o){var n=e.defer(),r=new Parse.Query(this);if(""!=o.filter&&r.contains("words",o.filter),o.date&&null!==o.date){var i=t(o.date).startOf("day"),a=t(o.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return o.status&&null!==o.status&&("pending"===o.status?r.doesNotExist("isApproved"):"rejected"===o.status?r.equalTo("isApproved",!1):"approved"===o.status&&r.equalTo("isApproved",!0)),r.include("gallery"),r.include("User"),r.descending("createdAt"),r.limit(o.limit),r.skip(o.page*o.limit-o.limit),r.find({success:n.resolve,error:n.reject}),n.promise},count:function(o){var n=e.defer(),r=new Parse.Query(this);if(""!=o.filter&&r.contains("words",o.filter),o.date&&null!==o.date){var i=t(o.date).startOf("day"),a=t(o.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return o.order&&(o.order.indexOf("-")<-1?r.ascending(o.order):r.descending(o.order.replace("-"))),o.status&&null!==o.status&&("pending"===o.status?r.doesNotExist("isApproved"):"rejected"===o.status?r.equalTo("isApproved",!1):"approved"===o.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){n.resolve(e)},error:function(e){n.reject(e)}}),n.promise}});return Object.defineProperty(o.prototype,"user",{get:function(){return this.get("user")},set:function(e){this.set("user",e)}}),Object.defineProperty(o.prototype,"subject",{get:function(){return this.get("subject")},set:function(e){this.set("subject",e)}}),Object.defineProperty(o.prototype,"title",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(o.prototype,"hashtags",{get:function(){return this.get("hashtags")},set:function(e){this.set("hashtags",e)}}),Object.defineProperty(o.prototype,"words",{get:function(){return this.get("words")},set:function(e){this.set("words",e)}}),Object.defineProperty(o.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(o.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),o}])}(),function(){"use strict";angular.module("starter").factory("GallerySetting",["$q","moment",function(e,t){var o=Parse.Object.extend("GallerySetting",{getStatus:function(){return t().toDate()>=this.expiresAt?"Expired":this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var n=e.defer(),r=new o;return r.save(t,{success:n.resolve,error:n.reject}),n.promise},update:function(t){var o=e.defer();return t.save(null,{success:o.resolve,error:o.reject}),o.promise},destroy:function(t){var o=e.defer();return t.destroy({success:o.resolve,error:o.reject}),o.promise},all:function(t){var o=e.defer(),n=new Parse.Query(this);return""!=t.filter&&n.contains("canonical",t.filter),n.descending("createdAt"),n.limit(t.limit),n.skip(t.page*t.limit-t.limit),n.find({success:o.resolve,error:o.reject}),o.promise},count:function(t){var o=e.defer(),n=new Parse.Query(this);return n.count({success:o.resolve,error:o.reject}),o.promise}});return Object.defineProperty(o.prototype,"key",{get:function(){return this.get("key")},set:function(e){this.set("key",e)}}),Object.defineProperty(o.prototype,"value",{get:function(){return this.get("value")},set:function(e){this.set("value",e)}}),o}])}(),function(){"use strict";function e(e,t){function o(o){var n=t.defer();return e.ready(function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){console.log(e),n.resolve(e)},function(e){n.reject(e)},{timeout:3e4,enableHighAccuracy:!0,maximumAge:75e3})}),n.promise}return{getCurrentPosition:o}}e.$inject=["$ionicPlatform","$q"],angular.module("starter").factory("Geolocation",e)}(),function(){"use strict";function e(e){function t(t){null!==t&&""!==t&&window.cordova?(e.debugMode(),e.startTrackerWithId(t),a=!0):console.warn("["+i+"]: Invalid Tracker ID or not using emulator")}function o(t,o,n){a&&e.trackEvent(t,o,n)}function n(t){a&&e.trackView(t)}function r(t,o){a&&e.trackException(t,o)}var i="AnalyticsService",a=!1;return{init:t,trackView:n,trackEvent:o,trackException:r}}e.$inject=["$cordovaGoogleAnalytics"],angular.module("starter").factory("GoogleAnalytics",e)}(),function(){"use strict";function e(e){function t(t){return e.run("install",t)}function o(t){return e.run("status",t)}return{start:t,status:o}}e.$inject=["ParseCloud"],angular.module("starter").factory("Install",e)}(),function(){"use strict";function e(e){function t(t,o){var n=e.defer();return window.cordova.OneSignal?(window.plugins.OneSignal.setLogLevel({logLevel:4,visualLevel:4}),window.plugins.OneSignal.init(t,{googleProjectNumber:o},function(e){alert("Notification received:\n"+JSON.stringify(e))}),window.plugins.OneSignal.enableInAppAlertNotification(!0)):n.reject("OneSignal plugin istalled"),n.promise}return{init:t}}e.$inject=["$q"],angular.module("starter").factory("OneSignal",e)}(),function(){"use strict";function e(e){function t(t,o){var n=e.defer();return Parse.Cloud.run(t,o,{success:n.resolve,error:n.reject}),n.promise}return{run:t}}e.$inject=["$q"],angular.module("starter").factory("ParseCloud",e)}(),function(){"use strict";angular.module("starter").factory("ParseFile",["$q",function(e){function t(t,o){var n=e.defer(),r="file.jpg";return o&&r.replace(".jpg",o),new Parse.File(r,t).save({success:n.resolve,error:n.reject}),n.promise}return{upload:t}}])}(),function(){"use strict";function e(e,t,o,n){function r(e,o){var r=t.defer();return e&&(i.image=e),o&&(i.title=o),n.plugins.socialsharing.shareWithOptions(i,r.success,r.reject),r.promise}var i={title:o.instant("Join me from ")+e.app.name+"!",subject:o.instant("I'm at ")+e.app.name+"!. Install the application and follow me! "+e.app.url,image:e.app.image,link:e.app.url};return{open:r}}e.$inject=["AppConfig","$q","$translate","$window"],angular.module("starter").factory("Share",e)}(),function(){"use strict";function e(e,t){function o(o){window.cordova?e.show(o.text,"short","bottom"):t.alert({title:o.title,template:o.text,okType:"button button-clear button-assertive"})}function n(e,o){return t.confirm({title:e,template:o})}return{alert:o,confirm:n}}e.$inject=["$cordovaToast","$ionicPopup"],angular.module("starter").factory("Toast",e)}(),function(){"use strict";function e(e,t,o){var n=Parse.User.extend({},{profile:function(e){return o.run("profile",{username:e})},list:function(e){return o.run("listUsers",e)},getFollowers:function(e){return o.run("getFollowers",{username:e})},getLikers:function(e){return o.run("getLikers",{galleryId:e})},getFollowing:function(e){return o.run("getFollowing",{username:e})},signIn:function(o){var r=e.defer();return Parse.User.logIn(o.username,o.password,{success:function(e){var o;o=window.cordova?{device:t.getDevice(),cordova:t.getCordova(),model:t.getModel(),platform:t.getPlatform(),uuid:t.getUUID(),version:t.getVersion()}:{device:{device:window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\/([0-9]+)\./)[0]},cordova:"",model:window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\/([0-9]+)\./)[0],platform:window.navigator.platform,uuid:"",version:window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\/([0-9]+)\./)[1]},console.log(e),console.log(o),n.update(o).then(function(){r.resolve(e)})["catch"](r.reject),console.log("updateUser",o)},error:r.reject}),r.promise},signUp:function(t){var o=e.defer(),n=(new Parse.User).set({name:t.name}).set({username:t.username}).set({email:t.email}).set({password:t.password}).set({roleName:"User"}),r=new Parse.ACL;return r.setPublicReadAccess(!1),r.setPublicWriteAccess(!1),n.setACL(r),n.save(null,{success:o.resolve,error:o.reject}),o.promise},signInViaFacebook:function(t){var o=e.defer(),n=new Date;n.setSeconds(n.getSeconds()+t.authResponse.expiresIn),n=n.toISOString();var r={id:t.authResponse.userID,access_token:t.authResponse.accessToken,expiration_date:n};return Parse.FacebookUtils.logIn(r,{success:o.resolve,error:o.reject}),o.promise},logOut:function(){var t=e.defer();return Parse.User.logOut().then(t.resolve,t.reject),t.promise},findByEmail:function(e){return o.run("findUserByEmail",{email:e})},updateWithFacebookData:function(t){var n=e.defer();return o.run("saveFacebookPicture",{}).then(function(){var e=Parse.User.current();""===e.attributes.username&&e.set({username:t.email}),e.set({email:t.email}),e.set({name:t.name}),e.setACL(new Parse.ACL(e)),e.save(null,{success:function(){e.fetch().then(function(e){n.resolve(e)},function(e){n.reject(e)})}})})["catch"](n.reject),n.promise},getPublicData:function(t){console.log(t);var o=e.defer();return new Parse.Query("UserData").equalTo("user",t).first().then(function(e){e?o.resolve(e):o.reject(Parse.Promise.error({code:1,message:"User Data not found"}))},o.reject),o.promise},recoverPassword:function(t){var o=e.defer();return Parse.User.requestPasswordReset(t,{success:o.resolve,error:o.reject}),o.promise},destroy:function(){var t=e.defer();return Parse.User.current().destroy().then(t.resolve,t.reject),t.promise},setPhoto:function(t){var o=e.defer(),n=Parse.User.current();return n.set({photo:t}),n.save(null,{success:o.resolve,error:o.reject}),o.promise},follow:function(e){return o.run("followUser",{userId:e})},all:function(e){return o.run("getUsers",e)},validateUsername:function(e){return o.run("validateUsername",{username:e})},validateEmail:function(e){return o.run("validateEmail",{email:e})},findUsername:function(t){var o=e.defer();return new Parse.Query(this).equalTo("username",t).first({success:o.resolve,error:o.reject}),o.promise},update:function(t){var o=e.defer(),n=Parse.User.current();return angular.forEach(t,function(e,t){n.set(t,e)}),n.save({success:o.resolve,error:o.reject}),o.promise},"delete":function(e){return o.run("destroyUser",e)},fetch:function(){var t=e.defer();return Parse.User.current()?Parse.User.current().fetch().then(t.resolve,t.reject):t.reject(),t.promise}});return Object.defineProperty(n.prototype,"name",{get:function(){return this.get("name")},set:function(e){this.set("name",e)}}),Object.defineProperty(n.prototype,"username",{get:function(){return this.get("username")},set:function(e){this.set("username",e)}}),Object.defineProperty(n.prototype,"status",{get:function(){return this.get("status")},set:function(e){this.set("status",e)}}),Object.defineProperty(n.prototype,"gender",{get:function(){return this.get("gender")},set:function(e){this.set("gender",e)}}),Object.defineProperty(n.prototype,"email",{get:function(){return this.get("email")},set:function(e){this.set("email",e)}}),Object.defineProperty(n.prototype,"photo",{get:function(){return this.get("photo")},set:function(e){this.set("photo",e)}}),Object.defineProperty(n.prototype,"photoThumb",{get:function(){return this.get("photoThumb")},set:function(e){this.set("photoThumb",e)}}),Object.defineProperty(n.prototype,"roleName",{get:function(){return this.get("roleName")},set:function(e){this.set("roleName",e)}}),n}e.$inject=["$q","$cordovaDevice","ParseCloud"],angular.module("starter").factory("User",e)}(),function(){"use strict";function e(e,o,n,r,i){function a(a,s,l){function c(){window.cordova&&window.StatusBar.styleDefault(),a.closeModal=function(){a.modal.hide(),window.cordova&&window.StatusBar.styleLightContent()},a.searchValue="",a.selectLanguage=function(e){console.log(e),o.use(e.code),moment.locale(e.code),a.language=e,r.start(),a.closeModal(),n(function(){r.end()},1e3)},i.fromTemplateUrl(t+"/modal-language.html",{scope:a,focusFirstInput:!0}).then(function(e){a.modal=e,a.modal.show()})}a.languages=e.locales,a.language=a.languages.filter(function(e){return e.code===o.use()})[0],console.log(a.language),s.bind("click",c)}return{restrict:"E",link:a,templateUrl:t+"/ion-language.html"}}e.$inject=["AppConfig","$translate","$timeout","Loading","$ionicModal"];var t="app/component/ion-language";angular.module("ion-language").directive("ionLanguage",e)}(),function(){"use strict";function e(e,t,o,n,r,i){function a(){var e=i.defer();if(x.location)r(function(){e.resolve(x.location)},1e3);else{var t={timeout:1e4,enableHighAccuracy:!1};o.getCurrentPosition(t).then(function(t){x.location={latitude:t.coords.latitude,longitude:t.coords.longitude},e.resolve(x.location)},function(t){n.alert({title:"Geo Error",template:t.message}),e.reject(t)})}return e.promise}function s(){var e=i.defer();return a().then(function(t){console.log(t),c(t.latitude,t.longitude).success(function(o){o.geolocation=t,console.log(o),e.resolve(o)}).error(l)}),e.promise}function l(e){console.log(e)}function c(t,o){return e.get("http://maps.google.com/maps/api/geocode/json?latlng="+t+","+o+"&sensor=true").success(function(e){e.address_normal=e.results[0].formatted_address,e.address=u(e.results[0].address_components),e.src=d(t,o,18,500,300)})}function u(e){return e?{numero:e[0].short_name,rua:e[1].long_name,bairro:e[2].short_name,cidade:e[3].short_name,estado:e[5].long_name,uf:e[5].short_name,pais:e[6].long_name,paisCode:e[6].short_name,cep:e[7].short_name}:!1}function d(e,t,o,n,r){return"http://maps.google.com/maps/api/staticmap?center="+e+","+t+"&zoom="+o+"&size="+n+"x"+r+"&maptype=roadmap&sensor=true"}function m(e){var t=i.defer();console.log("parseAddress",e),e||t.reject("not place");for(var o={resume:"",geo:{latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()}},n=h(o.geo.latitude,o.geo.longitude,16,900,200),r=0;r<e.address_components.length;r++){var a=e.address_components[r].types[0];if(w[a]){var s=e.address_components[r][w[a]];o[y[a]]=s}}return o.name=e.name,o.street=o.street+", "+o.number,o.image=n,o.resume=o.street+" - "+o.city+", "+o.state+", "+o.country,t.resolve(o),t.promise}function p(e){var t=i.defer();return v.getQueryPredictions({input:e},function(e){t.resolve(e)}),t.promise}function g(e){var t=i.defer();return b.getDetails({placeId:e},function(e){t.resolve(e)}),t.promise}function h(e,t,o,n,r){console.log("src latitude",e,t,o,n,r);var i="http://maps.googleapis.com/maps/api/staticmap?center="+e+","+t+"&zoom="+o+"&scale=1&size="+n+"x"+r+"&maptype=roadmap&format=jpg&visual_refresh=true&markers=size:small%7Ccolor:0xff2600%7Clabel:0%7C"+e+","+t+"&sensor=true";return console.log(i),i}var f={types:["geocode"]},v=new t.google.maps.places.AutocompleteService,b=new t.google.maps.places.PlacesService(t.document.createElement("input"),f),w={street_number:"long_name",route:"long_name",locality:"long_name",sublocality:"long_name",neighborhood:"long_name",political:"long_name",administrative_area_level_1:"long_name",country:"long_name",postal_code:"long_name"},y={street_number:"number",route:"street",locality:"city",administrative_area_level_1:"state",country:"country",postal_code:"zipcode",neighborhood:"district"},x={coords:{},src:""};return{src:h,getDetails:g,searchAddress:p,parseAddress:m,findMe:s}}e.$inject=["$http","$window","$cordovaGeolocation","$ionicPopup","$timeout","$q"],angular.module("ion-location").factory("GeoService",e)}(),function(){"use strict";function e(e,t){function o(o,n){n.bind("click",function(){function n(){o.search={},o.search.suggestions=[],o.search.query=""}function r(e){t.getDetails(e).then(function(e){t.parseAddress(e).then(function(e){console.log(e),o.location=e,o.closeModalLocation()})})}n(),o.findMe=function(){o.loading=!0,t.findMe().then(function(e){t.searchAddress(e.address_normal).then(function(e){console.log(e),o.search.suggestions=e,o.loading=!1})})},o.findMe(),o.choosePlace=function(e){r(e.place_id)},o.modalLocation=e.fromTemplate('<ion-modal-view><ion-header-bar class="bar bar-light item-input-inset"><ion-spinner ng-if="loading"></ion-spinner><button class="button button-clear button-icon ion-navigate" ng-click="findMe()" ng-hide="loading"></button><label class="item-input-wrapper"><input type="search" ng-model="search.query" ng-model-options="{ debounce: 1500 }" placeholder="{{ \'searchText\' | translate }}"></label><button class="button button-clear" ng-click="closeModalLocation()" translate="cancel"></button></ion-header-bar><ion-content padding="false"><ion-list><div class="center padding" ng-if="loading1"><ion-spinner ></ion-spinner></div><ion-item ng-repeat="suggestion in search.suggestions" ng-click="choosePlace(suggestion)" ng-bind="suggestion.description"></ion-item><ion-item class="item-divider"><img src="https://developers.google.com/maps/documentation/places/images/powered-by-google-on-white.png"alt=""/></ion-item></ion-list></ion-content></ion-modal-view>',{scope:o,focusFirstInput:!0}),o.modalLocation.show(),o.closeModalLocation=function(){o.modalLocation.hide(),o.modalLocation.remove()},o.$watch("search.query",function(e){e&&(o.loading1=!0,o.search.suggestions=[],t.searchAddress(e).then(function(e){console.log(e),o.search.suggestions=e,o.loading1=!1}))})})}return{restrict:"A",scope:{location:"=ngModel"},link:o}}e.$inject=["$ionicModal","GeoService"],angular.module("ion-location").directive("ionLocation",e)}(),function(){function e(e,t,o,n,r,i,a){function s(e){function t(){var e=angular.copy(s.form);o.create(e).then(function(e){a()})}function a(){s.modal.hide(),s.modal.remove(),delete s.modal}var s=n.$new();s.formFields=r.form,s.submitFeedback=t,s.closeModal=a,s.form={photogramId:e.id,subject:"complaint"},i.fromTemplateUrl("app/main/feedback/feedback-modal.html",{scope:s,focusFirstInput:!0}).then(function(e){s.modal=e,s.modal.show()})}t.path;return{modal:s}}e.$inject=["$q","AppConfig","GalleryFeedback","$rootScope","GalleryFeedbackForm","$ionicModal","Toast"],angular.module("app.main").factory("FeedbackModal",e)}(),function(){"use strict";function e(e){var t=[{key:"title",type:"input",templateOptions:{type:"text",placeholder:e.instant("FEEDBACK.TITLE"),required:!0}},{key:"subject",type:"select",templateOptions:{label:e.instant("FEEDBACK.SUBJECT"),options:[{label:e.instant("FEEDBACK.COMPLAINT"),id:"complaint"},{label:e.instant("FEEDBACK.BUG"),id:"bug"},{label:e.instant("FEEDBACK.SUGGESTION"),id:"suggestion"}],valueProp:"id",labelProp:"label",icon:"icon-list",iconPlaceholder:!0}},{key:"status",type:"textarea",templateOptions:{type:"text",placeholder:e.instant("FEEDBACK.MESSAGE"),icon:"ion-quote",required:!0,iconPlaceholder:!0}}];return{form:t}}e.$inject=["$translate"],angular.module("app.main").factory("GalleryFeedbackForm",e)}(),function(){"use strict";function e(e,t,o,n,r){t.path;return{restrict:"A",scope:{photogram:"@"},template:"",link:function(t,i,a){function s(){t.form={photogramId:t.photogram},t.formFields=n.form}function l(){s(),e.fromTemplateUrl("app/main/feedback/feedback-modal.html",{scope:t,focusFirstInput:!0}).then(function(e){t.modal=e,t.modal.show()})}function c(e){r.go(e),t.closeModal()}function u(){var e=angular.copy(t.form);o.submit(e).then(function(e){console.log(e),s(),t.closeModal()})}function d(){t.modal.hide(),t.modal.remove()}t.link=c,t.submitFeedback=u,t.closeModal=d,i.bind("click",l)}}}e.$inject=["$ionicModal","AppConfig","PhotogramFeedback","PhotogramFeedbackForm","$state"],angular.module("app.main").directive("feedback",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a,s,l,c,u,d,m){function p(){e.nocomments=!1,u.get(t.galleryId).then(function(t){e.form={gallery:t,text:""}})}function g(){e.loading=!0,u.comments({galleryId:t.galleryId}).then(function(t){e.comments=[],t.map(function(t){console.log(t),t.canEdit=t.user.obj.id===e.currentUser.id?!0:!1,e.comments.push(t)}),e.loading=!1,n.scrollBottom()})}e.currentUser=Parse.User.current(),e.loading=!0,e.formFields=m.formComment,e.backButton=function(){r.goBack()},g(),p(),e.myIndexValue="5",e.searchPeople=function(t){var n=[];return s.getFollowing().then(function(r){return _.each(r,function(e){e.imageUrl=e.photo?e.photo._url:"img/user.png",e.bio=e.status,e.name?e.name.toUpperCase().indexOf(t.toUpperCase())>=0&&n.push(e):(e.name="Not name",n.push(e))}),e.people=n,console.log(n),o.when(n)})},e.getPeopleTextRaw=function(e){return"@"+e.username},e.deleteComment=function(t,o){console.log(t),l.confirm("Delete comment","You are sure?").then(function(n){n&&d.get(t.id).then(function(t){d.destroy(t).then(function(t){e.comments.splice(o,1)})})})},e.editComment=function(t,o){console.log(t),e.formEdit={id:t.id,text:t.text},a.show({template:'<input type="text" ng-model="formEdit.text">',title:"Edit comment",scope:e,buttons:[{text:"Cancel"},{text:"<b>OK</b>",type:"button-positive",onTap:function(t){return console.log(e.formEdit),e.formEdit.text?e.formEdit:void t.preventDefault()}}]}).then(function(n){console.log(n),n&&d.get(t.id).then(function(t){t.text=n.text,e.comments[o].text=n.text,t.save()})})},e.submitComment=function(t,o){if(t.$valid){var n=angular.copy(o);e.loading=!0,d.create(n).then(function(t){g(),e.form.text=""})}}}e.$inject=["$scope","$stateParams","$q","$ionicScrollDelegate","$ionicHistory","Loading","$ionicPopup","User","Dialog","$timeout","Gallery","GalleryComment","GalleryForm"],angular.module("starter").controller("GalleryComment",e)}(),function(){"use strict";function e(e,t,o,n,r,i){var a=t.currentUser,s=window.localStorage.walkthrough;"true"!==s?i.go("walkthrough",{clear:!0}):a?(console.log(a),a.name?i.go(r.routes.home,{clear:!0}):i.go("user.avatar",{clear:!0})):i.go(r.routes.login,{clear:!0}),e.$on("$ionicView.loaded",function(){o.ready(function(){navigator&&navigator.splashscreen&&n.hide()})})}e.$inject=["$scope","$rootScope","$ionicPlatform","$cordovaSplashscreen","AppConfig","$state"],angular.module("app.main").controller("LoadingCtrl",e)}(),function(){"use strict";function e(e,t,o){function n(e){"list"===e?i.tab={list:!0,grid:!1}:i.tab={list:!1,grid:!0}}function r(){i.data={total:!1,galleries:[]},i.page=0,i.empty=!1,i.more=!1}var i=this;i.changeTab=n,i.loading=!0,e.profile(o.username).then(function(e){console.log(e),console.log(Parse.User.current()),i.isMe=Parse.User.current().id===e.id?!0:!1,i.user=e,i.loading=!1}),i.openFollowers=function(){switch(console.log(t,o),t.current.name){case"tab.homeProfile":t.go("tab.homeProfileFollowers",{username:o.username});break;case"tab.activityProfile":t.go("tab.activityProfileFollowers",{username:o.username})}},i.openFollowing=function(){switch(console.log(t,o),t.current.name){case"tab.homeProfile":t.go("tab.homeProfileFollowing",{username:o.username});break;case"tab.activityProfile":t.go("tab.activityProfileFollowing",{username:o.username})}},i.follow=function(){i.loadingFollow=!0,e.follow(i.user.userObj.id).then(function(e){console.log("Follow result",e),i.user.isFollow="follow"===e?!0:!1,"follow"==e&&(i.user.followersTotal+=1),"unfollow"==e&&(i.user.followersTotal-=1),i.loadingFollow=!1})},r(),n("grid")}e.$inject=["User","$state","$stateParams"],angular.module("app.main").controller("ProfileCtrl",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a,s,l,c,u,d){var m,p=this;t.storage=e,t.$on("$ionicView.loaded",function(){r.ready(function(){navigator&&navigator.splashscreen&&window.StatusBar.styleDefault()})}),p.postPhoto=function(){function e(e){var o=i.defer();return t.image=e,t.form={title:""},t.editFilter=function(){s.load(m).then(function(e){t.image=e})},t.searchPeople=function(e){var o=[];return n.getFollowing().then(function(n){return _.each(n,function(t){t.imageUrl=t.photo?t.photo._url:"img/user.png",t.bio=t.status,t.name.toUpperCase().indexOf(e.toUpperCase())>=0&&o.push(t)}),t.people=o,i.when(o)})},t.getPeopleTextRaw=function(e){return"@"+e.username},c.fromTemplateUrl("app/main/share/share-modal.html",{scope:t,focusFirstInput:!0}).then(function(e){t.modalFilter=e,t.modalFilter.show()}),t.form.address={},t.closeAddress=function(){t.form.address={}},t.close=function(){t.modalFilter.hide()},t.$on("$destroy",function(){t.modal.remove()}),t.submit=function(){var e=angular.copy(t.form);e.image=t.image,m="",t.close(),o.resolve(e)},o.promise}o.open().then(e).then(function(e){u.start(),l.upload({base64:e.image}).then(function(o){e.image=o,a.create(e).then(function(e){t.$emit("photoInclude",e),u.end()})})})}}e.$inject=["$localStorage","$scope","PhotoService","User","$ionicPlatform","$q","Gallery","PhotoFilter","ParseFile","$ionicModal","Loading","Toast"],angular.module("app.main").controller("MainTabCtrl",e)}(),function(){"use strict";function e(e,t,o){function n(e){"list"===e?a.tab={list:!0,grid:!1}:a.tab={list:!1,grid:!0}}function r(){a.data={total:!1,galleries:[]},a.page=0,a.empty=!1,a.more=!1,i()}function i(){a.loadingFollowers=!0,a.loadingFollowing=!0,a.loadingPhotos=!0}var a=this;a.changeTab=n,a.user=o.currentUser,a.photo=o.currentUser.attributes.photo,a.loading=!0,e.getPublicData(Parse.User.current()).then(function(e){console.log("Profile",e.attributes),a.user=e,a.loading=!1}),a.openFollowers=function(){t.go("tab.accountFollowers",{username:o.currentUser.attributes.username})},a.openFollowing=function(){t.go("tab.accountFollowing",{username:o.currentUser.attributes.username})},r(),n("grid")}e.$inject=["User","$state","$rootScope"],angular.module("app.main").controller("AccountCtrl",e)}(),function(){"use strict";function e(e,t,o){function n(){m=!0,p=!1,g=!1,h=!1}function r(){p=!0,m=!1,g=!1,h=!1}function i(){g=!0,p=!1,m=!1,h=!1}function a(){h=!0,g=!1,p=!1,m=!1}function s(e){f=!1,e>0&&(f=!0)}function l(e){for(var t=0;t<e.length;t++)d.data.push(e[t])}function c(e){d.params.page=e}function u(){o.feed(d.params).then(function(t){s(t.length),c(d.params.page+1),l(t),0===d.data.length?a():r(),e.$broadcast("scroll.infiniteScrollComplete"),e.$broadcast("scroll.refreshComplete"),e.loading=!1})["catch"](function(){0===d.data.length&&i(),f=!1,e.$broadcast("scroll.refreshComplete")})}var d=this;d.params={},d.params.page=1,d.params.limit=30,d.data=[],d.openProfile=function(e){t.go("tab.activityProfile",{username:e})},e.loading=!0,u();var m=!1,p=!1,g=!1,h=!1,f=!1;d.onLoadMore=function(){u()},d.moreDataCanBeLoaded=function(){return f},d.showLoadingView=function(){return m},d.showGalleries=function(){return p},d.showErrorView=function(){return g},d.showEmptyView=function(){return h},d.onReload=function(){d.params.page=0,d.data=[],n(),u(),e.$broadcast("scroll.refreshComplete")}}e.$inject=["$scope","$state","GalleryActivity"],angular.module("app.main").controller("ActivityCtrl",e)}(),function(){"use strict";function e(e){var t=this;t.openProfile=function(t){e.go("tab.homeProfile",{username:t})},t.openLikers=function(t){e.go("tab.homeGalleryLikers",{galleryId:t})}}e.$inject=["$state"],angular.module("app.main").controller("HomeCtrl",e)}(),function(){"use strict";function e(e,t,o,n){e.onSearch=function(){""!==e.params.search&&(e.params.page=0,e.places=[],e.params.search=t("lowercase")(e.params.search))}}e.$inject=["$scope","$filter","$ionicLoading","$state"],angular.module("app.main").controller("SearchCtrl",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a){function s(){e.galleries=[],p(),g();var t={latitude:-18.8800397,longitude:-47.05878999999999},o={center:c(t),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};e.map=new google.maps.Map(document.getElementById("map_canvas"),o)}function l(){i.getCurrentPosition().then(function(t){console.log(t),e.params.location={latitude:t.coords.latitude,longitude:t.coords.longitude};var o={position:c(e.params.location),title:"I am here",id:0};u(o),e.map.setCenter(c(e.params.location)),m()},function(t){e.params.location=null;var o;o=1===t.code||3===t.code?"errorGpsDisabledText":"errorLocationMissingText",a.alert(o)})}function c(e){return e?new google.maps.LatLng(e.latitude,e.longitude):void 0}function u(o){var n={id:o.id,map:e.map,position:o.position,title:o.title,animation:google.maps.Animation.DROP};if(o.icon){var r=40;n.icon={url:o.icon,size:new google.maps.Size(r,r),scaledSize:new google.maps.Size(r,r),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(r/4,r/4)}}var i=new google.maps.Marker(n);google.maps.event.addListener(i,"click",function(){o.username&&t.go("tab.mapProfile",{username:o.username})}),h.push(i),new MarkerClusterer(e.map,h,{imagePath:"../img/m"}),f.extend(o.position),e.map.fitBounds(f)}function d(t){e.galleries=t,t.map(function(t){if(t.location){var o={map:e.map,id:t.id,position:c(t.location),title:t.title,image:t.image.url(),icon:t.imageThumb.url(),username:t.attributes.user.attributes.username};u(o)}})}function m(){e.loading=!0,r.all(e.params).then(function(t){t.length>0?d(t):a.alert("galleriesNotFoundText"),e.loading=!1},function(){n.show("errorText")})}function p(){e.galleries=[]}function g(){h.map(function(e){e.setMap(null)}),h=[]}var h=[],f=new google.maps.LatLngBounds;e.maxRating=5,e.storage=o,e.galleries=[],e.params={location:null,distance:100,page:1,limit:10},e.loading=!0,e.map,e.$on("$ionicView.enter",function(t,o){e.map||(s(),l())}),e.onSearchHere=function(){e.params.location.latitude=e.map.getCenter().lat(),e.params.location.longitude=e.map.getCenter().lng(),p(),g(),m()},e.onGalleryClicked=function(e){console.log(e)}}e.$inject=["$scope","$state","$localStorage","Toast","Gallery","Geolocation","Dialog"],angular.module("app.main").controller("SearchMapCtrl",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a){function s(){var e=t.getLoggedUser();c.form={name:e.name,email:e.email,status:e.status,gender:e.gender,img:e.img,username:e.username},c.formFields=a.profile,console.log(c.form),console.log(c.formFields)}function l(){if(console.log(c.rForm),c.rForm.$valid){var t=angular.copy(c.form);console.log(t),e.update(t).then(function(e){console.log(e),n.currentUser=Parse.User.current(),r.go(o.routes.home,{clear:!0})})}else i.alert({title:"Invalid form",text:"Fill out the fields in red"})}var c=this;c.submitAvatar=l,s(),c.photo=Parse.User.current().attributes.photo}e.$inject=["User","Auth","AppConfig","$rootScope","$state","Toast","UserForm"],angular.module("app.main").controller("UserAvatarCtrl",e)}(),function(){"use strict";function e(e,t,o,n){return{restrict:"A",scope:{ngModel:"="},link:function(r,i){function a(){
var i,a=r.ngModel,s=t.currentUser;return console.log(a),console.log(s),a.id!=s.id?!1:void e.image().then(function(e){return i=e,e}).then(function(e){r.loading=!0,o.upload({base64:e}).then(function(e){n.setPhoto(e).then(function(e){console.log(e),r.ngModel=e.attributes.photo,console.log(e.attributes.photo),r.loading=!1})})})}i.bind("click",a)}}}e.$inject=["ActionSheet","$rootScope","ParseFile","User"],angular.module("app.main").directive("userAvatar",e)}(),function(){"use strict";function e(e,t,o,n){var r=this;r.loading=!0,e.getFollowers(o.username).then(function(e){console.log(e),r.users=e,r.loading=!1}),t.clearSearch=function(){t.searchValue=""},r.openProfile=function(e){console.log("user",e),n.go("tab.homeProfile",{username:e.username})},r.follow=function(t){r.loadingFollow=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),r.loadingFollow=!1})}}e.$inject=["User","$scope","$stateParams","$state"],angular.module("starter").controller("UserFollowerCtrl",e)}(),function(){"use strict";function e(e,t,o,n){var r=this;r.loading=!0,e.getFollowing(o.username).then(function(e){console.log(e),r.users=e,r.loading=!1}),t.clearSearch=function(){t.searchValue=""},r.openProfile=function(e){console.log("user",e),n.go("tab.homeProfile",{username:e.username})},r.follow=function(t){r.loadingFollow=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),r.loadingFollow=!1})}}e.$inject=["User","$scope","$stateParams","$state"],angular.module("starter").controller("UserFollowingCtrl",e)}(),function(){"use strict";function e(e,t,o){e.$on("$ionicView.loaded",function(){t.ready(function(){navigator&&navigator.splashscreen&&(o.hide(),window.StatusBar.styleLightContent())})})}e.$inject=["$scope","$ionicPlatform","$cordovaSplashscreen"],angular.module("starter").controller("UserIntroCtrl",e)}(),function(){"use strict";function e(e,t,o,n){var r=this;r.loading=!0,e.getLikers(o.galleryId).then(function(e){console.log(e),r.users=e,r.loading=!1}),t.clearSearch=function(){t.searchValue=""},r.openProfile=function(e){console.log("user",e),n.go("tab.homeProfile",{username:e.username})},r.follow=function(t){r.loadingFollow=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),r.loadingFollow=!1})}}e.$inject=["User","$scope","$stateParams","$state"],angular.module("starter").controller("UserLikersCtrl",e)}(),function(){"use strict";function e(e,t,o){function n(){m=!0,p=!1,g=!1,h=!1}function r(){p=!0,m=!1,g=!1,h=!1}function i(){g=!0,p=!1,m=!1,h=!1}function a(){h=!0,g=!1,p=!1,m=!1}function s(e){f=!1,e>0&&(f=!0)}function l(e){for(var t=0;t<e.length;t++)d.data.push(e[t])}function c(e){d.params.page=e}function u(){e.list(d.params).then(function(e){s(e.length),c(d.params.page+1),l(e),0===d.data.length?a():r(),t.$broadcast("scroll.infiniteScrollComplete"),t.$broadcast("scroll.refreshComplete"),d.loading=!1})["catch"](function(){0===d.data.length&&i(),f=!1,t.$broadcast("scroll.refreshComplete")})}var d=this;d.params={},d.params.page=1,d.params.limit=30,d.data=[],d.loading=!0,u();var m=!1,p=!1,g=!1,h=!1,f=!1;d.onLoadMore=function(){u()},d.moreDataCanBeLoaded=function(){return f},d.showLoadingView=function(){return m},d.showGalleries=function(){return p},d.showErrorView=function(){return g},d.showEmptyView=function(){return h},d.onReload=function(){d.params.page=0,d.data=[],n(),u(),t.$broadcast("scroll.refreshComplete")},d.openProfile=function(e){console.log("user",e),o.go("tab.homeProfile",{username:e.username})},d.follow=function(t){t.loading=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),t.loading=!1})}}e.$inject=["User","$scope","$state"],angular.module("starter").controller("UserListCtrl",e)}(),function(){"use strict";function e(e,t,o,n,r,i,a){function s(){t.tempUser?l.form={email:t.tempUser.attributes.email,username:t.tempUser.attributes.username,password:""}:r.go("user.intro",{clear:!0})}var l=this;l.formFields=a.register,s(),l.submit=function(a,s){console.log(a),console.table(s),""!==l.form.password?(console.log(s),e.logIn(s).then(function(a){console.log(a),t.currentUser=a,e.getLoggedUser()&&n.link(Parse.User.current()).then(function(e){console.log(e),r.go(o.routes.home,{clear:!0})})["catch"](function(e){console.log(e),i.alert({title:"Ops",text:e.message})})})["catch"](function(e){i.alert({title:"Ops",text:e.message})})):i.alert({title:"Invalid form",text:"Please enter your email"})}}e.$inject=["Auth","$rootScope","AppConfig","Facebook","$state","Toast","UserForm"],angular.module("app.main").controller("UserMergeCtrl",e)}(),function(){"use strict";function e(e,t,o,n){return{restrict:"A",scope:{login:"@",register:"@"},link:function(r,i){function a(){r.form={recovery:""},r.erro="",r.text={button:"",input:"Email"},t.show({scope:r,template:'<div class="popup-recovery"><form name="form.recovery" form-manager><label class="item item-input"><i class="icon ion-email placeholder-icon"></i><input type="email" ng-model="email" id="email" name="email" placeholder="{{ text.input }}" required ng-maxlength="80"></label><span class="error-msg">{{erro}}</span></form></div>',title:"A new password will be sent to your e-mail address",buttons:[{text:"Cancel",type:"button-calm"},{text:"Send",type:"button-positive",onTap:function(e){return r.form.recovery.$valid?r.form.recovery.email.$viewValue:(e.preventDefault(),void(r.erro="Invalid Email"))}}]}).then(function(t){if(!angular.isUndefined(t)){var r=t;console.log(t),o.start(),e.forgot(r).then(function(e){console.log(e),n.alert({login:"Forgot your password",text:"Access your accout mail"}),o.end()})["catch"](function(e){n.alert({login:"Ops",text:e}),o.end()})}})}i.bind("click",a)}}}e.$inject=["User","$ionicPopup","Loading","Toast"],angular.module("app.main").directive("recoveryPass",e)}(),function(){"use strict";function e(e,t){function o(){e.forgot(n.form).then(function(e){console.log(e)})["catch"](function(e){t.alert("Ops",e)})}var n=this;n.form={},n.submitForgot=o}e.$inject=["User","Toast"],angular.module("app.main").controller("UserRecoveryPassCtrl",e)}(),function(){"use strict";function e(e,t,o,n){var r=this,i=window.ionic.Platform.platform();r.slideIndex=0,r.slideChanged=function(e){r.slideIndex=e},r.next=function(){e.next()},r.previous=function(){e.previous()},i?r.device="android"===i?"android":"iphone":r.device="android",r.slides=[{text:"STEP1",img:"img/intro1.png"},{text:"STEP2",img:"img/intro2.png"},{text:"STEP3",img:"img/intro3.png"},{text:"STEP4",img:"img/intro4.png"},{text:"STEP5",img:"img/intro5.png"},{text:"STEP6",img:"img/intro6.png"},{text:"STEP7",img:"img/intro7.png"}],window.localStorage.walkthrough=!0,t.$on("$ionicView.loaded",function(){o.ready(function(){navigator&&navigator.splashscreen&&(n.hide(),window.StatusBar.styleLightContent())})})}e.$inject=["$ionicSlideBoxDelegate","$scope","$ionicPlatform","$cordovaSplashscreen"],angular.module("app.main").controller("WalkthroughCtrl",e)}(),function(){"use strict";function e(e,t,o){function n(t,n){function r(){document.getElementById("browseBtn").click()}function i(){o.show({buttons:[{text:'<i class="icon ion-camera"></i>Photo Camera'},{text:'<i class="icon ion-images"></i> Photo Album'}],titleText:"Change Image",cancelText:"Cancel",cancel:function(){},buttonClicked:function(e){return 0===e&&console.log("Photo Camera"),1===e&&document.getElementById("browseBtn").click(),!0}})}function a(e){var o=e.target.files[0],n=new FileReader;n.readAsDataURL(o),n.onload=function(e){var o=e.target.result;t.crop(o)},angular.element(document.getElementById("browseBtn")).val("")}function s(o){console.log(t.option),e.crop({url:o,width:t.option?t.option.width:200,height:t.option?t.option.height:200,cancelText:"Cancel",chooseText:"Save"}).then(function(e){var o=e.toDataURL();console.log(o),t.ngModel=o})}t.action=i,n.bind("click",r),t.crop=s,angular.element(document.getElementById("browseBtn")).on("change",a)}return{restrict:"A",scope:{ngModel:"=",option:"=",cropSave:"&"},template:'<div><input type="file" id="browseBtn" image="image" accept="image/*" style="display: none"/></div>',link:n}}e.$inject=["$jrCrop","$translate","$ionicActionSheet"],angular.module("ion-photo").directive("ionCrop",e)}(),function(){"use strict";function e(){function e(e,t,o){console.log(e.filter),e.$watch("filter.slider.value",function(t){t&&(e.filter.slider.value=parseInt(t),e.filter.setSlider(e.filter.slider))})}return{restrict:"E",link:e,scope:{filter:"="},template:'<div class="item range range-positive"> <input type="range" name="filter.slider.name" min="-100" max="100" step="1" ng-model="filter.slider.value"  > </div>'}}angular.module("ion-photo").directive("sliderFilter",e)}(),function(){"use strict";function e(e,t){function o(o){var n=e.defer();return s=document.getElementById(o),c=d.texture(s),d.draw(c).update(),s.src=d.toDataURL("image/jpeg",.8),t(function(){f.map(function(e){var t=document.getElementById(e.id);if(t){var o=new Image;o.src=s.src,m.draw(m.texture(o)).brightnessContrast(e.filter.brightness,e.filter.contrast).hueSaturation(e.filter.hue,e.filter.saturation).vibrance(e.filter.vibrance).denoise(100*e.filter.denoise).unsharpMask(100*e.filter.radius,e.filter.strength).noise(e.filter.noise).sepia(e.filter.sepia).vignette(e.filter.size,e.filter.amount).update(),t.src=m.toDataURL("image/jpeg",.7)}}),n.resolve()},100),n.promise}function n(e,t,o,n,r,i){this.name=e,this.icon=t,this.func=o,this.update=r,this.imageFile=i,this.slider={},this.nubs=[],n.call(this)}function r(e){h=e,d.draw(c).brightnessContrast(h.brightness,h.contrast).hueSaturation(h.hue,h.saturation).vibrance(h.vibrance).denoise(100*h.denoise).unsharpMask(100*h.radius,h.strength).noise(h.noise).sepia(h.sepia).vignette(h.size,h.amount).update(),s.src=d.toDataURL("image/png")}function i(){_.map(v.Adjust,function(e){e.slider.value=0,e.setSlider(e.slider)}),h={brightness:0,contrast:0,hue:0,denoise:20,saturation:0,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0},d.draw(c).brightnessContrast(h.brightness,h.contrast).hueSaturation(h.hue,h.saturation).vibrance(h.vibrance).denoise(100*h.denoise).unsharpMask(100*h.radius,h.strength).noise(h.noise).sepia(h.sepia).vignette(h.size,h.amount).update(),s.src=d.toDataURL("image/jpeg",.8)}function a(){var t=e.defer(),o=new Image;return o.src=s.src,l=document.getElementById("image3"),u=p.texture(o),p.draw(u).update(),t.resolve(p.toDataURL("image/jpeg",.8)),t.promise}var s,l,c,u;try{var d=fx.canvas(),m=fx.canvas(),p=fx.canvas()}catch(g){return void alert(g)}var h={brightness:0,contrast:0,hue:0,denoise:20,saturation:0,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0},f=[{name:"Normal",id:"normal",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:0,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Claredon",id:"claredon",filter:{brightness:.3,contrast:0,hue:0,denoise:20,saturation:0,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Gingham",id:"gingham",filter:{brightness:0,contrast:.5,hue:0,denoise:20,saturation:.1,vibrance:.3,radius:0,strength:0,noise:0,sepia:0,size:0,amount:.3}},{name:"Moon",id:"moon",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:-1,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:.8}},{name:"Lark",id:"lark",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:0,vibrance:-.3,radius:.2,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Reyes",id:"reyes",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:-1,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Juno",id:"juno",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:-1,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Slumber",id:"slumber",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:-1,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}},{name:"Crema",id:"crema",filter:{brightness:0,contrast:0,hue:0,denoise:20,saturation:-1,vibrance:0,radius:0,strength:0,noise:0,sepia:0,size:0,amount:0}}];n.prototype.addNub=function(e,t,o){this.nubs.push({name:e,x:t,y:o})},n.prototype.addSlider=function(e,t,o,n,r,i){this.slider={name:e,label:t,min:o,max:n,value:r,step:i}},n.prototype.setSlider=function(e){this[e.name]=e.value/100,this.update()},n.prototype.setCode=function(e){h[Object.keys(e)[0]]=e[Object.keys(e)[0]],d.draw(c).brightnessContrast(h.brightness,h.contrast).hueSaturation(h.hue,h.saturation).vibrance(h.vibrance).denoise(100*h.denoise).unsharpMask(100*h.radius,h.strength).noise(h.noise).sepia(h.sepia).vignette(h.size,h.amount).update(),s.src=d.toDataURL("image/jpeg",.8)};var v={Adjust:[new n("Brightness","ion-ios-sunny-outline","brightnessContrast",function(){this.addSlider("brightness","Brightness",-100,100,0,.1)},function(){this.setCode({brightness:this.brightness})}),new n("Contrast","ion-contrast","brightnessContrast",function(){this.addSlider("contrast","Contrast",-100,100,0,.1)},function(){this.setCode({contrast:this.contrast})}),new n("Hue","ion-ios-color-filter-outline","hueSaturation",function(){this.addSlider("hue","Hue",-100,100,0,.1)},function(){this.setCode({hue:this.hue})}),new n("Saturation","ion-ios-partlysunny-outline","hueSaturation",function(){this.addSlider("saturation","Saturation",-100,100,0,.1)},function(){this.setCode({saturation:this.saturation})}),new n("Vibrance","ion-ios-flower-outline","vibrance",function(){this.addSlider("amount","Amount",-100,100,.5,.1)},function(){this.setCode({vibrance:this.amount})}),new n("Denoise","ion-ios-eye-outline","denoise",function(){this.addSlider("exponent","Exponent",0,50,20,1)},function(){this.setCode({denoise:this.exponent})}),new n("Noise","ion-ios-analytics-outline","noise",function(){this.addSlider("amount","Amount",0,100,5,1)},function(){this.setCode({noise:this.amount})}),new n("Sepia","ion-ios-partlysunny-outline","sepia",function(){this.addSlider("amount","Amount",0,100,0,1)},function(){this.setCode({sepia:this.amount})}),new n("Vignette","ion-ios-glasses-outline","vignette",function(){this.addSlider("amount","Amount",0,100,0,1)},function(){this.setCode({amount:this.amount})})]};return{filters:v,imageFilters:f,init:o,reset:i,apply:r,getImage:a}}e.$inject=["$q","$timeout"],angular.module("ion-photo").factory("PhotoFilter",e)}();/*
 * glfx.js
 * http://evanw.github.com/glfx.js/
 *
 * Copyright 2011 Evan Wallace
 * Released under the MIT license
 */
var fx=function(){function e(e,t,o){return Math.max(e,Math.min(t,o))}function t(e){return{_:e,loadContentsOf:function(e){O=this._.gl,this._.loadContentsOf(e)},destroy:function(){O=this._.gl,this._.destroy()}}}function o(e){return t(z.fromElement(e))}function n(e,t){var o=O.UNSIGNED_BYTE;if(O.getExtension("OES_texture_float")&&O.getExtension("OES_texture_float_linear")){var n=new z(100,100,O.RGBA,O.FLOAT);try{n.drawTo(function(){o=O.FLOAT})}catch(r){}n.destroy()}this._.texture&&this._.texture.destroy(),this._.spareTexture&&this._.spareTexture.destroy(),this.width=e,this.height=t,this._.texture=new z(e,t,O.RGBA,o),this._.spareTexture=new z(e,t,O.RGBA,o),this._.extraTexture=this._.extraTexture||new z(0,0,O.RGBA,o),this._.flippedShader=this._.flippedShader||new B(null,"uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,vec2(texCoord.x,1.0-texCoord.y));}"),this._.isInitialized=!0}function r(e,t,o){return this._.isInitialized&&e._.width==this.width&&e._.height==this.height||n.call(this,t?t:e._.width,o?o:e._.height),e._.use(),this._.texture.drawTo(function(){B.getDefaultShader().drawRect()}),this}function i(){return this._.texture.use(),this._.flippedShader.drawRect(),this}function a(e,t,o,n){(o||this._.texture).use(),this._.spareTexture.drawTo(function(){e.uniforms(t).drawRect()}),this._.spareTexture.swapWith(n||this._.texture)}function s(e){return e.parentNode.insertBefore(this,e),e.parentNode.removeChild(e),this}function l(){var e=new z(this._.texture.width,this._.texture.height,O.RGBA,O.UNSIGNED_BYTE);return this._.texture.use(),e.drawTo(function(){B.getDefaultShader().drawRect()}),t(e)}function c(){var e=this._.texture.width,t=this._.texture.height,o=new Uint8Array(4*e*t);return this._.texture.drawTo(function(){O.readPixels(0,0,e,t,O.RGBA,O.UNSIGNED_BYTE,o)}),o}function u(e){return function(){return O=this._.gl,e.apply(this,arguments)}}function d(e,t,o,n,r,i,a,s){var l=o-r,c=n-i,u=a-r,d=s-i;r=e-o+r-a,i=t-n+i-s;var m=l*d-u*c,u=(r*d-u*i)/m,l=(l*i-r*c)/m;return[o-e+u*o,n-t+u*n,u,a-e+l*a,s-t+l*s,l,e,t,1]}function m(e){var t=e[0],o=e[1],n=e[2],r=e[3],i=e[4],a=e[5],s=e[6],l=e[7];e=e[8];var c=t*i*e-t*a*l-o*r*e+o*a*s+n*r*l-n*i*s;return[(i*e-a*l)/c,(n*l-o*e)/c,(o*a-n*i)/c,(a*s-r*e)/c,(t*e-n*s)/c,(n*r-t*a)/c,(r*l-i*s)/c,(o*s-t*l)/c,(t*i-o*r)/c]}function p(e){var t=e.length;this.xa=[],this.ya=[],this.u=[],this.y2=[],e.sort(function(e,t){return e[0]-t[0]});for(var o=0;t>o;o++)this.xa.push(e[o][0]),this.ya.push(e[o][1]);for(this.u[0]=0,this.y2[0]=0,o=1;t-1>o;++o){e=this.xa[o+1]-this.xa[o-1];var n=(this.xa[o]-this.xa[o-1])/e,r=n*this.y2[o-1]+2;this.y2[o]=(n-1)/r,this.u[o]=(6*((this.ya[o+1]-this.ya[o])/(this.xa[o+1]-this.xa[o])-(this.ya[o]-this.ya[o-1])/(this.xa[o]-this.xa[o-1]))/e-n*this.u[o-1])/r}for(this.y2[t-1]=0,o=t-2;o>=0;--o)this.y2[o]=this.y2[o]*this.y2[o+1]+this.u[o]}function g(e,t){return new B(null,e+"uniform sampler2D texture;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 coord=texCoord*texSize;"+t+"gl_FragColor=texture2D(texture,coord/texSize);vec2 clampedCoord=clamp(coord,vec2(0.0),texSize);if(coord!=clampedCoord){gl_FragColor.a*=max(0.0,1.0-length(coord-clampedCoord));}}")}function h(t,o){return O.brightnessContrast=O.brightnessContrast||new B(null,"uniform sampler2D texture;uniform float brightness;uniform float contrast;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.rgb+=brightness;if(contrast>0.0){color.rgb=(color.rgb-0.5)/(1.0-contrast)+0.5;}else{color.rgb=(color.rgb-0.5)*(1.0+contrast)+0.5;}gl_FragColor=color;}"),a.call(this,O.brightnessContrast,{brightness:e(-1,t,1),contrast:e(-1,o,1)}),this}function f(t){t=new p(t);for(var o=[],n=0;256>n;n++)o.push(e(0,Math.floor(256*t.interpolate(n/255)),255));return o}function v(e,t,o){e=f(e),1==arguments.length?t=o=e:(t=f(t),o=f(o));for(var n=[],r=0;256>r;r++)n.splice(n.length,0,e[r],t[r],o[r],255);return this._.extraTexture.initFromBytes(256,1,n),this._.extraTexture.use(1),O.curves=O.curves||new B(null,"uniform sampler2D texture;uniform sampler2D map;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.r=texture2D(map,vec2(color.r)).r;color.g=texture2D(map,vec2(color.g)).g;color.b=texture2D(map,vec2(color.b)).b;gl_FragColor=color;}"),O.curves.textures({map:1}),a.call(this,O.curves,{}),this}function b(e){O.denoise=O.denoise||new B(null,"uniform sampler2D texture;uniform float exponent;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec4 center=texture2D(texture,texCoord);vec4 color=vec4(0.0);float total=0.0;for(float x=-4.0;x<=4.0;x+=1.0){for(float y=-4.0;y<=4.0;y+=1.0){vec4 sample=texture2D(texture,texCoord+vec2(x,y)/texSize);float weight=1.0-abs(dot(sample.rgb-center.rgb,vec3(0.25)));weight=pow(weight,exponent);color+=sample*weight;total+=weight;}}gl_FragColor=color/total;}");for(var t=0;2>t;t++)a.call(this,O.denoise,{exponent:Math.max(0,e),texSize:[this.width,this.height]});return this}function w(t,o){return O.hueSaturation=O.hueSaturation||new B(null,"uniform sampler2D texture;uniform float hue;uniform float saturation;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float angle=hue*3.14159265;float s=sin(angle),c=cos(angle);vec3 weights=(vec3(2.0*c,-sqrt(3.0)*s-c,sqrt(3.0)*s-c)+1.0)/3.0;float len=length(color.rgb);color.rgb=vec3(dot(color.rgb,weights.xyz),dot(color.rgb,weights.zxy),dot(color.rgb,weights.yzx));float average=(color.r+color.g+color.b)/3.0;if(saturation>0.0){color.rgb+=(average-color.rgb)*(1.0-1.0/(1.001-saturation));}else{color.rgb+=(average-color.rgb)*(-saturation);}gl_FragColor=color;}"),a.call(this,O.hueSaturation,{hue:e(-1,t,1),saturation:e(-1,o,1)}),this}function y(t){return O.noise=O.noise||new B(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec4 color=texture2D(texture,texCoord);float diff=(rand(texCoord)-0.5)*amount;color.r+=diff;color.g+=diff;color.b+=diff;gl_FragColor=color;}"),a.call(this,O.noise,{amount:e(0,t,1)}),this}function x(t){return O.sepia=O.sepia||new B(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float r=color.r;float g=color.g;float b=color.b;color.r=min(1.0,(r*(1.0-(0.607*amount)))+(g*(0.769*amount))+(b*(0.189*amount)));color.g=min(1.0,(r*0.349*amount)+(g*(1.0-(0.314*amount)))+(b*0.168*amount));color.b=min(1.0,(r*0.272*amount)+(g*0.534*amount)+(b*(1.0-(0.869*amount))));gl_FragColor=color;}"),a.call(this,O.sepia,{amount:e(0,t,1)}),this}function T(e,t){return O.unsharpMask=O.unsharpMask||new B(null,"uniform sampler2D blurredTexture;uniform sampler2D originalTexture;uniform float strength;uniform float threshold;varying vec2 texCoord;void main(){vec4 blurred=texture2D(blurredTexture,texCoord);vec4 original=texture2D(originalTexture,texCoord);gl_FragColor=mix(blurred,original,1.0+strength);}"),this._.extraTexture.ensureFormat(this._.texture),this._.texture.use(),this._.extraTexture.drawTo(function(){B.getDefaultShader().drawRect()}),this._.extraTexture.use(1),this.triangleBlur(e),O.unsharpMask.textures({originalTexture:1}),a.call(this,O.unsharpMask,{strength:t}),this._.extraTexture.unuse(1),this}function _(t){return O.vibrance=O.vibrance||new B(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;float mx=max(color.r,max(color.g,color.b));float amt=(mx-average)*(-amount*3.0);color.rgb=mix(color.rgb,vec3(mx),amt);gl_FragColor=color;}"),a.call(this,O.vibrance,{amount:e(-1,t,1)}),this}function k(t,o){return O.vignette=O.vignette||new B(null,"uniform sampler2D texture;uniform float size;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float dist=distance(texCoord,vec2(0.5,0.5));color.rgb*=smoothstep(0.8,size*0.799,dist*(amount+size));gl_FragColor=color;}"),a.call(this,O.vignette,{size:e(0,t,1),amount:e(0,o,1)}),this}function C(t,o,n){O.lensBlurPrePass=O.lensBlurPrePass||new B(null,"uniform sampler2D texture;uniform float power;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color=pow(color,vec4(power));gl_FragColor=vec4(color);}");var r="uniform sampler2D texture0;uniform sampler2D texture1;uniform vec2 delta0;uniform vec2 delta1;uniform float power;varying vec2 texCoord;"+G+"vec4 sample(vec2 delta){float offset=random(vec3(delta,151.7182),0.0);vec4 color=vec4(0.0);float total=0.0;for(float t=0.0;t<=30.0;t++){float percent=(t+offset)/30.0;color+=texture2D(texture0,texCoord+delta*percent);total+=1.0;}return color/total;}";O.lensBlur0=O.lensBlur0||new B(null,r+"void main(){gl_FragColor=sample(delta0);}"),O.lensBlur1=O.lensBlur1||new B(null,r+"void main(){gl_FragColor=(sample(delta0)+sample(delta1))*0.5;}"),O.lensBlur2=O.lensBlur2||new B(null,r+"void main(){vec4 color=(sample(delta0)+2.0*texture2D(texture1,texCoord))/3.0;gl_FragColor=pow(color,vec4(power));}").textures({texture1:1});for(var r=[],i=0;3>i;i++){var s=n+2*i*Math.PI/3;r.push([t*Math.sin(s)/this.width,t*Math.cos(s)/this.height])}return t=Math.pow(10,e(-1,o,1)),a.call(this,O.lensBlurPrePass,{power:t}),this._.extraTexture.ensureFormat(this._.texture),a.call(this,O.lensBlur0,{delta0:r[0]},this._.texture,this._.extraTexture),a.call(this,O.lensBlur1,{delta0:r[1],delta1:r[2]},this._.extraTexture,this._.extraTexture),a.call(this,O.lensBlur0,{delta0:r[1]}),this._.extraTexture.use(1),a.call(this,O.lensBlur2,{power:1/t,delta0:r[2]}),this}function A(e,t,o,n,r,i){O.tiltShift=O.tiltShift||new B(null,"uniform sampler2D texture;uniform float blurRadius;uniform float gradientRadius;uniform vec2 start;uniform vec2 end;uniform vec2 delta;uniform vec2 texSize;varying vec2 texCoord;"+G+"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);vec2 normal=normalize(vec2(start.y-end.y,end.x-start.x));float radius=smoothstep(0.0,1.0,abs(dot(texCoord*texSize-start,normal))/gradientRadius)*blurRadius;for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta/texSize*percent*radius);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}");var s=o-e,l=n-t,c=Math.sqrt(s*s+l*l);return a.call(this,O.tiltShift,{blurRadius:r,gradientRadius:i,start:[e,t],end:[o,n],delta:[s/c,l/c],texSize:[this.width,this.height]}),a.call(this,O.tiltShift,{blurRadius:r,gradientRadius:i,start:[e,t],end:[o,n],delta:[-l/c,s/c],texSize:[this.width,this.height]}),this}function E(e){return O.triangleBlur=O.triangleBlur||new B(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+G+"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta*percent);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}"),a.call(this,O.triangleBlur,{delta:[e/this.width,0]}),a.call(this,O.triangleBlur,{delta:[0,e/this.height]}),this}function P(e,t,o){return O.zoomBlur=O.zoomBlur||new B(null,"uniform sampler2D texture;uniform vec2 center;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;"+G+"void main(){vec4 color=vec4(0.0);float total=0.0;vec2 toCenter=center-texCoord*texSize;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=0.0;t<=40.0;t++){float percent=(t+offset)/40.0;float weight=4.0*(percent-percent*percent);vec4 sample=texture2D(texture,texCoord+toCenter*percent*strength/texSize);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}"),a.call(this,O.zoomBlur,{center:[e,t],strength:o,texSize:[this.width,this.height]}),this}function M(e,t,o,n){return O.colorHalftone=O.colorHalftone||new B(null,"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(float angle){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);vec3 cmy=1.0-color.rgb;float k=min(cmy.x,min(cmy.y,cmy.z));cmy=(cmy-k)/(1.0-k);cmy=clamp(cmy*10.0-3.0+vec3(pattern(angle+0.26179),pattern(angle+1.30899),pattern(angle)),0.0,1.0);k=clamp(k*10.0-5.0+pattern(angle+0.78539),0.0,1.0);gl_FragColor=vec4(1.0-cmy-k,color.a);}"),a.call(this,O.colorHalftone,{center:[e,t],angle:o,scale:Math.PI/n,texSize:[this.width,this.height]}),this}function S(e,t,o,n){return O.dotScreen=O.dotScreen||new B(null,"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;gl_FragColor=vec4(vec3(average*10.0-5.0+pattern()),color.a);}"),a.call(this,O.dotScreen,{center:[e,t],angle:o,scale:Math.PI/n,texSize:[this.width,this.height]}),this}function F(e){return O.edgeWork1=O.edgeWork1||new B(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+G+"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec3 sample=texture2D(texture,texCoord+delta*percent).rgb;float average=(sample.r+sample.g+sample.b)/3.0;color.x+=average*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=average*weight;total.y+=weight;}}gl_FragColor=vec4(color/total,0.0,1.0);}"),O.edgeWork2=O.edgeWork2||new B(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+G+"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec2 sample=texture2D(texture,texCoord+delta*percent).xy;color.x+=sample.x*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=sample.y*weight;total.y+=weight;}}float c=clamp(10000.0*(color.y/total.y-color.x/total.x)+0.5,0.0,1.0);gl_FragColor=vec4(c,c,c,1.0);}"),a.call(this,O.edgeWork1,{delta:[e/this.width,0]}),a.call(this,O.edgeWork2,{delta:[0,e/this.height]}),this}function $(e,t,o){return O.hexagonalPixelate=O.hexagonalPixelate||new B(null,"uniform sampler2D texture;uniform vec2 center;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 tex=(texCoord*texSize-center)/scale;tex.y/=0.866025404;tex.x-=tex.y*0.5;vec2 a;if(tex.x+tex.y-floor(tex.x)-floor(tex.y)<1.0)a=vec2(floor(tex.x),floor(tex.y));else a=vec2(ceil(tex.x),ceil(tex.y));vec2 b=vec2(ceil(tex.x),floor(tex.y));vec2 c=vec2(floor(tex.x),ceil(tex.y));vec3 TEX=vec3(tex.x,tex.y,1.0-tex.x-tex.y);vec3 A=vec3(a.x,a.y,1.0-a.x-a.y);vec3 B=vec3(b.x,b.y,1.0-b.x-b.y);vec3 C=vec3(c.x,c.y,1.0-c.x-c.y);float alen=length(TEX-A);float blen=length(TEX-B);float clen=length(TEX-C);vec2 choice;if(alen<blen){if(alen<clen)choice=a;else choice=c;}else{if(blen<clen)choice=b;else choice=c;}choice.x+=choice.y*0.5;choice.y*=0.866025404;choice*=scale/texSize;gl_FragColor=texture2D(texture,choice+center/texSize);}"),a.call(this,O.hexagonalPixelate,{center:[e,t],scale:o,texSize:[this.width,this.height]}),this}function R(e){return O.ink=O.ink||new B(null,"uniform sampler2D texture;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 dx=vec2(1.0/texSize.x,0.0);vec2 dy=vec2(0.0,1.0/texSize.y);vec4 color=texture2D(texture,texCoord);float bigTotal=0.0;float smallTotal=0.0;vec3 bigAverage=vec3(0.0);vec3 smallAverage=vec3(0.0);for(float x=-2.0;x<=2.0;x+=1.0){for(float y=-2.0;y<=2.0;y+=1.0){vec3 sample=texture2D(texture,texCoord+dx*x+dy*y).rgb;bigAverage+=sample;bigTotal+=1.0;if(abs(x)+abs(y)<2.0){smallAverage+=sample;smallTotal+=1.0;}}}vec3 edge=max(vec3(0.0),bigAverage/bigTotal-smallAverage/smallTotal);gl_FragColor=vec4(color.rgb-dot(edge,edge)*strength*100000.0,color.a);}"),a.call(this,O.ink,{strength:e*e*e*e*e,texSize:[this.width,this.height]}),this}function U(t,o,n,r){return O.bulgePinch=O.bulgePinch||g("uniform float radius;uniform float strength;uniform vec2 center;","coord-=center;float distance=length(coord);if(distance<radius){float percent=distance/radius;if(strength>0.0){coord*=mix(1.0,smoothstep(0.0,radius/distance,percent),strength*0.75);}else{coord*=mix(1.0,pow(percent,1.0+strength*0.75)*radius/distance,1.0-percent);}}coord+=center;"),a.call(this,O.bulgePinch,{radius:n,strength:e(-1,r,1),center:[t,o],texSize:[this.width,this.height]}),this}function L(e,t,o){if(O.matrixWarp=O.matrixWarp||g("uniform mat3 matrix;uniform bool useTextureSpace;","if(useTextureSpace)coord=coord/texSize*2.0-1.0;vec3 warp=matrix*vec3(coord,1.0);coord=warp.xy/warp.z;if(useTextureSpace)coord=(coord*0.5+0.5)*texSize;"),e=Array.prototype.concat.apply([],e),4==e.length)e=[e[0],e[1],0,e[2],e[3],0,0,0,1];else if(9!=e.length)throw"can only warp with 2x2 or 3x3 matrix";return a.call(this,O.matrixWarp,{matrix:t?m(e):e,texSize:[this.width,this.height],useTextureSpace:0|o}),this}function D(e,t){var o=d.apply(null,t),n=d.apply(null,e),o=m(o);return this.matrixWarp([o[0]*n[0]+o[1]*n[3]+o[2]*n[6],o[0]*n[1]+o[1]*n[4]+o[2]*n[7],o[0]*n[2]+o[1]*n[5]+o[2]*n[8],o[3]*n[0]+o[4]*n[3]+o[5]*n[6],o[3]*n[1]+o[4]*n[4]+o[5]*n[7],o[3]*n[2]+o[4]*n[5]+o[5]*n[8],o[6]*n[0]+o[7]*n[3]+o[8]*n[6],o[6]*n[1]+o[7]*n[4]+o[8]*n[7],o[6]*n[2]+o[7]*n[5]+o[8]*n[8]])}function j(e,t,o,n){return O.swirl=O.swirl||g("uniform float radius;uniform float angle;uniform vec2 center;","coord-=center;float distance=length(coord);if(distance<radius){float percent=(radius-distance)/radius;float theta=percent*percent*angle;float s=sin(theta);float c=cos(theta);coord=vec2(coord.x*c-coord.y*s,coord.x*s+coord.y*c);}coord+=center;"),a.call(this,O.swirl,{radius:o,center:[e,t],angle:n,texSize:[this.width,this.height]}),this}var I={};!function(){function e(e){if(!e.getExtension("OES_texture_float"))return!1;var t=e.createFramebuffer(),o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),t=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.FLOAT,new Float32Array([2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]));var o=e.createProgram(),n=e.createShader(e.VERTEX_SHADER),r=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(n,"attribute vec2 vertex;void main(){gl_Position=vec4(vertex,0.0,1.0);}"),e.shaderSource(r,"uniform sampler2D texture;void main(){gl_FragColor=texture2D(texture,vec2(0.5));}"),e.compileShader(n),e.compileShader(r),e.attachShader(o,n),e.attachShader(o,r),e.linkProgram(o),n=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STREAM_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),n=new Uint8Array(4),e.useProgram(o),e.viewport(0,0,1,1),e.bindTexture(e.TEXTURE_2D,t),e.drawArrays(e.POINTS,0,1),e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,n),127===n[0]||128===n[0]}function t(){}function o(e){return"OES_texture_float_linear"===e?(void 0===this.$OES_texture_float_linear$&&Object.defineProperty(this,"$OES_texture_float_linear$",{enumerable:!1,configurable:!1,writable:!1,value:new t}),e=this.$OES_texture_float_linear$):e=a.call(this,e),e}function n(){var e=s.call(this);return-1===e.indexOf("OES_texture_float_linear")&&e.push("OES_texture_float_linear"),e}try{var r=document.createElement("canvas").getContext("experimental-webgl")}catch(i){}if(r&&-1===r.getSupportedExtensions().indexOf("OES_texture_float_linear")&&e(r)){var a=WebGLRenderingContext.prototype.getExtension,s=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getExtension=o,WebGLRenderingContext.prototype.getSupportedExtensions=n}}();var O;I.canvas=function(){var e=document.createElement("canvas");try{O=e.getContext("experimental-webgl",{premultipliedAlpha:!1})}catch(t){O=null}if(!O)throw"This browser does not support WebGL";return e._={gl:O,isInitialized:!1,texture:null,spareTexture:null,flippedShader:null},e.texture=u(o),e.draw=u(r),e.update=u(i),e.replace=u(s),e.contents=u(l),e.getPixelArray=u(c),e.brightnessContrast=u(h),e.hexagonalPixelate=u($),e.hueSaturation=u(w),e.colorHalftone=u(M),e.triangleBlur=u(E),e.unsharpMask=u(T),e.perspective=u(D),e.matrixWarp=u(L),e.bulgePinch=u(U),e.tiltShift=u(A),e.dotScreen=u(S),e.edgeWork=u(F),e.lensBlur=u(C),e.zoomBlur=u(P),e.noise=u(y),e.denoise=u(b),e.curves=u(v),e.swirl=u(j),e.ink=u(R),e.vignette=u(k),e.vibrance=u(_),e.sepia=u(x),e},I.splineInterpolate=f;var B=function(){function e(e,t){var o=O.createShader(e);if(O.shaderSource(o,t),O.compileShader(o),!O.getShaderParameter(o,O.COMPILE_STATUS))throw"compile error: "+O.getShaderInfoLog(o);return o}function t(t,r){if(this.texCoordAttribute=this.vertexAttribute=null,this.program=O.createProgram(),t=t||o,r=r||n,r="precision highp float;"+r,O.attachShader(this.program,e(O.VERTEX_SHADER,t)),O.attachShader(this.program,e(O.FRAGMENT_SHADER,r)),O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw"link error: "+O.getProgramInfoLog(this.program)}var o="attribute vec2 vertex;attribute vec2 _texCoord;varying vec2 texCoord;void main(){texCoord=_texCoord;gl_Position=vec4(vertex*2.0-1.0,0.0,1.0);}",n="uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,texCoord);}";return t.prototype.destroy=function(){O.deleteProgram(this.program),this.program=null},t.prototype.uniforms=function(e){O.useProgram(this.program);for(var t in e)if(e.hasOwnProperty(t)){var o=O.getUniformLocation(this.program,t);if(null!==o){var n=e[t];if("[object Array]"==Object.prototype.toString.call(n))switch(n.length){case 1:O.uniform1fv(o,new Float32Array(n));break;case 2:O.uniform2fv(o,new Float32Array(n));break;case 3:O.uniform3fv(o,new Float32Array(n));break;case 4:O.uniform4fv(o,new Float32Array(n));break;case 9:O.uniformMatrix3fv(o,!1,new Float32Array(n));break;case 16:O.uniformMatrix4fv(o,!1,new Float32Array(n));break;default:throw"dont't know how to load uniform \""+t+'" of length '+n.length}else{if("[object Number]"!=Object.prototype.toString.call(n))throw'attempted to set uniform "'+t+'" to invalid value '+(n||"undefined").toString();O.uniform1f(o,n)}}}return this},t.prototype.textures=function(e){O.useProgram(this.program);for(var t in e)e.hasOwnProperty(t)&&O.uniform1i(O.getUniformLocation(this.program,t),e[t]);return this},t.prototype.drawRect=function(e,t,o,n){var r=O.getParameter(O.VIEWPORT);t=void 0!==t?(t-r[1])/r[3]:0,e=void 0!==e?(e-r[0])/r[2]:0,o=void 0!==o?(o-r[0])/r[2]:1,n=void 0!==n?(n-r[1])/r[3]:1,null==O.vertexBuffer&&(O.vertexBuffer=O.createBuffer()),O.bindBuffer(O.ARRAY_BUFFER,O.vertexBuffer),O.bufferData(O.ARRAY_BUFFER,new Float32Array([e,t,e,n,o,t,o,n]),O.STATIC_DRAW),null==O.texCoordBuffer&&(O.texCoordBuffer=O.createBuffer(),O.bindBuffer(O.ARRAY_BUFFER,O.texCoordBuffer),O.bufferData(O.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),O.STATIC_DRAW)),null==this.vertexAttribute&&(this.vertexAttribute=O.getAttribLocation(this.program,"vertex"),O.enableVertexAttribArray(this.vertexAttribute)),null==this.texCoordAttribute&&(this.texCoordAttribute=O.getAttribLocation(this.program,"_texCoord"),O.enableVertexAttribArray(this.texCoordAttribute)),O.useProgram(this.program),O.bindBuffer(O.ARRAY_BUFFER,O.vertexBuffer),O.vertexAttribPointer(this.vertexAttribute,2,O.FLOAT,!1,0,0),O.bindBuffer(O.ARRAY_BUFFER,O.texCoordBuffer),O.vertexAttribPointer(this.texCoordAttribute,2,O.FLOAT,!1,0,0),O.drawArrays(O.TRIANGLE_STRIP,0,4)},t.getDefaultShader=function(){return O.defaultShader=O.defaultShader||new t,O.defaultShader},t}();p.prototype.interpolate=function(e){for(var t=0,o=this.ya.length-1;o-t>1;){var n=o+t>>1;this.xa[n]>e?o=n:t=n}var n=this.xa[o]-this.xa[t],r=(this.xa[o]-e)/n;return e=(e-this.xa[t])/n,r*this.ya[t]+e*this.ya[o]+((r*r*r-r)*this.y2[t]+(e*e*e-e)*this.y2[o])*n*n/6};var z=function(){function e(e,t,o,n){this.gl=O,this.id=O.createTexture(),this.width=e,this.height=t,this.format=o,this.type=n,O.bindTexture(O.TEXTURE_2D,this.id),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.LINEAR),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.LINEAR),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE),e&&t&&O.texImage2D(O.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null)}function t(e){return null==o&&(o=document.createElement("canvas")),o.width=e.width,o.height=e.height,e=o.getContext("2d"),e.clearRect(0,0,o.width,o.height),e}e.fromElement=function(t){var o=new e(0,0,O.RGBA,O.UNSIGNED_BYTE);return o.loadContentsOf(t),o},e.prototype.loadContentsOf=function(e){this.width=e.width||e.videoWidth,this.height=e.height||e.videoHeight,O.bindTexture(O.TEXTURE_2D,this.id),O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,this.type,e)},e.prototype.initFromBytes=function(e,t,o){this.width=e,this.height=t,this.format=O.RGBA,this.type=O.UNSIGNED_BYTE,O.bindTexture(O.TEXTURE_2D,this.id),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,e,t,0,O.RGBA,this.type,new Uint8Array(o))},e.prototype.destroy=function(){O.deleteTexture(this.id),this.id=null},e.prototype.use=function(e){O.activeTexture(O.TEXTURE0+(e||0)),O.bindTexture(O.TEXTURE_2D,this.id)},e.prototype.unuse=function(e){O.activeTexture(O.TEXTURE0+(e||0)),O.bindTexture(O.TEXTURE_2D,null)},e.prototype.ensureFormat=function(e,t,o,n){if(1==arguments.length){var r=arguments[0];e=r.width,t=r.height,o=r.format,n=r.type}(e!=this.width||t!=this.height||o!=this.format||n!=this.type)&&(this.width=e,this.height=t,this.format=o,this.type=n,O.bindTexture(O.TEXTURE_2D,this.id),O.texImage2D(O.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null))},e.prototype.drawTo=function(e){if(O.framebuffer=O.framebuffer||O.createFramebuffer(),O.bindFramebuffer(O.FRAMEBUFFER,O.framebuffer),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,this.id,0),O.checkFramebufferStatus(O.FRAMEBUFFER)!==O.FRAMEBUFFER_COMPLETE)throw Error("incomplete framebuffer");O.viewport(0,0,this.width,this.height),e(),O.bindFramebuffer(O.FRAMEBUFFER,null)};var o=null;return e.prototype.fillUsingCanvas=function(e){return e(t(this)),this.format=O.RGBA,this.type=O.UNSIGNED_BYTE,O.bindTexture(O.TEXTURE_2D,this.id),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,o),this},e.prototype.toImage=function(e){this.use(),B.getDefaultShader().drawRect();var n=4*this.width*this.height,r=new Uint8Array(n),i=t(this),a=i.createImageData(this.width,this.height);O.readPixels(0,0,this.width,this.height,O.RGBA,O.UNSIGNED_BYTE,r);for(var s=0;n>s;s++)a.data[s]=r[s];i.putImageData(a,0,0),e.src=o.toDataURL()},e.prototype.swapWith=function(e){var t;t=e.id,e.id=this.id,this.id=t,t=e.width,e.width=this.width,this.width=t,t=e.height,e.height=this.height,this.height=t,t=e.format,e.format=this.format,this.format=t},e}(),G="float random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}";return I}();!function(){"use strict";/**
     * jr-crop - A simple ionic plugin to crop your images.
     * @version 1.0.0
     * @link https://github.com/JrSchild/jr-crop
     * @author Joram Ruitenschild
     * @license MIT
     */
angular.module("jrCrop",[]).factory("$jrCrop",["$ionicModal","$rootScope","$q",function(e,t,o){var n='<div class="jr-crop modal"><div class="jr-crop-center-container"><div class="jr-crop-img" ng-style="{width: width + \'px\', height: height + \'px\'}"></div></div><div class="jr-crop-center-container"><div class="jr-crop-select" style="overflow: hidden" ng-style="{width: width + \'px\', height: height + \'px\'}"></div></div><div class="bar bar-footer bar-dark jr-crop-footer"><button class="button button-clear" ng-click="cancel()">{{cancelText}}</button><div class="title">{{title}}</div><button class="button button-clear" ng-click="crop()">{{chooseText}}</button></div></div>',r=ionic.views.View.inherit({promise:null,imgWidth:null,imgHeight:null,imgSelect:null,imgFull:null,posX:0,posY:0,scale:1,rotate:0,last_scale:1,last_posX:0,last_posY:0,last_rotate:0,initialize:function(e){var t=this;t.options=e,t.promise=o.defer(),t.loadImage().then(function(e){t.imgWidth=e.naturalWidth,t.imgHeight=e.naturalHeight,t.options.modal.el.querySelector(".jr-crop-img").appendChild(t.imgSelect=e.cloneNode()),t.options.modal.el.querySelector(".jr-crop-select").appendChild(t.imgFull=e.cloneNode()),t.bindHandlers(),t.initImage()}),t.options.cancel=this.cancel.bind(this),t.options.crop=this.crop.bind(this)},initImage:function(){if(this.options.height<this.imgHeight||this.options.width<this.imgWidth){var e=this.imgWidth/this.imgHeight,t=this.options.width/this.options.height;t>e?this.scale=this.last_scale=this.options.width/this.imgWidth:this.scale=this.last_scale=this.options.height/this.imgHeight}var o=(this.imgWidth-this.options.width)/2,n=(this.imgHeight-this.options.height)/2;this.posX=this.last_posX=-o,this.posY=this.last_posY=-n,this.setImageTransform()},cancel:function(){var e=this;e.options.modal.remove().then(function(){e.promise.reject("canceled")})},bindHandlers:function(){function e(){t(),n.posX>r&&(n.posX=r),n.posX<a&&(n.posX=a),n.posY>i&&(n.posY=i),n.posY<s&&(n.posY=s)}function t(){var e=n.scale*n.imgWidth,t=n.scale*n.imgHeight;r=(e-n.imgWidth)/2,i=(t-n.imgHeight)/2,a=-(e-r-n.options.width),s=-(t-i-n.options.height)}var o,n=this,r=0,i=0,a=0,s=0,l=0,c=0,u=1,d=n.imgWidth/n.imgHeight,m=n.options.width/n.options.height;o=d>m?n.options.height/n.imgHeight:n.options.width/n.imgWidth;var p={prevent_default_directions:["left","right","up","down"]};ionic.onGesture("touch transform drag dragstart dragend rotate",function(t){switch(t.type){case"touch":n.last_scale=n.scale;break;case"drag":n.posX=n.last_posX+t.gesture.deltaX-l,n.posY=n.last_posY+t.gesture.deltaY-c,e();break;case"transform":n.scale=Math.max(o,Math.min(n.last_scale*t.gesture.scale,u)),e();break;case"dragend":n.last_posX=n.posX,n.last_posY=n.posY;break;case"dragstart":n.last_scale=n.scale,t.gesture.deltaX>1||t.gesture.deltaX<-1?(l=t.gesture.deltaX,c=t.gesture.deltaY):(l=0,c=0);break;case"rotate":n.rotate=n.last_rotate+t.gesture.rotation}n.setImageTransform()},n.options.modal.el,p)},setImageTransform:function(){var e=this,t="translate3d("+e.posX+"px,"+e.posY+"px, 0) scale3d("+e.scale+","+e.scale+", 1)rotate("+e.rotate+"deg)";e.imgSelect.style[ionic.CSS.TRANSFORM]=t,e.imgFull.style[ionic.CSS.TRANSFORM]=t},crop:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.options.width/this.scale,e.height=this.options.height/this.scale;var o=this.imgWidth*this.scale,n=this.imgHeight*this.scale,r=(o-this.imgWidth)/2,i=(n-this.imgHeight)/2,a=(this.posX-r)/this.scale,s=(this.posY-i)/this.scale;t.translate(a,s),t.translate(this.imgWidth/2,this.imgHeight/2),t.rotate(this.rotate*Math.PI/180),t.drawImage(this.imgFull,this.imgWidth/2*-1,this.imgHeight/2*-1),this.options.modal.remove(),this.promise.resolve(e)},loadImage:function(){var e=o.defer();return angular.element("<img />").bind("load",function(t){e.resolve(this)}).bind("error",e.reject).prop("src",this.options.url),e.promise}});return{defaultOptions:{width:0,height:0,aspectRatio:0,cancelText:"Cancel",chooseText:"Choose"},crop:function(o){o=this.initOptions(o);var i=t.$new(!0);return ionic.extend(i,o),i.modal=e.fromTemplate(n,{scope:i}),i.modal.show().then(function(){return new r(i).promise.promise})},initOptions:function(e){var t;return t=ionic.extend({},this.defaultOptions),t=ionic.extend(t,e),t.aspectRatio&&(!t.width&&t.height&&(t.width=200),t.width?t.height=t.width/t.aspectRatio:t.height&&(t.width=t.height*t.aspectRatio)),t}}}])}(),function(){"use strict";function e(e,t,o,n,r,i,a,s,l,c,u,d,m,p){function g(e){function t(e){var i=u.$new(!0);y=e,i.form={photo:e},d.fromTemplateUrl("app/component/ion-photo/view/filter.modal.html",{scope:i,focusFirstInput:!0}).then(function(t){i.modalFilter=t,i.modalFilter.show(),i.loading=!0,n(function(){r.init("image",e).then(function(){i.loading=!1})},500)}),i.actionShowFilter=function(e){i.showFilter=e},i.closeModalFilter=function(){i.modalFilter.hide()},i.cropImage=function(){i.modalFilter.remove(),f(y).then(t)},i.filters=r.filters.Adjust,i.imageFilters=r.imageFilters,i.reset=r.reset,i.applyFilter=function(e){r.apply(e.filter)},i.filterEdit=!1,i.showFilter=!0,i.selectFilter=function(e){console.log("filter",e),i.filter=e,i.filterEdit=!0},i.doneFilter=function(){i.filterEdit=!1},i.cancelFilter=function(e){e.slider.value=0,e.setSlider(e.slider),i.filterEdit=!1},i.$watch("scope.filterSelected",function(e){if(e){var t=_.find(i.filters,{func:e});i.filter=t,i.sliders=t.sliders,console.log(t)}}),i.$watch("filter.slider.value",function(e){e&&(i.filter.slider.value=parseInt(e),i.filter.setSlider(i.filter.slider))}),i.closeFilter=function(){o.reject(),i.modalFilter.hide()},i.submitFilter=function(){var e=r.getImage();i.modalFilter.remove(),o.resolve(e)},i.$on("$destroy",function(){i.modal.remove()})}var o=p.defer();return T.filterImage?t(e):o.resolve(e),o.promise}function h(t){function o(e){console.log(e),l(),v(e,a).then(f).then(g).then(r.resolve)["catch"](n)}function n(e){l(e)}var r=p.defer();console.log(b),t&&t.each(function(e,t){T[t]=e});var a={quality:T.quality,aspectRatio:T.aspectRatio,allowRotation:T.allowRotation,allowEdit:T.allowEdit,correctOrientation:T.correctOrientation,targetWidth:T.targetWidth,targetHeight:T.targetHeight,saveToPhotoAlbum:T.saveToPhotoAlbum,destinationType:window.cordova?Camera.DestinationType.DATA_URL:null,encodingType:window.cordova?Camera.EncodingType.JPEG:null,popoverOptions:window.cordova?CameraPopoverOptions:null},s=[{text:'<i class="icon ion-images"></i>'+i.instant("capturePhoto")},{text:'<i class="icon ion-ios-camera"></i>'+i.instant("captureLibrary")}],l=e.show({buttons:s,titleText:i.instant("submit"),cancelText:i.instant("cancel"),cancel:n,buttonClicked:o});return r.promise}function f(e){var t=p.defer();return window.cordova&&(e="data:image/jpeg;base64,"+e),T.jrCrop?c.crop({url:e,aspectRatio:1,allowRotation:T.allowRotation,width:T.targetWidth,height:T.targetHeight,cancelText:i.instant("cancel"),chooseText:i.instant("submit")}).then(function(e){t.resolve(e.toDataURL())})["catch"](t.reject):t.resolve(e),t.promise}function v(e,n){function r(e){if(0===e&&x&&(n.sourceType=Camera.PictureSourceType.CAMERA),1===e&&x&&(n.sourceType=Camera.PictureSourceType.PHOTOLIBRARY),x)o.getPicture(n).then(a.resolve,a.reject);else{var t=angular.element('<input type="file" accept="image/x-png, image/gif, image/jpeg" max-size="2048" />');t[0].click(),t.on("change",function(e){y=e.currentTarget.files[0];var t=new FileReader;t.onload=function(e){a.resolve(e.target.result)},t.readAsDataURL(y)})}}function i(){t.captureVideo({limit:1,duration:5}).then(function(e){y=e[0].fullPath,a.resolve(y)},a.reject)}var a=p.defer();return 0===e&&r(0),1===e&&r(1),2===e&&i(),a.promise}var b=ionic.Platform.device(),w=ionic.Platform.isIOS();console.log("isIOS",w);var y,x=window.cordova,T={jrCrop:!0,filterImage:!0,quality:90,allowEdit:!1,filter:!0,correctOrientation:!0,targetWidth:320,targetHeight:320,saveToPhotoAlbum:!1,allowRotation:!1,aspectRatio:0};return{open:h,crop:f,filter:g}}e.$inject=["$ionicActionSheet","$cordovaCapture","$cordovaCamera","$timeout","PhotoFilter","$translate","AppConfig","Share","$cordovaActionSheet","$jrCrop","$rootScope","$ionicModal","ActionSheet","$q"],angular.module("ion-photo").factory("PhotoService",e)}(),function(){"use strict";function e(e,t){function o(t){e.resolveLocalFileSystemURL(t,function(e){return n(e)},a)}function n(t){var o=t.fullPath.substr(t.fullPath.lastIndexOf("/")+1),n=s()+o;e.resolveLocalFileSystemURL(cordova.file.dataDirectory,function(e){t.copyTo(e,n,function(e){return r(e)},a)},a)}function r(t){var o=t.nativeURL.slice(0,-4);e.PKVideoThumbnail.createThumbnail(t.nativeURL,o+".png",function(e){return i(e)},a)}function i(e){var t=e.slice(0,-4);t+=".MOV",l.resolve(t)}function a(e){console.log("FAIL: "+e.code),l.reject("ERROR")}function s(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;5>o;o++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var l=t.defer();return{saveVideo:function(e){return o(e[0].localURL),promise}}}e.$inject=["$window","$q"],angular.module("ion-photo").factory("Video",e)}(),function(){"use strict";angular.module("ionic").run(["$templateCache",function(e){e.put("app/directive/SigninModalDirective.html",'<ion-modal-view id="user-layout" class="modal-auth bg-animate" cache-view="false"><ion-header-bar><h1 class="title" \ntranslate="signin"></h1><a ng-click="closeModal()" class="button button-icon icon ion-ios-close-empty"></a>\n</ion-header-bar><ion-content class="padding" scroll="false"><div class="step2"><form name="myForm" \nnovalidate="novalidate" ng-submit="submitLogin(myForm, form)"><label class="item item-input"><i \nclass="icon icon-user placeholder-icon"></i> <input required="required" type="text" name="username" \nng-model="form.username" ng-minlength="4" ng-maxlength="12" ng-model-options="{debounce: 1000}" \nng-pattern="/^[a-zA-Z\'. -]+$/" placeholder="{{\'yourLogin\' | translate}}"></label><div ng-if="myForm.username.$dirty">\n<div ng-messages="myForm.email.$error" class="validation-error"><div ng-message="required" \ntranslate="usernameRequired"></div><div ng-message="email" translate="usernameInUse"></div></div><div \nng-messages="myForm.email.$pending" class="validation-pending"><div ng-message="email" translate="checkingUsername">\n</div></div></div><label class="item item-input"><i class="icon icon-lock placeholder-icon"></i> <input required \ntype="password" name="password" ng-model="form.password" placeholder="{{\'password\'|translate}}"></label><button \nclass="button button-block button-outline button-light" type="submit" translate="{{\'submit\' | translate}}"></button>\n</form><span class="term">{{\'termAccept\' | translate}} <a href="https://photogramapp.com">{{\'terms\' | translate}}</a>\n</span></div></ion-content></ion-modal-view>'),e.put("app/directive/SignupModalDirective.html",'<ion-modal-view id="user-layout" class="modal-auth bg-animate" cache-view="false"><ion-header-bar><h1 class="title" \ntranslate="register"></h1><a ng-click="closeModal()" class="button button-icon icon ion-ios-close-empty"></a>\n</ion-header-bar><ion-content class="padding" scroll="false"><div class="step2"><form name="myForm" \nnovalidate="novalidate" ng-submit="submitRegister(myForm, form)"><label class="item item-input"><i \nclass="icon icon-envelope placeholder-icon"></i> <input required="required" type="email" name="email" \nng-model="form.email" email-validator ng-model-options="{debounce: 1000}" placeholder="user@example.com"></label><div \nng-if="myForm.email.$dirty"><div ng-messages="myForm.email.$error" class="validation-error"><div ng-message="required" \ntranslate="emailRequired"></div><div ng-message="email" translate="emailInUse"></div></div><div \nng-messages="myForm.email.$pending" class="validation-pending"><div ng-message="email" translate="checkingEmail"></div>\n</div></div><label class="item item-input"><i class="icon icon-user placeholder-icon"></i> <input required="required" \ntype="text" name="username" ng-model="form.username" username-validator ng-minlength="4" ng-maxlength="12" \nng-model-options="{debounce: 1000}" ng-pattern="/^[a-zA-Z\'. -]+$/" placeholder="{{\'yourLogin\' | translate}}"></label>\n<div ng-if="myForm.username.$dirty"><div ng-messages="myForm.email.$error" class="validation-error"><div \nng-message="required" translate="usernameRequired"></div><div ng-message="email" translate="usernameInUse"></div></div>\n<div ng-messages="myForm.email.$pending" class="validation-pending"><div ng-message="email" \ntranslate="checkingUsername"></div></div></div><label class="item item-input"><i \nclass="icon icon-lock placeholder-icon"></i> <input required type="password" name="password" ng-model="form.password" \nplaceholder="{{\'password\'|translate}}"></label><button class="button button-block button-outline button-light" \ntype="submit" translate="{{\'submit\' | translate}}"></button></form><span class="term">{{\'termAccept\' | translate}} <a \nhref="https://photogramapp.com">{{\'terms\' | translate}}</a></span></div></ion-content></ion-modal-view>'),e.put("app/directive/distanceModal.html",'<ion-modal-view><ion-header-bar class="bar-light"><div class="buttons"><button \nclass="button button-clear button-icon ion-ios-close-empty" ng-click="closeDistanceModal()"></button></div><div \nclass="title">{{ "chooseDistanceText" | translate }}</div></ion-header-bar><ion-content><ion-list><ion-item \nclass="item item-icon-right" ng-repeat="distance in distances" ng-click="onDistanceSelected(distance.val)" bindonce><h2\n bo-bind="distance.text"></h2><i class="icon ion-checkmark" ng-show="params.distance === distance.val"></i></ion-item>\n</ion-list></ion-content></ion-modal-view>'),e.put("app/directive/follow.modal.html",'<ion-modal-view class="modal-profile photogram-profile"><ion-header-bar class="bar-positive"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\nFollow Users</div></ion-header-bar><ion-content><div class="list"><div class="item item-avatar item-button-right" \nng-repeat="item in data"><img ng-src="{{ ::item.src }}"><h2>{{ ::item.name }}</h2><p>{{ ::item.status }}</p><button \nclass="button" ng-click="item.follow = !item.follow" ng-class="item.follow ? \'button-positive\' : \'button-stable\'"><i \nclass="icon" ng-class="item.follow? \'ion-thumbsup\' : \'ion-plus\'"></i></button></div></div></ion-content>\n</ion-modal-view>'),e.put("app/directive/likeDirective.html",'<ion-modal-view class="modal-comment"><ion-header-bar class="bar-dark"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\n{{ ::\'Likes\' | translate }} ({{ ::likes.length }})</div></ion-header-bar><ion-content><div class="list step1"><div \nng-repeat="item in likes" class="item item-avatar item-button-right"><img ng-src="{{ ::item.user.img }}"><h2>\n{{ ::item.user.name }}</h2><div>{{ ::item.text }}</div><p>{{ ::item.created | amTimeAgo }}</p><button \nclass="button button-positive button-outline"><i class="icon ion-ios-plus-empty"></i> {{ ::\'Follow\' }}</button></div>\n</div></ion-content></ion-modal-view>'),e.put("app/directive/photoCommentDirective.html",'<ion-modal-view class="modal-comment"><ion-header-bar class="bar-light"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\n<span translate="commentPhotoText"></span>({{ comments.length }})</div></ion-header-bar><ion-content><div \nclass="padding center" ng-if="loading"><ion-spinner></ion-spinner></div><ion-list class="list" \nng-show="comments.length" can-swipe="true"><ion-item ng-repeat="item in comments | orderBy:createdAt" \nclass="item item-avatar"><img ng-src="{{ ::item.user.photo._url || \'./img/user.png\'}}"><div class="row"><h2>\n{{ ::item.user.name }}</h2></div><div class="row"><div class="text">{{ ::item.text }}</div></div><div class="row"><p>\n{{ ::item.createdAt | amTimeAgo }}</p></div><div ng-if="item.user.id === currentUser.id"><ion-option-button \nclass="button-info" ng-click="editComment(item)" translate="edit">Edit</ion-option-button><ion-option-button \nclass="button-assertive" ng-click="deleteComment(item)" translate="remove">Remove</ion-option-button></div></ion-item>\n</ion-list><div class="center-ico" ng-if="nocomments"><i class="icon ion-ios-chatbubble-outline"></i><h1 \ntranslate="noComments"></h1></div></ion-content><form name="rForm" ng-submit="submitComment(rForm, form)" novalidate>\n<ion-footer-bar class="bar-stable item-input-inset message-footer" keyboard-attach><label class="item-input-wrapper"><i\n class="icon ion-ios-compose-outline placeholder-icon"></i><textarea mentio mentio-trigger-char="\'@\'" \nmentio-items="people" mentio-template-url="app/mentio/people-mentions.html" mentio-search="searchPeople(term)" \nmentio-select="getPeopleTextRaw(item)" mentio-id="\'theTextArea\'" ng-trim="false" ng-model="form.text" \nplaceholder="Send a comment..." required minlength="1" maxlength="1500">\n                </textarea></label><div \nclass="footer-btn-wrap"><button class="button button-positive button-outline" type="submit" \nng-disabled="!form.text || form.text === \'\'">Publish</button></div></ion-footer-bar></form></ion-modal-view>'),e.put("app/directive/photoGridDirective.html",'<div class="center padding" ng-if="showErrorView()"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView()"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="loading"><ion-spinner>\n</ion-spinner></div><ion-refresher pulling-text="{{\'loadingText\'| translate}}" on-refresh="onReload()"></ion-refresher>\n<div class="row animated fadeIn" ng-if="$index % 3 === 0" ng-repeat="image in data | orderBy:\'createdAt\':true"><div \nclass="col col-33 item-animate1" ng-if="$index < data.length"><img ng-if="profile" profile-modal \nuser="data[$index].user.obj" ng-src="{{ ::data[$index].imageThumb._url}}" width="100%"> <img ng-if="!profile" \nng-src="{{ ::data[$index].imageThumb._url}}" width="100%"></div><div class="col col-33 item-animate1" \nng-if="$index + 1 < data.length"><img ng-if="profile" profile-modal user="data[$index + 1].user.obj" \nng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"> <img ng-if="!profile" \nng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"></div><div class="col col-33 item-animate1" \nng-if="$index + 2 < data.length"><img ng-if="profile" profile-modal user="data[$index + 2].user.obj" \nng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"> <img ng-if="!profile" \nng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"></div></div><ion-infinite-scroll \non-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded()" spinner distance="1%"></ion-infinite-scroll>'),e.put("app/directive/photoListDirective.html",'<div class="center padding" ng-if="showErrorView()"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView()"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="loading"><ion-spinner>\n</ion-spinner></div><ion-refresher pulling-text="{{\'loadingText\'| translate}}" on-refresh="onReload()"></ion-refresher>\n<div class="list card" ng-repeat="gallery in data | orderBy:\'createdAt\':true" ng-if="showGalleries()"><div \nclass="item item-avatar" ng-click="load(gallery.user.username)" ion-affix data-affix-within-parent-with-class="card">\n<img ng-if="profile" ng-src="{{ ::gallery.user.photo._url}}"> <img \nng-src="{{ ::gallery.user.photo._url || \'img/user.png\'}}"><h2>{{ ::gallery.user.name}}</h2><p>\n{{ ::gallery.user.status}}</p><span>{{ ::gallery.createdAt | amTimeAgo}}</span></div><div class="item item-body" \non-double-tap="like(gallery.id)" ng-model="gallery"><div class="icon ion-ios-heart heart" \nng-class="gallery.isLiked ? \'happy\' : \'broken\' "></div><i class="icon" ng-if="like"></i> <img \nng-src="{{ gallery.image._url}}" id="{{ ::gallery.id}}"></div><div class="item item-buttons"><div class="row"><div \nclass="col col-75"><ion-spinner ng-show="gallery.progress"></ion-spinner><button photo-like ng-model="gallery" \nng-if="!gallery.progress" ng-class="gallery.isLiked ? \'ion-ios-heart\' : \'ion-ios-heart-outline\' " \nclass="button-clear button-icon button-heart"></button> <button ng-click="openComment(gallery.id)" ng-model="gallery" \nclass="button-clear button-icon ion-ios-chatbubble-outline"></button> <button \nng-click="share(gallery.image._url, gallery.title)" photogram="{{ :: gallery.id }}" \nclass="button-clear button-icon ion-android-share"></button></div><div class="col text-right"><button \nng-click="action(gallery)" photogram="{{ :: gallery.id }}" class="button-clear button-icon ion-android-more-vertical">\n</button></div></div></div><div class="padding"><span class="likes" ng-click="openLikers(gallery.id)"><i \nclass="icon ion-ios-heart"></i> <span ng-if="!gallery.progress">{{ gallery.likesTotal }}</span> <span \ntranslate="likesText"></span></span><div class="list-comments"><div class="comment-item"><span profile-modal \nusername="gallery.user.username" class="username">{{ :: gallery.user.name }}</span> <span class="comment" \nng-bind-html="gallery.title | hashtag "></span></div><div class="comment-item" \nng-repeat="item in gallery.comments |limitTo:3 | orderBy:\'createdAt\':true"><span class="username" profile-modal \nusername="gallery.user.username">{{ :: item.user.name }}</span> <span class="comment" \nng-bind-html="item.text | hashtag"></span></div><a class="comment-item" photo-comment ng-model="gallery" \nng-if="gallery.commentsTotal>3" translate="seeAllCommentText"></a></div><button \nclass="button button-block button-clear button-comment" photo-comment ng-model="gallery"><span translate="addComment">\n</span></button></div></div><ion-infinite-scroll on-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded()" spinner \ndistance="1%"></ion-infinite-scroll>'),e.put("app/directive/profile-edit-modal.html",'<ion-modal-view class="profile-edit"><ion-header-bar class="bar-light"><button class="button button-clear" \nng-click="closeModal()" translate="cancel"></button><div class="title">{{ ::\'editProfile\' | translate }}</div><button \nclass="button button-clear" ng-click="submitUpdateProfile(rForm, form)" translate="submit"></button></ion-header-bar>\n<ion-content class="view-avatar"><div class="step2"><form name="rForm" novalidate><img class="avatar" user-avatar \nng-model="currentUser" ng-src="{{ currentUser.photo.url() || \'img/user.png\' }}"><label class="item item-input"><i \nclass="icon ion-clipboard placeholder-icon"></i> <input required="required" type="text" name="name" \nng-model="form.name" placeholder="{{\'name\' | translate}}"></label><label class="item item-input"><i \nclass="icon ion-pound placeholder-icon"></i> <input required="required" type="text" name="username" \nng-model="form.username" ng-minlength="4" ng-maxlength="12" ng-pattern="/^[a-zA-Z\'. -]+$/" \nplaceholder="{{\'username\' | translate}}"></label><label class="item item-input"><i \nclass="icon ion-earth placeholder-icon"></i> <input type="url" name="website" ng-model="form.website" \nplaceholder="{{\'site\' | translate}}"></label><label class="item item-input"><i \nclass="icon ion-information-circled placeholder-icon"></i> <input required="required" type="text" name="status" \nng-model="form.status" placeholder="{{\'status\' | translate}}"></label><ion-item class="item-divider" \ntranslate="privateInformation"></ion-item><label class="item item-input"><i \nclass="icon icon-envelope placeholder-icon"></i> <input type="email" name="email" ng-model="form.email" \ndisabled="disabled" ng-model-options="{debounce: 1000}" placeholder="user@example.com"></label><label \nclass="item item-input"><i class="icon ion-iphone placeholder-icon"></i> <input required="required" type="tel" \nname="phone" ng-model="form.phone" placeholder="{{\'phone\' | translate }}"></label></form></div><div \nclass="padding step3"><button ng-click="linkFacebook()" ng-disabled="form.facebook" \nclass="button button-block button-facebook"><i class="icon ion-social-facebook"></i> <span translate="facebookLink">\n</span></button></div></ion-content></ion-modal-view>'),e.put("app/directive/profile-modal.html",'<ion-modal-view id="account-view"><ion-header-bar class="bar-light"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\n{{ user.name }}</div></ion-header-bar><ion-content overflow-scroll="true"><div class="profile-top"><div class="row">\n<div class="col-25"><img class="avatar" ng-src="{{ user.photo._url || \'img/user.png\'}}"></div><div \nclass="col col-statics"><div class="row"><div class="row"><div class="col"><span class="text-center">\n{{ ::user.galleriesTotal || 0}}</span><h3 translate="postsText"></h3></div><div class="col"><span class="text-center">\n{{ user.followersTotal || 0}}</span><h3 translate="followersText"></h3></div><div class="col"><span \nclass="text-center">{{ ::user.followingsTotal || 0}}</span><h3 translate="followingText"></h3></div></div></div><div \nclass="row col-edit"><div class="col"><photogram-loading loading="loadingFollow"></photogram-loading><button \nng-class="{\'button-unfollow\': user.isFollow, \'button-follow\': !user.isFollow}" ng-click="follow()" class="button"><span\n ng-show="!user.isFollow" translate>Follow</span> <span ng-show="user.isFollow" translate>Following</span></button>\n</div></div></div></div><div class="padding"><span class="user-username">{{ user.name }}</span><p class="user-status">\n{{ user.status }}</p></div></div><div class="item bar"><div class="button-bar"><button \nclass="button button-icon icon ion-grid" ng-class="{active: tab.grid}" ng-click="changeTab(\'grid\')"></button> <button \nclass="button button-icon icon ion-drag" ng-class="{active: tab.list}" ng-click="changeTab(\'list\')"></button> <button \nclass="button button-icon icon ion-ios-location"></button></div></div><div class="item item-divider" \ntranslate="recent"></div><div class="tab" ng-if="tab.list"></div><div class="tab" ng-if="tab.grid"></div></ion-content>\n</ion-modal-view>'),e.put("app/directive/search-directive.html",'<label class="item item-input"><i class="icon ion-search placeholder-icon"></i> <input type="search" ng-model="input" \nplaceholder="{{\'SEARCH.FORM.INPUT\' | translate }}"> <button class="button button-icon" ng-if="input.length" \nng-click="clearSearch()"><i class="icon ion-close"></i></button></label>'),e.put("app/directive/settings-modal.html",'<ion-modal-view class="modal-profile"><ion-header-bar class="bar-light"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title" \ntranslate="settingTitle"></div></ion-header-bar><ion-content class="animated fadeIn"><div class="list"><ion-language>\n</ion-language><ion-toggle class="toggle-positive" ng-model="form.push"><h3><small translate="notificationText">\n</small></h3><p ng-if="form.push" translate="on"></p><p ng-if="!form.push" translate="off"></p></ion-toggle><ion-item \nclass="item-icon-right" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S"><h3>\n<small translate="buy"></small></h3><i class="icon ion-ios-arrow-right"></i></ion-item><ion-item \nclass="item-icon-right" href="http://photogramapp.com"><h3><small translate="help"></small></h3><i \nclass="icon ion-ios-arrow-right"></i></ion-item><ion-item class="item-icon-right" href="http://photogramapp.com"><h3>\n<small translate="terms"></small></h3><i class="icon ion-ios-arrow-right"></i></ion-item><ion-item \nclass="item-icon-right" ng-click="show();"><h3><small translate="report"></small></h3><i \nclass="icon ion-ios-arrow-right"></i></ion-item></div><div class="padding"><button ng-click="logout()" \nclass="button button-block button-positive" translate="logout"></button></div></ion-content></ion-modal-view>'),e.put("app/mentio/people-mentions.html",'<ul class="list-group user-search"><li mentio-menu-item="person" ng-repeat="person in items" class="list-group-item">\n<img ng-src="{{person.imageUrl}}" class="user-photo"><div class="description"><span class="text-primary" \nng-bind-html="person.username | mentioHighlight:typedTerm:\'menu-highlighted\' | unsafe"></span> <em class="text-muted" \nng-bind="person.status | words:5"></em></div></li></ul>'),e.put("app/mentio/photo-mentions.html",'<ul class="list-group product-search demo-scrollable-menu"><li mentio-menu-item="product" ng-repeat="product in items" \nclass="list-group-item clearfix"><div class="row"><div class="col-xs-2 text-center"><img ng-src="{{product.imageUrl}}" \nclass="product-photo"></div><div class="col-xs-10"><h4 class="list-group-item-heading">{{product.title | words:5}}</h4>\n<p class="list-group-item-text">{{product.description | words:7}}</p></div></div></li></ul>'),e.put("app/component/ion-language/ion-language.html",'<button class="button button-block button-clear button-light button-language">{{language.translation | translate}} <i \nclass="icon ion-chevron-down"></i></button>'),e.put("app/component/ion-language/modal-language.html",'<ion-modal-view><ion-header-bar><h1 class="title" translate="selectLanguageText"></h1><a ng-click="closeModal()" \nclass="button button-icon icon ion-close"></a></ion-header-bar><div \nclass="bar bar-subheader item-input-inset bar-stable"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="search" placeholder="{{\'searchText\' | translate}}" \nng-model="searchValue"></label><button type="button" class="button button-clear" ng-show="searchValue.length" \nng-click="searchValue=\'\'">Clear</button></div><ion-content class="has-subheader has-header"><ion-list><ion-item \nclass="item" ng-click="selectLanguage(item)" ng-repeat="item in languages | filter:searchValue" \nng-bind-html="item.translation | translate"></ion-item></ion-list></ion-content></ion-modal-view>'),e.put("app/main/account-friend-list/account-friend-list.html","<ion-view><ion-content></ion-content></ion-view>"),e.put("app/main/feedback/feedback-modal.html",'<ion-modal-view class="modal-profile"><ion-header-bar class="bar-light"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title" \ntranslate="FEEDBACK.TITLE"></div></ion-header-bar><ion-content><formly-form model="form" form="rForm" \nfields="formFields"></formly-form><div class="padding"><button class="button button-block button-positive" \nng-click="submitFeedback()"><span translate="BUTTON.SEND"></span></button></div></ion-content></ion-modal-view>'),e.put("app/main/gallery-comment/gallery-comment.html",'<ion-view class="modal-comment" view-title="Comments" cache-view="false"><ion-nav-bar class="bar-light"><ion-nav-title>\n<div class="title"><span translate="commentPhotoText"></span>({{ comments.length }})</div></ion-nav-title>\n<ion-nav-buttons side="left"><button class="button button-icon button-clear ion-ios-arrow-left" \nng-click="$ionicGoBack()"></button></ion-nav-buttons></ion-nav-bar><ion-content><div class="padding center" \nng-if="loading"><ion-spinner></ion-spinner></div><ion-list class="list" ng-if="!loading" can-swipe="true"><ion-item \nng-repeat="item in comments | orderBy:\'createdAt\':false" class="item item-avatar"><img \nng-src="{{ ::item.user.photo._url || \'./img/user.png\'}}"><div class="row"><h2>{{ ::item.user.name }}</h2></div><div \nclass="row"><div class="text">{{ ::item.text }}</div></div><div class="row"><p>{{ ::item.createdAt | amTimeAgo }}</p>\n</div><div ng-if="item.canEdit"><ion-option-button class="button-info" ng-click="editComment(item, $index)" \ntranslate="edit">Edit</ion-option-button><ion-option-button class="button-assertive" \nng-click="deleteComment(item, $index)" translate="remove">Remove</ion-option-button></div></ion-item></ion-list><div \nclass="center-ico" ng-if="nocomments"><i class="icon ion-ios-chatbubble-outline"></i><h1 translate="noComments"></h1>\n</div></ion-content><form name="rForm" ng-submit="submitComment(rForm, form)" novalidate><ion-footer-bar \nng-hide="loading" class="bar-stable item-input-inset message-footer" keyboard-attach><label class="item-input-wrapper">\n<i class="icon ion-ios-compose-outline placeholder-icon"></i><textarea mentio mentio-trigger-char="\'@\'" \nmentio-items="people" mentio-template-url="app/mentio/people-mentions.html" mentio-search="searchPeople(term)" \nmentio-select="getPeopleTextRaw(item)" mentio-id="\'theTextArea\'" ng-trim="false" ng-model="form.text" focus-me \nid="textComment" placeholder="Send a comment..." required minlength="1" maxlength="1500">\n                </textarea>\n</label><div class="footer-btn-wrap"><button class="button button-positive button-outline" type="submit" \nng-disabled="!form.text || form.text === \'\'">Publish</button></div></ion-footer-bar></form></ion-view>'),
e.put("app/main/loading/loading.html",'<ion-view id="user-layout" class="bg-animate"><ion-content></ion-content></ion-view>'),e.put("app/main/profile/profile.html",'<ion-view cache-view="false" id="account-view"><ion-nav-bar class="bar bar-light"><ion-nav-back-button>\n</ion-nav-back-button></ion-nav-bar><ion-nav-title><span>{{ vm.user.name }}</span></ion-nav-title><ion-content \nscroll-sista="header-tabs" class="animated fadeIn"><div class="profile-top"><div class="row"><div class="col-25"><img \nclass="avatar" user-avatar ng-model="vm.user" ng-src="{{ vm.user.photo._url || \'img/user.png\' }}"></div><div \nclass="col col-statics"><div class="row"><div class="col"><span class="text-center">{{ vm.user.galleriesTotal || 0}}\n</span><h3 translate="postsText"></h3></div><div class="col" ng-click="vm.openFollowers()"><span class="text-center">\n{{ vm.user.followersTotal || 0}}</span><h3 translate="followersText"></h3></div><div class="col" \nng-click="vm.openFollowing()"><span class="text-center">{{ vm.user.followingsTotal || 0}}</span><h3 \ntranslate="followingText"></h3></div></div><div class="row col-edit"><div class="col center" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="col" ng-if="vm.isMe && !vm.loading"><button profile-modal-edit \nuser="vm.user" class="button"><div translate="editProfile"></div></button></div><div class="col" \nng-if="!vm.isMe && !vm.loading"><button \nng-class="{\'button-unfollow\': vm.user.isFollow, \'button-follow\': !vm.user.isFollow}" ng-click="vm.follow()" \nclass="button"><span ng-show="!vm.user.isFollow" translate>Follow</span> <span ng-show="vm.user.isFollow" translate>\nFollowing</span></button></div></div></div></div><div class="padding"><span class="user-username">{{ vm.user.name }}\n</span><p class="user-status">{{ vm.user.status }}</p></div></div><div class="item bar"><div class="button-bar"><button\n class="button button-icon icon ion-grid" ng-class="{active: vm.tab.grid}" ng-click="vm.changeTab(\'grid\')"></button> \n<button class="button button-icon icon ion-drag" ng-class="{active: vm.tab.list}" ng-click="vm.changeTab(\'list\')">\n</button> <button class="button button-icon icon ion-ios-location"></button></div></div><div class="center padding" \nng-if="vm.loading"><ion-spinner></ion-spinner></div><div ng-if="!vm.loading"><div class="item item-divider" \ntranslate="recentText">Recent</div><div class="tab" ng-if="vm.tab.list"><photo-list username="vm.user.username">\n</photo-list></div><div class="tab" ng-if="vm.tab.grid"><photo-grid username="vm.user.username"></photo-grid></div>\n</div></ion-content></ion-view>'),e.put("app/main/share/post-modal.html",'<ion-modal-view class="modal-post"><ion-header-bar class="bar-light"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closePost()"></button><div class="title" \ntranslate="SHARE.TITLE"></div><button class="button button-positive" ng-click="submitPost(form)"><i \nclass="icon ion-arrow-right-b"></i></button></ion-header-bar><ion-content><div id="image"><img ng-src="{{image}}">\n</div><ul class="list"><li class="item"><textarea ng-model="form.title" \nplaceholder="{{ \'SHARE.FORM.LEGEND\' | translate }}"></textarea></li></ul></ion-content></ion-modal-view>'),e.put("app/main/share/share-modal.html",'<ion-modal-view class="modal-share"><ion-header-bar class="bar-light"><button \nclass="button button-clear button-icon ion-ios-close-empty" ng-click="close()"></button><div class="title" \ntranslate="shareGalleryText"></div></ion-header-bar><ion-content><div class="list"><div \nclass="item item-thumbnail-left"><img ng-src="{{image}}" ng-click="editFilter()"><textarea mentio \nmentio-trigger-char="\'@\'" mentio-items="people" mentio-template-url="app/mentio/people-mentions.html" \nmentio-search="searchPeople(term)" mentio-select="getPeopleTextRaw(item)" mentio-id="\'theTextArea\'" ng-trim="false" \ntype="text" ng-model="form.title" placeholder="{{ \'description\'|translate }}"></textarea></div></div><div class="list">\n<a class="item item-icon-left" ion-location ng-model="form.address" ng-if="!form.address.resume"><i \nclass="icon ion-ios-location"></i> <span translate="addLocale"></span> </a><a \nclass="item item-icon-left item-button-right" ng-if="form.address.resume"><i class="icon ion-ios-location"></i><h2>\n{{form.address.name || form.address.resume}}</h2><p>{{form.address.resume}}</p><button class="button button-icon" \nng-click="closeAddress()"><i class="icon ion-ios-close"></i></button></a></div><div class="padding"><button \nclass="button button-block button-positive" type="button" ng-click="submit(form)" translate="submit"></button></div>\n</ion-content></ion-modal-view>'),e.put("app/main/tab/main-tab.html",'<ion-view><ion-nav-bar class="bar bar-light"><ion-nav-back-button></ion-nav-back-button></ion-nav-bar><ion-tabs \nclass="tabs-light tabs-photogram"><ion-tab title="{{ \'PHOTOGRAM.TITLE.HOME\' | translate }}" icon-on="ion-ios-home" \nicon-off="ion-ios-home-outline" ui-sref="tab.home"><ion-nav-view name="tabHome"></ion-nav-view></ion-tab><ion-tab \ntitle="{{ \'PHOTOGRAM.TITLE.SEARCH\' | translate }}" icon-on="ion-ios-world" icon-off="ion-ios-world-outline" \nui-sref="tab.search"><ion-nav-view name="tabSearch"></ion-nav-view></ion-tab><ion-tab \ntitle="{{ \'PHOTOGRAM.TITLE.SHARE\' | translate }}" icon-on="ion-ios-camera" icon-off="ion-ios-camera-outline" \nng-click="vm.postPhoto()"><ion-nav-view name="tabCapture"></ion-nav-view></ion-tab><ion-tab \ntitle="{{ \'PHOTOGRAM.TITLE.ACTIVITY\' | translate }}" icon-on="ion-ios-heart" icon-off="ion-ios-heart-outline" \nui-sref="tab.activity"><ion-nav-view name="tabActivity"></ion-nav-view></ion-tab><ion-tab \ntitle="{{ \'PHOTOGRAM.TITLE.PROFILE\' | translate }}" icon-on="ion-ios-person" icon-off="ion-ios-person-outline" \nui-sref="tab.account"><ion-nav-view name="tabProfile"></ion-nav-view></ion-tab></ion-tabs></ion-view>'),e.put("app/main/tab-account/account.html",'<ion-view cache-view="false" id="account-view"><ion-nav-title><span>{{ vm.user.attributes.name }}</span>\n</ion-nav-title><ion-nav-buttons side="right"><button settings-modal class="button button-icon icon ion-gear-a">\n</button></ion-nav-buttons><ion-content scroll-sista="header-tabs" class="animated fadeIn"><div class="profile-top">\n<div class="row"><div class="col-25"><img class="avatar" user-avatar ng-model="currentUser" \nng-src="{{ currentUser.photo.url() || \'img/user.png\' }}"></div><div class="col col-statics"><div class="row"><div \nclass="col"><span ng-if="!vm.loading" class="text-center">{{ vm.user.attributes.galleriesTotal || 0}}</span>\n<ion-spinner ng-if="vm.loading"></ion-spinner><h3 translate="postsText"></h3></div><div class="col" \nng-click="vm.openFollowers()"><span ng-if="!vm.loading" class="text-center">{{ vm.user.attributes.followersTotal || 0}}\n</span><ion-spinner ng-if="vm.loading"></ion-spinner><h3 translate="followersText"></h3></div><div class="col" \nng-click="vm.openFollowing()"><span ng-if="!vm.loading" class="text-center">\n{{ vm.user.attributes.followingsTotal || 0}}</span><ion-spinner ng-if="vm.loading"></ion-spinner><h3 \ntranslate="followingText"></h3></div></div><div class="row col-edit"><div class="col"><button profile-modal-edit \nuser="vm.user" class="button"><div translate="editProfile"></div></button></div></div></div></div><div class="padding">\n<span class="user-username">{{ vm.user.attributes.name }}</span><p class="user-status">{{ vm.user.attributes.status }}\n</p></div></div><div class="item bar"><div class="button-bar"><button class="button button-icon icon ion-grid" \nng-class="{active: vm.tab.grid}" ng-click="vm.changeTab(\'grid\')"></button> <button \nclass="button button-icon icon ion-drag" ng-class="{active: vm.tab.list}" ng-click="vm.changeTab(\'list\')"></button> \n<button class="button button-icon icon ion-ios-location"></button></div></div><div class="item item-divider" \ntranslate="recentText">Recent</div><div class="tab" ng-if="vm.tab.list && !vm.loading"><photo-list \nusername="vm.user.attributes.username"></photo-list></div><div class="tab" ng-if="vm.tab.grid && !vm.loading">\n<photo-grid username="currentUser.username"></photo-grid></div></ion-content></ion-view>'),e.put("app/main/tab-activity/activity.html",'<ion-view class="list-activity"><ion-nav-title><span translate="activities"></span></ion-nav-title><ion-content \nscroll-sista=""><div class="center padding" ng-if="loading"><ion-spinner></ion-spinner></div><div \nclass="center padding" ng-if="vm.showErrorView()"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-positive" ng-click="vm.onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="vm.showEmptyView()"><div class="error"><i class="icon icon-large ion-android-alert"></i>\n<p>{{ "activityNotFoundText" | translate }}</p></div></div><ion-refresher pulling-text="{{\'loadingText\'| translate}}" \non-refresh="onReload()"></ion-refresher><div class="list"><div class="item item-avatar item-animate1" \nng-repeat="item in vm.data | orderBy:\'createdAt\':true"><img ng-src="{{ item.user.photo._url  || \'./img/user.png\'}}"><h2\n ng-click="vm.openProfile(item.user.username)">{{ item.user.name}}</h2><div class="text">{{ item.action | translate }}\n</div><p>{{ item.createdAt | amTimeAgo }}</p><div class="img-right" ng-if="item.item.gallery"><img \nng-src="{{ item.item.gallery.attributes.imageThumb._url}}"></div><div class="item-button-right" \nng-if="!item.item.gallery"><button class="button button-positive button-outline icon" \nng-class="{\'ion-ios-person-outline\': item.user.isFollow, \'ion-ios-personadd-outline\': !item.user.isFollow}" \nng-click="vm.follow(user)"></button></div></div></div><ion-infinite-scroll on-infinite="onLoadMore()" \nng-if="vm.moreDataCanBeLoaded()" spinner distance="1%"></ion-infinite-scroll></ion-content></ion-view>'),e.put("app/main/tab-home/home.html",'<ion-view class="view-home"><ion-nav-buttons side="left"><button \nclass="button button-icon icon ion-ios-personadd-outline" ui-sref="tab.homeUserlist"></button></ion-nav-buttons>\n<ion-nav-title><span class="icon2-logo"></span></ion-nav-title><ion-content><photo-list profile="true" \nload="vm.openProfile" open-likers="vm.openLikers"></photo-list></ion-content></ion-view>'),e.put("app/main/tab-search/search.html",'<ion-view><ion-nav-title><span>{{ \'searchText\' | translate }}</span></ion-nav-title><ion-nav-buttons side="right">\n<button class="button button-icon ion-ios-location" ui-sref="tab.map"></button></ion-nav-buttons><ion-header-bar \nclass="bar bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="search" ng-model="params.search" ng-change="onSearch()" \nng-model-options="{debounce:1000}" style="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}">\n</label><button class="button button-clear" ng-if="search.length" ng-click="clearSearch()">\n{{ "cancelText" | translate }}</button></ion-header-bar><ion-content class="has-subheader"><photo-grid user="">\n</photo-grid></ion-content></ion-view>'),e.put("app/main/tab-search-map/searchMap.html",'<ion-view id="view-map"><ion-nav-title>{{ \'mapTitle\' | translate }}</ion-nav-title><ion-content scroll="false"><div \nid="map_canvas" data-tap-disabled="true"></div></ion-content><ion-footer-bar><div class="row" ng-if="loading"><div \nclass="col"><div class="center"><ion-spinner></ion-spinner></div></div></div><button ng-if="!loading" \nclass="button button-positive button-block button-outline" ng-click="onSearchHere()">{{ \'searchInHere\' | translate }}\n</button></ion-footer-bar></ion-view>'),e.put("app/main/user-avatar/user-avatar.html",'<ion-view id="user-layout" class="bg-animate"><ion-content class="padding view-avatar"><div class="row step1"><div \nclass="col"><img class="avatar" user-avatar ng-model="vm.user" ng-src="{{ vm.user._url || \'img/user.png\' }}"></div>\n</div><div class="step2"><form><label class="item item-input"><i class="icon icon-envelope placeholder-icon"></i> \n<input type="email" name="email" ng-model="vm.form.email" disabled="disabled"></label></form><formly-form \nmodel="vm.form" fields="vm.formFields" form="vm.rForm"></formly-form></div><div class="step3"><button \nng-click="vm.submitAvatar()" class="button button-block button-positive" translate="submit"></button></div>\n</ion-content></ion-view>'),e.put("app/main/user-followers/user-followers.html",'<ion-view id="user-list"><ion-nav-title><span translate="followersText"></span></ion-nav-title><ion-header-bar \nclass="bar bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="list"><div ng-repeat="user in vm.users | filter:searchValue"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" \nng-click="vm.follow(user)"><div ng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>\nUnfollow</div></button> </a><span class="row"><span class="col" ng-repeat="gallery in user.galleries"><img \nng-src="{{ gallery.imageThumb._url}}" id="{{ ::gallery.id}}"></span></span></div></div></ion-content></ion-view>'),e.put("app/main/user-following/user-following.html",'<ion-view id="user-list"><ion-nav-title><span translate="followingText"></span></ion-nav-title><ion-header-bar \nclass="bar bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="list"><div ng-repeat="user in vm.users | filter:searchValue"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" \nng-click="vm.follow(user)"><div ng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>\nUnfollow</div></button> </a><span class="row"><span class="col" ng-repeat="gallery in user.galleries"><img \nng-src="{{ gallery.imageThumb._url}}" id="{{ ::gallery.id}}"></span></span></div></div></ion-content></ion-view>'),e.put("app/main/user-intro/user-intro.html",'<ion-view id="user-layout" class="bg-animate" cache-view="false"><div class="bar bar-header"><ion-language>\n</ion-language></div><ion-content class="padding" scroll="false"><div class="center"><div class="step1"><div \nclass="logo"><span class="icon2-logo"></span></div><p>{{\'userIntroText\' | translate}}</p><facebook-login>\n</facebook-login></div></div></ion-content><ion-footer-bar><div class="row"><div class="col"><button \nclass="button button-block button-light button-outline" translate="signin" signin-modal></button></div><div \nclass="col"><button class="button button-block button-light button-outline" translate="register" signup-modal></button>\n</div></div></ion-footer-bar></ion-view>'),e.put("app/main/user-layout/user-layout.html",'<ion-view id="user-layout" class="bg-animate"><ion-content padding="false"><ion-nav-view></ion-nav-view></ion-content>\n</ion-view>'),e.put("app/main/user-likers/user-likers.html",'<ion-view id="user-list"><ion-nav-title><span translate="likersText"></span></ion-nav-title><ion-header-bar \nclass="bar bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="list"><div ng-repeat="user in vm.users | filter:searchValue"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" \nng-click="vm.follow(user)"><div ng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>\nUnfollow</div></button> </a><span class="row"><span class="col" ng-repeat="gallery in user.galleries"><img \nng-src="{{ gallery.imageThumb._url}}" id="{{ ::gallery.id}}"></span></span></div></div></ion-content></ion-view>'),e.put("app/main/user-list/user-list.html",'<ion-view id="user-list" cache-view="false"><ion-nav-title><span translate="findPeople"></span></ion-nav-title>\n<ion-header-bar class="bar bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="showErrorView()"><div \nclass="error"><i class="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button\n class="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView()"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="vm.loading"><ion-spinner>\n</ion-spinner></div><ion-refresher pulling-text="{{\'loadingText\'| translate}}" on-refresh="vm.onReload()">\n</ion-refresher><div class="list"><div ng-repeat="user in vm.data | filter:searchValue"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-disabled="user.loading" \nng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" ng-click="vm.follow(user)"><div \nng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>Unfollow</div></button> </a><span\n class="row"><span class="col" ng-repeat="gallery in user.galleries"><img ng-src="{{ gallery.imageThumb._url}}" \nid="{{ ::gallery.id}}"></span></span></div></div><ion-infinite-scroll on-infinite="vm.onLoadMore()" \nng-if="vm.moreDataCanBeLoaded()" spinner distance="1%"></ion-infinite-scroll></ion-content></ion-view>'),e.put("app/main/user-merge/merge.html",'<ion-view id="user-layout" class="bg-animate" cache-view="false"><ion-content class="view-avatar padding"><div \nclass="row step1"><div class="col"><img class="avatar" user-avatar \nng-src="{{ tempUser.attributes.photo._url || \'./img/user.png\' }}"></div></div><div class="step2"><formly-form \nmodel="vm.form" fields="vm.formFields" form="rForm"><input type="hidden" ng-model="vm.form.facebookimg"></formly-form>\n</div><div class="padding step3"><button ng-click="vm.submit(rForm, vm.form)" \nclass="button button-block button-facebook"><i class="icon ion-social-facebook"></i> <span translate="mergeAccount">\n</span></button></div></ion-content></ion-view>'),e.put("app/main/walkthrough/walkthrough.html",'<ion-view class="view-intro bg-animate" can-swipe-back="false"><ion-content scroll="false"><div class="intro-slider">\n<ion-slide-box active-slide="slideIndex" show-pager="true" on-slide-changed="vm.slideChanged($index)"><ion-slide \nng-repeat="item in vm.slides track by $index"><div class="content" ng-if="$index == vm.slideIndex"><span class="top">\n<h2>{{ item.text | translate }}</h2></span><div class="phone {{ vm.device }}"><img ng-src="{{ item.img }}"></div></div>\n</ion-slide><ion-slide><div class="content" ng-if="vm.slides.length == vm.slideIndex"><div class="last"><div \nclass="logo2 step1"><img src="img/icon.png"> <span class="icon2-logo"></span></div><button \nclass="button button-block button-clear step2" ui-sref="user.intro" translate="signin"></button></div></div>\n</ion-slide></ion-slide-box></div><button class="button button-positive button-fab left" ng-if="vm.slideIndex" \nng-click="vm.previous()"><i class="icon ion-ios-arrow-left"></i></button> <button \nclass="button button-positive button-fab right" ng-hide="vm.slideIndex === vm.slides.length" ng-click="vm.next()"><i \nclass="icon ion-ios-arrow-right"></i></button></ion-content></ion-view>'),e.put("app/component/ion-photo/view/filter.modal.html",'<ion-modal-view id="photo-filter"><ion-header-bar class="bar-light"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModalFilter()"></button><div \nclass="title">{{ \'Filter\' | translate }}</div><button class="button button-icon" ng-click="submitFilter()"><i \nclass="icon ion-ios-arrow-thin-right"></i></button></ion-header-bar><ion-content><div class="box-image"><img \nid="image" src="{{form.photo}}" ng-hide="loading"><ion-spinner ng-show="loading"></ion-spinner></div><img id="image3" \nsrc="" style="display: none"><div ng-show="showFilter" class="slider-filters animate1"><ion-scroll direction="x" \nclass="image-filter"><a ng-repeat="filter in imageFilters" ng-click="applyFilter(filter)"><p>{{ filter.name }}</p><img \nid="{{filter.id}}" class="img-filter" src=""></a></ion-scroll><div class="row"><div class="col"><button \nclass="button button-block bold">Filter</button></div><div class="col"><button class="button button-block" \nng-click="actionShowFilter(false)">Edit</button></div></div></div><div ng-hide="showFilter" class="slider-filters"><div\n ng-show="filterEdit" class="slider-filters"><p class="text-center">{{filter.name}}</p><div \nclass="item range range-positive"><input type="range" min="-100" max="100" ng-model="filter.slider.value" \nng-model-options="{debounce:100}" step="0.1"></div><div class="row"><div class="col"><button \nclass="button button-block" ng-click="cancelFilter(filter)">Cancel</button></div><div class="col"><button \nclass="button button-block bold" ng-click="doneFilter()">Done</button></div></div></div><div ng-show="!filterEdit" \nclass="slider-filters"><ion-scroll direction="x"><a ng-repeat="filter in filters" ng-click="selectFilter(filter)"><p>\n{{ filter.name }}</p><i class="icon {{filter.icon}}"></i> </a><a ng-click="reset()"><p>Reset</p><i \nclass="icon ion-android-refresh"></i></a></ion-scroll><div class="row"><div class="col"><button \nclass="button button-block" ng-click="actionShowFilter(true)">Filter</button></div><div class="col"><button \nclass="button button-block bold">Edit</button></div></div></div></div></ion-content></ion-modal-view>'),e.put("app/component/ion-photo/view/modal.share.photo.html",'<ion-modal-view class="modal-share"><ion-header-bar class="bar-dark"><div class="title">{{ ::\'Share\' | translate }}\n</div><button class="button button-positive" ng-click="modal.hide()"><i class="icon ion-arrow-right-b"></i></button>\n</ion-header-bar><ion-content ng-cloak><div id="image"><img ng-src="{{ ::form.photo}}"><div class="title">\n{{ ::form.title }}</div></div><ul class="list"><li class="padding"><button ng-repeat="social in sociais" \nng-click="share(form, social)" class="button button-block button-{{ social }}"><i class="icon ion-social-{{ social }}">\n</i> {{ ::social | uppercase }}</button></li></ul></ion-content></ion-modal-view>')}])}();
//# sourceMappingURL=../maps/scripts/app-60d1812d5e.js.map
