<ion-view view-title="{{ 'Ionictagram' | translate }}">
    <ion-nav-title>
        <img src="img/logo.png"/>
    </ion-nav-title>

    <ion-nav-buttons side="right">
        <button ng-click="popover.show($event)"
                class="button button-icon icon ion-android-more-vertical"></button>
    </ion-nav-buttons>
    <ion-content>
        <ion-refresher ng-if="!GalleryHome.loading"
                       on-refresh="loadMore(true)"></ion-refresher>

        <gallery-loading loading="GalleryHome.loading"
                         icon="android"></gallery-loading>

        <div class="list card step1"
             ng-if="!GalleryHome.loading"
             ng-repeat="gallery in GalleryHome.data">

            <div class="item item-avatar"
                 data-affix-within-parent-with-class="card"
                 ion-affix>
                <img ng-src="{{gallery.user.img}}">

                <h2>{{gallery.user.first_name}}</h2>
                <span>{{gallery.created | amTimeAgo}}</span>
            </div>

            <div class="item item-body"
                 ng-click="like = !like">
                <i class="icon"
                   ng-if="like"></i> <img ng-src="{{gallery.item.img._url}}">
            </div>
            <div class="item item-buttons">
                <div class="row">
                    <div class="col col-75">
                        <button gallery-like
                                gallery="{{ gallery.id }}"
                                ng-class="gallery.liked? 'ion-ios-heart' : 'ion-ios-heart-outline' "
                                class="button-clear button-icon button-heart"></button>
                        <button gallery-comment
                                gallery="{{ gallery.id }}"
                                class="button-clear button-icon ion-ios-chatbubble-outline"></button>
                    </div>
                    <div class="col text-right">
                        <button class="button-clear button-icon ion-android-more-vertical"></button>
                    </div>
                </div>
            </div>
            <div class="padding">

                <span class="likes"
                      gallery-like
                      gallery="{{ gallery.id }}"><i class="icon ion-ios-heart"></i>
                    {{ gallery.likes }} {{(gallery.likes>1) ? 'Likes' :'Like' | translate}}</span>


                <div class="list-comments">
                    <div class="comment-item">
                        <span class="username">{{ gallery.user.first_name }}</span> <span class="comment">{{ gallery.item.title }}</span>
                    </div>
                    <div class="comment-item"
                         ng-repeat="item in gallery.comments">
                        <span class="username">{{ item.user.first_name }}</span>
                        <span class="comment">{{ item.text }}</span>
                    </div>
                </div>

                <button class="button button-block button-clear button-comment "
                        gallery-comment
                        gallery="{{ gallery.id }}"
                        translate>Add comment
                </button>
            </div>
        </div>

    </ion-content>
</ion-view>
