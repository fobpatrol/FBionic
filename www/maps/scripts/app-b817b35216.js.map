{"version":3,"sources":["scripts/app.js"],"names":["angular","module","factory","$interval","$q","init","database","_db","undefined","window","sqlitePlugin","openDatabase","name","location","createFromLocation","_promises","forEach","tables","table","columns","type","push","query","_query","join","_tables","all","getLastSync","column","defer","then","data","lastSync","rows","item","resolve","promise","insert","obj","_columns","_values","value","key","reject","bindings","transaction","executeSql","result","results","i","length","copy","error","console","log","paginate","_table","_where","_join","_order","limit","page","_limit","_query1","total","TOTAL","fetchAll","output","fetch","openTermsDirective","$cordovaInAppBrowser","restrict","template","link","scope","elem","attr","openModal","href","cordova","ThemeableBrowser","open","statusbar","color","toolbar","height","title","showPageTitle","backButtonCanClose","bind","$inject","directive","configLanguage","$translatePartialLoaderProvider","$translateProvider","AppConfig","tmhDynamicLocaleProvider","useLoader","urlTemplate","useSanitizeValueStrategy","useMissingTranslationHandlerLog","useLocalStorage","localeLocationPattern","langvar","navigator","language","userlanguage","userlangvar","split","preferredLocale","searchLang","_","some","locales","code","filter","preferredLanguage","moment","locale","addPart","path","config","runLoading","$rootScope","$ionicLoading","$on","text","loading","show","hide","run","NotifyFactory","$ionicPopup","alert","params","confirm","msg","configTranslate","constant","id","google","plugins","OneSignal","setLogLevel","logLevel","visualLevel","googleProjectNumber","jsonData","JSON","stringify","enableInAppAlertNotification","configRoutes","$stateProvider","state","url","templateUrl","controller","controllerAs","abstract","DAO","User","PhotogramSetting","start","promises","$urlRouterProvider","otherwise","views","tabProfile","tabActivity","tabHome","tabSearch","configCompile","$compileProvider","debugInfoEnabled","startParse","Parse","initialize","parse","appId","serverURL","server","runIonic","$ionicPlatform","Keyboard","hideKeyboardAccessoryBar","disableScroll","StatusBar","styleDefault","configIonic","$ionicConfigProvider","backButton","icon","platform","android","tabs","position","style","maxCache","configFacebook","$facebookProvider","setAppId","facebook","setPermissions","runFacebook","LangVar","userLanguage","userLangVar","substring","toUpperCase","d","s","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","app","image","routes","home","login","onesignal","translation","username","email","facebookimg","gender","img","qtdFollow","status","createdAt","attributes","user_id","followId","qtdLike","liked","likes","action","userAvatar","userName","gallery_id","o","g","r","a","m","q","arguments","l","Date","async","ga","cookieDomain","$provide","PLURAL_CATEGORY","ZERO","ONE","TWO","FEW","MANY","OTHER","DATETIME_FORMATS","AMPMS","DAY","ERANAMES","ERAS","FIRSTDAYOFWEEK","MONTH","SHORTDAY","SHORTMONTH","STANDALONEMONTH","WEEKENDRANGE","fullDate","longDate","medium","mediumDate","mediumTime","short","shortDate","shortTime","NUMBER_FORMATS","CURRENCY_SYM","DECIMAL_SEP","GROUP_SEP","PATTERNS","gSize","lgSize","maxFrac","minFrac","minInt","negPre","negSuf","posPre","posSuf","pluralCat","n","opt_precision","pt_br","defineLocale","months","monthsShort","weekdays","weekdaysShort","weekdaysMin","longDateFormat","LT","LTS","L","LL","LLL","LLLL","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","this","day","sameElse","relativeTime","future","past","mm","h","hh","dd","M","MM","y","yy","ordinalParse","ordinal","ionLanguageDirective","$translate","$timeout","Loading","$ionicModal","modalLanguageLink","closeModal","modal","searchValue","selectLanguage","use","end","fromTemplateUrl","focusFirstInput","languages","showLoading","$broadcast","hideLoading","parseInt","seconds","ionLoading","GeoServiceFactory","$http","$window","$cordovaGeolocation","getLocation","posOptions","timeout","enableHighAccuracy","getCurrentPosition","latitude","coords","longitude","err","message","findMe","pos","getGoogleAddress","success","resp","geolocation","logErr","lat","lng","get","address_normal","formatted_address","address","address_components","imagem","numero","short_name","rua","long_name","bairro","cidade","estado","uf","pais","paisCode","cep","zoom","w","parseAddress","place","resume","geo","geometry","H","addressType","types","componentForm","val","componentFormName","street","number","city","country","searchAddress","input","deferred","autocompleteService","getQueryPredictions","getDetails","placeId","detailsService","options","maps","places","AutocompleteService","PlacesService","street_number","route","locality","sublocality","neighborhood","political","administrative_area_level_1","postal_code","ionLocationDirective","GeoService","ionLocationLink","$scope","element","search","suggestions","selectPlace","place_id","info","district","zipcode","closeModalLocation","choosePlace","modalLocation","fromTemplate","remove","$watch","newValue","cacheConfig","CacheFactoryProvider","extend","defaults","maxAge","Cache","CacheFactory","model","createCache","deleteOnExpire","recycleFreq","storageMode","mode","modelName","keys","cache","map","ParseFileFactory","upload","_params","ImageObject","Object","object","photo","imageObject","set","caption","save","imageFile","File","filename","base64","current","GeoPoint","ParseImageServiceFactory","_all","Query","descending","find","_delete","_objectId","_data","destroy","_get","_save","thumbBase64","imageSettings","savedData","localStorage","getItem","quality","dimensions","saveToAlbum","saveImageSettings","_settings","setItem","delete","ParseFactory","transform","count","skip","pageNumber","pageSize","sort","order","ascending","field","IntroController","$ionicSlideBoxDelegate","slideChanged","index","vm","slideIndex","currentPlatform","ionic","Platform","next","previous","device","instant","slides","top","LoadingController","$state","user","currentUser","intro","go","clear","camanDirective","CamanJs","camanDirectiveLink","effect","ionCropDirective","$jrCrop","$ionicActionSheet","ionCropLink","getElem","click","buttons","titleText","cancelText","cancel","buttonClicked","fileUpload","e","file","target","files","reader","FileReader","readAsDataURL","onload","event","crop","option","width","chooseText","canvas","toDataURL","ngModel","on","cropSave","photoShareDirective","Photogram","PhotoService","photoShareLink","allowEdit","allowRotation","correctOrientation","targetWidth","targetHeight","saveToPhotoAlbum","modalPost","goHome","warn","closeModalPost","submitPost","form","post","$emit","closePost","photoFilterCarouselDirective","apply","filters","applyFilter","photoFilterDirective","CamanJsFactory","Caman","revert","render","resetEffect","reset","PhotoFilterFactory","modalFilter","done","submitCapture","dataUrl","closeModalCapture","$new","closeCapture","load","PhotoServiceFactory","PhotogramShare","$cordovaCamera","$cordovaCapture","actionSheet","capture","cropModal","filterModal","buttonCancel","jrCrop","setting","aspectRatio","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","popoverOptions","CameraPopoverOptions","shareModal","shareSocial","social","share","socials","sociais","openFilter","closeFilter","submitFilter","templateFilter","tempImage","cropImage","getPicture","method","sourceType","PictureSourceType","CAMERA","PHOTOLIBRARY","fileInput","evt","currentTarget","getVideo","captureVideo","duration","mediaFiles","fullPath","VideoFactory","createFileEntry","fileURI","resolveLocalFileSystemURL","entry","copyFile","fail","fileEntry","substr","lastIndexOf","newName","makeid","dataDirectory","fileSystem2","copyTo","succ","onCopySuccess","nativeURL","slice","PKVideoThumbnail","createThumbnail","prevSucc","prevImageSuccess","correctUrl","possible","charAt","Math","floor","random","saveVideo","localURL","ConnectMonitorFactory","$cordovaNetwork","watch","isWebView","onLine","isOnline","$apply","networkState","addEventListener","dataUtilFactory","parseData","string","parts","parseString","toLocaleDateString","getDate","inicio","year","getFullYear","month","getMonth","formatDate","milliseconds","getMonthName","meses","getFirstDay","getLastDay","PhotogramFactory","deletePhoto","galleryId","allComment","gallery","equalTo","objs","commentBy","getComments","include","comments","created","avatar","updateComment","comment","deleteComment","deleteItem","getFollow","userId","follow","getLikes","nearby","point","maxDistance","near","withinRadians","size","scaledSize","_latitude","_longitude","matches","_getOfflineFeed","queryUser","_getOnlineFeed","_result","totalGallery","qtd","cb","after","each","_likes","relation","_comments","limitComment","commentsData","cacheUser","_queryInsertComment","getTime","_url","userStatus","_queryInsertGallery","feed","feedGrid","addComment","addActivity","add","isLiked","first","addLike","newGallery","removeLike","like","likeGallery","getUserGalleryQtd","qtdGalleries","getUserGallery","listActivity","_insert","getOfflineFeed","PhotogramFormFactory","templateOptions","placeholder","required","iconPlaceholder","focus","label","toggleClass","formComment","formShare","PhotogramSettingFactory","_tableName","_queryInsert","PhotogramShareFactory","Notify","$cordovaSocialSharing","detail","socialsharing","shareViaInstagram","shareViaFacebook","shareViaTwitter","shareViaWhatsApp","shareViaEmail","subject","UserFactory","$ionicHistory","$cordovaDevice","$facebook","$cordovaFacebook","loadProfile","_getCache","_getServer","initFollows","follows","erro","logout","logIn","password","loginFacebook2","response","api","dados","Boolean","loginFacebook","updateUser","update","tempUser","newuser","facebook_complete","facebookLogin","getLoginStatus","respStatus","deferStatus","facebookProfile","register","formData","signUp","forgot","requestPasswordReset","logOut","clearCache","cordovaDevice","getDevice","getCordova","getModel","getPlatform","uuid","getUUID","version","getVersion","updateAvatar","facebookFriends","facebookAPI","facebookInvite","showDialog","ui","list","notEqualTo","users","profile","galleries","foloow","follow2","isFollow","followUser","respFollow","getFollowers","qtdFollowers","getFollowing","qtdFollowing","userResp","addFollows","getMail","FacebookUtils","access_token","expiration_date","facebookLink","mail","UserFormFactory","valueProp","labelProp","buyDirective","buyLink","closeButton","imagePressed","align","photogramCommentDirective","PhotogramForm","nocomments","openModalComment","formFields","submitComment","editComment","onTap","preventDefault","rForm","$valid","dataForm","facebookLoginDirective","facebookLoginLink","PhotogramFeedbackFactory","PhotogramFeedbackForm","submitFeedback","submit","photogramId","PhotogramId","PhotogramFeedbackFormFactory","photogramPhotoFeedbackDirective","PhotogramFeedback","photogram","sref","photogramFollowDirective","modalFollow","heartDirective","heartLink","addClass","photogramLikeDirective","likePhotogram","_model","progress","photogramLikeModalDirective","animation","PhotogramLoadingDirective","photogramPhotoCaptureDirective","photogramPhotoCaptureLink","openModalCapture","active","center","scrollwheel","here","getGeo","transclude","photogramPhotoGridDirective","photogramPhotoGridCtrl","empty","more","force","service","likePhoto","actionButtons","res","buttonDelete","photogramPhotoListDirective","photogramPhotoListCtrl","profileModalEditDirective","UserForm","linkFacebook","submitUpdateProfile","ionSearchDirective","getData","attrs","watchSearch","minLength","str","source","settingsModalDirective","openLink","clearcache","changeLanguage","profileModalDirective","profileModalLink","isFollowResp","loadingFollow","followResp","getFollower","modalProfile","changeTab","tab","grid","loadingFollowers","loadingFollowing","loadingPhotos","qtdPhotos","PhotogramAccountController","PhotogramActivityController","loadMore","openShare","Direct","getDirect","directId","addMessage","DirectMessages","sendMessage","roomId","direct","room","messages","channelId","from","body","date","chats","chatsType","_direct","to","$filter","replace","eleHtml","html","Autolinker","className","newWindow","autolinks","getElementsByClassName","DirectHomeCtrl","DirectMessageCtrl","loadMessages","doRefresh","PhotogramHomeController","$stateParams","PhotogramPhotoCtrl","loadComments","PhotogramPreviewCtrl","PhotogramViewCtrl","PhotogramSearchCtrl","SearchListController","SearchMapController","watchMap","oldValue","time","timer","UserAvatarController","submitAvatar","userAvatarDirective","imageData","UserIntroController","UserLoginController","routeLogged","submitLogin","LogoutController","UserMergeController","recoveryPassDirective","recovery","button","$viewValue","isUndefined","UserRecoveryPassController","submitForgot","UserRegisterController","submitRegister","PhotogramTabsController","postPhoto","$templateCache","put"],"mappings":"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","file":"scripts/app-b817b35216.js","sourcesContent":["(function () {\n  'use strict';\n  angular\n    .module('starter', [\n      'ionic',\n      'formlyIonic',\n      'ngCookies',\n      'pascalprecht.translate', // angular-translate\n      'tmh.dynamicLocale', // angular-dynamic-locale\n      'angularMoment',\n      'ngFacebook',\n      'uiGmapgoogle-maps',\n      'angular-cache',\n      'ngParse',\n      'ngCordova',\n      'ionic.components',\n      'app.loading',\n      'app.intro',\n      'app.user',\n      'app.photogram',\n    ]);\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('ionic.components', [\n            'ionic-loading',\n            'ion-language',\n            'onesignal',\n            'ion-dao',\n            // 'ion-affix',\n            // 'ngCache',\n            'ion-href',\n            'ion-photo',\n            'ion-location',\n            'ion-notify',\n            'ngParse'\n        ]);\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('ion-dao', [])\n    .factory('DAO', function ($interval, $q) {\n      var _db;\n      var _tables = [];\n\n      return {\n        init: init,\n        insert: insert,\n        query: query,\n        getLastSync: getLastSync,\n        paginate: paginate,\n        fetch: fetch,\n        fetchAll: fetchAll\n      };\n\n      function init(database) {\n\n        if (!_db) {\n          if (window.sqlitePlugin !== undefined) {\n            _db = window.sqlitePlugin.openDatabase({\n              name: database.name,\n              location: 2,\n              createFromLocation: 1\n            });\n          } else {\n            // For debugging in the browser\n            _db = window.openDatabase(database.name, \"1.0\", \"Database\", 200000);\n          }\n        }\n\n        var _promises = [];\n        angular.forEach(database.tables, function (table) {\n          var columns = [];\n          angular.forEach(table.columns, function (type, name) {\n            columns.push(name + ' ' + type);\n          });\n          query('DROP TABLE ' + table.name);\n          var _query = 'CREATE TABLE IF NOT EXISTS ' + table.name + ' (' + columns.join(',') + ')';\n          _promises.push(query(_query));\n          _tables.push(table);\n          // console.log(_query);\n          // console.log('Table ' + table.name + ' initialized');\n        });\n\n        return $q.all(_promises);\n      }\n\n      function getLastSync(table, column) {\n        var defer = $q.defer();\n        query(\"SELECT MAX(\" + column + \") as lastSync FROM \" + table)\n          .then(function (data) {\n            var lastSync = data.rows.item[0].lastSync;\n            defer.resolve(lastSync);\n          });\n        return defer.promise;\n      }\n\n      function insert(obj) {\n        var defer    = $q.defer();\n        var _columns = [];\n        var _values  = [];\n\n        angular.forEach(obj.columns, function (value, key) {\n          _columns.push(key);\n          if (typeof  value === 'number') {\n            _values.push(value);\n          } else {\n            _values.push(\"'\" + value + \"'\");\n          }\n        });\n\n        var _query = \"INSERT OR REPLACE INTO \" + obj.table + \" (\" + _columns.join(',') + \") VALUES (\" + _values.join(',') + \")\"\n        // console.info(_query);\n        query(_query).then(defer.resolve).catch(defer.reject);\n        return defer.promise;\n\n      }\n\n      function query(query, bindings) {\n        bindings  = typeof bindings !== 'undefined' ? bindings : [];\n        var defer = $q.defer();\n\n        _db.transaction(function (transaction) {\n          transaction.executeSql(query, bindings, function (transaction, result) {\n            // console.log(result);\n            var results = {\n              rows: []\n            };\n            if (result && result.rows) {\n              for (var i = 0; i < result.rows.length; i++) {\n                results.rows.push(angular.copy(result.rows[i]));\n              }\n            }\n            // console.log(results);\n            defer.resolve(results);\n          }, function (transaction, error) {\n            console.log(transaction, error);\n            defer.reject(error);\n          });\n        });\n\n        return defer.promise;\n      }\n\n      function paginate(_table, columns, _where, _join, _order, limit, page) {\n        var defer = $q.defer();\n        if (page === undefined) page = -1;\n        var _columns = columns;\n        var _limit   = limit ? limit : 10;\n        var _query1  = \"SELECT SUM(id) as TOTAL FROM \" + _table + \"  \" + _where;\n        var _query   = \"SELECT \" + _columns + \" FROM \" + _table + \"  \" + _where + \" \" + _join + \" \" + _order + \" LIMIT \" + _limit + \" OFFSET \" + page;\n\n        console.log('query', _query1);\n        console.log('query', _query);\n\n        query(_query1).then(function (data) {\n          var result = {\n            page: page,\n            total: data.rows[0].TOTAL,\n            rows: []\n          };\n\n          query(_query).then(function (data) {\n            console.log(data);\n\n            result.rows = data.rows;\n            defer.resolve(result);\n          });\n        });\n        return defer.promise;\n      }\n\n      function fetchAll(result) {\n        var output = [];\n\n        for (var i = 0; i < result.rows.length; i++) {\n          output.push(result.rows.item(i));\n        }\n\n        return output;\n      }\n\n      function fetch(result) {\n        return result.rows.item(0);\n      }\n    });\n})();\n\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name openTerms\n     *\n     * @description\n     * https://github.com/initialxy/cordova-plugin-themeablebrowser\n     *\n     * @restrict A\n     * */\n\n    angular\n        .module('ion-href', [])\n        .directive('href', openTermsDirective);\n\n    function openTermsDirective($cordovaInAppBrowser) {\n        return {\n            restrict: 'A',\n            template: '',\n            link: function (scope, elem, attr) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var href = attr.href;\n\n                    if (window.cordova) {\n                        // Keep in mind that you must add your own images to native resource.\n                        // Images below are for sample only. They are not imported by this plugin.\n                        window.cordova.ThemeableBrowser.open(href, '_blank', {\n                            statusbar: {\n                                color: '#ffffffff'\n                            },\n                            toolbar: {\n                                height: 44,\n                                color: '#f0f0f0ff'\n                            },\n                            title: {\n                                color: '#000',\n                                showPageTitle: true\n                            },\n                            backButtonCanClose: true\n                        })\n                        ;\n                    } else {\n                        window.open(href);\n                    }\n\n                    return false;\n                }\n            }\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    var path = 'app/component/ion-language';\n    \n    angular\n        .module('ion-language', [\n            'ngCookies',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale' // angular-dynamic-locale\n        ])\n        .config(configLanguage);\n\n\n\n    function configLanguage($translatePartialLoaderProvider, $translateProvider, AppConfig, tmhDynamicLocaleProvider) {\n\n        // angular-translate configuration\n        $translateProvider.useLoader('$translatePartialLoader', {\n            urlTemplate: '{part}/i18n/{lang}.json'\n        });\n        $translateProvider.useSanitizeValueStrategy(null);\n\n        // Translate Config\n        $translateProvider.useMissingTranslationHandlerLog();\n        $translateProvider.useLocalStorage(); // saves selected language to localStorage\n        tmhDynamicLocaleProvider.localeLocationPattern('../bower_components/angular-i18n/angular-locale_{{locale}}.js');\n\n        var langvar     = navigator.language || navigator.userlanguage;\n        var userlangvar = langvar.split('-')[0];\n        var language    = AppConfig.preferredLocale;\n        var searchLang  = _.some(AppConfig.locales, {\n            code: userlangvar\n        });\n\n        if (searchLang) {\n            language = AppConfig.locales.filter(function  (item) {\n                return language == item.code\n            })[0].code;\n        }\n        $translateProvider.preferredLanguage(language);\n        moment.locale(language);\n\n        // Translation\n        $translatePartialLoaderProvider.addPart(path);\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('ionic-loading', ['ionic'])\n    .run(runLoading);\n\n  function runLoading($rootScope, $ionicLoading) {\n    //Loading\n    $rootScope.$on('ionicLoading:true', function (text) {\n      $rootScope.loading = true;\n      $ionicLoading.show(text);\n    });\n    $rootScope.$on('ionicLoading:false', function () {\n      $rootScope.loading = false;\n      $ionicLoading.hide();\n    });\n  }\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('ion-location', [\n      'ionic'\n    ]);\n\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-notify', ['ionic'])\n    .factory('Notify', NotifyFactory);\n\n  function NotifyFactory($ionicPopup) {\n\n    return {\n      alert: alert,\n      confirm: confirm\n    };\n\n    function alert(params) {\n      return $ionicPopup.alert({\n        title: params.title,\n        template: params.text\n      });\n    }\n\n    function confirm(title, msg) {\n      return $ionicPopup.confirm({\n        title: title,\n        template: msg\n      });\n    }\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('ion-photo', [\n      'ionic',\n      'ngCordova',\n      'jrCrop'\n    ])\n    .constant('config', {\n      path: 'app/component/ion-photo'\n    })\n    .config(configTranslate);\n\n  function configTranslate($translatePartialLoaderProvider, config) {\n    $translatePartialLoaderProvider.addPart(config.path);\n  }\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('onesignal', [])\n        .factory('OneSignal', function ($q) {\n\n            return {\n                init: init\n            };\n\n            function init(id, google) {\n                var defer = $q.defer();\n\n                if (window.cordova) {\n                    // Enable to debug issues.\n                    window.plugins.OneSignal.setLogLevel({logLevel: 4, visualLevel: 4});\n                    \n                    // Update with your OneSignal AppId and googleProjectNumber before running.\n                    window.plugins.OneSignal.init(id, {googleProjectNumber: google}, function (jsonData) {\n                        // alert(\"Notification received:\\n\" + JSON.stringify(jsonData));\n                        console.log('didReceiveRemoteNotificationCallBack: ' + JSON.stringify(jsonData));\n                        defer.resolve(jsonData);\n                    });\n\n                    window.plugins.OneSignal.enableInAppAlertNotification(true);\n                } else {\n                    defer.reject('not cordova app');\n                }\n                return defer.promise;\n            }\n        });\n\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('ngParse', []);\n})();\n(function () {\n  'use strict';\n  angular\n    .module('app.intro', [])\n    .config(configRoutes);\n\n\n  function configRoutes($stateProvider, $translatePartialLoaderProvider) {\n\n    var path = 'app/module/intro';\n    \n    $stateProvider\n      .state('intro', {\n        url: '/intro',\n        templateUrl: path + '/intro.html',\n        controller: 'IntroCtrl',\n        controllerAs: 'vm'\n      });\n\n    // Translation\n    $translatePartialLoaderProvider.addPart(path);\n\n  }\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.loading', [])\n        .config(configRoutes);\n\n    function configRoutes($stateProvider) {\n        $stateProvider\n            .state('router', {\n                url: '/',\n                templateUrl: 'app/module/loading/loading.html',\n                controller: 'LoadingCtrl',\n                controllerAs: 'vm'\n            });\n    }\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.photogram', [\n            'ionic',\n            'ngCordova',\n            'app.account',\n            'app.activity',\n            'app.direct',\n            'app.direct-message',\n            'app.share',\n            'app.home',\n            'app.search'\n        ])\n        .config(configRoutes);\n\n    function configRoutes($stateProvider, $translatePartialLoaderProvider) {\n\n        $stateProvider\n            .state('photogram', {\n                url: '/photogram',\n                abstract: true,\n                controller: 'PhotogramTabsCtrl',\n                controllerAs: 'vm',\n                templateUrl: 'app/module/photogram/module/tabs/photogram-tabs.html',\n                resolve: {\n                    init: function  (DAO, $q, User, PhotogramSetting, AppConfig) {\n                        var defer = $q.defer();\n                        DAO.init(AppConfig.DAO).then(function  (start) {\n                            var promises = [\n                                PhotogramSetting.init(),\n                            ];\n                            $q.all(promises).then(function  (data) {\n                                console.log(data);\n                                defer.resolve(data);\n                            });\n                        });\n                        return defer.promise;\n                    }\n                }\n            });\n\n        // Translation\n        $translatePartialLoaderProvider.addPart('app/module/photogram');\n\n    }\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('app.user', [])\n    .config(configRoutes);\n\n\n  function configRoutes($stateProvider, $urlRouterProvider, $translatePartialLoaderProvider) {\n    var path = 'app/module/user';\n\n    $stateProvider\n\n      .state('user', {\n        url: '/user',\n        abstract: true,\n        templateUrl: path + '/module/layout/user-layout.html'\n      })\n\n      .state('user.intro', {\n        url: '/intro',\n        templateUrl: path + '/module/intro/user-intro.html',\n        controller: 'UserIntroCtrl',\n        controllerAs: 'vm'\n      })\n\n      .state('user.register', {\n        url: '/register',\n        templateUrl: path + '/module/register/user-register.html',\n        controller: 'UserRegisterCtrl',\n        controllerAs: 'vm'\n      })\n\n      .state('user.login', {\n        url: '/login',\n        templateUrl: path + '/module/login/user-login.html',\n        controller: 'UserLoginCtrl',\n        controllerAs: 'vm'\n      })\n\n      .state('user.merge', {\n        url: '/merge',\n        controller: 'UserMergeCtrl',\n        controllerAs: 'vm',\n        templateUrl: path + '/module/merge/merge.html'\n      })\n\n      .state('logout', {\n        url: '/logout',\n        template: '<ion-view view-title=\"Logout\" cache-view=\"false\"><ion-content></ion-content></ion-view>',\n        controller: 'UserLogoutCtrl',\n        controllerAs: 'vm'\n      })\n\n\n    ;\n\n    $urlRouterProvider.otherwise('/');\n\n    $translatePartialLoaderProvider.addPart(path);\n\n  }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.account', [])\n        .config(configRoutes);\n\n    function configRoutes($stateProvider) {\n        $stateProvider\n\n\n            .state('photogram.account', {\n                url: '/account',\n                views: {\n                    tabProfile: {\n                        controller: 'PhotogramAccountCtrl',\n                        controllerAs: 'vm',\n                        templateUrl: 'app/module/photogram/module/account/account.html'\n                    }\n                }\n            });\n    }\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('account-friend-list', []);\n    \n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.activity', [])\n        .config(configRoutes);\n\n\n    function configRoutes($stateProvider, $translatePartialLoaderProvider) {\n\n    var path = 'app/module/photogram/module/activity';\n        //$translatePartialLoaderProvider.addPart(path);\n\n        $stateProvider\n            .state('photogram.activity', {\n                url: '/activity',\n                views: {\n                    tabActivity: {\n                        controller: 'PhotogramActivityCtrl',\n                        controllerAs: 'vm',\n                        templateUrl: path + '/activity.html'\n                    }\n                }\n            })\n\n        ;\n    }\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.direct', [])\n        .config(configRoutes);\n\n    var path = 'app/module/photogram/module/direct';\n\n    function configRoutes($stateProvider) {\n\n\n        $stateProvider\n        // Direct\n            .state('photogram.direct', {\n                url: '/direct',\n                views: {\n                    tabHome: {\n                        controller: 'DirectHomeCtrl',\n                        controllerAs: 'vm',\n                        templateUrl: path + '/direct.home.html'\n                    }\n                }\n            });\n    }\n\n})();\n(function () {\n  'use strict';\n  angular\n      .module('app.direct-message', [])\n      .config(configRoutes);\n\n  var path = 'app/module/photogram/module/direct-message';\n\n  function configRoutes($stateProvider) {\n\n\n    $stateProvider\n        .state('photogram.message', {\n          url: '/message/:channelId',\n          views: {\n            tabHome: {\n              controller: 'DirectMessageCtrl',\n              controllerAs: 'vm',\n              templateUrl: path + '/direct-message.html'\n            }\n          }\n        });\n  }\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.home', [])\n        .config(configRoutes);\n\n    var path = 'app/module/photogram/module/home';\n\n    function configRoutes($stateProvider) {\n        $stateProvider\n            .state('photogram.home', {\n                url: '/home',\n                views: {\n                    tabHome: {\n                        controller: 'PhotogramHomeCtrl',\n                        controllerAs: 'vm',\n                        templateUrl: path + '/home.html'\n                    }\n                }\n            });\n\n    }\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.search', [])\n        .config(configRoutes);\n\n    var path = 'app/module/photogram/module/search';\n\n    function configRoutes($stateProvider) {\n        $stateProvider\n            .state('photogram.search', {\n                url: '/search',\n                views: {\n                    tabSearch: {\n                        controller: 'PhotogramSearchCtrl',\n                        controllerAs: 'vm',\n                        templateUrl: path + '/search.html'\n                    }\n                }\n            })\n            .state('photogram.search.map', {\n                url: '/map',\n                templateUrl: 'app/module/photogram/module/search-map/search-map.html',\n                controller: 'SearchMapCtrl',\n                controllerAs: 'vm'\n            })\n            .state('photogram.search.list', {\n                url: '/list',\n                templateUrl: 'app/module/photogram/module/search-list/search-list.html',\n                controller: 'SearchListCtrl',\n                controllerAs: 'vm'\n            })\n        ;\n\n    }\n})();\n(function () {\n  'use strict';\n  angular\n    .module('app.share', []);\n\n})();\n(function () {\n  'use strict';\n\n  var cordova = window.cordova;\n  angular\n    .module('starter')\n    .run(startParse)\n    .run(runIonic)\n    // .run(runOneSignal)\n    .run(runFacebook)\n    // .run(detectConnection)\n    .config(configCompile)\n    .config(configFacebook)\n    .config(configIonic);\n\n\n  function detectConnection(ConnectMonitor) {\n    ConnectMonitor.watch();\n  }\n\n  function configCompile($compileProvider) {\n    $compileProvider.debugInfoEnabled(false);\n  }\n\n  function runOneSignal(OneSignal, AppConfig) {\n    OneSignal.init(AppConfig.onesignal.id, AppConfig.onesignal.google);\n  }\n\n  function startParse(AppConfig) {\n    Parse.initialize(AppConfig.parse.appId);\n    Parse.serverURL = AppConfig.parse.server;\n  }\n\n  function runIonic($ionicPlatform, User) {\n    User.init();\n\n    // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\n    // for form inputs)\n    if (window.cordova && window.cordova.plugins && window.cordova.plugins.Keyboard) {\n      cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\n      cordova.plugins.Keyboard.disableScroll(true);\n\n    }\n    if (window.StatusBar) {\n      // org.apache.cordova.statusbar required\n      StatusBar.styleDefault();\n    }\n  }\n\n  function configIonic($ionicConfigProvider) {\n    //$ionicConfigProvider.platform.ios.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n    //$ionicConfigProvider.platform.android.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n    //$ionicConfigProvider.views.swipeBackEnabled (true);\n    $ionicConfigProvider.backButton.text(' ').icon('ion-ios-arrow-left');\n    //$ionicConfigProvider.backButton.previousTitleText (false).text ('Voltar').icon ('ion-ios-arrow-left');\n    //$ionicConfigProvider.views.transition ('platform');\n    //$ionicConfigProvider.navBar.alignTitle ('platform');\n    //$ionicConfigProvider.tabs.position('bottom');\n    $ionicConfigProvider.platform.android.tabs.position('bottom');\n    $ionicConfigProvider.platform.android.tabs.style('standard');\n    $ionicConfigProvider.views.maxCache(1);\n  }\n\n  // Facebook\n  function configFacebook($facebookProvider, AppConfig) {\n    $facebookProvider.setAppId(AppConfig.facebook);\n    $facebookProvider.setPermissions('id,name,email,user_likes,bio');\n  }\n\n  function runFacebook() {\n\n    if (!window.cordova) {\n      var LangVar     = window.navigator.language || window.navigator.userLanguage;\n      var userLangVar = LangVar.substring(0, 2) + '_' + LangVar.substring(3, 5).toUpperCase();\n\n      // Load the SDK asynchronously\n      (function (d, s, id) {\n        var js, fjs = d.getElementsByTagName(s)[0];\n        if (d.getElementById(id)) return;\n        js     = d.createElement(s);\n        js.id  = id;\n        js.src = 'http//connect.facebook.net/' + userLangVar + '/sdk.js';\n        fjs.parentNode.insertBefore(js, fjs);\n      }(document, 'script', 'facebook-jssdk'));\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('ionic')\n        .constant('AppConfig', AppConfig());\n\n    function AppConfig() {\n        return {\n            path: 'app/module/photogram',\n            app: {\n                name: 'Photogram',\n                url: 'http://photogramapp.com',\n                image: 'http://photogramapp.com/social-share.jpg',\n            },\n            routes: {\n                home: 'photogram.home',\n                login: 'user.intro'\n            },\n            color: '#00796B',\n            facebook: '1024016557617380',\n            parse: {\n                appId: 'myAppId',\n                server: 'https://photogramserver.herokuapp.com/parse/'\n            },\n            onesignal: {\n                id: 'd13d00d0-013f-406f-9811-66ce0737d7bc',\n                google: 'AIzaSyCEBeAMSs4nrAC-2cvG6N6Q_KqJpnUrnh0'\n            },\n            locales: [\n                {\n                    translation: 'LANG.PORTUGUES',\n                    code: 'pt'\n                },\n                {\n                    translation: 'LANG.ENGLISH',\n                    code: 'en'\n                },\n                {\n                    translation: 'LANG.TURKISH',\n                    code: 'tr'\n                },\n                {\n                    translation: 'LANG.PERSIAN',\n                    code: 'fa'\n                },\n                {\n                    translation: 'LANG.GERMAN',\n                    code: 'de'\n                }\n            ],\n            preferredLocale: 'en',\n            DAO: {\n                name: 'photogram_db',\n                tables: [\n                    {\n                        name: 'User',\n                        columns: {\n                            id: 'TEXT PRIMARY KEY',\n                            name: 'TEXT',\n                            username: 'TEXT',\n                            email: 'TEXT',\n                            language: 'TEXT',\n                            facebookimg: 'TEXT',\n                            gender: 'TEXT',\n                            img: 'TEXT',\n                            facebook: 'INTEGER',\n                            qtdFollow: 'INTEGER',\n                            status: 'TEXT',\n                            createdAt: 'INTEGER',\n                            attributes: 'TEXT'\n                        }\n                    },\n                    {\n                        name: 'UserFollow',\n                        columns: {\n                            id: 'TEXT PRIMARY KEY',\n                            user_id: 'TEXT',\n                            followId: 'TEXT'\n                        },\n                    },\n                    {\n                        name: 'Gallery',\n                        columns: {\n                            id: 'TEXT PRIMARY KEY',\n                            img: 'TEXT',\n                            title: 'TEXT',\n                            user_id: 'TEXT',\n                            location: 'TEXT',\n                            qtdLike: 'INTEGER',\n                            liked: 'BOOLEAN',\n                            likes: 'INTEGER',\n                            createdAt: 'INTEGER'\n                        }\n                    },\n                    {\n                        name: 'GalleryActivity',\n                        columns: {\n                            id: 'TEXT PRIMARY KEY',\n                            action: 'TEXT',\n                            img: 'TEXT',\n                            userAvatar: 'TEXT',\n                            userName: 'TEXT',\n                            user_id: 'TEXT',\n                            gallery_id: 'TEXT',\n                            createdAt: 'INTEGER'\n                        }\n                    },\n                    {\n                        name: 'GalleryComment',\n                        columns: {\n                            id: 'TEXT PRIMARY KEY',\n                            name: 'TEXT',\n                            user_id: 'TEXT',\n                            userName: 'TEXT',\n                            gallery_id: 'TEXT',\n                            createdAt: 'INTEGER'\n                        }\n                    },\n                    {\n                        name: 'GallerySetting',\n                        columns: {\n                            key: 'TEXT',\n                            value: 'TEXT'\n                        }\n                    }\n                ]\n            }\n        };\n    }\n})();\n/* Google Analytics\n * */\n\n(function (i, s, o, g, r, a, m) {\n  i['GoogleAnalyticsObject'] = r;\n  i[r] = i[r] || function () {\n    (i[r].q = i[r].q || [])\n    .push(arguments)\n  }, i[r].l = 1 * new Date();\n  a = s.createElement(o),\n    m = s.getElementsByTagName(o)[0];\n  a.async = 1;\n  a.src = g;\n  m.parentNode.insertBefore(a, m)\n})(window, document, 'script', 'http://www.google-analytics.com/analytics.js', 'ga');\nga('create', 'UA-53950213-5', {\n  'cookieDomain': 'none'\n});\n'use strict';\nangular.module(\"ngLocale\", [], [\"$provide\", function ($provide) {\n  var PLURAL_CATEGORY = {\n    ZERO: \"zero\",\n    ONE: \"one\",\n    TWO: \"two\",\n    FEW: \"few\",\n    MANY: \"many\",\n    OTHER: \"other\"\n  };\n  $provide.value(\"$locale\", {\n    \"DATETIME_FORMATS\": {\n      \"AMPMS\": [\n        \"AM\",\n        \"PM\"\n      ],\n      \"DAY\": [\n        \"domingo\",\n        \"segunda-feira\",\n        \"ter\\u00e7a-feira\",\n        \"quarta-feira\",\n        \"quinta-feira\",\n        \"sexta-feira\",\n        \"s\\u00e1bado\"\n      ],\n      \"ERANAMES\": [\n        \"Antes de Cristo\",\n        \"Ano do Senhor\"\n      ],\n      \"ERAS\": [\n        \"a.C.\",\n        \"d.C.\"\n      ],\n      \"FIRSTDAYOFWEEK\": 6,\n      \"MONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"SHORTDAY\": [\n        \"dom\",\n        \"seg\",\n        \"ter\",\n        \"qua\",\n        \"qui\",\n        \"sex\",\n        \"s\\u00e1b\"\n      ],\n      \"SHORTMONTH\": [\n        \"jan\",\n        \"fev\",\n        \"mar\",\n        \"abr\",\n        \"mai\",\n        \"jun\",\n        \"jul\",\n        \"ago\",\n        \"set\",\n        \"out\",\n        \"nov\",\n        \"dez\"\n      ],\n      \"STANDALONEMONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"WEEKENDRANGE\": [\n        5,\n        6\n      ],\n      \"fullDate\": \"EEEE, d 'de' MMMM 'de' y\",\n      \"longDate\": \"d 'de' MMMM 'de' y\",\n      \"medium\": \"d 'de' MMM 'de' y HH:mm:ss\",\n      \"mediumDate\": \"d 'de' MMM 'de' y\",\n      \"mediumTime\": \"HH:mm:ss\",\n      \"short\": \"dd/MM/yy HH:mm\",\n      \"shortDate\": \"dd/MM/yy\",\n      \"shortTime\": \"HH:mm\"\n    },\n    \"NUMBER_FORMATS\": {\n      \"CURRENCY_SYM\": \"R$\",\n      \"DECIMAL_SEP\": \",\",\n      \"GROUP_SEP\": \".\",\n      \"PATTERNS\": [{\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 3,\n        \"minFrac\": 0,\n        \"minInt\": 1,\n        \"negPre\": \"-\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\",\n        \"posSuf\": \"\"\n      }, {\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 2,\n        \"minFrac\": 2,\n        \"minInt\": 1,\n        \"negPre\": \"-\\u00a4\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\\u00a4\",\n        \"posSuf\": \"\"\n      }]\n    },\n    \"id\": \"pt-br\",\n    \"pluralCat\": function (n, opt_precision) {\n      if (n >= 0 && n <= 2 && n != 2) {\n        return PLURAL_CATEGORY.ONE;\n      }\n      return PLURAL_CATEGORY.OTHER;\n    }\n  });\n}]);\n(function () {\n    'use strict';\n    //! moment.js locale configuration\n//! locale : brazilian portuguese (pt-br)\n//! author : Caio Ribeiro Pereira : https://github.com/caio-ribeiro-pereira\n    \n    var pt_br = window.moment.defineLocale('pt', {\n        months: 'Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro'.split(\n            '_'),\n        monthsShort: 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),\n        weekdays: 'Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado'.split('_'),\n        weekdaysShort: 'Dom_Seg_Ter_Qua_Qui_Sex_Sáb'.split('_'),\n        weekdaysMin: 'Dom_2ª_3ª_4ª_5ª_6ª_Sáb'.split('_'),\n        longDateFormat: {\n            LT: 'HH:mm',\n            LTS: 'HH:mm:ss',\n            L: 'DD/MM/YYYY',\n            LL: 'D [de] MMMM [de] YYYY',\n            LLL: 'D [de] MMMM [de] YYYY [às] HH:mm',\n            LLLL: 'dddd, D [de] MMMM [de] YYYY [às] HH:mm'\n        },\n        calendar: {\n            sameDay: '[Hoje às] LT',\n            nextDay: '[Amanhã às] LT',\n            nextWeek: 'dddd [às] LT',\n            lastDay: '[Ontem às] LT',\n            lastWeek: function () {\n                return (this.day() === 0 || this.day() === 6) ?\n                    '[Último] dddd [às] LT' : // Saturday + Sunday\n                    '[Última] dddd [às] LT'; // Monday - Friday\n            },\n            sameElse: 'L'\n        },\n        relativeTime: {\n            future: 'em %s',\n            past: '%s atrás',\n            s: 'segs',\n            m: 'um minuto',\n            mm: '%d minutos',\n            h: 'uma hora',\n            hh: '%d horas',\n            d: 'um dia',\n            dd: '%d dias',\n            M: 'um mês',\n            MM: '%d meses',\n            y: 'um ano',\n            yy: '%d anos'\n        },\n        ordinalParse: /\\d{1,2}º/,\n        ordinal: '%dº'\n    });\n\n    return pt_br;\n})();\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name modalLanguage\n     *\n     * @description\n     * _Please update the description and restriction._\n     *\n     * @restrict A\n     * */\n\n    var path = 'app/component/ion-language';\n\n    angular\n        .module('ion-language')\n        .directive('ionLanguage', ionLanguageDirective);\n\n    function ionLanguageDirective(AppConfig, $translate, $timeout, Loading, $ionicModal) {\n        return {\n            restrict: 'E',\n            link: modalLanguageLink,\n            templateUrl: path + '/ion-language.html'\n        };\n\n        function modalLanguageLink(scope, elem, attr) {\n\n\n            scope.languages = AppConfig.locales;\n            scope.language  = scope.languages.filter(function (item) {\n                return item.code === $translate.use()\n            })[0];\n\n            console.log(scope.language);\n\n            elem.bind('click', openModal);\n\n            function openModal() {\n\n                scope.closeModal = function () {\n                    scope.modal.hide();\n                    // scope.modal.remove();\n                };\n\n\n                scope.searchValue = '';\n\n                scope.selectLanguage = function (language) {\n                    console.log(language);\n                    $translate.use(language.code);\n                    moment.locale(language.code);\n                    scope.language = language;\n                    Loading.start();\n                    scope.closeModal();\n                    $timeout(function () {\n                        Loading.end();\n                    }, 1000);\n                };\n\n                $ionicModal\n                    .fromTemplateUrl(path + '/modal-language.html', {\n                        scope: scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n\n                    });\n            }\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ionic-loading')\n    .factory('Loading', Loading);\n\n  function Loading($rootScope, $timeout) {\n    var seconds = 0;\n\n    return {\n      start: showLoading,\n      end: hideLoading,\n    };\n\n\n    function showLoading(text) {\n      $rootScope.$broadcast('ionicLoading:true', text);\n    }\n\n    function hideLoading() {\n      $timeout(function () {\n        $rootScope.$broadcast('ionicLoading:false');\n      }, parseInt(seconds + '000'));\n    }\n  }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('ionic-loading')\n    .directive('ionLoading', ionLoading);\n\n  function ionLoading() {\n    return {\n      restrict: 'E',\n      scope: {\n        icon: '@',\n        loading: '='\n      },\n      template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n    };\n  }\n})();\n(function () {\n    'use strict';\n\n\n    angular\n        .module('ion-location')\n        .factory('GeoService', GeoServiceFactory);\n\n    function GeoServiceFactory($http, $window, $cordovaGeolocation, $ionicPopup,  $timeout, $q) {\n\n        /**\n         'street_address', //indicates a precise street address.\n         'route', //indicates a named route (such as \"US 101\").\n         'intersection', //indicates a major intersection, usually of two major roads.\n         'political', //indicates a political entity. Usually, this type indicates a polygon of some civil administration.\n         'country', //indicates the national political entity, and is typically the highest order type returned by the Geocoder.\n         'administrative_area_level_1', //indicates a first-order civil entity below the country level. Within the United States, these administrative levels are states. Not all nations exhibit these administrative levels.\n         'administrative_area_level_2', //indicates a second-order civil entity below the country level. Within the United States, these administrative levels are counties. Not all nations exhibit these administrative levels.\n         'administrative_area_level_3', //indicates a third-order civil entity below the country level. This type indicates a minor civil division. Not all nations exhibit these administrative levels.\n         'colloquial_area', //indicates a commonly-used alternative name for the entity.\n         'locality', //indicates an incorporated city or town political entity.\n         'sublocality', //indicates an first-order civil entity below a locality\n         'neighborhood', //indicates a named neighborhood\n         'premise', //indicates a named location, usually a building or collection of buildings with a common name\n         'subpremise', //indicates a first-order entity below a named location, usually a singular building within a collection of buildings with a common name\n         'postal_code', //indicates a postal code as used to address postal mail within the country.\n         'natural_feature', //indicates a prominent natural feature.\n         'airport', //indicates an airport.\n         'park', //indicates a named park.\n         'point_of_interest', //indicates a named point of interest. Typically, these \"POI\"s are prominent local entities that don't easily fit in another category such as \"Empire State Building\" or \"Statue of Liberty.\"\n\n         //In addition to the above, address components may exhibit the following types:\n\n         'post_box', //indicates a specific postal box.\n         'street_number', //indicates the precise street number.\n         'floor indicates', //the floor of a building address.\n         'room indicates'; //the room of a building address.'\n         */\n        var options             = {\n            types: ['geocode']\n        };\n        var autocompleteService = new $window.google.maps.places.AutocompleteService();\n        var detailsService      = new $window.google.maps.places.PlacesService($window.document.createElement('input'),\n            options);\n        var componentForm       = {\n            street_number: 'long_name',\n            //number\n            route: 'long_name',\n            //street\n            locality: 'long_name',\n            // district\n            sublocality: 'long_name',\n            // district\n            neighborhood: 'long_name',\n            //state\n            political: 'long_name',\n            //state\n            administrative_area_level_1: 'long_name',\n            //state\n            country: 'long_name',\n            //country\n            postal_code: 'long_name' //zipcode\n        };\n        var componentFormName   = {\n            street_number: 'number',\n            //number\n            route: 'street',\n            //street\n            locality: 'city',\n            // district\n            administrative_area_level_1: 'state',\n            //state\n            country: 'country',\n            //country\n            postal_code: 'zipcode',\n            //zipcode\n            neighborhood: 'district' //zipcode\n        };\n\n        var data = {\n            coords: {},\n            src: ''\n        };\n\n\n        return {\n            src: src,\n            getDetails: getDetails,\n            searchAddress: searchAddress,\n            parseAddress: parseAddress,\n            findMe: findMe\n        };\n\n        function getLocation() {\n            // Pega a Localização da Pessoa\n            var defer = $q.defer();\n\n            if (data.location) {\n                $timeout(function () {\n                    defer.resolve(data.location);\n                }, 1000);\n            } else {\n                var posOptions = {\n                    timeout: 10000,\n                    enableHighAccuracy: false\n                };\n                $cordovaGeolocation\n                    .getCurrentPosition(posOptions)\n                    .then(function (position) {\n                        // console.log('Fez a requisição', position);\n                        data.location = {\n                            latitude: position.coords.latitude,\n                            longitude: position.coords.longitude\n                        };\n                        defer.resolve(data.location);\n                    }, function (err) {\n                        // error\n                        // console.log('Error na geolocalização', err);\n                        $ionicPopup.alert({\n                            title: 'Geo Error',\n                            template: err.message\n                        });\n                        defer.reject(err);\n                    });\n            }\n\n\n            return defer.promise;\n        }\n\n\n        function findMe() {\n            var defer = $q.defer();\n\n            getLocation()\n                .then(function (pos) {\n                    console.log(pos);\n                    getGoogleAddress(pos.latitude, pos.longitude)\n                        .success(function (resp) {\n                            resp.geolocation = pos;\n                            console.log(resp);\n                            defer.resolve(resp);\n                        })\n                        .error(logErr);\n                });\n            return defer.promise;\n        }\n\n\n        function logErr(error) {\n            console.log(error);\n        }\n\n        function getGoogleAddress(lat, lng) {\n            return $http.get('http://maps.google.com/maps/api/geocode/json?latlng=' + lat + ',' + lng + '&sensor=true')\n                        .success(function (data) {\n                            data.address_normal = data.results[0].formatted_address;\n                            data.address        = address(data.results[0].address_components);\n                            data.src            = imagem(lat, lng, 18, 500, 300);\n                        });\n        }\n\n        function address(data) {\n            if (!data) {\n                return false;\n            } else {\n                return {\n                    numero: data[0].short_name,\n                    rua: data[1].long_name,\n                    bairro: data[2].short_name,\n                    cidade: data[3].short_name,\n                    estado: data[5].long_name,\n                    uf: data[5].short_name,\n                    pais: data[6].long_name,\n                    paisCode: data[6].short_name,\n                    cep: data[7].short_name\n                };\n            }\n\n        }\n\n        function imagem(lat, lng, zoom, w, h) {\n            return 'http://maps.google.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom + '&size=' +\n                w + 'x' + h + '&maptype=roadmap&sensor=true';\n        }\n\n        function parseAddress(place) {\n            console.log('parseAddress', place);\n            var address = {\n                resume: '',\n                geo: {\n                    latitude: place.geometry.location.H,\n                    longitude: place.geometry.location.L\n                }\n            };\n            var image   = src(address.geo.latitude, address.geo.longitude, 16, 900, 200);\n\n            for (var i = 0; i < place.address_components.length; i++) {\n                var addressType = place.address_components[i].types[0];\n                if (componentForm[addressType]) {\n                    var val                                 = place.address_components[i][componentForm[addressType]];\n                    address[componentFormName[addressType]] = val;\n                }\n            }\n            address.street = address.street + ', ' + address.number;\n            address.image  = image;\n            address.resume = address.street + ' - ' + address.city + ', ' + address.state + ', ' + address.country;\n            return address;\n        }\n\n        function searchAddress(input) {\n            var deferred = $q.defer();\n            autocompleteService.getQueryPredictions({\n                input: input\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function getDetails(placeId) {\n            var deferred = $q.defer();\n            detailsService.getDetails({\n                placeId: placeId\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function src(lat, lng, zoom, w, h) {\n            console.log('src latitude', lat, lng, zoom, w, h);\n\n            var link = 'http://maps.googleapis.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom +\n                '&scale=1&size=' + w + 'x' + h +\n                '&maptype=roadmap&format=jpg&visual_refresh=true&markers=size:small%7Ccolor:0xff2600%7Clabel:0%7C' + lat +\n                ',' + lng + '&sensor=true';\n            console.log(link);\n            return link;\n        }\n\n    }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-location')\n    .directive('ionLocation', ionLocationDirective);\n\n  function ionLocationDirective($ionicModal, GeoService) {\n    return {\n      restrict: 'A',\n      scope: {\n        location: '='\n      },\n      link: ionLocationLink\n    };\n\n    function ionLocationLink($scope, element) {\n\n      function init() {\n        $scope.search = {};\n        $scope.search.suggestions = [];\n        $scope.search.query = '';\n      }\n\n\n      function selectPlace(place_id) {\n        GeoService\n          .getDetails(place_id)\n          .then(function (location) {\n\n            console.info(location);\n\n            var address = GeoService\n              .parseAddress(location);\n\n            $scope.location = {\n              number: address.number,\n              street: address.street,\n              district: address.district,\n              city: address.city,\n              state: address.state,\n              country: address.country,\n              zipcode: address.zipcode,\n              coords: address.geo,\n              image: address.image,\n              resume: address.resume\n            };\n\n            console.log($scope.location);\n            $scope.closeModalLocation();\n          });\n      }\n\n      element.bind('focus', function () {\n        init();\n        console.log('Start');\n\n        $scope.findMe = findMe;\n        $scope.choosePlace = choosePlace;\n\n\n        $scope.modalLocation = $ionicModal.fromTemplate('<ion-modal-view>' +\n          '<ion-header-bar class=\"bar bar-positive item-input-inset\">' +\n          '<button class=\"button button-clear button-icon ion-pinpoint\" ng-click=\"findMe()\"></button>' +\n          '<label class=\"item-input-wrapper\">' +\n          '<input type=\"search\" ng-model=\"search.query\" placeholder=\"{{ \\'Search\\' | translate }}\"></label>' +\n          '<button class=\"button button-clear button-icon ion-ios-close-empty\" ng-click=\"closeModalLocation()\"></button>' +\n          '</ion-header-bar>' +\n          '<ion-content padding=\"false\">' +\n          '<ion-list>' +\n          '<ion-item ng-repeat=\"suggestion in search.suggestions\" ng-click=\"choosePlace(suggestion)\" ng-bind=\"suggestion.description\"></ion-item>' +\n          '<ion-item class=\"item-divider\"><img src=\"https://developers.google.com/maps/documentation/places/images/powered-by-google-on-white.png\"alt=\"\"/></ion-item>' +\n          '</ion-list>' +\n          '</ion-content>' +\n          '</ion-modal-view>', {\n            scope: $scope,\n            focusFirstInput: true\n          }\n        );\n\n        $scope.modalLocation.show();\n\n        $scope.closeModalLocation = function () {\n          $scope.modalLocation.hide();\n          $scope.modalLocation.remove();\n        };\n\n        GeoService\n          .searchAddress('São Paulo')\n          .then(function (result) {\n            console.log(result);\n            $scope.search.suggestions = result;\n          });\n\n\n        $scope.$watch('search.query', function (newValue) {\n          if (newValue) {\n            GeoService\n              .searchAddress(newValue)\n              .then(function (result) {\n                console.log(result);\n                $scope.search.suggestions = result;\n              });\n          }\n        });\n\n\n        function findMe() {\n          GeoService\n            .findMe()\n            .then(function (location) {\n              console.log(location);\n\n              selectPlace(location.results[0].place_id);\n\n            });\n        }\n\n        function choosePlace(place) {\n          selectPlace(place.place_id);\n\n        }\n\n      });\n\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('ngCache', ['angular-cache'])\n    .config(cacheConfig)\n    .factory('Cache', Cache);\n\n  function cacheConfig(CacheFactoryProvider) {\n    angular.extend(CacheFactoryProvider.defaults, {\n      maxAge: 15 * 60 * 1000\n    });\n  }\n\n  function Cache(CacheFactory) {\n\n    return {\n      model: model,\n      data: data\n    };\n\n    function model(model, options) {\n      if (!CacheFactory.get(model)) {\n        CacheFactory.createCache(model, {\n          deleteOnExpire: options.deleteOnExpire || 'aggressive',\n          recycleFreq: options.recycleFreq || 60000,\n          storageMode: options.mode || 'localStorage'\n        });\n      }\n\n      return CacheFactory.get(model);\n    }\n\n    function data(modelName, keys) {\n      var cache = model(modelName);\n      var keys = cache.keys();\n      var data = [];\n      keys.map(function (key) {\n        data.push(cache.get(key));\n      });\n\n      return data;\n    }\n\n\n  }\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('ngParse')\n    .factory('ParseFile', ParseFileFactory);\n\n  /*\n   * params\n   * .object\n   * .title\n   * .photo\n   *  .. filename\n   *  .. photo = base64\n   *  .geo\n   *  .. class\n   *  .. lat\n   *  .. lng\n   *\n   * */\n\n  function ParseFileFactory($q) {\n    return {\n      upload: upload\n    };\n\n    function upload(_params) {\n      var defer = $q.defer();\n      var ImageObject = Parse.Object.extend(_params.object || 'Gallery');\n\n      if (_params.photo !== '') {\n\n        // create the parse file\n        var imageFile = new Parse.File(_params.filename || 'mypic.jpg', {\n          base64: _params.photo\n        });\n\n        // save the parse file\n        imageFile\n          .save()\n          .then(function () {\n\n            _params.photo = null;\n\n            // create object to hold caption and file reference\n            var imageObject = new ImageObject();\n\n            // set object properties\n            imageObject.set('title', _params.title);\n            imageObject.set('user', Parse.User.current());\n            imageObject.set('img', imageFile);\n\n            if (_params.geo !== undefined) {\n              imageObject.set(_params.geo.class || 'location', new Parse.GeoPoint(_params.geo.lat, _params.geo.lng));\n            }\n\n            // save object to parse backend\n            imageObject\n              .save()\n              .then(defer.resolve);\n\n          }, defer.reject);\n\n      } else {\n        // create object to hold caption and file reference\n        var imageObject = new ImageObject();\n\n        // set object properties\n        imageObject.set('caption', _params.caption);\n\n        // save object to parse backend\n        return imageObject.save();\n\n      }\n\n\n      return defer.promise;\n    }\n\n  }\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('ngParse')\n    .factory('ParseImageService', ParseImageServiceFactory);\n\n  function ParseImageServiceFactory($window) {\n    return {\n      all: _all,\n      save: _save,\n      get: _get,\n      delete: _delete,\n      imageSettings: imageSettings,\n      saveImageSettings: saveImageSettings\n    };\n\n    function _all() {\n      var query = new Parse.Query('ImageInfo');\n      query.descending('createdAt');\n      return query.find();\n    }\n\n    function _delete(_objectId) {\n      var query = new Parse.Query('ImageInfo');\n      return query.get(_objectId)\n        .then(function (_data) {\n          return _data.destroy();\n        });\n    }\n\n    function _get(_objectId) {\n      var query = new Parse.Query('ImageInfo');\n      //query.descending('gpa');\n      return query.get(_objectId);\n    }\n\n    /**\n     *\n     * @param _params\n     * @private\n     */\n    function _save(_params) {\n      var ImageObject = Parse.Object.extend('Gallery');\n\n\n      if (_params.photo !== '') {\n\n        console.log('_params.photo ' + _params.photo);\n\n        // create the parse file\n        var imageFile = new Parse.File('mypic.jpg', {\n          base64: _params.photo\n        });\n        //       var imageFile = new Parse.File('mypic.jpg', _params.photo);\n\n\n        // save the parse file\n        return imageFile\n          .save()\n          .then(function () {\n\n            _params.photo = null;\n\n            // create object to hold caption and file reference\n            var imageObject = new ImageObject();\n\n            // set object properties\n            imageObject.set('title', _params.title);\n            imageObject.set('img', imageFile);\n            imageObject.set('user', Parse.User.current());\n            imageObject.set('thumbBase64', _params.thumbBase64);\n            imageObject.set('location', new Parse.GeoPoint(_params.coords.latitude, _params.coords.longitude));\n\n            // save object to parse backend\n            return imageObject.save();\n\n\n          }, function (error) {\n            console.log('Error');\n            console.log(error);\n          });\n\n      } else {\n        // create object to hold caption and file reference\n        var imageObject = new ImageObject();\n\n        // set object properties\n        imageObject.set('caption', _params.caption);\n\n        // save object to parse backend\n        return imageObject.save();\n\n      }\n    }\n\n    function imageSettings() {\n      var savedData = $window.localStorage.getItem('application.image.props') || null;\n      return (savedData !== null ? JSON.parse(savedData) : {\n        quality: 50,\n        dimensions: 250,\n        saveToAlbum: false\n      });\n    }\n\n    function saveImageSettings(_settings) {\n      $window.localStorage.setItem('application.image.props', JSON.stringify(_settings));\n    }\n  }\n\n})();\n(function () {\n    'use strict';\n\n    angular\n        .module('ngParse')\n        .factory('Parse', ParseFactory);\n\n\n    function ParseFactory($window) {\n        var parse       = $window.Parse;\n        parse.transform = transform;\n        parse.count = count;\n        parse.paginate = paginate;\n        return parse;\n    }\n\n    function count(model) {\n        var defer = $q.defer();\n        new Parse\n            .Query(model)\n            .count()\n            .then(function (resp) {\n                defer.resolve(resp);\n            });\n        return defer.promise;\n    }\n\n    function paginate(model, options) {\n        var defer = $q.defer();\n\n        var query = new Parse.Query(model);\n        query.skip(options.pageNumber);\n        query.limit(options.pageSize);\n\n        if (options.sort) {\n            var sort = options.sort;\n            if (sort.order === 'asc') {\n                query.ascending(options.sort.field);\n            } else {\n                query.descending(options.sort.field);\n            }\n        }\n        query.find()\n             .then(function (resp) {\n                 var data = {\n                     results: [],\n                     total: 0\n                 };\n                 resp.map(function (item) {\n                     var obj = item.attributes;\n                     obj.id  = item.id;\n                     data.results.push(obj);\n                 });\n\n                 count(model)\n                     .then(function (count) {\n                         data.total = count;\n                         defer.resolve(data);\n                     });\n             });\n\n\n        return defer.promise;\n    }\n\n    function transform(resp) {\n        var data = [];\n        resp.map(function (item) {\n            var obj = item.attributes;\n            obj.id  = item;\n            data.push(obj);\n        });\n        return data;\n    }\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.intro')\n        .controller('IntroCtrl', IntroController);\n\n    function IntroController($ionicSlideBoxDelegate, $translate) {\n        var vm              = this;\n        var currentPlatform = window.ionic.Platform.platform();\n        vm.slideIndex       = 0;\n        vm.slideChanged     = slideChanged;\n        vm.next             = function () {\n            $ionicSlideBoxDelegate.next();\n        };\n        vm.previous         = function () {\n            $ionicSlideBoxDelegate.previous();\n        };\n\n\n        if (currentPlatform) {\n            vm.device = (currentPlatform === 'android') ? 'android' : 'iphone';\n        } else {\n            vm.device = 'android';\n        }\n\n        console.log($translate.instant('INTRO.STEP1'));\n        vm.slides = [{\n            top: $translate.instant('INTRO.STEP1'),\n            img: 'img/intro1.jpg'\n        }, {\n            top: $translate.instant('INTRO.STEP2'),\n            img: 'img/intro2.jpg'\n        }, {\n            top: $translate.instant('INTRO.STEP3'),\n            img: 'img/intro3.jpg'\n        }, {\n            top: $translate.instant('INTRO.STEP4'),\n            img: 'img/intro4.jpg'\n        }, {\n            top: $translate.instant('INTRO.STEP5'),\n            img: 'img/intro5.jpg'\n        }\n\n        ];\n\n        function slideChanged(index) {\n            vm.slideIndex = index;\n        }\n\n        window.localStorage['intro'] = true;\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name LoadingCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.loading')\n        .controller('LoadingCtrl', LoadingController);\n\n    function LoadingController($rootScope, AppConfig, $state) {\n        var user = $rootScope.currentUser;\n        var intro = window.localStorage['intro'];\n\n        if (intro !== 'true') {\n            $state.go('intro', {clear: true});\n        } else {\n            if (user) {\n                console.log(user);\n                if (user.name) {\n                    $state.go(AppConfig.routes.home, {\n                        clear: true\n                    });\n                } else {\n                    $state.go('user.avatar', {\n                        clear: true\n                    });\n                }\n            } else {\n                $state.go(AppConfig.routes.login, {\n                    clear: true\n                });\n            }\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('caman', camanDirective);\n\n  function camanDirective(CamanJs, $timeout) {\n    return {\n      restrict: 'A',\n      scope: {\n        name: '=',\n        image: '=',\n        filter: '=',\n        loading: '='\n      },\n      template: '<img ng-src=\"{{ image }}\" id=\"{{ name }}\">',\n      link: camanDirectiveLink\n    };\n\n    function camanDirectiveLink($scope) {\n      $scope.loading = true;\n      $timeout(function () {\n        CamanJs\n          .effect($scope.name, $scope.filter)\n          .then(function () {\n            $scope.loading = false;\n          });\n      }, 500);\n    }\n  }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('ionCrop', ionCropDirective);\n\n  function ionCropDirective($jrCrop, $translate, $ionicActionSheet) {\n\n    return {\n      restrict: 'A',\n      scope: {\n        ngModel: '=',\n        option: '=',\n        cropSave: '&'\n      },\n      template: '<div><input type=\"file\" id=\"browseBtn\" image=\"image\" accept=\"image/*\" style=\"display: none\"/></div>',\n      link: ionCropLink\n    };\n\n    function ionCropLink($scope, element) {\n\n      // Triggered on a button click, or some other target\n      $scope.action = action;\n      element.bind('click', getElem);\n      $scope.crop = crop;\n      angular.element(document.getElementById('browseBtn'))\n        .on('change', fileUpload);\n\n\n      function getElem() {\n        document.getElementById('browseBtn')\n          .click();\n      }\n\n      function action() {\n\n        // Show the action sheet\n        $ionicActionSheet.show({\n          buttons: [{\n            text: '<i class=\"icon ion-camera\"></i>' + ('Photo Camera')\n          }, {\n            text: '<i class=\"icon ion-images\"></i> ' + ('Photo Album')\n          }],\n          //destructiveText:  ('Delete'),\n          titleText: ('Change Image'),\n          cancelText: ('Cancel'),\n          cancel: function () {\n            // add cancel code..\n          },\n          buttonClicked: function (index) {\n\n            if (index === 0) {\n              console.log('Photo Camera');\n            }\n            // Photo Album\n            if (index === 1) {\n              document.getElementById('browseBtn')\n                .click();\n            }\n            return true;\n          }\n        });\n\n      }\n\n      function fileUpload(e) {\n\n        var file = e.target.files[0];\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n\n        reader.onload = function (event) {\n          var image = event.target.result;\n          $scope.crop(image);\n        };\n\n        // Clear input file\n        angular.element(document.getElementById('browseBtn')).val('');\n\n      }\n\n      function crop(image) {\n\n        console.log($scope.option);\n\n        $jrCrop\n          .crop({\n            url: image,\n            width: $scope.option ? $scope.option.width : 200,\n            height: $scope.option ? $scope.option.height : 200,\n            cancelText: ('Cancel'),\n            chooseText: ('Save')\n          })\n          .then(function (canvas) {\n            var image = canvas.toDataURL();\n            //            var name = $scope.option ? $scope.option.name : 'thumb';\n            //            var filename = ($scope.option ? $scope.option.name : '') + '_' + name + window.Number(new window.Date() + '.jpg';\n\n            //var file = base64ToBlob(image.replace('data:image/png;base64,', ''), 'image/jpeg');\n            //            file.name = filename;\n\n            //upload(file);\n\n            console.log(image);\n            $scope.ngModel = image;\n\n\n          });\n\n      }\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name photoShare\n     *\n     * @description\n     * _Please update the description and restriction._\n     *\n     * @restrict A\n     * */\n\n    angular\n        .module('ion-photo')\n        .directive('photoShare', photoShareDirective);\n\n    function photoShareDirective($state, AppConfig, $rootScope, Photogram, $ionicModal, Loading,\n                                 PhotogramSetting, PhotoService) {\n        return {\n            restrict: 'A',\n            link: photoShareLink,\n            template: ''\n        };\n\n        function photoShareLink(scope, elem, attr) {\n            var path = AppConfig.path;\n\n            elem.bind('click', open)\n\n            function open() {\n                console.log('Open share');\n                var option = {\n                    crop: PhotogramSetting.get('imageCrop'),\n                    allowEdit: PhotogramSetting.get('imageEdit'),\n                    filter: true,\n                    //filter: PhotogramSetting.get('imageFilter'),\n                    allowRotation: PhotogramSetting.get('imageRotation'),\n                    quality: PhotogramSetting.get('imageQuality'),\n                    correctOrientation: PhotogramSetting.get('imageEdit'),\n                    targetWidth: PhotogramSetting.get('imageWidth'),\n                    targetHeight: PhotogramSetting.get('imageHeight'),\n                    saveToPhotoAlbum: PhotogramSetting.get('imageSaveAlbum')\n                };\n                console.log(option);\n\n                PhotoService\n                    .open(option)\n                    .then(modalPost)\n                    .catch(goHome);\n            }\n\n\n            function goHome() {\n                console.warn('Deu erro');\n                $state.go('photogram.home');\n            }\n\n            function modalPost(image) {\n                $scope.closePost  = closeModalPost;\n                $scope.submitPost = submitPost;\n                $scope.form       = {\n                    title: '',\n                    location: '',\n                    photo: image,\n                    geo: false\n                };\n\n                $ionicModal\n                    .fromTemplateUrl(path + '/module/share/photogram.post.modal.html', {\n                        scope: $scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        $scope.form.photo = image;\n                        $scope.modalPost  = modal;\n                        $scope.modalPost.show();\n                    });\n\n                function closeModalPost() {\n                    $scope.modalPost.hide();\n                    $scope.modalPost.remove();\n                    Loading.end();\n                }\n\n                function submitPost(resp) {\n                    var form = angular.copy(resp);\n                    console.log(form);\n                    Loading.start();\n                    Photogram\n                        .post(form)\n                        .then(function () {\n                            closeModalPost();\n                            $rootScope.$emit('filterModal:close');\n                            $rootScope.$emit('PhotogramHome:reload');\n                        });\n                }\n            }\n        }\n\n    }\n\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('photoFilterCarousel', photoFilterCarouselDirective);\n\n  function photoFilterCarouselDirective(CamanJs, config) {\n    return {\n      restrict: 'E',\n      scope: {\n        image: '=',\n        apply: '='\n      },\n      templateUrl: config.path + '/view/photo.filter.carousel.html',\n      link: function ($scope) {\n        $scope.filters = CamanJs.filters;\n        $scope.applyFilter = $scope.apply;\n      }\n    };\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('photoFilter', photoFilterDirective);\n\n  function photoFilterDirective(config, CamanJs) {\n    return {\n      restrict: 'E',\n      scope: {\n        image: '='\n      },\n      templateUrl: config.path + '/view/photo.filter.html',\n      link: function ($scope, elem) {\n        $scope.applyFilter = function (elem, effect) {\n          $scope.loading = true;\n          if (effect) {\n            CamanJs\n              .effect(elem, effect, true)\n              .then(function (resp) {\n                $scope.loading = false;\n              });\n          }\n        };\n      }\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n\n  angular\n    .module('ion-photo')\n    .factory('CamanJs', CamanJsFactory);\n\n  function CamanJsFactory($q) {\n    var Caman = window.Caman;\n    var filters = [\n      'normal',\n      'vintage',\n      'lomo',\n      'clarity',\n      'sinCity',\n      'sunrise',\n      'crossProcess',\n      'orangePeel',\n      'love',\n      'grungy',\n      'jarques',\n      'pinhole',\n      'oldBoot',\n      'glowingSun',\n      'hazyDays',\n      'herMajesty',\n      'nostalgia',\n      'hemingway',\n      'concentrate'\n    ];\n\n    return {\n      filters: filters,\n      effect: filter,\n      reset: resetEffect\n    };\n\n    function filter(elem, effect, status) {\n      var defer = $q.defer();\n      var image = window.document.getElementById(elem);\n\n      if (image) {\n        Caman(image, function () {\n          if (effect === 'normal') {\n            this.revert();\n            this.render(function () {\n              defer.resolve(effect);\n            });\n          }\n\n          if (effect in this) {\n            this[effect]();\n\n            if (status) {\n              this.revert();\n            }\n            this.render(function () {\n              defer.resolve(effect);\n            });\n          }\n\n        });\n      } else {\n        defer.reject();\n      }\n      return defer.promise;\n    }\n\n    function resetEffect(elem) {\n\n      var defer = $q.defer();\n      var image = window.document.getElementById(elem);\n\n      Caman(image, function () {\n        this.revert();\n        defer.resolve(true);\n      });\n\n      return defer.promise;\n    }\n  }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .factory('PhotoFilter', PhotoFilterFactory);\n\n  function PhotoFilterFactory($rootScope, $q, $ionicModal) {\n\n    return {\n      load: modalFilter\n    };\n\n    function modalFilter(image, done) {\n      var template =\n        '<ion-modal-view class=\"modal-capture\"><ion-header-bar class=\"bar-light\"><button class=\"button button-clear button-icon ion-ios-arrow-thin-left\"ng-click=\"closeCapture()\"></button><div class=\"title text-left\">{{ \\'ION-PHOTO.FILTERS\\' | translate }}</div><button class=\"button button-clear button-icon ion-ios-arrow-thin-right\"ng-click=\"submitCapture()\"></button></ion-header-bar><ion-content scroll=\"false\"><photo-filter image=\"form.photo\"></photo-filter></ion-content></ion-modal-view>';\n      var image = image.toDataURL();\n\n      var scope = $rootScope.$new(true);\n      scope.closeCapture = closeModalCapture;\n      scope.submitCapture = submitCapture;\n      scope.form = {\n        photo: image\n      };\n\n      scope.modal = $ionicModal.fromTemplate(template, {\n        scope: scope\n      });\n\n      scope.modal.show();\n\n\n      function submitCapture() {\n        var canvas = window.document.getElementById('image');\n        var dataUrl = canvas.toDataURL();\n        console.log(dataUrl);\n        done(dataUrl);\n        closeModalCapture();\n      }\n\n      function closeModalCapture() {\n        scope.modal.hide();\n      }\n\n    }\n\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .factory('PhotoService', PhotoServiceFactory);\n\n  function PhotoServiceFactory($ionicActionSheet, $translate, AppConfig, PhotogramShare, $jrCrop, $rootScope, $ionicModal,\n                               $cordovaCamera, $cordovaCapture, $q) {\n\n    // Default Setting\n    var tempImage;\n    var cordova = window.cordova;\n    var setting = {\n      jrCrop: true,\n      quality: 90,\n      allowEdit: false,\n      filter: true,\n      correctOrientation: true,\n      targetWidth: 300,\n      targetHeight: 300,\n      saveToPhotoAlbum: false,\n      allowRotation: false,\n      aspectRatio: 0\n    };\n\n    return {\n      open: openModal,\n      crop: cropModal,\n      filter: filterModal,\n      share: shareModal,\n    };\n\n    function openModal(option) {\n      var defer       = $q.defer();\n      var options     = {\n        jrCrop: option.jrCrop ? option.jrCrop : setting.jrCrop,\n        filter: option.filter ? option.filter : setting.filter,\n        quality: option.quality ? option.quality : setting.quality,\n        aspectRatio: option.aspectRatio ? option.aspectRatio : setting.aspectRatio,\n        allowRotation: option.allowRotation ? option.allowRotation : setting.allowRotation,\n        allowEdit: option.allowEdit ? option.allowEdit : setting.allowEdit,\n        correctOrientation: option.correctOrientation ? option.correctOrientation : setting.correctOrientation,\n        targetWidth: option.width ? option.width : setting.targetWidth,\n        targetHeight: option.height ? option.height : setting.targetHeight,\n        saveToPhotoAlbum: option.saveToPhotoAlbum ? option.saveToPhotoAlbum : setting.saveToPhotoAlbum,\n        destinationType: window.cordova ? $cordovaCamera.DestinationType.DATA_URL : null,\n        encodingType: window.cordova ? $cordovaCamera.EncodingType.JPEG : null,\n        popoverOptions: window.cordova ? CameraPopoverOptions : null,\n      };\n      var buttons     = [{\n        text: '<i class=\"icon ion-ios-camera\"></i>' + $translate.instant('ION-PHOTO.CAMERA')\n      }, {\n        text: '<i class=\"icon ion-images\"></i>' + $translate.instant('ION-PHOTO.GALLERY')\n      },\n        // {text: '<i class=\"icon ion-ios-videocam\"></i>' + $translate.instant('ION-PHOTO.VIDEO')}\n      ];\n      var actionSheet = $ionicActionSheet.show({\n        buttons: buttons,\n        titleText: $translate.instant('ION-PHOTO.SHARE'),\n        cancelText: $translate.instant('ION-PHOTO.CANCEL'),\n        cancel: buttonCancel,\n        buttonClicked: buttonClicked\n      });\n\n      function buttonClicked(index) {\n        console.log(index);\n        actionSheet();\n        capture(index, options)\n          .then(cropModal)\n          .then(filterModal)\n          .then(function (resp) {\n            console.log('Final rest');\n            defer.resolve(resp);\n          })\n          .catch(buttonCancel);\n      }\n\n\n      function buttonCancel(resp) {\n        actionSheet(resp);\n      }\n\n      return defer.promise;\n    }\n\n    function cropModal(image) {\n      var defer = $q.defer();\n\n      if (setting.jrCrop) {\n        $jrCrop\n          .crop({\n            url: image,\n            aspectRatio: setting.aspectRatio ? setting.aspectRatio : false,\n            allowRotation: setting.allowRotation ? setting.allowRotation : false,\n            width: setting.width ? setting.width : setting.targetWidth,\n            height: setting.height ? setting.height : setting.targetHeight,\n            cancelText: $translate.instant('ION-PHOTO.CANCEL'),\n            chooseText: $translate.instant('ION-PHOTO.CROP')\n          })\n          .then(function (canvas) {\n            defer.resolve(canvas.toDataURL());\n          })\n          .catch(defer.reject);\n      } else {\n        defer.resolve(image);\n      }\n      return defer.promise;\n    }\n\n    function shareModal(image) {\n      var template =\n            '<ion-modal-view class=\"modal-share\"> <ion-header-bar class=\"bar-dark\"> <div class=\"title\">{{ \\'ION-PHOTO.SHARE\\' | translate }}</div> <button class=\"button button-positive\" ng-click=\"modal.hide()\"> <i class=\"icon ion-arrow-right-b\"></i> </button> </ion-header-bar> <ion-content ng-cloak> <div id=\"image\"> <img ng-src=\"{{form.photo}}\"> <div class=\"title\">{{ form.title }}</div></div> <ul class=\"list\"> <li class=\"padding\"> <button ng-repeat=\"social in sociais\" ng-click=\"share(form, social)\"class=\"button button-block button-{{ social }}\"><i class=\"icon ion-social-{{ social }}\"></i>{{ social | uppercase }} </button> </li> </ul> </ion-content> </ion-modal-view>';\n\n      if (image === undefined) return false;\n      var scope   = $rootScope.$new(true);\n      var socials = [\n        'facebook',\n        'instagram',\n        'whatsapp',\n        'twitter'\n      ];\n      //image = image.attributes;\n\n      scope.sociais = socials;\n      scope.share   = shareSocial;\n      scope.form    = {\n        title: '',\n        photo: image\n      };\n\n      scope.modal = $ionicModal.fromTemplate(template, {\n        scope: scope\n      });\n      scope.modal.show();\n\n\n      function shareSocial(social, form) {\n        console.log('share', social, form);\n        PhotogramShare\n          .share(social, {\n            text: form.title,\n            image: form.photo,\n            link: AppConfig.app.url\n          });\n      }\n\n\n    }\n\n    function filterModal(image) {\n      var defer = $q.defer();\n\n      function openFilter(image) {\n        var templateFilter =\n              '<ion-modal-view class=\"modal-capture\"><ion-header-bar class=\"bar-light\"><button class=\"button button-clear button-icon ion-ios-arrow-thin-left\" ng-click=\"cropImage()\"></button><div class=\"title\">{{ \\'ION-PHOTO.FILTERS\\' | translate }}</div><button class=\"button button-icon \" ng-click=\"submitFilter()\"><i class=\"icon ion-ios-arrow-thin-right\"></i></button></ion-header-bar><ion-content><photo-filter image=\"form.photo\"></photo-filter></ion-content></ion-modal-view>';\n        var scope          = $rootScope.$new(true);\n        scope.closeFilter  = closeFilter;\n        scope.submitFilter = submitFilter;\n        tempImage          = image;\n        scope.form         = {\n          photo: image\n        };\n\n        scope.modalFilter = $ionicModal.fromTemplate(templateFilter, {\n          scope: scope\n        });\n\n        scope.cropImage = function () {\n          scope.modalFilter.remove();\n          cropModal(tempImage)\n            .then(openFilter);\n        };\n\n        scope.modalFilter.show();\n\n        function closeFilter() {\n          defer.reject();\n          scope.modalFilter.hide();\n        }\n\n        function submitFilter() {\n          var canvas  = window.document.getElementById('image');\n          var dataUrl = canvas.toDataURL();\n          scope.modalFilter.remove();\n          defer.resolve(dataUrl);\n        }\n\n      }\n\n      openFilter(image);\n\n      return defer.promise;\n    }\n\n\n    function capture(type, options) {\n      var defer = $q.defer();\n\n      // CAMERA\n      if (type === 0) {\n        getPicture(0);\n      }\n\n      // GALLERY\n      if (type === 1) {\n        getPicture(1);\n      }\n\n      // Video\n      if (type === 2) {\n        getVideo();\n      }\n\n      function getPicture(method) {\n        if (method === 0 && cordova) options.sourceType = $cordovaCamera.PictureSourceType.CAMERA;\n        if (method === 1 && cordova) options.sourceType = $cordovaCamera.PictureSourceType.PHOTOLIBRARY;\n\n        if (cordova) {\n          $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n        } else {\n          var fileInput = angular.element('<input type=\"file\"/>');\n          fileInput[0].click();\n          fileInput.on('change', function (evt) {\n            tempImage     = evt.currentTarget.files[0];\n            var reader    = new FileReader();\n            reader.onload = function (evt) {\n              defer.resolve(evt.target.result);\n            };\n            reader.readAsDataURL(tempImage);\n          });\n        }\n      }\n\n      function getVideo() {\n        $cordovaCapture\n          .captureVideo({\n            limit: 1,\n            duration: 5\n          })\n          .then(function (mediaFiles) {\n            tempImage = mediaFiles[0].fullPath;\n            defer.resolve(tempImage);\n          }, defer.reject);\n      }\n\n\n      return defer.promise;\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .factory('Video', VideoFactory);\n\n  function VideoFactory($window, $q) {\n    var deferred = $q.defer();\n    //https://devdactic.com/capture-and-store-videos-ionic/\n    // Resolve the URL to the local file\n    // Start the copy process\n    function createFileEntry(fileURI) {\n      $window.resolveLocalFileSystemURL(fileURI, function (entry) {\n        return copyFile(entry);\n      }, fail);\n    }\n\n    // Create a unique name for the videofile\n    // Copy the recorded video to the app dir\n    function copyFile(fileEntry) {\n      var name = fileEntry.fullPath.substr(fileEntry.fullPath.lastIndexOf('/') + 1);\n      var newName = makeid() + name;\n\n      $window.resolveLocalFileSystemURL(cordova.file.dataDirectory, function (fileSystem2) {\n          fileEntry.copyTo(fileSystem2, newName, function (succ) {\n            return onCopySuccess(succ);\n          }, fail);\n        },\n        fail\n      );\n    }\n\n    // Called on successful copy process\n    // Creates a thumbnail from the movie\n    // The name is the moviename but with .png instead of .mov\n    function onCopySuccess(entry) {\n      var name = entry.nativeURL.slice(0, -4);\n      $window.PKVideoThumbnail.createThumbnail(entry.nativeURL, name + '.png', function (prevSucc) {\n        return prevImageSuccess(prevSucc);\n      }, fail);\n    }\n\n    // Called on thumbnail creation success\n    // Generates the currect URL to the local moviefile\n    // Finally resolves the promies and returns the name\n    function prevImageSuccess(succ) {\n      var correctUrl = succ.slice(0, -4);\n      correctUrl += '.MOV';\n      deferred.resolve(correctUrl);\n    }\n\n    // Called when anything fails\n    // Rejects the promise with an Error\n    function fail(error) {\n      console.log('FAIL: ' + error.code);\n      deferred.reject('ERROR');\n    }\n\n    // Function to make a unique filename\n    function makeid() {\n      var text = '';\n      var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      for (var i = 0; i < 5; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n      }\n      return text;\n    }\n\n    // The object and functions returned from the Service\n    return {\n      // This is the initial function we call from our controller\n      // Gets the videoData and calls the first service function\n      // with the local URL of the video and returns the promise\n      saveVideo: function (data) {\n        createFileEntry(data[0].localURL);\n        return promise;\n      }\n    };\n  }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.photogram')\n        .factory('ConnectMonitor', ConnectMonitorFactory);\n\n    function ConnectMonitorFactory($rootScope, $cordovaNetwork) {\n        \n        return {\n            watch: watch\n        };\n\n        function watch() {\n\n            if (ionic.Platform.isWebView()) {\n                $rootScope.onLine = $cordovaNetwork.isOnline();\n                $rootScope.$apply();\n\n\n                $rootScope.$on('$cordovaNetwork:online', function (event, networkState) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                });\n\n                $rootScope.$on('$cordovaNetwork:offline', function (event, networkState) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                })\n            } else {\n                $rootScope.onLine = navigator.onLine;\n                $rootScope.$apply();\n\n                window.addEventListener('online', function (e) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                }, false)\n\n                window.addEventListener('offline', function (e) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                }, false)\n            }\n        }\n\n    }\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.photogram')\n        .factory('dataUtil', dataUtilFactory);\n\n    function dataUtilFactory() {\n\n        return {\n            parseData: parseData,\n            parseString: parseString,\n            getDate: getDate,\n            formatDate: formatDate,\n            getMonthName: getMonthName,\n            getFirstDay: getFirstDay,\n            getLastDay: getLastDay\n        };\n\n        function parseData(string) {\n            var parts = string.split('-');\n            return new Date(parts[0], parts[1] - 1, parts[2]);\n        }\n\n        function parseString(data) {\n            return new Date(data).toLocaleDateString();\n        }\n\n\n        function getDate() {\n            var data   = new Date();\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function formatDate(milliseconds) {\n            var data   = new Date(milliseconds);\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function getMonthName(data) {\n            var meses = ['Janeiro', 'Feveiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];\n            return meses[data.getMonth()];\n        }\n\n        function getFirstDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth();\n            return new Date(year, month, 1);\n        }\n\n        function getLastDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth() + 1;\n            return new Date(year, month, 0);\n        }\n\n\n    }\n\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('app.photogram')\n    .factory('Photogram', PhotogramFactory);\n\n  function PhotogramFactory($q, Parse, DAO, $rootScope, User, Loading) {\n\n    var limitComment = 3;\n\n    return {\n      // Feed\n      feed: feed,\n      getOfflineFeed: _getOfflineFeed,\n      feedGrid: feedGrid,\n      post: post,\n      get: get,\n      deletePhoto: deletePhoto,\n      find: find,\n      nearby: nearby,\n      // Activity\n      addActivity: addActivity,\n      listActivity: listActivity,\n      // User\n      getUserGallery: getUserGallery,\n      getUserGalleryQtd: getUserGalleryQtd,\n      // Comment\n      allComment: allComment,\n      addComment: addComment,\n      getComments: getComments,\n      updateComment: updateComment,\n      deleteComment: deleteComment,\n      // Like\n      getLikes: getLikes,\n      likeGallery: likeGallery,\n      // Follow\n      getFollow: getFollow,\n      search: search\n    };\n\n\n    function deletePhoto(galleryId) {\n      var defer = $q.defer();\n\n      new Parse\n        .Query('Gallery')\n        .get(galleryId, function (resp) {\n          resp.destroy();\n          defer.resolve(resp);\n        });\n\n      return defer.promise;\n    }\n\n    function post(_params) {\n      var defer       = $q.defer();\n      var ImageObject = Parse.Object.extend('Gallery');\n\n      if (_params.photo !== '') {\n\n        // create the parse file\n        var imageFile = new Parse.File('mypic.jpg', {\n          base64: _params.photo\n        });\n\n        // save the parse file\n        imageFile\n          .save()\n          .then(function () {\n\n            _params.photo = null;\n\n            // create object to hold caption and file reference\n            var imageObject = new ImageObject();\n\n            // set object properties\n            imageObject.set('title', _params.title);\n            imageObject.set('user', Parse.User.current());\n            imageObject.set('img', imageFile);\n\n            if (_params.location !== undefined) {\n              imageObject.set('location', new Parse.GeoPoint(_params.location.latitude, _params.location.longitude));\n            }\n\n            // save object to parse backend\n            imageObject\n              .save()\n              .then(function (resp) {\n                console.log('Posted Photo', resp);\n                // Add User QtdPhoto\n                defer.resolve(resp);\n              });\n\n          }, function (error) {\n            console.log('Error', error);\n            defer.reject(error);\n          });\n\n      } else {\n        // create object to hold caption and file reference\n        var imageObject = new ImageObject();\n\n        // set object properties\n        imageObject.set('caption', _params.caption);\n\n        // save object to parse backend\n        return imageObject.save();\n\n      }\n\n\n      return defer.promise;\n    }\n\n    function allComment(galleryId) {\n      var defer = $q.defer();\n\n      var gallery = new Parse\n        .Query('Gallery')\n        .get(galleryId, function (resp) {\n          console.log(resp);\n          return resp;\n        });\n\n      new Parse\n        .Query('GalleryComment')\n        .equalTo('galery', gallery)\n        //.include ('commentBy')\n        .descending('createdAt')\n        .find()\n        .then(function (resp) {\n          var objs = [];\n          angular.forEach(resp, function (item) {\n            var obj  = item.attributes;\n            obj.id   = item.id;\n            obj.user = item.attributes.commentBy;\n            objs.push(obj);\n          });\n          Loading.end();\n          defer.resolve(objs);\n        });\n      return defer.promise;\n    }\n\n    function getComments(obj) {\n      var defer = $q.defer();\n\n      new Parse\n        .Query('Gallery')\n        .get(obj)\n        .then(function (gallery) {\n          new Parse\n            .Query('GalleryComment')\n            .equalTo('gallery', gallery)\n            .include('commentBy')\n            .ascending('createdAt')\n            .find()\n            .then(function (resp) {\n              var comments = [];\n              resp.map(function (item) {\n                console.warn(item);\n                var obj        = {\n                  id: item.id,\n                  text: item.attributes.text,\n                  created: item.createdAt,\n                  user: item.attributes.commentBy\n                };\n                obj.userAvatar = User.avatar(obj.user.attributes)\n                comments.push(obj);\n              });\n              defer.resolve(comments);\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function updateComment(obj) {\n      var defer = $q.defer();\n      console.log('updateComment', obj);\n      new Parse\n        .Query('GalleryComment')\n        .get(obj.id, function (comment) {\n          console.log('updateComment comment', comment);\n          comment.set('text', obj.text);\n          comment.save();\n          defer.resolve();\n        });\n      return defer.promise;\n    }\n\n    function deleteComment(item) {\n      var defer = $q.defer();\n      new Parse\n        .Query('GalleryComment')\n        .get(item.id, deleteItem);\n\n      function deleteItem(comment) {\n        comment.destroy(function () {\n          defer.resolve();\n        });\n      }\n\n      return defer.promise;\n    }\n\n    function getFollow(userId) {\n      var defer = $q.defer();\n\n      User\n        .find(userId)\n        .then(function (user) {\n\n          new Parse\n            .Query('UserFollow')\n            .equalTo('user', user)\n            .include('follow')\n            .find()\n            .then(function (resp) {\n              var data = [];\n              angular.forEach(resp, function (item) {\n                console.warn(item);\n                var obj        = {\n                  id: item.id,\n                  text: item.attributes.text,\n                  user: item.attributes.follow.attributes,\n                  created: item.createdAt\n                };\n                obj.userAvatar = User.avatar(obj.user.attributes);\n\n                data.push(obj.user);\n              });\n              defer.resolve(data);\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function getLikes(obj) {\n      var defer = $q.defer();\n\n      new Parse\n        .Query('Gallery')\n        .get(obj)\n        .then(function (gallery) {\n          if (gallery.length) {\n            new Parse\n              .Query('GalleryLike')\n              .equalTo('gallery', gallery)\n              .include('user')\n              .ascending('createdAt')\n              .find()\n              .then(function (resp) {\n                var objs = [];\n                angular.forEach(resp, function (item) {\n                  console.warn(item);\n                  var obj        = {\n                    id: item.id,\n                    text: item.attributes.text,\n                    user: item.attributes.user.attributes,\n                    created: item.createdAt\n                  };\n                  obj.userAvatar = User.avatar(obj.user.attributes);\n                  objs.push(obj);\n                });\n                console.log(objs);\n                defer.resolve(objs);\n              });\n          } else {\n            defer.reject(true);\n          }\n        });\n\n      return defer.promise;\n    }\n\n\n    function nearby(position) {\n      var defer = $q.defer();\n      var data  = [];\n\n      var point       = new Parse.GeoPoint(position);\n      var maxDistance = 10;\n\n      new Parse\n        .Query('Gallery')\n        .near('location', point)\n        .withinRadians('location', point, maxDistance)\n        .include('user')\n        // .limit(10)\n        .find()\n        .then(function (resp) {\n          if (resp.length) {\n            resp.map(function (value) {\n              var size     = 100;\n              var obj      = angular.copy(value.attributes);\n              obj.id       = value.id;\n              obj.img      = User.avatar(value.attributes);\n              obj.created  = value.createdAt;\n              obj.icon     = {\n                size: {\n                  width: 100,\n                  height: 100\n                },\n\n                scaledSize: {\n                  width: size / 2,\n                  height: size / 2\n                },\n                url: 'img/icon.png'\n              };\n              obj.icon.url = obj.img;\n              obj.coords   = {\n                latitude: obj.location._latitude,\n                longitude: obj.location._longitude\n              };\n              data.push(obj);\n            });\n\n\n            defer.resolve(data);\n          } else {\n            defer.reject(true);\n          }\n        });\n\n      return defer.promise;\n    }\n\n    function search(string, page) {\n      var defer = $q.defer();\n      var data  = [];\n      var limit = 15;\n\n      new Parse\n        .Query('Gallery')\n        .limit(limit)\n        .skip(page * limit)\n        .matches('title', '* ' + string + '.*')\n        .include('user')\n        .find()\n        .then(function (resp) {\n          resp.map(function (value) {\n            console.log('gallery search item', value);\n            var obj = {\n              id: value.id,\n              item: value.attributes,\n              src: value.attributes.img.url(),\n              created: value.createdAt,\n              user: value.attributes.user.id\n            };\n            data.push(obj);\n          });\n          defer.resolve(data);\n        });\n\n      return defer.promise;\n    }\n\n\n    function _getOfflineFeed(page, user, _limit) {\n      var defer = $q.defer();\n      var queryUser;\n\n      if (user) {\n        queryUser = 'WHERE user_id =\"' + user + '\"';\n      }\n\n      DAO.paginate('Gallery',\n        'User.name as userName, User.status as userStatus, User.img as userAvatar, Gallery.*',\n        '',\n        'INNER JOIN User ON Gallery.user_id = User.id',\n        queryUser + ' ORDER BY Gallery.createdAt DESC',\n        _limit,\n        page).then(function (data) {\n        console.log(data);\n        defer.resolve(data);\n      });\n\n      return defer.promise;\n    }\n\n    function _getOnlineFeed(page, user, _limit) {\n      var defer   = $q.defer();\n      var _result = {\n        total: 0,\n        rows: []\n      };\n\n      function _query() {\n        if (user) {\n          return new Parse\n            .Query('Gallery')\n            .descending('createdAt')\n            .equalTo('user', user);\n        } else {\n          return new Parse\n            .Query('Gallery')\n            .descending('createdAt');\n          //.notEqualTo('user', user)\n          //.containedIn('ref', following)\n          //.containsAll('ref', following)\n        }\n      };\n\n\n      _query()\n        .count()\n        .then(function (totalGallery) {\n          console.log('results', totalGallery);\n          _result.total = totalGallery;\n          _query()\n            .include('user')\n            .limit(_limit)\n            .skip(page * _limit)\n            .find()\n            .then(function (resp) {\n\n              // console.log('home', resp);\n              var qtd = resp.length;\n\n              if (!qtd) {\n                defer.reject(true);\n              }\n\n              var cb = _.after(resp.length, function () {\n                defer.resolve(_result);\n              });\n\n              _.each(resp, function (item) {\n                //grab relations\n\n                var _likes    = item.relation('likes');\n                var _comments = item.relation('comments');\n\n                _likes\n                  .query()\n                  .equalTo('gallery', item)\n                  .equalTo('user', Parse.User.current())\n                  .count()\n                  .then(function (liked) {\n                    (liked > 0) ? liked = true : liked = false;\n                    _comments\n                      .query()\n                      .include('commentBy')\n                      .ascending('createdAt')\n                      .limit(limitComment)\n                      .find()\n                      .then(function (comments) {\n\n                        var commentsData = [];\n                        comments.map(function (item) {\n                          var user = item.attributes.commentBy;\n\n                          var comment = {\n                            id: item.id,\n                            text: item.attributes.text,\n                            user: user,\n                            created: item.attributes.createdAt,\n                            userAvatar: User.avatar(user.attributes),\n                            userName: user.attributes.name\n                          };\n                          User.cacheUser(comment.user);\n\n                          var _queryInsertComment = {\n                            table: 'GalleryComment',\n                            columns: {\n                              id: comment.id,\n                              name: comment.text,\n                              user_id: comment.user.id,\n                              userName: comment.user.attributes.name,\n                              gallery_id: item.id,\n                              createdAt: comment.createdAt ? new Date(comment.createdAt).getTime() : new Date().getTime()\n                            }\n                          };\n                          DAO.insert(_queryInsertComment);\n\n                          commentsData.push(comment);\n                        });\n\n                        var obj                 = {\n                          id: item.id,\n                          item: angular.copy(item.attributes),\n                          created: item.createdAt,\n                          likes: item.attributes.qtdLike || 0,\n                          liked: liked,\n                          img: item.attributes.img._url,\n                          comments: commentsData,\n                          user_id: item.attributes.user.id,\n                          userName: item.attributes.user.attributes.name,\n                          userAvatar: User.avatar(item.attributes.user.attributes),\n                          userStatus: item.attributes.user.attributes.status\n                        };\n                        var _queryInsertGallery = {\n                          table: 'Gallery',\n                          columns: {\n                            id: item.id,\n                            title: item.attributes.title,\n                            img: item.attributes.img._url,\n                            user_id: item.attributes.user.id,\n                            location: JSON.stringify(item.attributes.location),\n                            qtdLike: item.attributes.qtdLike || 0,\n                            liked: liked,\n                            likes: item.attributes.qtdLike || 0,\n                            createdAt: new Date(item.createdAt).getTime()\n                          }\n                        };\n                        DAO.insert(_queryInsertGallery);\n                        // console.table(obj);\n                        _result.rows.push(obj);\n                        cb();\n                      });\n                  });\n\n              });\n            });\n        });\n      return defer.promise;\n    }\n\n    function feed(page, user) {\n      var _limit = 15;\n      // Offline Feed\n      if ($rootScope.onLine) {\n        return _getOnlineFeed(page, user, _limit);\n      } else {\n        return _getOfflineFeed(page, user, _limit);\n      }\n    }\n\n    function feedGrid(page, user, options) {\n      var defer   = $q.defer();\n      var _limit  = 30;\n      var _result = {\n        total: 0,\n        rows: []\n      };\n\n      function _query() {\n        if (user) {\n          return new Parse\n            .Query('Gallery')\n            .descending('createdAt')\n            .equalTo('user', user);\n        } else {\n          return new Parse\n            .Query('Gallery')\n            .descending('createdAt');\n        }\n      }\n\n      _query()\n        .count()\n        .then(function (totalGallery) {\n          console.log('results', totalGallery);\n          _result.total = totalGallery;\n          _query()\n            .include('user')\n            .limit(_limit)\n            .skip(page * _limit)\n            .find()\n            .then(function (resp) {\n\n              var qtd = resp.length;\n\n              if (!qtd) {\n                defer.reject(true);\n              }\n\n              var cb = _.after(resp.length, function () {\n                defer.resolve(_result);\n              });\n\n              _.each(resp, function (item) {\n                var obj = {\n                  id: item.id,\n                  item: angular.copy(item.attributes),\n                  created: item.createdAt,\n                  likes: item.attributes.qtdLike || 0,\n                  img: item.attributes.img.url(),\n                  user: item.attributes.user,\n                  user_id: item.attributes.user.id,\n                  userAvatar: User.avatar(item.attributes.user.attributes)\n                };\n                _result.rows.push(obj);\n                cb();\n              });\n            });\n        });\n      return defer.promise;\n    }\n\n\n    function get(item) {\n      var defer = $q.defer();\n\n      console.log(item);\n      Loading.start();\n\n      find(item)\n        .then(function (resp) {\n          console.log(resp);\n\n          var likes    = resp.relation('likes');\n          var comments = resp.relation('comments');\n\n          likes\n            .query()\n            .equalTo('gallery', item)\n            .equalTo('user', Parse.User.current())\n            .count()\n            .then(function (liked) {\n\n              likes\n                .query()\n                .count()\n                .then(function (likes) {\n\n                  comments\n                    .query()\n                    .include('commentBy')\n                    .descending('createdAt')\n                    .limit(limitComment)\n                    .find()\n                    .then(function (comments) {\n                      console.log(comments);\n\n                      var commentsData = [];\n\n                      angular.forEach(comments, function (item) {\n                        var comment        = {\n                          id: item.id,\n                          text: item.attributes.text,\n                          user: item.attributes.commentBy.attributes\n                        };\n                        comment.userAvatar = User.avatar(comment.user);\n                        commentsData.push(comment);\n                      });\n\n                      var obj        = {\n                        id: item.id,\n                        item: item.attributes,\n                        created: item.createdAt,\n                        likes: likes,\n                        liked: liked,\n                        user: item.attributes.user.attributes,\n                        comments: commentsData\n                      };\n                      obj.userAvatar = User.avatar(obj.user);\n\n                      defer.resolve(obj);\n                      Loading.end();\n                    });\n                });\n            });\n\n        });\n\n      return defer.promise;\n    }\n\n\n    function find(id) {\n      var defer = $q.defer();\n      new Parse\n        .Query('Gallery')\n        .include('user')\n        .get(id)\n        .then(function (resp) {\n          defer.resolve(resp);\n        });\n      return defer.promise;\n    }\n\n\n    function addComment(form) {\n      var defer = $q.defer();\n      console.log('addComent', form);\n\n      find(form.galleryId)\n        .then(function (gallery) {\n          var Object = Parse.Object.extend('GalleryComment');\n          var item   = new Object({});\n\n          angular.forEach(form, function (value, key) {\n            item.set(key, value);\n          });\n          item.set('commentBy', Parse.User.current());\n          item.set('gallery', gallery);\n\n          item.save(null)\n              .then(function (resp) {\n                console.log(resp);\n\n                addActivity({\n                  galleryId: gallery.id,\n                  action: 'add comment'\n                });\n\n                gallery\n                  .relation('comments')\n                  .add(resp);\n\n                gallery\n                  .save()\n                  .then(function (resp) {\n                    console.log(resp);\n                    defer.resolve(resp);\n                  });\n              });\n        });\n\n\n      return defer.promise;\n    }\n\n    function isLiked(galleryId) {\n      var defer = $q.defer();\n\n      find(galleryId)\n        .then(function (gallery) {\n          new Parse\n            .Query('GalleryLike')\n            .equalTo('gallery', gallery)\n            .equalTo('user', Parse.User.current())\n            .first()\n            .then(function (resp) {\n              console.warn(resp);\n              if (resp === undefined) {\n                defer.reject(resp);\n              } else {\n                defer.resolve(resp);\n              }\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function addLike(galleryId) {\n      var defer = $q.defer();\n\n      find(galleryId)\n        .then(function (gallery) {\n          var Object = new Parse.Object.extend('GalleryLike');\n          var item   = new Object({});\n\n          item.set('user', Parse.User.current());\n          item.set('gallery', gallery);\n\n          console.log(gallery);\n\n          item.save(null)\n              .then(function (resp) {\n                console.log(resp);\n\n                // Gallery Increment Like\n                var likes = parseInt(gallery.attributes.qtdLike) ? parseInt(gallery.attributes.qtdLike + 1) : 1;\n                console.log('Qtd Like', likes);\n\n                // Increment Like\n                gallery.set('qtdLike', likes);\n\n                // Add Relation\n                gallery.relation('likes').add(resp);\n\n                console.log('Save Gallery', gallery);\n\n                // Save Gallery\n                gallery\n                  .save()\n                  .then(function (newGallery) {\n                    console.log(newGallery);\n                    defer.resolve({\n                      liked: true,\n                      likes: likes\n                    });\n                  }, function (err) {\n                    console.error(err);\n                    defer.reject(err);\n                  });\n              });\n        });\n      return defer.promise;\n    }\n\n    function removeLike(galleryId) {\n\n      var defer = $q.defer();\n      find(galleryId)\n        .then(function (gallery) {\n\n          new Parse\n            .Query('GalleryLike')\n            .equalTo('gallery', gallery)\n            .equalTo('user', Parse.User.current())\n            .first()\n            .then(function (like) {\n\n              var likes = parseInt(gallery.attributes.qtdLike - 1);\n              if (likes < 0) {\n                likes = 0;\n              }\n\n              console.log('Remove like', likes, gallery);\n\n\n              // Gallery Decrement Like\n              gallery.set('qtdLike', likes);\n\n              // Remove Relation\n              gallery.relation('likes').remove(like);\n\n              like\n                .destroy(function (resp) {\n                  if (resp) {\n                    console.log('Remove like');\n                    // Save Gallery\n                    gallery\n                      .save()\n                      .then(function (newGallery) {\n                        console.log('New Gallery', newGallery);\n\n                        defer.resolve({\n                          liked: false,\n                          likes: newGallery.attributes.qtdLike\n                        });\n\n                      }, function (err) {\n                        console.error(err);\n                        defer.reject(err);\n                      });\n                  }\n                });\n\n\n            });\n\n        });\n      return defer.promise;\n    }\n\n    function likeGallery(gallery) {\n      var defer = $q.defer();\n\n      isLiked(gallery)\n        .then(function (resp) {\n          console.warn(resp);\n          var promise = '';\n\n          if (resp) {\n            console.log('Remove Like');\n            promise = removeLike(gallery);\n            addActivity({\n              galleryId: gallery,\n              action: 'unlike like'\n            });\n\n          } else {\n            console.log('Add like');\n            promise = addLike(gallery);\n            addActivity({\n              galleryId: gallery,\n              action: 'add like'\n            });\n          }\n\n          promise\n            .then(function (resp) {\n              console.log(resp);\n              defer.resolve(resp);\n            });\n\n        })\n        .catch(function (err) {\n          console.log('Add like', err);\n\n          addActivity({\n            galleryId: gallery,\n            action: 'add like'\n          });\n\n          addLike(gallery)\n            .then(function (resp) {\n              console.log(resp);\n              defer.resolve(resp);\n            });\n        });\n      return defer.promise;\n    }\n\n    function getUserGalleryQtd(userId) {\n      var defer = $q.defer();\n      if (userId === undefined) {\n        userId = Parse.User.current().id;\n      }\n\n      User\n        .find(userId)\n        .then(function (user) {\n          new Parse\n            .Query('Gallery')\n            .equalTo('user', user)\n            .count()\n            .then(function (qtdGalleries) {\n              defer.resolve(qtdGalleries);\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function getUserGallery(userId, page) {\n      var defer = $q.defer();\n      var data  = [];\n      var limit = 9;\n\n      if (userId === undefined) {\n        userId = Parse.User.current().id;\n      }\n\n      User\n        .find(userId)\n        .then(function (user) {\n\n          new Parse\n            .Query('Gallery')\n            .equalTo('user', user)\n            .descending('createdAt')\n            //.containedIn('ref', following)\n            //.containsAll('ref', following)\n            .include('user')\n            .limit(limit)\n            .skip(page * limit)\n            .find()\n            .then(function (resp) {\n\n              if (resp.length) {\n                var cb = _.after(resp.length, function () {\n                  defer.resolve(data);\n                });\n\n                _.each(resp, function (item) {\n                  //grab relations\n\n                  var likes    = item.relation('likes');\n                  var comments = item.relation('comments');\n\n                  likes\n                    .query()\n                    .equalTo('gallery', item)\n                    .equalTo('user', Parse.User.current())\n                    .count()\n                    .then(function (liked) {\n\n                      likes\n                        .query()\n                        .count()\n                        .then(function (likes) {\n\n                          comments\n                            .query()\n                            .include('commentBy')\n                            .descending('createdAt')\n                            .limit(limitComment)\n                            .find()\n                            .then(function (comments) {\n                              // console.log(comments);\n                              var commentsData = [];\n\n                              angular.forEach(comments, function (item) {\n                                var comment        = {\n                                  id: item.id,\n                                  text: item.attributes.text,\n                                  user: item.attributes.commentBy.attributes\n                                };\n                                comment.userAvatar = User.avatar(comment.user);\n                                commentsData.push(comment);\n                              });\n\n                              var obj        = {\n                                id: item.id,\n                                item: item.attributes,\n                                src: item.attributes.img.url(),\n                                created: item.createdAt,\n                                likes: likes,\n                                liked: liked,\n                                comments: commentsData,\n                                user: item.attributes.user.attributes\n                              };\n                              // obj.user.id = item.attributes.user.id;\n                              obj.userAvatar = User.avatar(obj.user);\n\n                              data.push(obj);\n                              cb();\n                            });\n                        });\n                    });\n\n                });\n              } else {\n                defer.reject(true);\n              }\n            }, function () {\n              defer.reject(true);\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function listActivity(page) {\n      var defer  = $q.defer();\n      var limit  = 20;\n      var _table = 'GalleryActivity';\n\n      console.info(page, limit);\n\n\n      DAO.query(\"SELECT * FROM \" + _table).then(function (data) {\n        if (data.rows.length) {\n          defer.resolve(data.rows);\n        } else {\n          new Parse\n            .Query('GalleryActivity')\n            .include('user')\n            .include('gallery')\n            .descending('createdAt')\n            .limit(limit)\n            .skip(page * limit)\n            .find()\n            .then(function (resp) {\n              if (resp.length) {\n                var data = [];\n                resp.map(function (item) {\n                  var _insert = {\n                    table: _table,\n                    columns: {\n                      id: item.id,\n                      action: item.attributes.action,\n                      user_id: item.attributes.user.id,\n                      userName: item.attributes.user.attributes.name,\n                      userAvatar: User.avatar(item.attributes.user.attributes),\n                      gallery_id: item.attributes.gallery ? item.attributes.gallery.id : null,\n                      img: item.attributes.gallery ? item.attributes.gallery.attributes.img._url : null,\n                      createdAt: new Date(item.attributes.createdAt).getTime()\n                    }\n                  }\n                  DAO.insert(_insert).then(console.log(data));\n                  data.push(_insert.columns);\n                });\n                defer.resolve(data);\n              } else {\n                defer.reject(true);\n              }\n            });\n        }\n      })\n\n\n      return defer.promise;\n    }\n\n    function addActivity(data) {\n      /*\n       * ACTIONS\n       * add photo\n       * add comment\n       * like photo\n       * unlike photo\n       * register\n       * */\n\n      console.info(data);\n\n      if (data.galleryId) {\n        find(data.galleryId)\n          .then(function (gallery) {\n            var Object = Parse.Object.extend('GalleryActivity');\n            var item   = new Object({});\n\n            item.set('user', Parse.User.current());\n            item.set('gallery', gallery);\n            item.set('action', data.action);\n\n            item.save()\n                .then(function (resp) {\n                  console.warn(resp);\n                });\n          });\n      } else {\n        var Object = Parse.Object.extend('GalleryActivity');\n        var item   = new Object({});\n\n        item.set('user', Parse.User.current());\n        item.set('action', data.action);\n\n        item.save()\n            .then(function (resp) {\n              console.warn(resp);\n            });\n      }\n    }\n\n\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .factory('PhotogramForm', PhotogramFormFactory);\n\n  function PhotogramFormFactory($translate) {\n\n    var form = [{\n      key: 'title',\n      type: 'input',\n      templateOptions: {\n        type: 'text',\n        placeholder: $translate.instant('PHOTOGRAM.FORM.TITLE'),\n        icon: 'icon-envelope',\n        required: true,\n        iconPlaceholder: true,\n        focus: true\n      }\n    }, {\n      key: 'geo',\n      type: 'toggle',\n      templateOptions: {\n        label: $translate.instant('PHOTOGRAM.FORM.GEOLOCATION'),\n        toggleClass: 'positive'\n      }\n    }];\n\n    var formComment = [{\n      key: 'text',\n      type: 'input',\n      templateOptions: {\n        placeholder: $translate.instant('PHOTOGRAM.FORM.ADDCOMMENT'),\n        type: 'text',\n        required: true,\n        focus: true\n          //icon           : 'icon-envelope',\n          //iconPlaceholder: true\n      }\n    }];\n\n    var formShare = [{\n      key: 'facebook',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Facebook',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'twitter',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Twitter',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'whatsapp',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Whatsapp',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'SMS',\n      type: 'toggle',\n      templateOptions: {\n        label: 'SMS',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'email',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Email',\n        toggleClass: 'positive'\n      }\n    }, ];\n    return {\n      form: form,\n      formComment: formComment,\n      formShare: formShare\n    };\n  }\n\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.photogram')\n        .factory('PhotogramSetting', PhotogramSettingFactory);\n\n    function PhotogramSettingFactory(DAO, $q) {\n\n        var _data = {\n            rows:[]\n        };\n\n        return {\n            init: init,\n            get: get\n        };\n\n        function init() {\n            var defer = $q.defer();\n            var _tableName = 'GallerySetting';\n\n            DAO.query(\"SELECT * FROM \" + _tableName).then(function  (data) {\n                    console.log(data);\n                    if(data.rows.length) {\n                        _data.rows = data.rows;\n                        defer.resolve(_data);\n                    } else {\n\n                        new Parse\n                            .Query(_tableName)\n                            .find()\n                            .then(function (resp) {\n                                var data  = [];\n                                resp.map(function (item) {\n                                    var _queryInsert = {\n                                        table: _tableName,\n                                        columns: {\n                                            key: item.attributes.key,\n                                            value: item.attributes.value\n                                        }\n                                    };\n                                    DAO.insert(_queryInsert);\n                                    data.push(_queryInsert.columns)\n                                });\n                                defer.resolve(data);\n                            }, error);\n                        \n                    }\n                })\n\n\n            return defer.promise;\n\n        }\n\n        function error(err) {\n            alert(err);\n        }\n\n        function get(key) {\n            return _.filter(_data.rows,{key: key})[0];\n        }\n\n    }\n\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .factory('PhotogramShare', PhotogramShareFactory);\n\n  function PhotogramShareFactory(AppConfig, $q, $ionicActionSheet, Notify, $cordovaSocialSharing) {\n\n    var message = {\n      title: ('Join me from ') + AppConfig.app.name + '!',\n      subject: (\"I'm at \") + AppConfig.app.name + '!. ' + (\n        'Install the application and follow me!') + ' ' + AppConfig.app.url,\n      image: AppConfig.app.image,\n      link: AppConfig.app.url\n    };\n\n    return {\n      share: share,\n      open: open\n    };\n\n    function share(social, option) {\n      var defer = $q.defer();\n\n      function success(resp) {\n        Notify.alert({\n          title: ('Thanks'),\n          text: ('Thank you for sharing!!')\n        });\n        defer.resolve(resp);\n      }\n\n      function error(err) {\n        console.error(err);\n        defer.reject();\n      }\n\n      var detail = option ? option : message;\n\n      switch (social) {\n      case 'instagram':\n        window\n          .plugins\n          .socialsharing\n          .shareViaInstagram(message.text, message.image, message.link)\n          .then(success, error);\n        break;\n\n      case 'facebook':\n        $cordovaSocialSharing\n          .shareViaFacebook(detail.text, detail.image, detail.link)\n          .then(success, error);\n        break;\n\n      case 'twitter':\n        $cordovaSocialSharing\n          .shareViaTwitter(detail.text, detail.image, detail.link)\n          .then(success, error);\n        break;\n\n      case 'whatsapp':\n        $cordovaSocialSharing\n          .shareViaWhatsApp(detail.text, detail.image, detail.link)\n          .then(success, error);\n        break;\n\n      case 'email':\n        $cordovaSocialSharing\n          .shareViaEmail(detail.title, detail.subject ? detail.subject : detail.title)\n          .then(success, error);\n        break;\n      }\n\n      return defer.promise;\n    }\n\n    function open() {\n      var modal = $ionicActionSheet\n        .show({\n          buttons: [{\n            text: '<i class=\"icon ion-social-instagram\"></i>' + ('Instagram')\n          }, {\n            text: '<i class=\"icon ion-social-facebook\"></i>' + ('Facebook')\n          }, {\n            text: '<i class=\"icon ion-social-twitter\"></i>' + ('Twitter')\n          }, {\n            text: '<i class=\"icon ion-social-whatsapp\"></i>' + ('Whatsapp')\n          }, {\n            text: '<i class=\"icon ion-email\"></i>' + ('Email')\n          }],\n          titleText: ('Share'),\n          cancelText: ('Cancel'),\n          cancel: function () {\n            return false;\n          },\n          buttonClicked: function (index) {\n            console.log(index);\n            switch (index) {\n            case 0:\n              share('instagram');\n              break;\n            case 1:\n              share('facebook');\n              break;\n            case 2:\n              share('twitter');\n              break;\n            case 3:\n              share('whatsapp');\n              break;\n            case 4:\n              share('email');\n              break;\n            }\n            modal();\n            //share(index);\n          }\n        });\n\n    }\n  }\n\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('app.user')\n    .factory('User', UserFactory);\n\n  function UserFactory($q, $window, AppConfig, Parse, $rootScope, $ionicHistory, $cordovaDevice, $facebook, $cordovaFacebook, Loading, DAO, $state) {\n\n    var cordova  = $window.cordova;\n    var device   = cordova ? true : false;\n    var facebook = device ? $cordovaFacebook : $facebook;\n    var user;\n\n    return {\n      init: init,\n      initFollows: initFollows,\n      addFollows: addFollows,\n      currentUser: currentUser,\n      register: register,\n      get: get,\n      cacheUser: cacheUser,\n      login: login,\n      profile: profile,\n      logout: logout,\n      update: update,\n      updateAvatar: updateAvatar,\n      forgot: forgot,\n      list: list,\n      find: find,\n      follow: follow,\n      avatar: avatar,\n      getFollowers: getFollowers,\n      getFollowing: getFollowing,\n      isFollow: isFollow,\n      mail: getMail,\n      facebookLogin: facebookLogin,\n      facebookLink: facebookLink,\n      facebookProfile: facebookProfile,\n      facebookFriends: facebookFriends,\n      facebookInvite: facebookInvite,\n      facebookAPI: facebookAPI\n    };\n\n\n    function init() {\n      var defer = $q.defer();\n      // Parse Start\n      if (Parse.User.current()) {\n        user = Parse.User.current();\n        loadProfile();\n        defer.resolve(user);\n      } else {\n        console.log('Not logged user, go intro');\n        // logout();\n        // $location.path(AppConfig.routes.login);\n        defer.reject('Not user');\n      }\n      return defer.promise;\n    }\n\n    function _getCache(userId) {\n      var defer = $q.defer();\n      console.log(\"SELECT * FROM User WHERE id = '\" + userId + \"'\");\n      DAO.query(\"SELECT * FROM User WHERE id = '\" + userId + \"'\")\n         .then(function (data) {\n           console.log(data);\n           if (data.rows.length) {\n             defer.resolve(data.rows[0]);\n           } else {\n             defer.reject(data);\n           }\n         });\n      return defer.promise;\n    }\n\n    function _getServer(userId) {\n      var defer = $q.defer();\n      new Parse\n        .Query('User')\n        .get(userId)\n        .then(function (data) {\n          cacheUser(data)\n            .then(function (user) {\n              defer.resolve(user);\n            });\n        })\n        .catch(function (err) {\n          defer.reject(err);\n        });\n      return defer.promise;\n    }\n\n    function get(userId) {\n      var defer = $q.defer();\n      _getCache(userId)\n        .then(defer.resolve)\n        .catch(function () {\n          _getServer(user.id)\n            .then(defer.resolve)\n            .catch(defer.reject);\n        });\n\n      return defer.promise;\n    }\n\n    function initFollows() {\n      var defer = $q.defer();\n      console.log('Init Follows', Parse.User.current().id);\n      DAO.query(\"SELECT * FROM UserFollow WHERE userId = '\" + Parse.User.current().id + \"'\")\n         .then(function (data) {\n           console.log(data);\n\n           if (data.rows.length) {\n             defer.resolve(data.rows);\n           } else {\n             new Parse\n               .Query('UserFollow')\n               .include('follow')\n               .equalTo('user', Parse.User.current())\n               .find()\n               .then(function (follows) {\n                 var _promises = [];\n                 console.warn(follows);\n                 follows.map(function (item) {\n\n                   var _query = {\n                     table: 'UserFollow',\n                     columns: {\n                       id: item.id,\n                       userId: item.attributes.user.id,\n                       followId: item.attributes.follow.id\n                     }\n                   };\n\n                   _promises.push(cacheUser(item.attributes.follow));\n                   _promises.push(DAO.insert(_query));\n                 });\n\n                 $q.all(_promises).then(function (result) {\n                   defer.resolve(result);\n                 }).catch(defer.reject);\n\n               }, function (err) {\n                 console.log('nenhum follow', err);\n                 defer.resolve([]);\n               });\n           }\n         })\n         .catch(function (erro) {\n           console.error(erro);\n         });\n      return defer.promise;\n    }\n\n\n    function currentUser() {\n      return user;\n    }\n\n\n    function loadProfile() {\n      user = Parse.User.current();\n      if (user) {\n        // user = avatar(user);\n        $rootScope.currentUser = user.attributes;\n        console.log('load profile', user);\n        return user;\n      } else {\n        logout();\n        return false;\n      }\n    }\n\n    function avatar(obj) {\n      if (obj.facebookimg) {\n        return obj.facebookimg;\n      } else {\n        return obj.img ? obj.img._url : 'img/user.png';\n      }\n    }\n\n    function login(form) {\n      var defer = $q.defer();\n      Parse\n        .User\n        .logIn(form.email, form.password, {\n          success: function (resp) {\n            console.log(resp);\n            loadProfile()\n            defer.resolve($rootScope.currentUser);\n          },\n          error: function (user, err) {\n            console.error(user, err);\n            // The login failed. Check error to see why.\n            defer.reject(err);\n          }\n        });\n      return defer.promise;\n    }\n\n    function loginFacebook2(response) {\n      var defer = $q.defer();\n      console.log('Facebook api');\n      facebook\n        .api('me/?fields=id,name,email,gender,bio', ['public_profile'])\n        .then(function (dados) {\n          console.log('facebook api', dados);\n\n          var query = new Parse.Query(Parse.User);\n          query\n            .equalTo('email', dados.email)\n            .first({\n              success: function (user) {\n                console.log(user);\n\n                if (user) {\n                  console.log('Já existe um cadastro com esse email', user);\n                  if (user.get('facebook_complete') === Boolean(true)) {\n\n                    loginFacebook(response)\n                      .then(function (resp) {\n                        console.log('Logado', resp);\n\n                        if (user.attributes.name === '') {\n                          console.info('User sem nome', user, dados);\n                          var updateUser  = user.attributes;\n                          updateUser.name = dados.name;\n\n                          update(updateUser)\n                            .then(function () {\n                              defer.resolve({\n                                status: 0\n                              });\n                            });\n                        } else {\n\n                          loadProfile(user);\n\n                          defer.resolve({\n                            status: 0\n                          });\n                        }\n\n                      });\n                  } else {\n                    console.log('Se ainda não está completo, manda completar o perfil', dados,\n                      response, user);\n\n\n                    $rootScope.tempUser             = dados;\n                    $rootScope.tempUser.facebookimg = 'https://graph.facebook.com/' + dados.id +\n                      '/picture?width=250&height=250';\n\n                    console.log($rootScope.tempUser);\n                    defer.resolve({\n                      status: 2\n                    });\n\n                  }\n\n                } else {\n                  // Se não encontrar nenhum usuário\n                  console.log('Novo usuário');\n\n                  // Crio uma conta no parse com o Facebook\n                  loginFacebook(response)\n                    .then(function (newuser) {\n\n                      console.log(newuser);\n\n                      // Atualizo o novo perfil\n                      var form = {\n                        name: dados.name,\n                        facebook: dados.id,\n                        email: dados.email,\n                        gender: dados.gender,\n                        facebook_complete: Boolean(true),\n                        facebookimg: 'https://graph.facebook.com/' + dados.id +\n                        '/picture?width=250&height=250'\n                      };\n\n                      update(form)\n                        .then(function (resp) {\n                          console.warn('me response', resp);\n\n                          defer.resolve({\n                            status: 1\n                          });\n                        });\n\n\n                    });\n\n\n                }\n\n              },\n              error: function (error) {\n                alert('Sem conexão');\n                defer.reject(error);\n\n              }\n            });\n\n        }, function (resp) {\n          console.log('Facebook Error', resp);\n          defer.reject(resp);\n        });\n\n      return defer.promise;\n    }\n\n    function facebookLogin() {\n      var defer = $q.defer();\n\n      //facebook.logout();\n      console.info('facebook login', device, facebook);\n\n      facebook\n        .getLoginStatus()\n        .then(function (respStatus) {\n\n          if (respStatus.status === 'connected') {\n            loginFacebook2(respStatus)\n              .then(function (deferStatus) {\n                defer.resolve(deferStatus);\n              });\n          } else {\n\n            facebook\n              .login([\n                'public_profile',\n                'email'\n              ])\n              .then(function (response) {\n\n                  console.warn('facebook login response', response);\n                  if (response.status === undefined) {\n                    defer.reject('reject');\n                  }\n\n                  //Pega o Status do Login\n                  console.log('facebook status', response);\n                  loginFacebook2(response)\n                    .then(function (deferStatus) {\n                      defer.resolve(deferStatus);\n                    });\n                  ;\n                },\n                function (response) {\n                  //alert(JSON.stringify(response));\n                  console.log('Facebook Error', response);\n                  defer.reject(JSON.stringify(response));\n\n                });\n          }\n          ;\n        });\n\n\n      return defer.promise;\n    }\n\n\n    function facebookProfile() {\n      var defer = $q.defer();\n      facebookLogin()\n        .then(function (resp) {\n\n          facebook\n            .api('me', '')\n            .then(function (response) {\n              defer.resolve([\n                resp,\n                response\n              ]);\n            }, function (error) {\n              console.log(error);\n              defer.reject(error);\n            });\n        });\n      return defer.promise;\n    }\n\n\n    function register(form) {\n      var defer = $q.defer();\n\n      var formData      = form;\n      formData.username = form.email;\n\n      console.log(formData);\n      new Parse\n        .User(formData)\n        .signUp(null, {\n          success: function (resp) {\n            var user = loadProfile(resp);\n            console.log(resp, user);\n            Loading.end();\n            //startPush('user-', user.email);\n            defer.resolve(user);\n          },\n          error: function (user, resp) {\n            console.log(resp);\n            if (resp.code === 125) {\n              defer.reject('Please specify a valid email address');\n            } else if (resp.code === 202) {\n              defer.reject('The email address is already registered');\n            } else {\n              defer.reject(resp);\n            }\n          }\n        });\n      return defer.promise;\n    }\n\n    function forgot(email) {\n      var defer = $q.defer();\n      new Parse.User.requestPasswordReset(email, {\n        success: function (resp) {\n          defer.resolve(resp);\n        },\n        error: function (err) {\n          if (err.code === 125) {\n            defer.reject('Email address does not exist');\n          } else {\n            defer.reject('An unknown error has occurred, please try again');\n          }\n        }\n      });\n      return defer.promise;\n    }\n\n    function logout() {\n      new Parse.User.logOut();\n      delete $rootScope.currentUser;\n      //$window.location = '/#/intro';\n      $state.go(AppConfig.routes.login, {\n        clear: true\n      });\n      $ionicHistory.clearCache();\n    }\n\n    function update(form) {\n      var defer = $q.defer();\n      Loading.start();\n      var currentUser = Parse.User.current();\n\n      angular.forEach(form, function (value, key) {\n        console.log(key, value);\n        currentUser.set(key, value);\n      });\n\n      if (cordova) {\n        var cordovaDevice = {\n          device: $cordovaDevice.getDevice(),\n          cordova: $cordovaDevice.getCordova(),\n          model: $cordovaDevice.getModel(),\n          platform: $cordovaDevice.getPlatform(),\n          uuid: $cordovaDevice.getUUID(),\n          version: $cordovaDevice.getVersion()\n        };\n\n        currentUser.set('device', cordovaDevice.device);\n        currentUser.set('deviceCordova', cordovaDevice.cordova);\n        currentUser.set('deviceModel', cordovaDevice.model);\n        currentUser.set('devicePlatform', cordovaDevice.platform);\n        currentUser.set('deviceUuiid', cordovaDevice.uuid);\n        currentUser.set('deviceVersion', cordovaDevice.version);\n      }\n      // Update Language\n      //currentUser.set('language', $rootScope.lang.value || null);\n\n      // console.log(currentUser);\n      currentUser\n        .save()\n        .then(function (resp) {\n          console.log(resp);\n          loadProfile();\n          Loading.end();\n          defer.resolve(resp);\n        });\n\n\n      return defer.promise;\n    }\n\n    function updateAvatar(photo) {\n      var defer = $q.defer();\n\n      Loading.start();\n\n      if (photo !== '') {\n\n        // create the parse file\n        var imageFile = new Parse.File('mypic.jpg', {\n          base64: photo\n        });\n\n        // save the parse file\n        return imageFile\n          .save()\n          .then(function () {\n\n            photo = null;\n\n            // create object to hold caption and file reference\n            var currentUser = Parse.User.current();\n\n            // set object properties\n            currentUser.set('img', imageFile);\n\n            // save object to parse backend\n            currentUser\n              .save()\n              .then(function (resp) {\n                loadProfile();\n                Loading.end();\n                defer.resolve(resp);\n              });\n\n\n          }, function (error) {\n            Loading.end();\n            console.log(error);\n            defer.reject(error);\n          });\n      }\n      return defer.promise;\n    }\n\n\n    function facebookFriends() {\n      var defer = $q.defer();\n\n      facebook\n        .api('me/friends')\n        .then(function (success) {\n          defer.resolve(success);\n        }, function (error) {\n          defer.reject(error);\n        });\n\n      return defer.promise;\n    }\n\n    function facebookAPI(api) {\n      var defer = $q.defer();\n\n      facebook\n        .api(api)\n        .then(function (success) {\n          defer.resolve(success);\n        }, function (error) {\n          defer.reject(error);\n        });\n\n      return defer.promise;\n    }\n\n    function facebookInvite() {\n      var defer = $q.defer();\n      if (device) {\n        facebook\n          .showDialog({\n            method: 'apprequests',\n            message: 'Venha para o nosso clube!'\n          })\n          .then(function (resp) {\n            defer.resolve(resp);\n          });\n      } else {\n        facebook\n          .ui({\n            method: 'apprequests',\n            message: 'Venha para o nosso clube!'\n          })\n          .then(function (resp) {\n            defer.resolve(resp);\n          });\n      }\n      return defer.promise;\n    }\n\n\n    function list() {\n      var defer = $q.defer();\n\n      new Parse\n        .Query('User')\n        .notEqualTo('user', Parse.User.current())\n        .find()\n        .then(function (resp) {\n          var users = [];\n          angular.forEach(resp, function (item) {\n            var user = item.attributes;\n            user.id  = item.id;\n            user     = avatar(user);\n\n            new Parse\n              .Query('UserFollow')\n              .equalTo('user', Parse.User.current())\n              .equalTo('follow', item)\n              .count()\n              .then(function (follow) {\n                user.follow = follow;\n\n                console.log(user);\n                users.push(user);\n              });\n          });\n          defer.resolve(users);\n        });\n\n      return defer.promise;\n    }\n\n    function cacheUser(user) {\n      var defer        = $q.defer();\n      // console.warn('_queryInsert', user);\n      var _queryInsert = {\n        table: 'User',\n        columns: {\n          id: user.id,\n          name: user.attributes.name,\n          username: user.attributes.username,\n          email: user.attributes.email,\n          language: user.attributes.language,\n          facebookimg: user.attributes.facebookimg,\n          gender: user.attributes.gender,\n          img: avatar(user.attributes),\n          facebook: user.attributes.facebook,\n          qtdFollow: user.attributes.qtdFollow,\n          status: user.attributes.status,\n          createdAt: user.attributes.createdAt ? new Date(user.attributes.createdAt).getTime() : 0,\n          attributes: JSON.stringify(user.attributes)\n        }\n      };\n\n      // console.info(_queryInsert);\n      DAO\n        .insert(_queryInsert)\n        .then(function () {\n          defer.resolve(_queryInsert.columns);\n        })\n        .catch(defer.reject);\n      return defer.promise;\n    }\n\n    function find(userId) {\n      var defer = $q.defer();\n\n      DAO.query(\"SELECT * FROM User WHERE id='\" + userId + \"'\").then(function (data) {\n        if (data.rows.length) {\n          defer.resolve(data.rows[0]);\n        } else {\n          new Parse\n            .Query('User')\n            .equalTo('objectId', userId)\n            .first()\n            .then(function (resp) {\n              // console.log(resp);\n              cacheUser(resp).then(function (user) {\n                defer.resolve(user);\n              })\n            });\n        }\n      })\n\n      return defer.promise;\n    }\n\n    function profile(userId) {\n      var defer = $q.defer();\n\n      find(userId)\n        .then(function (resp) {\n          console.log(resp);\n          var user = loadProfile(resp);\n\n          new Parse\n            .Query('Gallery')\n            .equalTo('user', resp)\n            .count()\n            .then(function (gallery) {\n              user.galleries = gallery;\n\n              new Parse\n                .Query('UserFollow')\n                .equalTo('user', resp)\n                .count()\n                .then(function (foloow) {\n                  user.follow = foloow;\n\n                  new Parse\n                    .Query('UserFollow')\n                    .equalTo('follow', resp)\n                    .count()\n                    .then(function (follow2) {\n                      user.follow2 = follow2;\n                      defer.resolve(user);\n                    });\n\n                });\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function isFollow(userId) {\n      var defer = $q.defer();\n\n      console.log('isFollow start', userId);\n\n      find(userId)\n        .then(function (followUser) {\n          new Parse\n            .Query('UserFollow')\n            .equalTo('user', Parse.User.current())\n            .equalTo('follow', followUser)\n            .count()\n            .then(function (respFollow) {\n              //console.log('isFollow', respFollow);\n              defer.resolve(respFollow);\n            });\n        });\n\n      return defer.promise;\n    }\n\n\n    function getFollowers(userId) {\n      var defer = $q.defer();\n\n      if (!userId) {\n        userId = Parse.User.current().id;\n      }\n\n      find(userId)\n        .then(function (user) {\n          new Parse\n            .Query('UserFollow')\n            .equalTo('follow', user)\n            .count()\n            .then(function (qtdFollowers) {\n              defer.resolve(qtdFollowers);\n            }, function (err) {\n              defer.reject(err);\n            });\n        });\n      return defer.promise;\n    }\n\n    function getFollowing(userId) {\n      var defer = $q.defer();\n\n      if (!userId) {\n        userId = Parse.User.current().id;\n      }\n\n      find(userId)\n        .then(function (user) {\n          new Parse\n            .Query('UserFollow')\n            .equalTo('user', user)\n            .count()\n            .then(function (qtdFollowing) {\n              defer.resolve(qtdFollowing);\n            }, function (err) {\n              defer.reject(err);\n            });\n        });\n      return defer.promise;\n    }\n\n    function follow(status, user) {\n      var defer     = $q.defer();\n      var qtdFollow = Parse.User.current().qtdFollow ? parseInt(Parse.User.current().qtdFollow) : 0;\n\n\n      find(user.id)\n        .then(function (follow) {\n\n          if (status) {\n            // Follow User\n            console.log('Follow User', follow);\n\n            var Object = Parse.Object.extend('UserFollow');\n            var item   = new Object();\n\n            item.set('user', Parse.User.current());\n            item.set('follow', follow);\n            item.save()\n                .then(function (resp) {\n                  console.log('Follow User', resp);\n\n                  update({\n                    qtdFollow: qtdFollow + 1\n                  })\n                    .then(function (userResp) {\n                      console.log('Follow User Update', userResp);\n                      defer.resolve(userResp);\n                    });\n\n                }, function (err) {\n                  defer.resolve(err);\n                });\n          } else {\n            // Unfollow User\n            console.log('Unfollow User', follow);\n\n            new Parse\n              .Query('UserFollow')\n              .equalTo('user', Parse.User.current())\n              .equalTo('follow', follow)\n              .first()\n              .then(function (item) {\n                item\n                  .destroy()\n                  .then(function (resp) {\n\n                    update({\n                      qtdFollow: qtdFollow - 1\n                    })\n                      .then(function (userResp) {\n                        console.log('Follow User Update', userResp);\n                        defer.resolve(userResp);\n                      });\n                  }, function (err) {\n                    defer.resolve(err);\n                  });\n              });\n          }\n        });\n\n      return defer.promise;\n    }\n\n    function addFollows(users) {\n      console.log('addFollows', users);\n      var promises = [];\n      angular.forEach(users, function (user) {\n        promises.push(follow(true, user.id));\n      });\n      return $q.all(promises);\n    }\n\n    function getMail(email) {\n      var defer = $q.defer();\n      Loading.start();\n      new Parse\n        .Query('User')\n        .equalTo('email', email)\n        .first()\n        .then(function (resp) {\n          Loading.end();\n          defer.resolve(resp);\n        }, function (resp) {\n          Loading.end();\n          defer.reject(resp);\n        });\n      return defer.promise;\n    }\n\n    function loginFacebook(response) {\n      var defer = $q.defer();\n\n      var data = new Date(new Date().getTime() + response['authResponse']['expiresIn'] * 1000);\n\n      Parse.FacebookUtils.logIn({\n        id: response['authResponse']['userID'],\n        access_token: response['authResponse']['accessToken'],\n        expiration_date: data\n      }, {\n        success: function (response) {\n          // Função caso tenha logado tanto no face quanto no Parse\n          var user = loadProfile(response);\n          console.log('User', user);\n          defer.resolve(user);\n        }\n      });\n\n      return defer.promise;\n    }\n\n    function facebookLink() {\n      var defer = $q.defer();\n\n      facebook\n        .login(['email'])\n        .then(function (response) {\n\n            console.log('facebook login', response);\n            //Pega o Status do Login\n\n            var data = new Date(new Date().getTime() + response['authResponse']['expiresIn'] * 1000);\n\n            var user = Parse.User.current();\n            console.log(user, response, data);\n\n            Parse.FacebookUtils.link(user, {\n              id: response['authResponse']['userID'],\n              access_token: response['authResponse']['accessToken'],\n              expiration_date: data\n            }, {\n              success: function (user) {\n                // Função caso tenha logado tanto no face quanto no Parse\n                console.log('User', user);\n                user.set('facebook', response['authResponse']['userID']);\n                user.set('facebookimg', 'https://graph.facebook.com/' + response['authResponse']['userID'] +\n                  '/picture?width=250&height=250');\n                user.set('facebook_complete', Boolean(true));\n                user.save()\n                    .then(function (response) {\n                      var user = loadProfile(response);\n                      console.info('User Update', user);\n                      defer.resolve(user);\n                    });\n              }\n            });\n          },\n          function (response) {\n            alert(JSON.stringify(response));\n\n          });\n\n\n      return defer.promise;\n    }\n\n\n  }\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('app.user')\n    .factory('UserForm', UserFormFactory);\n\n  function UserFormFactory($translate) {\n\n    return {\n      login: login(),\n      register: register(),\n      profile: profile()\n    };\n\n    function login() {\n      return [{\n        type: 'input',\n        key: 'email',\n        templateOptions: {\n          type: 'email',\n          placeholder: $translate.instant('USER.FORM.EMAIL'),\n          icon: 'icon-envelope',\n          required: true,\n          iconPlaceholder: true\n        }\n      }, {\n        type: 'input',\n        key: 'password',\n        templateOptions: {\n          type: 'password',\n          placeholder: $translate.instant('USER.FORM.PASSWORD'),\n          icon: 'icon-lock',\n          required: true,\n          iconPlaceholder: true\n        }\n      }];\n    }\n\n    function register() {\n      return [{\n        type: 'input',\n        key: 'email',\n        templateOptions: {\n          type: 'email',\n          placeholder: $translate.instant('USER.FORM.EMAIL'),\n          icon: 'icon-envelope',\n          required: true,\n          iconPlaceholder: true\n        }\n      }, {\n        type: 'input',\n        key: 'password',\n        templateOptions: {\n          type: 'password',\n          placeholder: $translate.instant('USER.FORM.PASSWORD'),\n          icon: 'icon-lock',\n          required: true,\n          iconPlaceholder: true\n        }\n      }];\n    }\n\n    function profile() {\n      return [{\n        key: 'name',\n        type: 'input',\n        templateOptions: {\n          type: 'text',\n          placeholder: $translate.instant('USER.FORM.NAME'),\n          icon: 'icon-user',\n          required: true,\n          iconPlaceholder: true\n        }\n      }, {\n        key: 'status',\n        type: 'input',\n        templateOptions: {\n          type: 'text',\n          placeholder: $translate.instant('USER.FORM.STATUS'),\n          icon: 'ion-quote',\n          required: true,\n          iconPlaceholder: true\n        }\n      }, {\n        type: 'select',\n        key: 'gender',\n        templateOptions: {\n          label: $translate.instant('USER.FORM.GENDER'),\n          options: [{\n            'label': $translate.instant('USER.FORM.MAN'),\n            'id': 'male',\n          }, {\n            'label': $translate.instant('USER.FORM.WOMAN'),\n            'id': 'female',\n          }],\n          valueProp: 'id',\n          labelProp: 'label',\n          icon: 'icon-list',\n          iconPlaceholder: true\n        }\n      }];\n    }\n\n  }\n\n\n})();\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name buy\n     *\n     * @description\n     * _Please update the description and restriction._\n     *\n     * @restrict A\n     * */\n\n    angular\n        .module('app.photogram')\n        .directive('buy', buyDirective);\n\n    function buyDirective($cordovaInAppBrowser) {\n        return {\n            restrict: 'A',\n            link: buyLink\n        };\n\n        function buyLink(scope, elem) {\n            elem.bind('click', function () {\n                var url     = 'https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S';\n\n                if(window.cordova ) {\n                    cordova\n                        .ThemeableBrowser\n                        .open(url, '_blank', {\n                            statusbar: {\n                                color: '#ffffffff'\n                            },\n                            toolbar: {\n                                height: 44,\n                                color: '#f0f0f0ff'\n                            },\n                            title: {\n                                color: '#333333',\n                                showPageTitle: true\n                            },\n                            closeButton: {\n                                image: 'close',\n                                imagePressed: 'close_pressed',\n                                align: 'left',\n                                event: 'closePressed'\n                            },\n                            backButtonCanClose: true\n                        });\n                } else {\n                    window.open(url,'_blank');\n                }\n            });\n        }\n    }\n\n})();\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name photogramComment\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict A\n   * */\n\n  angular\n    .module('app.photogram')\n    .directive('photogramComment', photogramCommentDirective);\n\n  function photogramCommentDirective($ionicModal, Loading, $ionicPopup, User, Notify, $timeout,\n    AppConfig, Photogram, PhotogramForm) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        ngModel: '='\n      },\n      link: function (scope, elem) {\n\n\n        elem.bind('click', openModalComment);\n\n        function init() {\n          scope.currentUser = User.currentUser();\n          scope.nocomments = false;\n          scope.loading = false;\n          scope.form = {\n            galleryId: scope.ngModel.id,\n            text: ''\n          };\n        }\n\n        function openModalComment() {\n          console.log(scope.ngModel);\n\n          init();\n\n          scope.formFields = PhotogramForm.formComment;\n          scope.submitComment = submitComment;\n          scope.deleteComment = deleteComment;\n          scope.editComment = editComment;\n          scope.closeModal = function () {\n            scope.modal.hide();\n            scope.modal.remove();\n          };\n\n          scope.comments = scope.ngModel.comments;\n          $timeout(function () {\n            if (scope.comments.length === 0) {\n              scope.nocomments = true;\n            }\n          }, 500);\n\n\n          $ionicModal.fromTemplateUrl(path + '/directive/comment/photogram.comment.directive.html', {\n              scope: scope,\n              focusFirstInput: true\n            })\n            .then(function (modal) {\n              scope.modal = modal;\n              scope.modal.show();\n\n            });\n        }\n\n        function deleteComment(obj) {\n          console.log(obj);\n          Notify\n            .confirm(('Delete comment'), ('You are sure?'))\n            .then(function (resp) {\n              console.log(resp);\n              if (resp) {\n                Photogram\n                  .deleteComment(obj)\n                  .then(function (resp) {\n                    console.log(resp);\n                    getComments();\n                  });\n              }\n            });\n        }\n\n        function editComment(obj) {\n          console.log(obj);\n          // An elaborate, custom popup\n          scope.data = angular.copy(obj);\n          $ionicPopup\n            .show({\n              template: '<input type=\"text\" ng-model=\"data.text\">',\n              title: ('Edit comment'),\n              //subTitle: 'Please use normal things',\n              scope: scope,\n              buttons: [{\n                text: ('Cancel')\n              }, {\n                text: '<b>OK</b>',\n                type: 'button-positive',\n                onTap: function (e) {\n                  console.log(scope.data);\n                  if (!scope.data.text) {\n                    //don't allow the user to close unless he enters wifi password\n                    e.preventDefault();\n                  } else {\n                    return scope.data;\n                  }\n                }\n              }]\n            })\n            .then(function (resp) {\n              console.log(resp);\n              if (resp) {\n                Photogram\n                  .updateComment(resp)\n                  .then(function (resp) {\n                    console.log(resp);\n                    getComments();\n                  });\n              }\n            });\n        }\n\n        function getComments() {\n          scope.loading = true;\n          Photogram\n            .getComments(scope.ngModel.id)\n            .then(function (resp) {\n              scope.comments = resp;\n              scope.ngModel.comments = resp;\n              scope.loading = false;\n            });\n        }\n\n        function submitComment(rForm, form) {\n          if (rForm.$valid) {\n            var dataForm = angular.copy(form);\n            Loading.start();\n            Photogram\n              .addComment(dataForm)\n              .then(function (resp) {\n                console.log(resp);\n                getComments();\n                Loading.end();\n                scope.closeModal();\n              });\n          }\n        }\n\n\n      }\n    };\n  }\n\n})();\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name facebookLogin\n     *\n     * @description\n     * _Please update the description and restriction._\n     *\n     * @restrict A\n     * */\n\n    angular\n        .module('app.photogram')\n        .directive('facebookLogin', facebookLoginDirective);\n\n    function facebookLoginDirective(Loading, User, $state, $cordovaFacebook, $facebook, AppConfig, Notify) {\n        return {\n            restrict: 'E',\n            link: facebookLoginLink,\n            template: '<button class=\"button button-block button-facebook\"><i class=\"icon ion-social-facebook\"></i> <span>{{ \\'USER.BUTTON.LOGIN_SOCIAL\\'| translate}} {{name || \\'Facebook\\'}}</span> </button>',\n        };\n\n        function facebookLoginLink(scope, elem, attr) {\n\n            var facebook = window.cordova ? $cordovaFacebook : $facebook;\n\n            console.log('Facebook login', facebook);\n            \n            facebook\n                .getLoginStatus()\n                .then(function (resp) {\n                    console.log(resp);\n                    facebook\n                        .api('/me')\n                        .then(function (profile) {\n                            console.log(profile);\n                            scope.name = profile.name;\n                        });\n                })\n                .catch(function (resp) {\n                    console.log('Not logged');\n                });\n\n            elem.bind('click', facebookLogin);\n\n            function facebookLogin() {\n                Loading.start();\n                User\n                    .facebookLogin()\n                    .then(function (resp) {\n                        console.log(resp);\n\n                        Loading.end();\n                        switch (resp.status) {\n                            case 0:\n                                // logado\n                                $state.go(AppConfig.routes.home, {\n                                    clear: true\n                                });\n                                break;\n                            case 1:\n                                // novo user\n                                $state.go('user.avatar', {\n                                    clear: true\n                                });\n                                break;\n                            case 2:\n                                // merge\n                                $state.go('user.merge', {\n                                    clear: true\n                                });\n                                break;\n                        }\n                    })\n                    .catch(function () {\n                        Loading.end();\n                        Notify.alert({\n                            title: 'Ops',\n                            text: ('Facebook error')\n                        });\n                    });\n            }\n\n        }\n    }\n\n})();\n(function () {\n\n    angular\n        .module('app.photogram')\n        .factory('PhotogramFeedback', PhotogramFeedbackFactory);\n\n    function PhotogramFeedbackFactory($q, AppConfig, Photogram, $rootScope, PhotogramFeedbackForm, $ionicModal, Notify) {\n        var path = AppConfig.path;\n\n        return {\n            modal: modal,\n            submit: submit\n        };\n        function modal(gallery) {\n            var $scope            = $rootScope.$new();\n            $scope.formFields = PhotogramFeedbackForm.form;\n            $scope.submitFeedback = submitFeedback;\n            $scope.closeModal     = closeModal;\n            $scope.form           = {\n                photogramId: gallery.id,\n                subject: 'complaint'\n            };\n\n            function submitFeedback() {\n                var dataForm = angular.copy($scope.form);\n                submit(dataForm)\n                    .then(function (resp) {\n                        console.log(resp);\n                        closeModal();\n                    });\n            }\n\n\n            function closeModal() {\n                $scope.modal.hide();\n                $scope.modal.remove();\n                delete $scope.modal;\n            }\n\n            $ionicModal\n                .fromTemplateUrl(path + '/directive/feedback/feedback-modal.html', {\n                    scope: $scope,\n                    focusFirstInput: true\n                })\n                .then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n        }\n\n\n        function submit(form) {\n            var defer = $q.defer();\n\n            console.log(form);\n\n            Photogram\n                .find(form.photogramId)\n                .then(function (Photogram) {\n                    console.log(Photogram);\n                    var Object = Parse.Object.extend('PhotogramFeedback');\n                    var item   = new Object();\n\n                    delete form.PhotogramId;\n\n                    angular.forEach(form, function (value, key) {\n                        item.set(key, value);\n                    });\n\n                    item.set('user', Parse.User.current());\n                    item.set('Gallery', Photogram);\n\n                    item\n                        .save(null)\n                        .then(function (resp) {\n                            Notify.alert({\n                                title: ('Thanks'),\n                                text: ('Thanks for your Feedback')\n                            });\n                            defer.resolve(resp);\n                        });\n                });\n\n\n            return defer.promise;\n        }\n\n    }\n\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.photogram')\n        .factory('PhotogramFeedbackForm', PhotogramFeedbackFormFactory);\n\n    function PhotogramFeedbackFormFactory($translate) {\n\n        var form = [{\n            key: 'title',\n            type: 'input',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('FEEDBACK.TITLE'),\n                required: true\n            }\n        }, {\n            key: 'subject',\n            type: 'select',\n            templateOptions: {\n                label: $translate.instant('FEEDBACK.SUBJECT'),\n                options: [{\n                    'label': $translate.instant('FEEDBACK.COMPLAINT'),\n                    'id': 'complaint',\n                }, {\n                    'label': $translate.instant('FEEDBACK.BUG'),\n                    'id': 'bug',\n                }, {\n                    'label': $translate.instant('FEEDBACK.SUGGESTION'),\n                    'id': 'suggestion',\n                }],\n                valueProp: 'id',\n                labelProp: 'label',\n                icon: 'icon-list',\n                iconPlaceholder: true\n            }\n        }, {\n            key: 'status',\n            type: 'textarea',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('FEEDBACK.MESSAGE'),\n                icon: 'ion-quote',\n                required: true,\n                iconPlaceholder: true\n            }\n        }];\n\n        return {\n            form: form\n        };\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name photogramPhotoFeedback\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict A\n   * */\n\n  angular\n    .module('app.photogram')\n    .directive('photogramPhotoFeedback', photogramPhotoFeedbackDirective);\n\n  function photogramPhotoFeedbackDirective($ionicModal, AppConfig, PhotogramFeedback, PhotogramFeedbackForm, $state) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        photogram: '@'\n      },\n      template: '',\n      link: function (scope, elem, attr) {\n\n        scope.link = link;\n        scope.submitFeedback = submitFeedback;\n        scope.closeModal = closeModal;\n        elem.bind('click', openModal);\n\n        function init() {\n          scope.form = {\n            photogramId: scope.photogram\n          };\n          scope.formFields = PhotogramFeedbackForm.form;\n        }\n\n        function openModal() {\n\n          init();\n          $ionicModal.fromTemplateUrl(path + '/directive/feedback/feedback-modal.html', {\n              scope: scope,\n              focusFirstInput: true\n            })\n            .then(function (modal) {\n              scope.modal = modal;\n              scope.modal.show();\n            });\n        }\n\n        function link(sref) {\n          $state.go(sref)\n          scope.closeModal();\n        }\n\n        function submitFeedback() {\n          var dataForm = angular.copy(scope.form);\n          PhotogramFeedback\n            .submit(dataForm)\n            .then(function (resp) {\n              console.log(resp);\n              init();\n              scope.closeModal();\n            });\n        }\n\n\n        function closeModal() {\n          scope.modal.hide();\n          scope.modal.remove();\n        }\n\n      }\n    };\n  }\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .directive('photogramFollow', photogramFollowDirective);\n\n  function photogramFollowDirective($ionicModal, AppConfig, Photogram) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        user: '='\n      },\n      link: function (scope, elem, attr) {\n        elem.bind('click', openModal);\n        scope.closeModal = closeModal;\n\n        function openModal() {\n          $ionicModal.fromTemplateUrl(path + '/directive/follow/photogram.follow.modal.html', {\n            scope: scope\n          }).then(function (modal) {\n            scope.modalFollow = modal;\n            console.log('Open modal follow', scope.user);\n\n            Photogram\n              .getFollow(scope.user)\n              .then(function (resp) {\n                console.log(resp);\n                scope.data = resp;\n                scope.modalFollow.show();\n              });\n\n          });\n        }\n\n        function closeModal() {\n          scope.modalFollow.hide();\n          scope.modalFollow.remove();\n        }\n      }\n    }\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name heart\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict A\n   * */\n\n  angular\n    .module('app.photogram')\n    .directive('heart', heartDirective);\n\n  function heartDirective() {\n    return {\n      restrict: 'A',\n      scope: {\n        item: '='\n      },\n      link: heartLink\n    };\n\n    function heartLink(scope, elem, attr) {\n      elem.bind('click', function () {\n        console.log(scope.item);\n        elem.addClass('happy');\n      });\n    }\n  }\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .directive('photogramLike', photogramLikeDirective)\n    ;\n  \n  function photogramLikeDirective(Photogram) {\n    return {\n      restrict: 'A',\n      scope: {\n        ngModel: '='\n      },\n      link: function (scope, elem) {\n        elem.bind('click', likePhotogram);\n\n        function likePhotogram() {\n\n          console.log('photogram', scope.ngModel);\n          var _model = scope.ngModel;\n          _model.progress = true;\n          _model.liked = !_model.liked;\n          Photogram\n            .likeGallery(scope.ngModel.id)\n            .then(function (resp) {\n              _model.likes = resp.likes;\n              _model.progress = false;\n              console.log(_model, resp);\n            });\n          scope.$apply();\n        }\n      }\n    };\n  }\n\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .directive('photogramLikeModal', photogramLikeModalDirective);\n\n  function photogramLikeModalDirective($ionicModal, AppConfig, Photogram) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        photogram: '='\n      },\n      template: '',\n      link: function (scope, elem, attr) {\n        scope.formFields = Photogram.formComment;\n        scope.submitComment = submitComment;\n        scope.closeModal = closeModal;\n        elem.bind('click', openModal);\n\n        function openModal() {\n          console.log(scope.photogram);\n\n          $ionicModal.fromTemplateUrl(path + '/directive/like/photogram.like.directive.html', {\n            scope: scope,\n            animation: 'slide-in-up'\n          }).then(function (modal) {\n            scope.modal = modal;\n          });\n\n        }\n\n        function submitComment(rForm, form) {\n          if (rForm.$valid) {\n            var dataForm = angular.copy(form);\n            Photogram\n              .addComment(dataForm)\n              .then(function (resp) {\n                console.log(resp);\n                scope.closeModal();\n              });\n          }\n        }\n\n        function closeModal() {\n          scope.modal.hide();\n          scope.modal.remove();\n        }\n\n      }\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name PhotogramLoading\n     *\n     * @description\n     * _Please update the description and restriction._\n     *\n     * @restrict E\n     * */\n\n    angular\n        .module('app.photogram')\n        .directive('photogramLoading', PhotogramLoadingDirective);\n\n    function PhotogramLoadingDirective() {\n        return {\n            restrict: 'E',\n            scope: {\n                loading: '=',\n                icon: '@'\n            },\n            template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n        };\n    }\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .directive('photogramPhotoCapture', photogramPhotoCaptureDirective);\n\n  function photogramPhotoCaptureDirective($ionicModal, $cordovaGeolocation, AppConfig, Loading, $state, PhotoService,\n    Photogram) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        photogram: '@'\n      },\n      transclude: false,\n      link: photogramPhotoCaptureLink\n    };\n\n    function photogramPhotoCaptureLink(scope, elem, attr) {\n\n      scope.getGeo = getGeo;\n      scope.formFields = Photogram.form;\n      scope.open = open;\n      scope.submitCapture = submitCapture;\n      scope.closeModal = closeModal;\n      elem.bind('click', openModalCapture);\n\n      function init() {\n        scope.loading = true;\n        scope.comments = [];\n        Photogram\n          .getComments(scope.photogram)\n          .then(function (resp) {\n            scope.comments = resp;\n            scope.loading = false;\n          });\n\n        scope.form = {\n          photogramId: scope.photogram,\n          text: ''\n        };\n      }\n\n      function openModalCapture() {\n        console.log(scope.photogram);\n\n\n        $ionicModal.fromTemplateUrl(path + '/view/photogram.capture.modal.html', {\n          scope: scope\n        }).then(function (modal) {\n          scope.modal = modal;\n          scope.modal.show();\n        });\n      }\n\n\n      function init() {\n        scope.active = false;\n        scope.form = {\n          title: '',\n          location: '',\n          photo: '',\n          geo: false\n        };\n\n        scope.map = {\n          center: {\n            latitude: -23.5333333,\n            longitude: -46.6166667\n          },\n          scrollwheel: false,\n          zoom: 15\n        };\n        scope.data = '';\n        scope.loading = false;\n\n      }\n\n      function getLocation() {\n        var posOptions = {\n          timeout: 10000,\n          enableHighAccuracy: false\n        };\n\n        if (scope.form.location === '') {\n\n          scope.loading = false;\n\n          $cordovaGeolocation\n            .getCurrentPosition(posOptions)\n            .then(function (position) {\n\n              scope.here = {\n                id: 1,\n                coords: {\n                  latitude: position.coords.latitude,\n                  longitude: position.coords.longitude,\n                },\n                icon: 'img/pin.png'\n              };\n\n              scope.form.location = {\n                latitude: position.coords.latitude,\n                longitude: position.coords.longitude,\n              };\n\n              scope.map.center = scope.here.coords;\n              scope.loading = false;\n\n              console.log(scope.form);\n              console.log(scope.here);\n              console.log(position);\n            }, function (err) {\n              // error\n            });\n        }\n      };\n\n      function getGeo(resp) {\n        if (resp) getLocation();\n      }\n\n      function open() {\n        init();\n        PhotoService\n          .open()\n          .then(function (resp) {\n            scope.loading = false;\n            scope.active = true;\n            scope.form.photo = resp;\n            scope.data = 'data:image/jpeg;base64,' + resp;\n            // angular.element ('.title').focus ();\n          })\n          .catch(function () {\n            $state.go('photogram.home');\n          });\n      }\n\n      function submitCapture() {\n\n        var canvas = window.document.getElementById('image');\n        var dataUrl = canvas.toDataURL();\n        var dataForm = angular.copy(scope.form);\n\n        console.log('submit', dataUrl);\n\n        return false;\n\n        Loading.start();\n        Photogram\n          .add(dataForm)\n          .then(function (resp) {\n            $state.go('photogram.home', {\n              reload: true\n            });\n            init();\n            Loading.end();\n          });\n      }\n\n      function closeModal() {\n        scope.modal.hide();\n        scope.modal.remove();\n      }\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.photogram')\n        .directive('photogramPhotoGrid', photogramPhotoGridDirective);\n\n    function photogramPhotoGridDirective(AppConfig, Photogram, $ionicPopup, PhotogramShare, PhotogramFeedback, $ionicActionSheet) {\n        var path = AppConfig.path;\n\n        return {\n            restrict: 'E',\n            scope: {\n                user: '=',\n                profile: '='\n            },\n            templateUrl: path + '/directive/photogrid/photo-grid.html',\n            link: photogramPhotoGridCtrl\n        };\n\n        function photogramPhotoGridCtrl($scope, elem, attr) {\n\n            $scope.action  = action;\n            $scope.like    = likePhoto;\n            $scope.loading = true;\n            $scope.feed    = feed;\n            $scope.gallery = {\n                src: ''\n            };\n\n            init();\n\n            $scope.$on('PhotogramHome:reload', function () {\n                feed(true);\n            });\n\n            function init() {\n                $scope.data  = {\n                    total: -1,\n                    galleries: []\n                };\n                $scope.page  = 0;\n                $scope.empty = false;\n                $scope.more  = false;\n                feed(false,true);\n            }\n\n\n            function feed(force, cache) {\n                // console.log('Load ');\n\n                if (force) {\n                    init();\n                }\n\n                var service = Photogram.getOfflineFeed($scope.page, $scope.user);\n\n                if (!cache) {\n                    service = Photogram.feedGrid($scope.page, $scope.user)\n                }\n\n                service\n                    .then(function (resp) {\n\n                        console.log(resp);\n                        resp.rows.map(function (item) {\n                            item.progress     = false;\n                            $scope.data.total = resp.total;\n                            $scope.data.galleries.push(item);\n                        });\n\n                        // console.log('qtd', resp.length);\n\n                        if (resp.length) {\n                            $scope.more = true;\n                            $scope.page++;\n                        } else {\n                            $scope.empty = true;\n                            $scope.more  = false;\n                        }\n                    })\n                    .then(function () {\n                        $scope.loading = false;\n                        $scope.$broadcast('scroll.refreshComplete');\n                        $scope.$broadcast('scroll.infiniteScrollComplete');\n\n                    })\n                    .catch(function () {\n                        $scope.$broadcast('scroll.refreshComplete');\n                        $scope.$broadcast('scroll.infiniteScrollComplete');\n                        if ($scope.data.length) {\n                            $scope.loading = false;\n                            $scope.page++;\n                        } else {\n                            $scope.empty   = true;\n                            $scope.loading = false;\n                        }\n                        $scope.more = false;\n                    });\n            }\n\n            function likePhoto(gallery) {\n                gallery.item.liked = !gallery.item.liked;\n                Photogram\n                    .likeGallery(gallery.id)\n                    .then(function (resp) {\n                        gallery.item.qtdLike = resp.likes;\n                    });\n            }\n\n            function action(gallery) {\n\n                var buttons = [{\n                    text: '<i class=\"icon ion-share\"></i>' + ('Share')\n                }, {\n                    text: '<i class=\"icon ion-alert-circled\"></i>' + ('Report')\n                }];\n\n                var user = Parse.User.current();\n\n                if (user.id === gallery.user.id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + ('Delete your photo')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message     = {\n                    image: gallery.src,\n                    text: gallery.item.title\n                }\n                var actionSheet = {\n                    buttons: buttons,\n                    titleText: ('Photo'),\n                    cancelText: ('Cancel'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            PhotogramShare.share(message);\n                            break;\n                        case 1:\n                            PhotogramFeedback.modal(gallery);\n                            break;\n                        case 2:\n\n                            $ionicPopup\n                                .confirm({\n                                    title: ('Delete photo'),\n                                    template: ('Are you sure?')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Photogram\n                                            .deletePhoto(gallery.id)\n                                            .then(function () {\n                                                console.log('Photo deleted');\n                                                $scope.$emit('PhotogramHome:reload');\n                                            });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            }\n        }\n\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .directive('photogramPhotoList', photogramPhotoListDirective);\n\n  function photogramPhotoListDirective(AppConfig, Photogram, $ionicPopup, PhotogramShare, PhotogramFeedback, $ionicActionSheet) {\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'E',\n      scope: {\n        user: '=',\n        profile: '='\n      },\n      templateUrl: path + '/directive/photolist/photo.list.html',\n      link: photogramPhotoListCtrl\n    };\n\n    function photogramPhotoListCtrl($scope, elem, attr) {\n\n      $scope.action  = action;\n      $scope.like    = likePhoto;\n      $scope.feed    = feed;\n      $scope.loading = true;\n      $scope.gallery = {\n        src: ''\n      };\n      console.log('user', $scope.user);\n      init();\n\n      feed(false, true);\n\n      $scope.$on('PhotogramHome:reload', function () {\n        feed(true);\n      });\n\n      function init() {\n        $scope.data  = {\n          total: -1,\n          galleries: []\n        };\n        $scope.page  = 0;\n        $scope.empty = false;\n        $scope.more  = false;\n        feed(false);\n      }\n\n\n      function feed(force, cache) {\n        // console.log('Load ');\n\n        if (force) {\n          init();\n        }\n        var service;\n        if(cache) {\n          service = Photogram.getOfflineFeed($scope.page, $scope.user);\n        } else {\n          service = Photogram.feed($scope.page, $scope.user);\n        }\n\n        service\n          .then(function (resp) {\n            console.log(resp);\n            resp.rows.map(function (item) {\n              item.progress     = false;\n              // console.table(item);\n              $scope.data.total = resp.total;\n              $scope.data.galleries.push(item);\n            });\n\n            // console.log('qtd', resp.length);\n\n            if (resp.length) {\n              $scope.more = true;\n              $scope.page++;\n            } else {\n              $scope.empty = true;\n              $scope.more  = false;\n            }\n          })\n          .then(function () {\n            $scope.loading = false;\n            $scope.$broadcast('scroll.refreshComplete');\n            $scope.$broadcast('scroll.infiniteScrollComplete');\n\n          })\n          .catch(function () {\n            $scope.$broadcast('scroll.refreshComplete');\n            $scope.$broadcast('scroll.infiniteScrollComplete');\n            if ($scope.data.length) {\n              $scope.loading = false;\n              $scope.page++;\n            } else {\n              $scope.empty   = true;\n              $scope.loading = false;\n            }\n            $scope.more = false;\n          });\n      }\n\n      function likePhoto(gallery) {\n        gallery.item.liked = !gallery.item.liked;\n        Photogram\n          .likeGallery(gallery.id)\n          .then(function (resp) {\n            gallery.item.qtdLike = resp.likes;\n            //delete gallery.item.likeProgress;\n          });\n      }\n\n      function action(gallery) {\n\n        var buttons = [{\n          text: '<i class=\"icon ion-share\"></i>' + ('Share')\n        }, {\n          text: '<i class=\"icon ion-alert-circled\"></i>' + ('Report')\n        }];\n\n\n        console.log(gallery);\n\n        if (Parse.User.current().id === gallery.user_id) {\n          var buttonDelete = {\n            text: '<i class=\"icon ion-trash-b\"></i>' + ('Delete your photo')\n          };\n          buttons.push(buttonDelete);\n        }\n        var message     = {\n          text: gallery.title,\n          image: gallery.img\n        }\n        var actionSheet = {\n          buttons: buttons,\n          titleText: ('Photo'),\n          cancelText: ('Cancel'),\n          buttonClicked: actionButtons\n        };\n\n\n        function actionButtons(index) {\n          switch (index) {\n            case 0:\n              PhotogramShare.share(message);\n              break;\n            case 1:\n              PhotogramFeedback.modal(gallery);\n              break;\n            case 2:\n\n              $ionicPopup\n                .confirm({\n                  title: ('Delete photo'),\n                  template: ('Are you sure?')\n                })\n                .then(function (res) {\n                  if (res) {\n                    Photogram\n                      .deletePhoto(gallery.id)\n                      .then(function () {\n                        console.log('Photo deleted');\n                        $scope.$emit('PhotogramHome:reload');\n                      });\n                  }\n                });\n\n\n          }\n          return true;\n        }\n\n\n        // Show the action sheet\n        $ionicActionSheet.show(actionSheet);\n\n      }\n\n\n    }\n\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name photogramProfileEdit\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict A\n   * */\n\n  angular\n    .module('app.photogram')\n    .directive('profileModalEdit', profileModalEditDirective);\n\n  function profileModalEditDirective($ionicModal, User, UserForm, $state) {\n\n    return {\n      restrict: 'A',\n      scope: {\n        photogram: '@'\n      },\n      template: '',\n      link: function (scope, elem) {\n\n        scope.linkFacebook = linkFacebook;\n        scope.logout = logout;\n        scope.submitUpdateProfile = submitUpdateProfile;\n        scope.closeModal = closeModal;\n        elem.bind('click', openModal);\n\n\n        function init() {\n          var user = Parse.User.current().attributes;\n          scope.form = {\n            name: user.name,\n            email: user.email,\n            status: user.status,\n            img: user.img,\n            username: user.username,\n            gender: user.gender,\n            facebook: user.facebook,\n            facebookimg: user.facebookimg\n          };\n            console.log(scope.form);\n          scope.formFields = UserForm.profile;\n        }\n\n\n        function openModal() {\n\n          init();\n          $ionicModal.fromTemplateUrl('app/module/photogram/directive/profile-edit-modal/profile-edit-modal.html', {\n            scope: scope\n          }).then(function (modal) {\n            scope.modal = modal;\n            scope.modal.show();\n          });\n        }\n\n        function logout() {\n          $state.go('logout');\n          scope.closeModal();\n        }\n\n        function linkFacebook() {\n          User\n            .facebookLink()\n            .then(function (resp) {\n              console.log(resp);\n            });\n        }\n\n        function submitUpdateProfile() {\n          var dataForm = angular.copy(scope.form);\n          User\n            .update(dataForm)\n            .then(function (resp) {\n              console.log(resp);\n              init();\n              scope.closeModal();\n            });\n        }\n\n        function closeModal() {\n          scope.modal.hide();\n          scope.modal.remove();\n        }\n      }\n    };\n  }\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.photogram')\n        .directive('ionSearch', ionSearchDirective);\n\n    function ionSearchDirective($timeout) {\n\n        return {\n            restrict: 'E',\n            scope: {\n                getData: '&source',\n                ngModel: '=?',\n                search: '=?filter'\n            },\n            templateUrl: 'app/module/photogram/directive/search/search-directive.html',\n            link: function (scope, element, attrs) {\n                attrs.minLength   = attrs.minLength || 0;\n                scope.placeholder = attrs.placeholder || '';\n                scope.clear = function  () {\n                    console.log('Limpar campo');\n                    scope.input = '';\n                    scope.$apply();\n                };\n\n                if (attrs.class) {\n                    element.addClass(attrs.class);\n                }\n\n                if (attrs.source) {\n                    scope.$watch('search.value', watchSearch);\n                }\n\n                function watchSearch(newValue) {\n                    if (newValue.length > attrs.minLength) {\n                        $timeout(function () {\n                            scope\n                                .getData({\n                                    str: newValue\n                                })\n                                .then(function (results) {\n                                    scope.ngModel = results;\n                                });\n                        }, 1000);\n                    } else {\n                        scope.ngModel = [];\n                    }\n                }\n\n            }\n\n        };\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .directive('settingsModal', settingsModalDirective);\n\n  function settingsModalDirective($ionicModal, $translate, AppConfig, $cordovaInAppBrowser, $rootScope, PhotogramShare,\n    User,\n    UserForm, $state) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        photogram: '@'\n      },\n      template: '',\n      link: function (scope, elem) {\n\n        elem.bind('click', openModal);\n        scope.closeModal = closeModal;\n        scope.link = link;\n        scope.openLink = openLink;\n        scope.changeLanguage = changeLanguage;\n        scope.share = PhotogramShare.share;\n\n        function init() {\n          scope.form = User.currentUser();\n          scope.formFields = UserForm.profile;\n          scope.languages = AppConfig.locales;\n          scope.language = $translate.use();\n        }\n\n        function openModal() {\n\n          init();\n          $ionicModal.fromTemplateUrl(path + '/directive/settings-modal/settings-modal.html', {\n            scope: scope\n          }).then(function (modal) {\n            scope.modal = modal;\n            scope.modal.show();\n          });\n        }\n\n        function link(sref) {\n          $state.go(sref);\n          scope.closeModal();\n        }\n\n        function openLink(url) {\n          var options = {\n            location: 'yes',\n            clearcache: 'yes',\n            toolbar: 'yes'\n          };\n\n          $cordovaInAppBrowser.open(url, '_blank', options);\n        }\n\n        function changeLanguage(language) {\n          $translate.use(language);\n          moment.locale(language);\n          scope.form.language = language;\n          submitUpdateProfile(scope.form);\n        }\n\n\n        function submitUpdateProfile(form) {\n          var dataForm = angular.copy(form);\n          User\n            .update(dataForm)\n            .then(function (resp) {\n              console.log(resp);\n              init();\n              scope.closeModal();\n            });\n        }\n\n        function closeModal() {\n          scope.modal.hide();\n          scope.modal.remove();\n        }\n\n      }\n    };\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name photogramProfile\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict A\n   * */\n\n  angular\n    .module('app.photogram')\n    .directive('profileModal', profileModalDirective);\n\n  function profileModalDirective($ionicModal, $rootScope, $q, Photogram, User) {\n\n    return {\n      restrict: 'A',\n      scope: {\n        user_id: '=user'\n      },\n      link: profileModalLink\n    };\n\n    function profileModalLink(scope, elem) {\n      elem.bind('click', function () {\n        User\n          .get(scope.user_id)\n          .then(function (data) {\n            scope.user = data;\n            openModal();\n          });\n      });\n\n      function openModal() {\n\n        console.log(scope.user_id);\n\n        $ionicModal\n          .fromTemplateUrl('app/module/photogram/directive/profile-modal/profile-modal.html', {\n            scope: scope\n          })\n          .then(function (modal) {\n            scope.modalProfile  = modal;\n            scope.loadingFollow = true;\n            scope.changeTab     = changeTab;\n            scope.follow        = follow;\n            scope.closeModal    = closeModal;\n            scope.modalProfile.show();\n            \n            getFollower(scope.user.id);\n            changeTab('list');\n            isFollow();\n\n            function isFollow() {\n              User\n                .isFollow(scope.user.id)\n                .then(isFollowResp);\n            }\n\n            function isFollowResp(resp) {\n              console.info('follow user?', resp);\n              scope.user.follow   = resp;\n              scope.loadingFollow = false;\n            }\n\n            function follow() {\n\n              scope.loadingFollow = true;\n              var status;\n\n              if (scope.user.follow) {\n                status = false;\n              } else {\n                status = true;\n              }\n\n              User\n                .follow(status, scope.user)\n                .then(followResp);\n\n              function followResp(resp) {\n\n                console.log('Follow result', resp);\n                scope.user.follow   = status;\n                scope.loadingFollow = false;\n                getFollower(scope.user);\n              }\n            }\n\n            function closeModal() {\n              delete scope.data;\n              scope.modalProfile.hide();\n              scope.modalProfile.remove();\n            }\n          });\n      }\n\n      function changeTab(tab) {\n        if (tab === 'list') {\n          scope.tab = {\n            list: true,\n            grid: false\n          };\n        } else {\n          scope.tab = {\n            list: false,\n            grid: true\n          };\n        }\n      }\n\n      function getFollower(userId) {\n        console.log('getFollowers', userId);\n        scope.loadingFollowers = true;\n        scope.loadingFollowing = true;\n        scope.loadingPhotos    = true;\n\n        Photogram\n          .getUserGalleryQtd(userId)\n          .then(function (qtdPhotos) {\n            console.log(qtdPhotos);\n            scope.user.qtdPhotos = qtdPhotos;\n            scope.loadingPhotos  = false;\n          });\n\n        User\n          .getFollowers(userId)\n          .then(function (qtdFollowers) {\n            console.log('qtdFollower: seguindo', qtdFollowers);\n            scope.user.qtdFollowers = qtdFollowers;\n            scope.loadingFollowers  = false;\n          });\n\n        User\n          .getFollowing(userId)\n          .then(function (qtdFollowing) {\n            console.log('qtdFollowing: seguidores', qtdFollowing);\n            scope.user.qtdFollowing = qtdFollowing;\n            scope.loadingFollowing  = false;\n          });\n      }\n\n\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name PhotogramProfileCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.photogram')\n        .controller('PhotogramAccountCtrl',PhotogramAccountController);\n\n    function PhotogramAccountController(Parse, Photogram, User) {\n        var vm       = this;\n        vm.changeTab = changeTab;\n        vm.user      = Parse.User.current();\n        \n        init();\n        changeTab('grid');\n\n        function changeTab(tab) {\n            if (tab === 'list') {\n                vm.tab = {\n                    list: true,\n                    grid: false\n                };\n            } else {\n                vm.tab = {\n                    list: false,\n                    grid: true\n                };\n            }\n        }\n\n        function init() {\n            vm.data  = {\n                total: false,\n                galleries: []\n            };\n            vm.page  = 0;\n            vm.empty = false;\n            vm.more  = false;\n            getFollower();\n        }\n\n        function getFollower() {\n            vm.loadingFollowers = true;\n            vm.loadingFollowing = true;\n            vm.loadingPhotos    = true;\n\n            Photogram\n                .getUserGalleryQtd()\n                .then(function (qtdPhotos) {\n                    console.log(qtdPhotos);\n                    vm.user.qtdPhotos = qtdPhotos;\n                    vm.loadingPhotos  = false;\n                });\n\n            User\n                .getFollowers()\n                .then(function (qtdFollowers) {\n                    console.log('qtdFollower: seguindo', qtdFollowers);\n                    vm.user.qtdFollowers = qtdFollowers;\n                    vm.loadingFollowers  = false;\n                });\n\n            User\n                .getFollowing()\n                .then(function (qtdFollowing) {\n                    console.log('qtdFollowing: seguidores', qtdFollowing);\n                    vm.user.qtdFollowing = qtdFollowing;\n                    vm.loadingFollowing  = false;\n                });\n        }\n\n        \n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.activity')\n        .controller('PhotogramActivityCtrl', PhotogramActivityController);\n\n    function PhotogramActivityController($scope, Photogram, PhotogramShare, User) {\n        var vm     = this;\n        vm.loading = true;\n\n        User.initFollows();\n\n        $scope.loadMore = loadMore;\n        vm.openShare    = PhotogramShare.open;\n        vm.load         = load;\n        init();\n        vm.load();\n\n        function init() {\n            vm.page     = 0;\n            vm.data     = [];\n            vm.empty    = false;\n            vm.loadMore = false;\n        }\n\n        function loadMore(force) {\n            console.log('Load More');\n            vm.load(force);\n        }\n\n        function load(force) {\n\n            if (force) {\n                init();\n            }\n\n            Photogram\n                .listActivity(vm.page)\n                .then(function (resp) {\n\n                    resp.map(function (value) {\n                        vm.data.push(value);\n                    });\n\n                    if (resp.length) {\n                        vm.loading = false;\n                        vm.more    = true;\n                        vm.page++;\n                    } else {\n                        vm.empty   = true;\n                        vm.loading = false;\n                        vm.more    = false;\n                    }\n                })\n                .then(function () {\n                    $scope.$broadcast('scroll.refreshComplete');\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n\n                })\n                .catch(function (status) {\n                    $scope.$broadcast('scroll.refreshComplete');\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                    if (!status) {\n                        vm.loading = false;\n                        vm.page++;\n                    } else {\n                        vm.empty   = true;\n                        vm.loading = false;\n                    }\n                    vm.more = false;\n                });\n        }\n\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  var _direct = 'DirectMessages';\n  var _channel = 'Direct';\n\n  angular\n    .module('app.photogram')\n\n  // fitlers\n  .filter('nl2br', ['$filter',\n    function ($filter) {\n      return function (data) {\n        if (!data) return data;\n        return data.replace(/\\n\\r?/g, '<br />');\n      };\n    }\n  ])\n\n  // directives\n  .directive('autolinker', ['$timeout',\n      function ($timeout) {\n        return {\n          restrict: 'A',\n          link: function (scope, element, attrs) {\n            $timeout(function () {\n              var eleHtml = element.html();\n\n              if (eleHtml === '') {\n                return false;\n              }\n\n              var text = Autolinker.link(eleHtml, {\n                className: 'autolinker',\n                newWindow: false\n              });\n\n              element.html(text);\n\n              var autolinks = element[0].getElementsByClassName('autolinker');\n\n              for (var i = 0; i < autolinks.length; i++) {\n                angular.element(autolinks[i]).bind('click', function (e) {\n                  var href = e.target.href;\n                  console.log('autolinkClick, href: ' + href);\n\n                  if (href) {\n                    //window.open(href, '_system');\n                    window.open(href, '_blank');\n                  }\n\n                  e.preventDefault();\n                  return false;\n                });\n              }\n            }, 0);\n          }\n        }\n      }\n    ])\n    .factory('Direct', Direct);\n\n  function Direct($q, Parse) {\n    return {\n      from: from,\n      to: to,\n      chats: chats,\n      messages: messages,\n      sendMessage: sendMessage\n    };\n\n    function getDirect(directId) {\n      var defer = $q.defer();\n      new Parse\n        .Query('Direct')\n        .include('from')\n        .equalTo('objectId', directId)\n        .first()\n        .then(defer.resolve);\n\n      return defer.promise;\n    }\n\n    function addMessage(data) {\n      var defer = $q.defer();\n      var DirectMessages = Parse.Object.extend('DirectMessages');\n      var message = new DirectMessages();\n      angular.forEach(data, function (value, key) {\n        message.set(key, value);\n      });\n      message.save(null, defer.resolve, defer.reject);\n\n      return defer.promise;\n    }\n\n    function sendMessage(message, roomId) {\n      var defer = $q.defer();\n\n      getDirect(roomId)\n        .then(function (direct) {\n          console.log(message);\n          message.room = direct;\n          message.user = Parse.User.current();\n          addMessage(message)\n            .then(function (message) {\n              direct.relation('messages').add(message);\n              direct.save()\n                .then(defer.resolve);\n            })\n        })\n      defer.resolve(message);\n      return defer.promise;\n\n    }\n\n    function messages(channelId, page) {\n      var defer = $q.defer();\n\n      getDirect(channelId)\n        .then(function (direct) {\n          var data = direct.attributes;\n          var user = Parse.User.current();\n          data.user = direct.attributes.from.attributes;\n          data.messages = [];\n\n          new Parse\n            .Query('DirectMessages')\n            .equalTo('room', direct)\n            .include('user')\n            .limit(20)\n            .skip(page)\n            .find()\n            .then(function (resp) {\n              resp.map(function (item) {\n                var obj = {\n                  body: item.attributes.body,\n                  date: item.createdAt,\n                  user: item.attributes.user.attributes\n                };\n                obj.user.id = item.attributes.user.id;\n                console.log(item, obj);\n\n                data.messages.push(obj);\n              });\n              defer.resolve(data);\n            });\n        })\n\n      return defer.promise;\n    }\n\n    function chats() {\n      var defer = $q.defer();\n\n      var promises = [chatsType(null, 'from'), chatsType(null, 'to')];\n      $q.all(promises)\n        .then(function (resp) {\n          var data = [];\n          console.log(resp);\n          resp[0].map(function (item) {\n            data.push(item);\n          });\n          resp[1].map(function (item) {\n            data.push(item);\n          });\n          defer.resolve(data);\n        })\n\n      return defer.promise;\n    }\n\n    function chatsType(user, type) {\n      var defer = $q.defer();\n      new Parse\n        .Query('Direct')\n        .equalTo(type, user || Parse.User.current())\n        .include('from')\n        .find()\n        .then(function (resp) {\n          var data = [];\n          resp.map(function (item) {\n            var obj = item.attributes;\n            obj.user = item.attributes.from.attributes\n            obj.id = item.id;\n\n            data.push(obj);\n          });\n          defer.resolve(data);\n        });\n\n      return defer.promise;\n    }\n\n    function from(user) {\n      var defer = $q.defer();\n      new Parse\n        .Query(_direct)\n        .equalTo('from', user || Parse.User.current())\n        .include('from')\n        .find()\n        .then(function (resp) {\n          var data = [];\n          resp.map(function (item) {\n            var obj = {\n              msg: item.attributes.body,\n              user: item.attributes.from.attributes\n            };\n\n            obj.user.id = item.attributes.from.id;\n\n            data.push(obj);\n          });\n          defer.resolve(data);\n        });\n\n      return defer.promise;\n    }\n\n    function to(user) {\n      var defer = $q.defer();\n      new Parse\n        .Query(_direct)\n        .equalTo('to', user || Parse.User.current())\n        .include('from')\n        .find()\n        .then(function (resp) {\n          var data = [];\n          resp.map(function (item) {\n            var obj = {\n              msg: item.attributes.body,\n              user: item.attributes.from.attributes\n            };\n\n            obj.user.id = item.attributes.from.id;\n\n            data.push(obj);\n          });\n          defer.resolve(data);\n        });\n\n      return defer.promise;\n    }\n  }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('app.photogram')\n    .controller('DirectHomeCtrl', DirectHomeCtrl);\n\n  /* @ngInject */\n  function DirectHomeCtrl(Direct) {\n    var vm = this;\n    vm.data = [];\n\n    Direct\n      .chats()\n      .then(function (resp) {\n        console.log(resp);\n        vm.data = resp;\n      })\n  }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('app.direct-message')\n    .controller('DirectMessageCtrl', DirectMessageCtrl);\n\n\n  function DirectMessageCtrl($scope, Direct, User, $state) {\n    var vm = this;\n    var roomId = $state.params.channelId;\n    vm.user = User.currentUser();\n    vm.sendMessage = sendMessage;\n    vm.doRefresh = loadMessages;\n\n    function loadMessages() {\n      vm.loading = true;\n      vm.data = [];\n      Direct\n        .messages(roomId)\n        .then(function (resp) {\n          vm.data = resp;\n          vm.loading = false;\n          if (vm.model) {\n            vm.model.text = '';\n          }\n          $scope.$broadcast('scroll.refreshComplete');\n        });\n    }\n\n    loadMessages();\n\n\n    function sendMessage(form, model) {\n      var data = angular.copy(model);\n      console.log(data);\n      if (form.$valid && data.text) {\n        var message = {\n          body: data.text\n        };\n        Direct\n          .sendMessage(message, roomId)\n          .then(function () {\n            loadMessages();\n          });\n      }\n\n\n    }\n\n  }\n})();\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name PhotogramHomeCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.photogram')\n        .controller('PhotogramHomeCtrl', PhotogramHomeController);\n\n    function PhotogramHomeController($scope, $rootScope, $stateParams, Photogram) {\n        var vm     = this;\n       \n\n\n    }\n\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .controller('PhotogramPhotoCtrl', PhotogramPhotoCtrl);\n\n\n  function PhotogramPhotoCtrl($stateParams, Photogram) {\n    var vm = this;\n\n    vm.formFields = Photogram.formComment;\n    vm.submitComment = submitComment;\n    init();\n\n    Photogram\n      .get($stateParams.id)\n      .then(function (resp) {\n        vm.data = resp;\n      });\n\n    function init() {\n      vm.form = {\n        PhotogramId: $stateParams.id,\n        text: ''\n      };\n\n      loadComments();\n    }\n\n    function loadComments() {\n      Photogram\n        .allComment($stateParams.id)\n        .then(function (resp) {\n          console.log(resp);\n          vm.comments = resp;\n        });\n    }\n\n    function submitComment(rForm, form) {\n      if (rForm.$valid) {\n        var dataForm = angular.copy(form);\n        Photogram\n          .addComment(dataForm)\n          .then(function (resp) {\n            console.log(resp);\n            loadComments();\n          });\n      }\n    }\n\n  }\n\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .controller('PhotogramPreviewCtrl', PhotogramPreviewCtrl);\n\n\n  function PhotogramPreviewCtrl(photo) {\n    var vm = this;\n    vm.data = photo;\n    console.log(photo);\n  }\n\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('app.photogram')\n    .controller('PhotogramViewCtrl', PhotogramViewCtrl);\n\n  function PhotogramViewCtrl(Photogram, $stateParams) {\n    var vm = this;\n    Photogram\n      .get($stateParams.id)\n      .then(function (resp) {\n        console.log(resp);\n        vm.data = resp;\n      });\n  }\n\n\n})();\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name PhotogramHomeCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.photogram')\n        .controller('PhotogramSearchCtrl', PhotogramSearchCtrl);\n\n    function PhotogramSearchCtrl($state) {\n        var vm       = this;\n        vm.changeTab = changeTab;\n\n        vm.tab = {\n            list: true,\n            map: false\n        };\n        \n\n        function changeTab(tab) {\n            if (tab === 'list') {\n                vm.tab = {\n                    list: true,\n                    map: false\n                };\n                $state.go('photogram.search.list');\n            } else {\n                vm.tab = {\n                    list: false,\n                    map: true\n                };\n                $state.go('photogram.search.map');\n            }\n        }\n\n       \n    }\n\n\n})();\n(function(){\n    'use strict';\n    /**\n * @ngdoc controller\n * @name SearchListCtrl\n *\n * @description\n * _Please update the description and dependencies._\n *\n * @requires $scope\n * */\n    angular\n    .module('app.search')\n        .controller('SearchListCtrl', SearchListController);\n    \n    function SearchListController(){\n        var vm = this;\n        \n    }\n    \n})();\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name SearchMapCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.search')\n        .controller('SearchMapCtrl', SearchMapController);\n\n    function SearchMapController(Photogram, $scope, $timeout, GeoService) {\n        var vm   = this;\n        var time = 0;\n        vm.findMe = findMe;\n\n        // Map\n\n        $scope.map = {\n            center: {\n                latitude: 45,\n                longitude: -73\n            },\n            zoom: 13\n        };\n\n        $scope.$watch('map.center.latitude', watchMap);\n\n        function watchMap(newValue, oldValue) {\n            console.log(newValue);\n            if (newValue) {\n                console.log(newValue);\n                time += 2000;\n                console.log(time);\n\n\n                var timer = $timeout(function () {\n                    console.log(timer);\n\n                    Photogram\n                        .nearby($scope.map.center)\n                        .then(function (resp) {\n                            console.log(resp);\n                            time    = 0;\n                            vm.data = resp;\n\n                            $timeout.cancel(timer);\n                        });\n                }, time);\n\n            }\n        }\n\n\n        function location() {\n            init();\n        }\n\n        function findMe() {\n            console.log('FindMe');\n            GeoService\n                .findMe()\n                .then(function (position) {\n\n                    console.log(position);\n\n                    $scope.map = {\n                        center: position.geolocation,\n                        zoom: 13\n                    };\n                    vm.user = angular.copy(position.geolocation);\n                });\n        }\n\n        function init() {\n            GeoService\n                .findMe()\n                .then(function (position) {\n\n                    console.log(position);\n\n                    $scope.map = {\n                        center: position.geolocation,\n                        zoom: 13\n                    };\n\n                    vm.user = angular.copy(position.geolocation);\n\n                    Photogram\n                        .nearby(position.coords)\n                        .then(function (resp) {\n                            console.log(resp);\n                            vm.data = resp;\n                        });\n\n                }, function (error) {\n                    console.log('Could not get location');\n\n                    Photogram\n                        .nearby($scope.map.center)\n                        .then(function (resp) {\n                            console.log(resp);\n                            vm.data = resp;\n                        });\n                });\n        }\n\n        init();\n\n    }\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.photogram')\n        .factory('PhotogramShare', PhotogramShareFactory);\n\n    function PhotogramShareFactory($window, $translate, AppConfig) {\n        return {\n            share: share\n        };\n\n        function share(post) {\n            console.log('Social Share', post);\n            var message = (\"I'm at \") + AppConfig.app.name + '! ' + (\n                    'Install the application and follow me!') + ' ' + AppConfig.app.url;\n            if ($window.cordova) {\n                $window\n                    .window\n                    .plugins\n                    .socialsharing\n                    .share(post.text + ', ' + message, post.text, post.image, null);\n            } else {\n                alert('Only in smartphone');\n            }\n        }\n\n    }\n\n})();\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name UserAvatarCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.user')\n    .controller('UserAvatarCtrl', UserAvatarController);\n\n  function UserAvatarController(User, AppConfig, $state, Notify, UserForm) {\n    var vm = this;\n    vm.submitAvatar = submitAvatar;\n    init();\n\n    function init() {\n      var user = User.currentUser();\n      vm.form = {\n        name: user.name,\n        email: user.email,\n        status: user.status,\n        gender: user.gender,\n        img: user.img,\n        username: user.username\n      };\n      vm.formFields = UserForm.profile;\n      console.log(vm.form);\n    }\n\n    function submitAvatar() {\n      console.log(vm.rForm);\n\n      if (vm.rForm.$valid) {\n        var dataForm = angular.copy(vm.form);\n        console.log(dataForm);\n\n        User\n          .update(dataForm)\n          .then(function (resp) {\n            console.log(resp);\n            User.init();\n            $state.go(AppConfig.routes.home, {\n              clear: true\n            });\n          });\n      } else {\n        Notify.alert({\n          title: ('Invalid form'),\n          text: ('Fill out the fields in red')\n        });\n      }\n\n    }\n\n  }\n\n\n})();\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name userAvatar\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict A\n   * */\n\n  angular\n    .module('app.user')\n    .directive('userAvatar', userAvatarDirective);\n\n  function userAvatarDirective(PhotoService, PhotogramSetting, User) {\n    return {\n      restrict: 'A',\n      scope: {\n        gallery: '@'\n      },\n      template: '',\n      link: function ($scope, elem) {\n\n        elem.bind('click', openModal);\n\n        function openModal() {\n\n          var option = {\n            allowEdit: PhotogramSetting.get('imageEdit'),\n            filter: PhotogramSetting.get('imageFilter'),\n            allowRotation: PhotogramSetting.get('imageRotation'),\n            quality: PhotogramSetting.get('imageQuality'),\n            correctOrientation: PhotogramSetting.get('imageEdit'),\n            targetWidth: PhotogramSetting.get('imageWidth'),\n            targetHeight: PhotogramSetting.get('imageHeight'),\n            saveToPhotoAlbum: PhotogramSetting.get('imageSaveAlbum')\n          };\n\n          console.log(option);\n\n          PhotoService\n            .open(option)\n            .then(function (imageData) {\n              User\n                .updateAvatar(imageData)\n                .then(function (resp) {\n                  console.log(resp);\n                });\n            })\n            .catch(function (resp) {\n              console.log(resp);\n            });\n        }\n\n      }\n    };\n  }\n\n})();\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name UserLoginCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.intro')\n        .controller('UserIntroCtrl', UserIntroController);\n\n    function UserIntroController(AppConfig) {\n        var vm       = this;\n    }\n\n})();\n\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name UserSigninCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.user')\n    .controller('UserLoginCtrl', UserLoginController);\n\n  function UserLoginController(AppConfig, UserForm, Parse, Loading, $state, Notify, User) {\n    var vm = this;\n    vm.formFields = UserForm.login;\n    vm.routeLogged = AppConfig.routes.home;\n    vm.submitLogin = submitLogin;\n    vm.facebook = facebook;\n\n    init();\n\n    function init() {\n      vm.form = {\n        email: '',\n        password: ''\n      };\n\n      if (Parse.User.current()) {\n        $state.go(vm.routeLogged, {\n          clear: true\n        });\n      }\n\n    }\n\n    function submitLogin(rForm, data) {\n\n      var form = angular.copy(data);\n      if (rForm.$valid) {\n        Loading.start();\n        User\n          .login(form)\n          .then(function (data) {\n\n            console.log(data);\n\n            if (data.name.length) {\n              $state.go(vm.routeLogged, {\n                clear: true\n              });\n            } else {\n              $state.go('useravatar', {\n                clear: true\n              });\n            }\n            Loading.end();\n          })\n          .catch(function (resp) {\n            Notify.alert({\n              title: 'Ops',\n              text: resp.message\n            });\n            Loading.end();\n          });\n      } else {\n        return false;\n      }\n    }\n\n    function facebook() {\n      Loading.start();\n      User\n        .facebookLogin()\n        .then(function (resp) {\n          console.log(resp);\n\n          Loading.end();\n          switch (resp.status) {\n          case 0:\n            // logado\n            $state.go(AppConfig.routes.home, {\n              clear: true\n            });\n            break;\n          case 1:\n            // novo user\n            $state.go('useravatar', {\n              clear: true\n            });\n            break;\n          case 2:\n            // merge\n            $state.go('usermerge', {\n              clear: true\n            });\n            break;\n          }\n        })\n        .catch(function () {\n          Loading.end();\n          Notify.alert({\n            title: 'Ops',\n            text: ('Facebook error')\n          });\n        });\n    }\n\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name LogoutCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.user')\n    .controller('UserLogoutCtrl', LogoutController);\n\n  function LogoutController(User) {\n    User.logout();\n  }\n\n})();\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name UserMergeCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.user')\n        .controller('UserMergeCtrl', UserMergeController);\n\n    function UserMergeController(User, $rootScope, AppConfig, $state, Notify, UserForm) {\n        var vm        = this;\n        vm.formFields = UserForm.register;\n\n        init();\n\n        function init() {\n            if ($rootScope.tempUser) {\n                vm.form          = $rootScope.tempUser;\n                vm.form.password = '';\n            } else {\n                $state.go('user.intro', {clear: true});\n            }\n\n        }\n\n        vm.submit = function (rForm, form) {\n\n            console.log(rForm);\n            console.table(form);\n            if (vm.form.password != '') {\n                var dataForm = angular.copy(vm.form);\n                var form     = {\n                    email: dataForm.email,\n                    password: dataForm.password\n                };\n\n                console.log(form);\n\n                User\n                    .login(form)\n                    .then(function (user) {\n                        console.log(user);\n                        User\n                            .facebookLink(user)\n                            .then(function (resp) {\n                                console.log(resp);\n                                $state.go(AppConfig.routes.home, {\n                                    clear: true\n                                })\n                            })\n                    })\n                    .catch(function (resp) {\n                        Notify.alert({\n                            title: 'Ops',\n                            text: resp.message\n                        });\n                    });\n            } else {\n                Notify.alert({\n                    title: ('Invalid form'),\n                    text: ('Please enter your email')\n                });\n            }\n\n        }\n\n    }\n\n\n})();\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name recoveryPass\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict E\n   * */\n\n  angular\n    .module('app.user')\n    .directive('recoveryPass', recoveryPassDirective);\n\n  function recoveryPassDirective(User, $ionicPopup, Loading, Notify) {\n    return {\n      restrict: 'A',\n      scope: {\n        login: '@',\n        register: '@',\n      },\n      link: function ($scope, elem) {\n\n        elem.bind('click', openModal);\n\n        function openModal() {\n\n          $scope.form = {\n            recovery: ''\n          };\n\n          $scope.erro = '';\n\n          $scope.text = {\n            button: (''),\n            input: ('Email')\n          };\n\n          $ionicPopup\n            .show({\n              scope: $scope,\n              template: '<div class=\"popup-recovery\"><form name=\"form.recovery\" form-manager><label class=\"item item-input\"><i class=\"icon ion-email placeholder-icon\"></i><input type=\"email\" ng-model=\"email\" id=\"email\" name=\"email\" placeholder=\"{{ text.input }}\" required ng-maxlength=\"80\"></label><span class=\"error-msg\">{{erro}}</span></form></div>',\n              title: ('A new password will be sent to your e-mail address'),\n              buttons: [{\n                text: ('Cancel'),\n                type: 'button-calm'\n              }, {\n                text: ('Send'),\n                type: 'button-positive',\n                onTap: function (e) {\n                  if ($scope.form.recovery.$valid) {\n                    return $scope.form.recovery.email.$viewValue;\n                  } else {\n                    //não permite o usuário fechar até ele digitar o email\n                    e.preventDefault();\n                    $scope.erro = ('Invalid Email');\n                  }\n                }\n              }]\n            })\n            .then(function (res) {\n              if (!angular.isUndefined(res)) {\n                var email = res;\n\n                console.log(res);\n\n                Loading.start();\n\n                User\n                  .forgot(email)\n                  .then(function (resp) {\n                    console.log(resp);\n                    Notify.alert({\n                      login: ('Forgot your password'),\n                      text: ('Access your accout mail')\n                    });\n                    Loading.end();\n                  })\n                  .catch(function (resp) {\n                    Notify.alert({\n                      login: 'Ops',\n                      text: resp\n                    });\n                    Loading.end();\n                  });\n              }\n            });\n\n        }\n      }\n    };\n  }\n\n\n})();\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name UserRecoveryPassCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.user')\n    .controller('UserRecoveryPassCtrl', UserRecoveryPassController);\n\n  function UserRecoveryPassController(User, Notify) {\n    var vm = this;\n    vm.form = {};\n    vm.submitForgot = submitForgot;\n\n    function submitForgot() {\n      User\n        .forgot(vm.form)\n        .then(function (resp) {\n          console.log(resp);\n        })\n        .catch(function (resp) {\n          Notify.alert('Ops', resp);\n        });\n    }\n  }\n\n\n})();\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name UserSignupCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.user')\n    .controller('UserRegisterCtrl', UserRegisterController);\n\n  function UserRegisterController($state, UserForm, Notify, Loading, Photogram, User) {\n    var vm            = this;\n    vm.formFields     = UserForm.register;\n    vm.submitRegister = submitRegister;\n\n    init();\n\n    function init() {\n      vm.form = {\n        email: '',\n        password: ''\n      };\n    }\n\n    function submitRegister(rForm, data) {\n\n      if (rForm.$valid) {\n        Loading.start();\n        var form = angular.copy(data);\n        User\n          .register(form)\n          .then(function (resp) {\n            console.log(resp);\n            // Add Actvity History\n            Photogram\n              .addActivity({\n                action: 'registered'\n              });\n\n            // After register, login\n            User\n              .login({\n                email: form.email,\n                password: form.password\n              })\n              .then(function (data) {\n                console.log(data);\n                User.init();\n                Loading.end();\n                $state.go('useravatar', {\n                  clear: true\n                });\n              })\n              .catch(function (resp) {\n                console.log(resp);\n                Loading.end();\n                Notify.alert({\n                  title: 'Ops',\n                  text: resp.message\n                });\n              });\n          })\n          .catch(function (resp) {\n            console.log(resp);\n            Loading.end();\n            Notify.alert({\n              title: 'Ops',\n              text: resp.message\n            });\n          });\n      }\n    }\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name PhotogramTabsCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.photogram')\n    .controller('PhotogramTabsCtrl', PhotogramTabsController);\n\n  function PhotogramTabsController($scope, $state, AppConfig, $rootScope, Photogram, $ionicModal, Loading,\n    PhotogramSetting, PhotoService) {\n    var vm = this;\n    var path = AppConfig.path;\n    vm.postPhoto = open;\n\n    function open() {\n      var option = {\n        crop: PhotogramSetting.get('imageCrop'),\n        allowEdit: PhotogramSetting.get('imageEdit'),\n        filter: true,\n        //filter: PhotogramSetting.get('imageFilter'),\n        allowRotation: PhotogramSetting.get('imageRotation'),\n        quality: PhotogramSetting.get('imageQuality'),\n        correctOrientation: PhotogramSetting.get('imageEdit'),\n        targetWidth: PhotogramSetting.get('imageWidth'),\n        targetHeight: PhotogramSetting.get('imageHeight'),\n        saveToPhotoAlbum: PhotogramSetting.get('imageSaveAlbum')\n      };\n      console.log(option);\n\n      PhotoService\n        .open(option)\n        .then(modalPost)\n        .catch(goHome);\n    }\n\n\n    function goHome() {\n      console.warn('Deu erro');\n      $state.go('photogram.home');\n    }\n\n    function modalPost(image) {\n      $scope.closePost = closeModalPost;\n      $scope.submitPost = submitPost;\n      $scope.form = {\n        title: '',\n        location: '',\n        photo: image,\n        geo: false\n      };\n\n      $ionicModal\n        .fromTemplateUrl(path + '/module/share/photogram.post.modal.html', {\n          scope: $scope,\n          focusFirstInput: true\n        })\n        .then(function (modal) {\n          $scope.form.photo = image;\n          $scope.modalPost = modal;\n          $scope.modalPost.show();\n        });\n\n      function closeModalPost() {\n        $scope.modalPost.hide();\n        $scope.modalPost.remove();\n        Loading.end();\n      }\n\n      function submitPost(resp) {\n        var form = angular.copy(resp);\n        Loading.start();\n        Photogram\n          .post(form)\n          .then(function () {\n            closeModalPost();\n            $rootScope.$emit('filterModal:close');\n            $rootScope.$emit('PhotogramHome:reload');\n          });\n      }\n    }\n  }\n\n})();\n;(function() {\n\"use strict\";\n\nangular.module(\"ionic\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/component/ion-language/ion-language.html\",\"<button class=\\\"button button-block button-clear button-light button-language\\\">{{language.translation | translate}} <i \\nclass=\\\"icon ion-chevron-down\\\"></i></button>\");\n$templateCache.put(\"app/component/ion-language/modal-language.html\",\"<ion-modal-view><ion-header-bar><h1 class=\\\"title\\\" translate=\\\"LANG.TITLE\\\"></h1><a ng-click=\\\"closeModal()\\\" \\nclass=\\\"button button-icon icon ion-close\\\"></a></ion-header-bar><div \\nclass=\\\"bar bar-subheader item-input-inset bar-stable\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" placeholder=\\\"{{\\'LANG.SEARCH\\' | translate}}\\\" \\nng-model=\\\"searchValue\\\"></label><button type=\\\"button\\\" class=\\\"button button-clear\\\" ng-show=\\\"searchValue.length\\\" \\nng-click=\\\"searchValue=\\'\\'\\\">Clear</button></div><ion-content class=\\\"has-subheader has-header\\\"><ion-list><ion-item \\nclass=\\\"item\\\" ng-click=\\\"selectLanguage(item)\\\" ng-repeat=\\\"item in languages | filter:searchValue\\\" \\nng-bind-html=\\\"item.translation | translate\\\"></ion-item></ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/module/loading/loading.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/module/intro/intro.html\",\"<ion-view class=\\\"view-intro bg-animate\\\" can-swipe-back=\\\"false\\\"><ion-content scroll=\\\"false\\\"><div class=\\\"intro-slider\\\">\\n<ion-slide-box active-slide=\\\"slideIndex\\\" show-pager=\\\"true\\\" on-slide-changed=\\\"vm.slideChanged($index)\\\"><ion-slide \\nng-repeat=\\\"item in vm.slides track by $index\\\"><div class=\\\"content\\\" ng-if=\\\"$index == vm.slideIndex\\\"><span class=\\\"top\\\">\\n<h2>{{ item.top }}</h2></span><div class=\\\"phone {{ vm.device }}\\\"><img ng-src=\\\"{{ item.img }}\\\"></div></div></ion-slide>\\n<ion-slide><div class=\\\"content\\\" ng-if=\\\"vm.slides.length == vm.slideIndex\\\"><div class=\\\"last\\\"><div class=\\\"logo2 step1\\\">\\n<img src=\\\"img/icon.png\\\"> <span class=\\\"icon2-logo\\\"></span></div><button class=\\\"button button-block button-clear step2\\\" \\nui-sref=\\\"user.intro\\\" translate=\\\"INTRO.BUTTON.ENTER\\\"></button></div></div></ion-slide></ion-slide-box></div><button \\nclass=\\\"button button-positive button-fab left\\\" ng-if=\\\"vm.slideIndex\\\" ng-click=\\\"vm.previous()\\\"><i \\nclass=\\\"icon ion-ios-arrow-left\\\"></i></button> <button class=\\\"button button-positive button-fab right\\\" \\nng-hide=\\\"vm.slideIndex === vm.slides.length\\\" ng-click=\\\"vm.next()\\\"><i class=\\\"icon ion-ios-arrow-right\\\"></i></button>\\n</ion-content></ion-view>\");\n$templateCache.put(\"app/component/ion-photo/view/modal.share.photo.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar-dark\\\"><div class=\\\"title\\\">{{ ::\\'Share\\' | translate }}\\n</div><button class=\\\"button button-positive\\\" ng-click=\\\"modal.hide()\\\"><i class=\\\"icon ion-arrow-right-b\\\"></i></button>\\n</ion-header-bar><ion-content ng-cloak><div id=\\\"image\\\"><img ng-src=\\\"{{ ::form.photo}}\\\"><div class=\\\"title\\\">\\n{{ ::form.title }}</div></div><ul class=\\\"list\\\"><li class=\\\"padding\\\"><button ng-repeat=\\\"social in sociais\\\" \\nng-click=\\\"share(form, social)\\\" class=\\\"button button-block button-{{ social }}\\\"><i class=\\\"icon ion-social-{{ social }}\\\">\\n</i> {{ ::social | uppercase }}</button></li></ul></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/component/ion-photo/view/photo.filter.carousel.html\",\"<div class=\\\"wide-as-needed\\\"><a ng-repeat=\\\"filter in filters\\\" ng-click=\\\"applyFilter(\\'image\\', filter)\\\"><div caman \\nimage=\\\"image\\\" name=\\\"filter\\\" filter=\\\"filter\\\" class=\\\"image\\\" loading=\\\"loading\\\" ng-class=\\\"{disabled: loading}\\\"></div>\\n<ion-spinner ng-if=\\\"loading\\\"></ion-spinner><p>{{ ::filter }}</p></a></div>\");\n$templateCache.put(\"app/component/ion-photo/view/photo.filter.html\",\"<div class=\\\"capture-photo\\\"><div caman filter=\\\"\\'normal\\'\\\" loading=\\\"loadingMaster\\\" class=\\\"image\\\" \\nng-class=\\\"{disabled: loadingMaster}\\\" name=\\\"\\'image\\'\\\" image=\\\"image\\\"></div><ion-spinner ng-show=\\\"loadingMaster\\\">\\n</ion-spinner></div><photo-filter-carousel apply=\\\"applyFilter\\\" image=\\\"image\\\"></photo-filter-carousel>\");\n$templateCache.put(\"app/module/photogram/directive/comment/photogram.comment.directive.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n<span translate=\\\"PHOTOGRAM.COMMENT.TITLE\\\"></span>({{ ::comments.length }})</div></ion-header-bar><ion-content>\\n<photogram-loading loading=\\\"loading\\\" icon=\\\"android\\\"></photogram-loading><ion-list class=\\\"list\\\" \\nng-show=\\\"comments.length\\\" can-swipe=\\\"true\\\"><ion-item ng-repeat=\\\"item in comments\\\" class=\\\"item item-avatar\\\"><img \\nng-src=\\\"{{ ::item.userAvatar }}\\\"><div class=\\\"row\\\"><h2>{{ ::item.user.attributes.name }}</h2><div>{{ ::item.text }}\\n</div></div><div class=\\\"row\\\"><p>{{ ::item.created | amTimeAgo }}</p></div><div ng-if=\\\"item.user.id === currentUser.id\\\">\\n<ion-option-button class=\\\"button-info\\\" ng-click=\\\"editComment(item)\\\" translate=\\\"PHOTOGRAM.BUTTON.EDIT\\\">Edit\\n</ion-option-button><ion-option-button class=\\\"button-assertive\\\" ng-click=\\\"deleteComment(item)\\\" \\ntranslate=\\\"PHOTOGRAM.BUTTON.REMOVE\\\">Remove</ion-option-button></div></ion-item></ion-list><div class=\\\"center-ico\\\" \\nng-if=\\\"nocomments\\\"><i class=\\\"icon ion-ios-chatbubble-outline\\\"></i><h1 translate=\\\"PHOTOGRAM.COMMENT.NO_COMMENTS\\\">\\nNo Comments</h1></div></ion-content><ion-footer class=\\\"step2\\\"><div class=\\\"form\\\"><formly-form model=\\\"form\\\" \\nfields=\\\"formFields\\\" form=\\\"rForm\\\"><button class=\\\"button button-positive\\\" type=\\\"button\\\" \\nng-click=\\\"submitComment(rForm, form)\\\"><i class=\\\"icon ion-arrow-right-b\\\"></i></button></formly-form></div></ion-footer>\\n</ion-modal-view>\");\n$templateCache.put(\"app/module/photogram/directive/feedback/feedback-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"FEEDBACK.TITLE\\\"></div></ion-header-bar><ion-content><formly-form model=\\\"form\\\" form=\\\"rForm\\\" \\nfields=\\\"formFields\\\"></formly-form><div class=\\\"padding\\\"><button class=\\\"button button-block button-positive\\\" \\nng-click=\\\"submitFeedback()\\\"><span translate=\\\"BUTTON.SEND\\\"></span></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/module/photogram/directive/follow/photogram.follow.modal.html\",\"<ion-modal-view class=\\\"modal-profile photogram-profile\\\"><ion-header-bar class=\\\"bar-positive\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\nFollow Users</div></ion-header-bar><ion-content><div class=\\\"list\\\"><div class=\\\"item item-avatar item-button-right\\\" \\nng-repeat=\\\"item in data\\\"><img ng-src=\\\"{{ ::item.src }}\\\"><h2>{{ ::item.name }}</h2><p>{{ ::item.status }}</p><button \\nclass=\\\"button\\\" ng-click=\\\"item.follow = !item.follow\\\" ng-class=\\\"item.follow ? \\'button-positive\\' : \\'button-stable\\'\\\"><i \\nclass=\\\"icon\\\" ng-class=\\\"item.follow? \\'ion-thumbsup\\' : \\'ion-plus\\'\\\"></i></button></div></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/module/photogram/directive/like/photogram.like.directive.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar-dark\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ ::\\'Likes\\' | translate }} ({{ ::likes.length }})</div></ion-header-bar><ion-content><div class=\\\"list step1\\\"><div \\nng-repeat=\\\"item in likes\\\" class=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ ::item.user.img }}\\\"><h2>\\n{{ ::item.user.name }}</h2><div>{{ ::item.text }}</div><p>{{ ::item.created | amTimeAgo }}</p><button \\nclass=\\\"button button-positive button-outline\\\"><i class=\\\"icon ion-ios-plus-empty\\\"></i> {{ ::\\'Follow\\' }}</button></div>\\n</div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/module/photogram/directive/photogrid/photo-grid.html\",\"<div class=\\\"center-ico\\\" ng-if=\\\"data.total==0\\\"><i class=\\\"icon ion-ios-camera\\\"></i><h1 translate=\\\"HOME.TITLE.NO_PHOTO\\\">\\n</h1></div><ion-refresher ng-if=\\\"!loading\\\" on-refresh=\\\"feed(true)\\\"></ion-refresher><photogram-loading \\nloading=\\\"loading\\\"></photogram-loading><div class=\\\"row\\\" ng-if=\\\"$index % 3 === 0\\\" ng-repeat=\\\"image in data.galleries\\\">\\n<div class=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index < data.galleries.length\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data.galleries[$index].user_id\\\" ng-src=\\\"{{ ::data.galleries[$index].img}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data.galleries[$index].img}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 1 < data.galleries.length\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data.galleries[$index + 1].user_id\\\" ng-src=\\\"{{ ::data.galleries[$index + 1].img}}\\\" width=\\\"100%\\\"> <img \\nng-if=\\\"!profile\\\" ng-src=\\\"{{ ::data.galleries[$index + 1].img}}\\\" width=\\\"100%\\\"></div><div \\nclass=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index + 2 < data.galleries.length\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data.galleries[$index + 2].user_id\\\" ng-src=\\\"{{ ::data.galleries[$index + 2].img}}\\\" width=\\\"100%\\\"> <img \\nng-if=\\\"!profile\\\" ng-src=\\\"{{ ::data.galleries[$index + 2].img}}\\\" width=\\\"100%\\\"></div></div><ion-infinite-scroll \\nng-if=\\\"data.galleries.length<data.total\\\" on-infinite=\\\"feed()\\\"></ion-infinite-scroll>\");\n$templateCache.put(\"app/module/photogram/directive/photolist/photo.list.html\",\"<div class=\\\"center-ico\\\" ng-if=\\\"data.total==0\\\"><i class=\\\"icon ion-ios-camera\\\"></i><h1 translate=\\\"HOME.TITLE.NO_PHOTO\\\">\\n</h1></div><ion-refresher ng-if=\\\"!loading\\\" on-refresh=\\\"feed(true)\\\"></ion-refresher><photogram-loading \\nloading=\\\"loading\\\"></photogram-loading><div class=\\\"list card animated fadeIn\\\" ng-repeat=\\\"gallery in data.galleries\\\"><div\\n class=\\\"item item-avatar\\\" profile-modal user=\\\"gallery.user_id\\\"><img ng-if=\\\"profile\\\" profile=\\\"{{ ::gallery.user_id }}\\\" \\nng-src=\\\"{{ ::gallery.userAvatar}}\\\"> <img ng-src=\\\"{{ ::gallery.userAvatar}}\\\"><h2>{{ ::gallery.userName}}</h2><p>\\n{{ :: gallery.userStatus }}</p><span>{{ ::gallery.createdAt | amTimeAgo}}</span></div><div class=\\\"item item-body\\\" \\non-double-tap=\\\"like(gallery)\\\" ng-model=\\\"gallery\\\"><div class=\\\"icon ion-ios-heart heart\\\" \\nng-class=\\\"gallery.liked ? \\'happy\\' : \\'broken\\' \\\"></div><i class=\\\"icon\\\" ng-if=\\\"like\\\"></i> <img ng-src=\\\"{{ gallery.img}}\\\" \\nid=\\\"{{ ::gallery.id}}\\\"></div><div class=\\\"item item-buttons\\\"><div class=\\\"row\\\"><div class=\\\"col col-75\\\"><ion-spinner \\nng-show=\\\"gallery.progress\\\"></ion-spinner><button photogram-like ng-model=\\\"gallery\\\" ng-if=\\\"!gallery.progress\\\" \\nng-class=\\\"gallery.liked ? \\'ion-ios-heart\\' : \\'ion-ios-heart-outline\\' \\\" class=\\\"button-clear button-icon button-heart\\\">\\n</button> <button photogram-comment ng-model=\\\"gallery\\\" class=\\\"button-clear button-icon ion-ios-chatbubble-outline\\\">\\n</button> <button ng-click=\\\"action(gallery)\\\" photogram=\\\"{{ :: gallery.id }}\\\" \\nclass=\\\"button-clear button-icon ion-android-share\\\"></button></div><div class=\\\"col text-right\\\"><button \\nng-click=\\\"action(gallery)\\\" photogram=\\\"{{ :: gallery.id }}\\\" class=\\\"button-clear button-icon ion-android-more-vertical\\\">\\n</button></div></div></div><div class=\\\"padding\\\"><span class=\\\"likes\\\" photogram-like photogram=\\\"{{ :: gallery }}\\\"><i \\nclass=\\\"icon ion-ios-heart\\\"></i> <span ng-if=\\\"!gallery.progress\\\">{{ :: gallery.likes }}</span> <span \\ntranslate=\\\"PHOTOGRAM.LIKES\\\"></span></span><div class=\\\"list-comments\\\"><div class=\\\"comment-item\\\" profile-modal \\nuser=\\\"gallery.user_id\\\"><span class=\\\"username\\\">{{ :: gallery.userName }}</span> <span class=\\\"comment\\\">\\n{{ :: gallery.title }}</span></div><div class=\\\"comment-item\\\" profile-modal user=\\\"item.user_id\\\" \\nng-repeat=\\\"item in gallery.comments| limitTo:3 track by item.id\\\"><span class=\\\"username\\\">{{ :: item.userName }}</span> \\n<span class=\\\"comment\\\">{{ :: item.text }}</span></div><a class=\\\"comment-item\\\" photogram-comment ng-model=\\\"gallery\\\" \\nng-if=\\\"gallery.comments.length>3\\\">Ver todos os comentários</a></div><button \\nclass=\\\"button button-block button-clear button-comment\\\" photogram-comment ng-model=\\\"gallery\\\"><span \\ntranslate=\\\"PHOTOGRAM.BUTTON.COMMENT_ADD\\\"></span></button></div></div><ion-infinite-scroll \\nng-if=\\\"data.galleries.length<data.total\\\" on-infinite=\\\"feed()\\\"></ion-infinite-scroll>\");\n$templateCache.put(\"app/module/photogram/directive/profile-edit-modal/profile-edit-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ ::\\'Edit Profile\\' | translate }}</div></ion-header-bar><ion-content class=\\\"view-avatar\\\"><div class=\\\"row step1\\\"><div \\nclass=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar ng-src=\\\"{{ form.facebookimg || form.img._url || \\'img/user.png\\' }}\\\"></div>\\n</div><div class=\\\"step2\\\"><label class=\\\"item item-input\\\"><i class=\\\"icon icon-envelope placeholder-icon\\\"></i> <input \\ntype=\\\"text\\\" ng-model=\\\"form.email\\\" disabled=\\\"disabled\\\"></label><formly-form model=\\\"form\\\" fields=\\\"formFields\\\" \\nform=\\\"rForm\\\"></formly-form></div><div class=\\\"padding step3\\\"><button ng-click=\\\"linkFacebook()\\\" \\nng-disabled=\\\"form.facebook\\\" class=\\\"button button-block button-facebook\\\"><i class=\\\"icon ion-social-facebook\\\"></i> <span \\ntranslate=\\\"PHOTOGRAM.BUTTON.FACEBOOK_LINK\\\"></span></button> <button class=\\\"button button-block button-positive\\\" \\nng-click=\\\"submitUpdateProfile()\\\" translate=\\\"PHOTOGRAM.BUTTON.SAVE_PROFILE\\\"></button></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/module/photogram/directive/profile-modal/profile-modal.html\",\"<ion-modal-view id=\\\"account-view\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ user.name }}</div></ion-header-bar><ion-content overflow-scroll=\\\"true\\\"><div class=\\\"profile-top\\\"><div class=\\\"row\\\">\\n<div class=\\\"col-25\\\"><img class=\\\"avatar\\\" ng-src=\\\"{{ user.img}}\\\"></div><div class=\\\"col col-statics\\\"><div class=\\\"row\\\"><div\\n class=\\\"col\\\"><photogram-loading loading=\\\"loadingPhotos\\\"></photogram-loading><span ng-if=\\\"!loadingPhotos\\\" \\nclass=\\\"text-center\\\">{{ user.qtdPhotos }}</span><h3 translate=\\\"PHOTOGRAM.PROFILE.TITLE.POST\\\">Posts</h3></div><div \\nclass=\\\"col\\\"><photogram-loading loading=\\\"loadingFollowers\\\"></photogram-loading><span ng-if=\\\"!loadingFollowers\\\" \\nclass=\\\"text-center\\\">{{ user.qtdFollowers }}</span><h3 translate=\\\"PHOTOGRAM.PROFILE.TITLE.FOLLOWER\\\"></h3></div><div \\nclass=\\\"col\\\"><photogram-loading loading=\\\"loadingFollowing\\\"></photogram-loading><span ng-if=\\\"!loadingFollowing\\\" \\nclass=\\\"text-center\\\">{{ user.qtdFollowing }}</span><h3 translate=\\\"PHOTOGRAM.PROFILE.TITLE.FOLLOWING\\\">Followings</h3>\\n</div></div><div class=\\\"row col-edit\\\"><div class=\\\"col\\\"><photogram-loading loading=\\\"loadingFollow\\\"></photogram-loading>\\n<button ng-if=\\\"!loadingFollow\\\" ng-class=\\\"{\\'button-unfollow\\': user.follow, \\'button-follow\\': !user.follow}\\\" \\nng-click=\\\"follow()\\\" class=\\\"button\\\"><span ng-show=\\\"!user.follow\\\" translate>Follow</span> <span ng-show=\\\"user.follow\\\" \\ntranslate>Following</span></button></div></div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">\\n{{ user.name }}</span><p class=\\\"user-status\\\">{{ user.status }}</p></div></div><div class=\\\"item bar\\\"><div \\nclass=\\\"button-bar\\\"><button class=\\\"button button-icon icon ion-grid\\\" ng-class=\\\"{active: tab.grid}\\\" \\nng-click=\\\"changeTab(\\'grid\\')\\\"></button> <button class=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: tab.list}\\\" \\nng-click=\\\"changeTab(\\'list\\')\\\"></button> <button class=\\\"button button-icon icon ion-ios-location\\\"></button></div></div>\\n<div class=\\\"item item-divider\\\" translate=\\\"PHOTOGRAM.MSG.RECENT\\\">Recent</div><div class=\\\"tab\\\" ng-if=\\\"tab.list\\\">\\n<photogram-photo-list user=\\\"user.id\\\"></photogram-photo-list></div><div class=\\\"tab\\\" ng-if=\\\"tab.grid\\\">\\n<photogram-photo-grid user=\\\"user.id\\\"></photogram-photo-grid></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/module/photogram/directive/search/search-directive.html\",\"<label class=\\\"item item-input\\\"><i class=\\\"icon ion-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"input\\\" \\nplaceholder=\\\"{{\\'SEARCH.FORM.INPUT\\' | translate }}\\\"> <button class=\\\"button button-icon\\\" ng-if=\\\"input.length\\\" \\nng-click=\\\"clearSearch()\\\"><i class=\\\"icon ion-close\\\"></i></button></label>\");\n$templateCache.put(\"app/module/photogram/directive/settings-modal/settings-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"PHOTOGRAM.SETTING.TITLE\\\"></div></ion-header-bar><ion-content class=\\\"animated fadeIn\\\"><div class=\\\"list\\\">\\n<ion-language></ion-language><ion-toggle class=\\\"toggle-positive\\\" ng-model=\\\"form.push\\\"><h3><small \\ntranslate=\\\"PHOTOGRAM.SETTING.NOTIFICATION\\\"></small></h3><p ng-if=\\\"!setting_preview\\\" translate=\\\"PHOTOGRAM.BUTTON.OFF\\\">\\n</p><p ng-if=\\\"setting_preview\\\" translate=\\\"PHOTOGRAM.BUTTON.ON\\\"></p></ion-toggle><ion-item class=\\\"item-icon-right\\\" \\nng-click=\\\"openLink(\\'https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S\\')\\\"><h3><small \\ntranslate=\\\"PHOTOGRAM.BUTTON.BUY\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" ng-click=\\\"openLink(\\'http://photogramapp.com\\')\\\"><h3><small translate=\\\"PHOTOGRAM.BUTTON.HELP\\\">\\n</small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item class=\\\"item-icon-right\\\" \\nng-click=\\\"openLink(\\'http://photogramapp.com\\')\\\"><h3><small translate=\\\"PHOTOGRAM.BUTTON.TERM_PRIVACY\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item class=\\\"item-icon-right\\\" \\nng-click=\\\"openLink(\\'http://photogramapp.com\\')\\\"><h3><small translate=\\\"PHOTOGRAM.BUTTON.TERM_SERVICE\\\">Terms of Service\\n</small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item class=\\\"item-icon-right\\\" ng-click=\\\"show();\\\">\\n<h3><small translate=\\\"PHOTOGRAM.BUTTON.REPORT\\\">Report a Problem</small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i>\\n</ion-item></div><div class=\\\"padding\\\"><button ng-click=\\\"link(\\'logout\\')\\\" class=\\\"button button-block button-positive\\\" \\ntranslat=\\\"USER.BUTTON.LOGOUT\\\">Logout</button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/module/photogram/module/account/account.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-title><h1 class=\\\"title\\\">{{ ::currentUser.name }}</h1>\\n</ion-nav-title><ion-nav-buttons side=\\\"right\\\"><button settings-modal class=\\\"button button-icon icon ion-gear-a\\\">\\n</button></ion-nav-buttons><ion-content class=\\\"animated fadeIn\\\"><div class=\\\"profile-top\\\"><div class=\\\"row\\\"><div \\nclass=\\\"col-25\\\"><img class=\\\"avatar\\\" user-avatar \\nng-src=\\\"{{ currentUser.facebookimg || currentUser.img._url || \\'img/user.png\\' }}\\\"></div><div class=\\\"col col-statics\\\">\\n<div class=\\\"row\\\"><div class=\\\"col\\\"><photogram-loading loading=\\\"loadingPhotos\\\"></photogram-loading><span \\nng-if=\\\"!loadingPhotos\\\" class=\\\"text-center\\\">{{ ::vm.user.qtdPhotos }}</span><h3 \\ntranslate=\\\"PHOTOGRAM.PROFILE.TITLE.POST\\\">Posts</h3></div><div class=\\\"col\\\"><photogram-loading \\nloading=\\\"loadingFollowers\\\"></photogram-loading><span ng-if=\\\"!loadingFollowers\\\" class=\\\"text-center\\\">\\n{{ ::vm.user.qtdFollowers }}</span><h3 translate=\\\"PHOTOGRAM.PROFILE.TITLE.FOLLOWER\\\"></h3></div><div class=\\\"col\\\">\\n<photogram-loading loading=\\\"loadingFollowing\\\"></photogram-loading><span ng-if=\\\"!loadingFollowing\\\" class=\\\"text-center\\\">\\n{{ ::vm.user.qtdFollowing }}</span><h3 translate=\\\"PHOTOGRAM.PROFILE.TITLE.FOLLOWING\\\">Followings</h3></div></div><div \\nclass=\\\"row col-edit\\\"><div class=\\\"col\\\"><button profile-modal-edit class=\\\"button\\\"><div \\ntranslate=\\\"PHOTOGRAM.BUTTON.PROFILE_EDIT\\\"></div></button></div></div></div></div><div class=\\\"padding\\\"><span \\nclass=\\\"user-username\\\">{{ ::currentUser.name }}</span><p class=\\\"user-status\\\">{{ ::currentUser.status }}</p></div></div>\\n<div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button class=\\\"button button-icon icon ion-grid\\\" \\nng-class=\\\"{active: vm.tab.grid}\\\" ng-click=\\\"vm.changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: vm.tab.list}\\\" ng-click=\\\"vm.changeTab(\\'list\\')\\\"></button> \\n<button class=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"item item-divider\\\" \\ntranslate=\\\"PHOTOGRAM.MSG.RECENT\\\">Recent</div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.list\\\"><photogram-photo-list user=\\\"vm.user\\\">\\n</photogram-photo-list></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.grid\\\"><photogram-photo-grid user=\\\"vm.user\\\">\\n</photogram-photo-grid></div></ion-content></ion-view>\");\n$templateCache.put(\"app/module/photogram/module/account-friend-list/account-friend-list.html\",\"<ion-view><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/module/photogram/module/activity/activity.html\",\"<ion-view cache-view=\\\"false\\\" class=\\\"photogram-activity\\\"><ion-nav-title><h1 class=\\\"title\\\" translate=\\\"ACTIVITY.TITLE\\\">\\n</h1></ion-nav-title><ion-content><photogram-loading loading=\\\"vm.loading\\\"></photogram-loading><div class=\\\"list\\\"><div \\nclass=\\\"item item-avatar item-animate1\\\" ng-repeat=\\\"item in vm.data track by item.id\\\"><img \\nng-src=\\\"{{ ::item.userAvatar }}\\\"><h2>{{ ::item.userName }}</h2><div class=\\\"text\\\">{{ ::item.action }}</div><p>\\n{{ ::item.createdAt | amTimeAgo }}</p><div class=\\\"img-right\\\" ng-if=\\\"item.img\\\"><img ng-src=\\\"{{ ::item.img}}\\\"></div>\\n</div></div><ion-infinite-scroll ng-if=\\\"!vm.loading && !vm.empty\\\" on-infinite=\\\"vm.load()\\\"></ion-infinite-scroll>\\n</ion-content></ion-view>\");\n$templateCache.put(\"app/module/photogram/module/direct/direct.home.html\",\"<ion-view><ion-nav-title translate=\\\"DIRECT.TITLE\\\"></ion-nav-title><ion-nav-buttons side=\\\"right\\\"><button \\nclass=\\\"button button-icon ion-ios-plus-empty\\\" ui-sref=\\\"photogram.direct\\\"></button></ion-nav-buttons><ion-content>\\n<ion-list><ion-item class=\\\"item-avatar\\\" ng-repeat=\\\"item in vm.data\\\" ui-sref=\\\"photogram.message({channelId: item.id})\\\">\\n<img ng-src=\\\"{{item.user.src}}\\\" alt=\\\"\\\"><h2>{{ item.user.name}}</h2><p>{{ item.msg }}</p></ion-item></ion-list>\\n</ion-content></ion-view>\");\n$templateCache.put(\"app/module/photogram/module/direct-message/direct-message.html\",\"<ion-view id=\\\"userMessagesView\\\" cache-view=\\\"false\\\" view-title=\\\"Messages\\\"><div class=\\\"loader-center\\\" \\nng-if=\\\"!vm.doneLoading\\\"><div class=\\\"loader\\\"><i class=\\\"icon ion-loading-c\\\"></i></div></div><ion-content \\nhas-bouncing=\\\"true\\\" class=\\\"has-header has-footer\\\" delegate-handle=\\\"userMessageScroll\\\"><ion-refresher \\npulling-text=\\\"{{\\'DIRECT.BUTTON.PULL\\' | TRANSLATE}}\\\" on-refresh=\\\"vm.doRefresh()\\\"></ion-refresher><div \\nng-repeat=\\\"message in vm.data.messages\\\" class=\\\"message-wrapper\\\" on-hold=\\\"onMessageHold($event, $index, message)\\\"><div \\nng-if=\\\"vm.user.id === message.user.id\\\"><img class=\\\"profile-pic right\\\" ng-src=\\\"{{message.user.src}}\\\"><div \\nclass=\\\"chat-bubble right\\\"><div class=\\\"message\\\" ng-bind-html=\\\"message.body | nl2br\\\" autolinker></div><div \\nclass=\\\"message-detail\\\"><span class=\\\"bold\\\">{{message.user.name}}</span>, <span am-time-ago=\\\"message.date\\\"></span></div>\\n</div></div><div ng-if=\\\"vm.user.id !== message.user.id\\\"><img class=\\\"profile-pic left\\\" ng-src=\\\"{{message.user.src}}\\\">\\n<div class=\\\"chat-bubble left\\\"><div class=\\\"message\\\" ng-bind-html=\\\"message.body | nl2br\\\" autolinker></div><div \\nclass=\\\"message-detail\\\"><span class=\\\"bold\\\">{{message.user.name}}</span>, <span am-time-ago=\\\"message.date\\\"></span></div>\\n</div></div><div class=\\\"cf\\\"></div></div></ion-content><form name=\\\"sendMessageForm\\\" \\nng-submit=\\\"vm.sendMessage(sendMessageForm, vm.model)\\\" novalidate><ion-footer-bar \\nclass=\\\"bar-stable item-input-inset message-footer\\\" keyboard-attach><label class=\\\"item-input-wrapper\\\"><textarea \\nng-model=\\\"vm.model.text\\\" placeholder=\\\"{{ \\'DIRECT.FORM.PLACEHOLDER\\' | TRANSLATE}}\\\" required minlength=\\\"1\\\" \\nmaxlength=\\\"1500\\\" msd-elastic></textarea></label><div class=\\\"footer-btn-wrap\\\"><button \\nclass=\\\"button button-icon icon ion-android-send footer-btn\\\" type=\\\"submit\\\"></button></div></ion-footer-bar></form>\\n</ion-view>\");\n$templateCache.put(\"app/module/photogram/module/home/home.html\",\"<ion-view class=\\\"view-home\\\"><ion-nav-title><span class=\\\"icon2-logo\\\"></span></ion-nav-title><ion-nav-buttons \\nside=\\\"right\\\"><button class=\\\"button button-icon icon-paypal\\\" buy></button></ion-nav-buttons><ion-content><div \\nclass=\\\"connect\\\" ng-hide=\\\"onLine\\\" ng-cloak><span>Offline</span></div><photogram-photo-list profile=\\\"true\\\" user=\\\"\\\">\\n</photogram-photo-list></ion-content></ion-view>\");\n$templateCache.put(\"app/module/photogram/module/photo/photogram.photo.html\",\"<ion-view view-title=\\\"Photo\\\"><ion-content><div class=\\\"list card step1\\\"><div class=\\\"item item-avatar\\\" \\ndata-affix-within-parent-with-class=\\\"card\\\" ion-affix><img ng-src=\\\"{{vm.data.user.img}}\\\"><h2>{{vm.data.user.name}}</h2>\\n<span>{{vm.data.created | amTimeAgo}}</span></div><div class=\\\"item item-body\\\"><img ng-src=\\\"{{vm.data.img._url}}\\\"></div>\\n<div class=\\\"padding\\\"><p>{{ vm.data.title }}</p><p><a class=\\\"subdued\\\" href=\\\"#\\\">1 {{ \\'Like\\' | translate}}</a></p></div>\\n</div><div class=\\\"list\\\"><div ng-repeat=\\\"item in vm.comments\\\" class=\\\"item item-avatar\\\"><img \\nng-src=\\\"{{ item.user.img }}\\\"><h2>{{ item.user.name }}</h2><p>{{ item.text }}</p></div></div><div class=\\\"step2\\\">\\n<formly-form model=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"rForm\\\"><div class=\\\"padding\\\"><button \\nclass=\\\"button button-block button-positive\\\" type=\\\"button\\\" ng-click=\\\"vm.submitComment(rForm, vm.form)\\\" translate>Comment\\n</button></div></formly-form></div></ion-content></ion-view>\");\n$templateCache.put(\"app/module/photogram/module/photo/photogram.popover.home.html\",\"<ion-popover-view><ion-content><div class=\\\"list\\\"><div class=\\\"item\\\" ui-sref=\\\"gallery.settings\\\" translate>Settings</div>\\n<div class=\\\"item\\\" ui-sref=\\\"gallery.settings\\\" translate>About</div></div></ion-content></ion-popover-view>\");\n$templateCache.put(\"app/module/photogram/module/search/search.html\",\"<ion-view class=\\\"view-search\\\"><ion-nav-title>Search</ion-nav-title><div class=\\\"bar bar-header bar-light\\\"><div \\nclass=\\\"button-bar\\\"><button class=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: vm.tab.list}\\\" \\nng-click=\\\"vm.changeTab(\\'list\\')\\\"></button> <button class=\\\"button button-icon icon ion-map\\\" \\nng-class=\\\"{active: vm.tab.map}\\\" ng-click=\\\"vm.changeTab(\\'map\\')\\\"></button></div></div><ion-content scroll=\\\"false\\\">\\n<ion-nav-view></ion-nav-view></ion-content></ion-view>\");\n$templateCache.put(\"app/module/photogram/module/search-list/search-list.html\",\"<ion-view class=\\\"view-search\\\"><ion-nav-title><ion-search></ion-search></ion-nav-title><ion-nav-buttons side=\\\"right\\\">\\n<button class=\\\"button button-icon ion-person-add\\\" buy></button></ion-nav-buttons><ion-content class=\\\"layout\\\">\\n<photogram-photo-grid profile=\\\"true\\\"></photogram-photo-grid></ion-content></ion-view>\");\n$templateCache.put(\"app/module/photogram/module/search-map/search-map.html\",\"<ion-view class=\\\"view-search\\\"><ion-nav-title>Map</ion-nav-title><ion-nav-buttons side=\\\"right\\\"><button \\nclass=\\\"button button-icon ion-pinpoint\\\" ng-click=\\\"vm.findMe()\\\"></button></ion-nav-buttons><ion-content class=\\\"layout\\\" \\nscroll=\\\"false\\\"><ui-gmap-google-map center=\\\"map.center\\\" zoom=\\\"map.zoom\\\"><ui-gmap-marker idkey=\\\"0\\\" coords=\\\"vm.user\\\">\\n</ui-gmap-marker><ui-gmap-marker click=\\\"vm.openModal(item)\\\" idkey=\\\"item.id\\\" coords=\\\"item.coords\\\" icon=\\\"item.icon\\\" \\nng-repeat=\\\"item in vm.data\\\"></ui-gmap-marker></ui-gmap-google-map></ion-content></ion-view>\");\n$templateCache.put(\"app/module/photogram/module/share/photogram.post.modal.html\",\"<ion-modal-view class=\\\"modal-post\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closePost()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"SHARE.TITLE\\\"></div><button class=\\\"button button-positive\\\" ng-click=\\\"submitPost(form)\\\"><i \\nclass=\\\"icon ion-arrow-right-b\\\"></i></button></ion-header-bar><ion-content><div id=\\\"image\\\"><img ng-src=\\\"{{form.photo}}\\\">\\n</div><ul class=\\\"list\\\"><li class=\\\"item\\\"><textarea type=\\\"text\\\" ng-model=\\\"form.title\\\" autofocus \\nplaceholder=\\\"{{ \\'SHARE.FORM.LEGEND\\' | translate }}\\\"></textarea></li><li class=\\\"item item-input\\\" \\nng-show=\\\"form.geo.image\\\"><input type=\\\"text\\\" placeholder=\\\"{{ \\'SHARE.FORM.LOCATION\\' | translate }}\\\" ion-location \\nlocation=\\\"form.geo\\\" ng-model=\\\"form.geo.resume\\\"></li><li class=\\\"item nopadding\\\" ng-show=\\\"form.geo.image\\\"><img \\nng-src=\\\"{{ form.geo.image }}\\\"></li></ul></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/module/photogram/module/share/photogram.share.modal.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar-dark\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeShare()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"SHARE.TITLE\\\"></div><button class=\\\"button button-positive\\\" ng-click=\\\"submitShare(form, social)\\\"><i \\nclass=\\\"icon ion-arrow-right-b\\\"></i></button></ion-header-bar><ion-content><div class=\\\"list\\\"><div \\nclass=\\\"item item-thumbnail-left\\\" href=\\\"#\\\"><img ng-src=\\\"{{form.photo}}\\\" id=\\\"image\\\"><textarea type=\\\"text\\\" \\nng-model=\\\"form.title\\\" placeholder=\\\"{{ \\'SHARE.FORM.LEGEND\\'|translate }}\\\"></textarea></div></div><ul class=\\\"list\\\"><li \\nclass=\\\"item item-input\\\"><input type=\\\"text\\\" placeholder=\\\"{{ \\'SHARE.FORM.LOCATION\\' | translate }}\\\" ion-location \\nlocation=\\\"form.geo\\\" ng-model=\\\"form.geo.resume\\\"></li><div class=\\\"item nopadding\\\" ng-show=\\\"form.geo.image\\\"><img \\nng-src=\\\"{{ form.geo.image }}\\\"></div></ul><ul class=\\\"list\\\"><li class=\\\"item item-divider\\\" \\ntranslate=\\\"SHARE.FORM.SHARE_IN\\\"></li><li class=\\\"item item-icon-left item-toggle\\\" ng-repeat=\\\"social in socials\\\"><i \\nclass=\\\"icon ion-social-{{ social.title | lowercase }}\\\"></i> {{ social.title }}<label class=\\\"toggle toggle-positive\\\">\\n<input type=\\\"checkbox\\\" ng-model=\\\"social.checked\\\"><div class=\\\"track\\\"><div class=\\\"handle\\\"></div></div></label></li></ul>\\n</ion-content></ion-modal-view>\");\n$templateCache.put(\"app/module/photogram/module/tabs/photogram-tabs.html\",\"<ion-view><ion-nav-bar class=\\\"bar bar-light bar-mop\\\" align-title=\\\"left\\\"><ion-nav-back-button></ion-nav-back-button>\\n</ion-nav-bar><ion-tabs class=\\\"tabs-light tabs-photogram\\\"><ion-tab title=\\\"{{ \\'PHOTOGRAM.TITLE.HOME\\' | translate }}\\\" \\nicon=\\\"ion-android-home\\\" ui-sref=\\\"photogram.home\\\"><ion-nav-view name=\\\"tabHome\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SEARCH\\' | translate }}\\\" icon=\\\"ion-search\\\" ui-sref=\\\"photogram.search.list\\\"><ion-nav-view \\nname=\\\"tabSearch\\\"></ion-nav-view></ion-tab><ion-tab title=\\\"{{ \\'PHOTOGRAM.TITLE.SHARE\\' | translate }}\\\" icon=\\\"ion-camera\\\" \\nng-click=\\\"vm.postPhoto()\\\"><ion-nav-view name=\\\"tabCapture\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.ACTIVITY\\' | translate }}\\\" icon=\\\"ion-heart\\\" ui-sref=\\\"photogram.activity\\\"><ion-nav-view \\nname=\\\"tabActivity\\\"></ion-nav-view></ion-tab><ion-tab title=\\\"{{ \\'PHOTOGRAM.TITLE.PROFILE\\' | translate }}\\\" \\nicon=\\\"ion-person\\\" ui-sref=\\\"photogram.account\\\"><ion-nav-view name=\\\"tabProfile\\\"></ion-nav-view></ion-tab></ion-tabs>\\n</ion-view>\");\n$templateCache.put(\"app/module/user/module/avatar/user.avatar.html\",\"<ion-view title=\\\"{{ \\'USER.AVATAR.TITLE\\' | translate }}\\\"><ion-nav-bar class=\\\"bar bar-positive bar-mop\\\" \\nalign-title=\\\"left\\\"></ion-nav-bar><ion-content class=\\\"view-avatar\\\"><div class=\\\"row step1\\\"><div class=\\\"col\\\"><img \\nclass=\\\"avatar\\\" user-avatar ng-src=\\\"{{ ::currentUser.img._url || \\'img/user.png\\' }}\\\"></div></div><div class=\\\"step2\\\">\\n<label class=\\\"item item-input\\\"><i class=\\\"icon icon-envelope placeholder-icon\\\"></i> <input type=\\\"text\\\" \\nng-model=\\\"vm.form.email\\\" disabled=\\\"disabled\\\"></label><formly-form model=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" \\nform=\\\"vm.rForm\\\"></formly-form></div><div class=\\\"padding step3\\\"><button ng-click=\\\"vm.submitAvatar()\\\" \\nclass=\\\"button button-block button-positive\\\" translate=\\\"USER.BUTTON.NEXT\\\"></button></div></ion-content></ion-view>\");\n$templateCache.put(\"app/module/user/module/intro/user-intro.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><div class=\\\"bar bar-header\\\"><ion-language>\\n</ion-language></div><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"area1 step1\\\"><div class=\\\"logo\\\"><span \\nclass=\\\"icon2-logo\\\"></span></div><span class=\\\"desc\\\">{{\\'USER.DESC1\\' | translate}}<br>{{\\'USER.DESC2\\' | translate}}</span>\\n</div><div class=\\\"step2\\\"><facebook-login></facebook-login><div class=\\\"or\\\"><div class=\\\"line\\\"></div><span translate=\\\"or\\\">\\n</span><div class=\\\"line\\\"></div></div><button class=\\\"button button-block button-light button-outline\\\" \\nui-sref=\\\"user.register\\\" translate=\\\"USER.BUTTON.SIGNUP\\\"></button> <span class=\\\"term\\\">{{\\'USER.TERM\\' | translate}} <a \\nhref=\\\"\\\">{{\\'USER.TERM1\\' | translate}}</a> e <a href=\\\"\\\">{{\\'USER.TERM2\\' | translate}}</a></span></div><button \\nclass=\\\"button button-block button-light button-clear button-footer\\\" ui-sref=\\\"user.login\\\" \\ntranslate=\\\"USER.BUTTON.SIGNIN\\\"></button></ion-content></ion-view>\");\n$templateCache.put(\"app/module/user/module/layout/user-layout.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content padding=\\\"false\\\"><ion-nav-view></ion-nav-view></ion-content>\\n</ion-view>\");\n$templateCache.put(\"app/module/user/module/login/user-login.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><div class=\\\"bar bar-header\\\"><ion-language>\\n</ion-language></div><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step1\\\"><div class=\\\"logo\\\"><span \\nclass=\\\"icon2-logo\\\"></span></div><formly-form model=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"vm.rForm\\\"><button \\nclass=\\\"button button-block button-outline button-light\\\" type=\\\"button\\\" ng-disabled=\\\"vm.rForm.$invalid\\\" \\nng-click=\\\"vm.submitLogin(vm.rForm, vm.form)\\\" translate=\\\"USER.BUTTON.NEXT\\\"></button></formly-form></div><div \\nclass=\\\"step2\\\"><div class=\\\"or\\\"><div class=\\\"line\\\"></div><span>Ou</span><div class=\\\"line\\\"></div></div><facebook-login>\\n</facebook-login><button class=\\\"button button-block button-light button-outline\\\" ui-sref=\\\"user.register\\\" translate>\\nUSER.BUTTON.SIGNUP</button> <span class=\\\"term\\\">{{::\\'USER.TERM\\' | translate}} <a href=\\\"\\\">{{::\\'USER.TERM1\\' | translate}}\\n</a> e <a href=\\\"\\\">{{::\\'USER.TERM2\\' | translate}}</a></span></div><button \\nclass=\\\"button button-block button-light button-clear button-footer\\\" ui-sref=\\\"user.intro\\\" \\ntranslate=\\\"USER.BUTTON.SIGNUP2\\\"></button></ion-content></ion-view>\");\n$templateCache.put(\"app/module/user/module/merge/merge.html\",\"<ion-view id=\\\"user-login\\\"><ion-content class=\\\"view-avatar padding\\\"><h1>Merge Account</h1><div class=\\\"step1 padding\\\"><h5\\n translate>USER.MERGE</h5></div><div class=\\\"row step1\\\"><div class=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar \\nng-src=\\\"{{ vm.form.facebookimg }}\\\"></div></div><div class=\\\"step2\\\"><formly-form model=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" \\nform=\\\"rForm\\\"><input type=\\\"hidden\\\" ng-model=\\\"vm.form.facebookimg\\\"></formly-form></div><div class=\\\"padding step3\\\"><button\\n ng-click=\\\"vm.submit(rForm, vm.form)\\\" class=\\\"button button-block button-facebook\\\"><i class=\\\"icon ion-social-facebook\\\">\\n</i> <span translate>USER.BUTTON.MERGE</span></button></div></ion-content></ion-view>\");\n$templateCache.put(\"app/module/user/module/register/user-register.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><div class=\\\"bar bar-header\\\"><ion-language>\\n</ion-language></div><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step1\\\"><div class=\\\"logo\\\"><span \\nclass=\\\"icon2-logo\\\"></span></div><formly-form model=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"vm.rForm\\\"><div \\nclass=\\\"padding\\\"><button class=\\\"button button-block button-positive\\\" type=\\\"button\\\" ng-disabled=\\\"rForm.$invalid\\\" \\nng-click=\\\"vm.submitRegister(vm.rForm, vm.form)\\\" translate=\\\"USER.BUTTON.NEXT\\\"></button></div></formly-form></div><div \\nclass=\\\"step2\\\"><div class=\\\"or\\\"><div class=\\\"line\\\"></div><span>Ou</span><div class=\\\"line\\\"></div></div><facebook-login>\\n</facebook-login><span class=\\\"term\\\">{{::\\'USER.TERM\\' | translate}} <a href=\\\"\\\">{{::\\'USER.TERM1\\' | translate}}</a> e <a \\nhref=\\\"\\\">{{::\\'USER.TERM2\\' | translate}}</a></span></div><button \\nclass=\\\"button button-block button-light button-clear button-footer\\\" ui-sref=\\\"user.intro\\\" \\ntranslate=\\\"USER.BUTTON.SIGNIN\\\"></button></ion-content></ion-view>\");}]);\n}());\n"],"sourceRoot":"/source/"}