{"version":3,"sources":["scripts/app.js"],"names":["MarkerClusterer","map","opt_markers","opt_options","this","extend","google","maps","OverlayView","map_","markers_","clusters_","sizes","styles_","ready_","options","gridSize_","minClusterSize_","maxZoom_","imagePath_","MARKER_CLUSTER_IMAGE_PATH_","imageExtension_","MARKER_CLUSTER_IMAGE_EXTENSION_","zoomOnClick_","undefined","averageCenter_","setupStyles_","setMap","prevZoom_","getZoom","that","event","addListener","zoom","resetViewport","redraw","length","addMarkers","Cluster","markerClusterer","markerClusterer_","getMap","getGridSize","getMinClusterSize","isAverageCenter","center_","bounds_","clusterIcon_","ClusterIcon","getStyles","cluster","styles","opt_padding","getMarkerClusterer","padding_","cluster_","div_","sums_","visible_","angular","module","openTermsDirective","restrict","link","scope","elem","attr","openModal","href","window","cordova","ThemeableBrowser","open","statusbar","color","toolbar","height","title","showPageTitle","backButtonCanClose","bind","directive","configLanguage","$translatePartialLoaderProvider","$translateProvider","AppConfig","tmhDynamicLocaleProvider","useLoader","urlTemplate","useSanitizeValueStrategy","useLocalStorage","localeLocationPattern","langvar","navigator","language","userlanguage","userlangvar","split","preferredLocale","searchLang","_","some","locales","code","filter","item","preferredLanguage","moment","locale","$inject","config","constant","path","configCompile","$compileProvider","debugInfoEnabled","startParse","$ionicPlatform","$localStorage","$location","$rootScope","Parse","initialize","parse","appId","serverURL","server","unit","mapType","type","currentUser","User","current","console","log","runIonic","$translate","$cordovaGlobalization","$cordovaSplashscreen","ParsePush","ConnectMonitor","theme","ready","plugins","Keyboard","disableScroll","StatusBar","styleLightContent","registerBackButtonAction","preventDefault","lang","use","globalization","getPreferredLanguage","then","splashscreen","hide","init","configIonic","$ionicConfigProvider","platform","ios","backButton","previousTitleText","icon","android","views","swipeBackEnabled","text","tabs","position","navBar","alignTitle","maxCache","configFacebook","$facebookProvider","setAppId","facebookAppId","setPermissions","runFacebook","LangVar","userLanguage","userLangVar","substring","toUpperCase","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","run","app","name","url","image","routes","home","login","gaTrackingId","translation","DAO","tables","columns","username","email","facebookimg","gender","img","facebook","qtdFollow","status","createdAt","attributes","user_id","followId","location","isLiked","likes","action","userAvatar","userName","gallery_id","key","value","$stateProvider","$urlRouterProvider","addPart","state","templateUrl","controller","controllerAs","abstract","template","$state","localStorage","$reset","go","clear","tabHome","tabSearch","tabActivity","tabProfile","otherwise","prototype","obj1","obj2","object","property","apply","onAdd","setReady_","draw","size","i","push","width","fitMapToMarkers","marker","markers","getMarkers","bounds","LatLngBounds","getPosition","fitBounds","setStyles","isZoomOnClick","getTotalMarkers","setMaxZoom","maxZoom","getMaxZoom","calculator_","numStyles","index","count","dv","parseInt","Math","min","setCalculator","calculator","getCalculator","opt_nodraw","pushMarkerTo_","isAdded","repaint","addMarker","removeMarker_","indexOf","m","splice","removeMarker","removed","removeMarkers","r","createClusters_","getTotalClusters","setGridSize","setMinClusterSize","getExtendedBounds","projection","getProjection","tr","LatLng","getNorthEast","lat","lng","bl","getSouthWest","trPix","fromLatLngToDivPixel","x","y","blPix","ne","fromDivPixelToLatLng","sw","isMarkerInBounds_","contains","clearMarkers","opt_hide","remove","oldClusters","slice","setTimeout","distanceBetweenPoints_","p1","p2","R","dLat","PI","dLon","a","sin","cos","c","atan2","sqrt","addToClosestCluster_","distance","clusterToAddTo","center","getCenter","isMarkerInClusterBounds","mapBounds","getBounds","isMarkerAlreadyAdded","l","calculateBounds_","len","updateIcon","getSize","mz","sums","setCenter","setSums","show","triggerClusterClick","trigger","pos","getPosFromLatLng_","style","cssText","createCss","innerHTML","panes","getPanes","overlayMouseTarget","appendChild","isDragging","addDomListener","latlng","iconAnchor_","width_","height_","top","left","display","onRemove","removeChild","text_","index_","useStyle","max","url_","textColor_","anchor_","textSize_","backgroundPosition_","backgroundPosition","txtColor","txtSize","join","hashtag","$filter","target","replacedText","targetAttr","isDefined","replacePattern1","replace","replacePattern2","words","input","isNaN","inputWords","$provide","PLURAL_CATEGORY","ZERO","ONE","TWO","FEW","MANY","OTHER","DATETIME_FORMATS","AMPMS","DAY","ERANAMES","ERAS","FIRSTDAYOFWEEK","MONTH","SHORTDAY","SHORTMONTH","STANDALONEMONTH","WEEKENDRANGE","fullDate","longDate","medium","mediumDate","mediumTime","short","shortDate","shortTime","NUMBER_FORMATS","CURRENCY_SYM","DECIMAL_SEP","GROUP_SEP","PATTERNS","gSize","lgSize","maxFrac","minFrac","minInt","negPre","negSuf","posPre","posSuf","pluralCat","n","opt_precision","pt_br","defineLocale","months","monthsShort","weekdays","weekdaysShort","weekdaysMin","longDateFormat","LT","LTS","L","LL","LLL","LLLL","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","day","sameElse","relativeTime","future","past","mm","h","hh","dd","M","MM","yy","ordinalParse","ordinal","GalleryFormFactory","form","templateOptions","placeholder","instant","required","iconPlaceholder","focus","label","toggleClass","formComment","formShare","factory","UserFormFactory","register","profile","valueProp","labelProp","ActionSheetFactory","$ionicActionSheet","Camera","$cordovaActionSheet","$q","defer","cancelText","option","sourceType","getPicture","resolve","reject","promise","params","buttonLabels","addCancelButtonWithLabel","androidEnableCancelButton","androidTheme","actionsheet","ANDROID_THEMES","THEME_HOLO_LIGHT","btnIndex","actionSheet","buttons","titleText","cancel","buttonClicked","getLoggedUser","setSessionToken","sessionToken","mSessionToken","ensureLoggedIn","become","recoverPassword","requestPasswordReset","success","error","resetPassword","logIn","obj","password","logOut","CameraFactory","$cordovaCamera","PictureSourceType","CAMERA","PHOTOLIBRARY","quality","targetWidth","targetHeight","saveToPhotoAlbum","correctOrientation","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","fileInput","element","click","on","evt","tempImage","currentTarget","files","reader","FileReader","onload","result","readAsDataURL","toBase64Image","img_path","imageResizer","resizeImage","imageDataType","ImageResizer","IMAGE_DATA_TYPE_URL","resizeType","RESIZE_TYPE_FACTOR","format","RESIZE_TYPE_MIN_PIXEL","pixelDensity","storeImage","photoAlbum","service","ConnectMonitorFactory","$cordovaNetwork","watch","ionic","Platform","isWebView","onLine","isOnline","$apply","$on","networkState","addEventListener","e","DAOFactory","$interval","database","_db","sqlitePlugin","openDatabase","createFromLocation","_promises","forEach","table","query","_query","_tables","all","getLastSync","column","data","lastSync","rows","insert","_columns","_values","bindings","transaction","executeSql","results","copy","paginate","_table","_where","_join","_order","limit","page","_limit","_query1","total","TOTAL","fetchAll","output","DataUtilFactory","parseData","string","parts","Date","parseString","toLocaleDateString","getDate","inicio","year","getFullYear","month","getMonth","formatDate","milliseconds","getMonthName","meses","getFirstDay","getLastDay","DialogFactory","$cordovaDialogs","$ionicPopup","alert","message","confirm","buttonsText","res","FacebookFactory","$facebook","$cordovaFacebook","getCurrentUser","getLoginStatus","logout","postImage","api","method","picture","caption","description","postImage1","getFriends","getMe","fields","response","invite","showDialog","ui","friends","user","FacebookUtils","String","authResponse","userID","access_token","accessToken","expiration_date","getTime","toString","set","Boolean","save","me","ParseCloud","ParseObject","Object","getStatus","isApproved","update","destroy","feed","Query","order","ascending","descending","date","start","startOf","end","endOf","greaterThanOrEqualTo","toDate","lessThanOrEqualTo","doesNotExist","equalTo","include","skip","find","defineProperty","get","val","GeoPoint","latitude","longitude","itemId","create","gallery","GalleryFactory","objPlace","address","geo","comments","search","follow","likeGallery","galleryId","expiresAt","GeolocationFactory","getCurrentPosition","$cordovaGeolocation","geolocation","timeout","enableHighAccuracy","maximumAge","GoogleAnalyticsFactory","$cordovaGoogleAnalytics","trackingId","debugMode","startTrackerWithId","canTrack","warn","TAG","trackEvent","category","trackView","viewName","trackException","isFatal","InstallFactory","ParseCloudFactory","Cloud","upload","file","ext","filename","File","ParsePushFactory","$cordovaDevice","installation","installationId","installationObj","getDevice","getCordova","getModel","getPlatform","getUUID","getVersion","ParsePushPlugin","getInstallationId","getSubscriptions","subscriptions","pn","JSON","stringify","subscribeUser","channel","subscribe","callback","resp","err","unsubscribe","PhotogramShareFactory","$window","socialsharing","shareWithOptions","subject","ToastFactory","$cordovaToast","okType","msg","UserFactory","list","getFollowers","getLikers","getFollowing","signIn","device","model","uuid","version","userAgent","match","signUp","roleName","acl","ACL","setPublicReadAccess","setPublicWriteAccess","setACL","signInViaFacebook","authData","facebookAuthData","findByEmail","updateWithFacebookData","fetch","userFetched","getPublicData","first","userData","Promise","setPhoto","parseFile","photo","userId","validateUsername","validateEmail","delete","signinModalDirective","$ionicModal","Loading","Toast","UserForm","signinModalLink","$scope","formFields","routeLogged","submitLogin","rForm","$valid","closeModal","fromTemplateUrl","animation","focusFirstInput","modal","signupModalDirective","signupModalLink","submitRegister","buyDirective","$cordovaInAppBrowser","buyLink","closeButton","imagePressed","align","compareToDirective","targetModel","require","attrs","ctrl","compare","e1","e2","$watch","newValue","$setValidity","distanceModalDirective","distanceModalLink","storage","distances","onDistanceSelected","closeDistanceModal","emailValidatorDirective","emailValidatorLink","ngModel","$asyncValidators","modelValue","viewValue","facebookLoginDirective","Facebook","Dialog","facebookLoginLink","facebookLogin","loading","fbAuthData","fbData","tempUser","$broadcast","facebookStatus","focusMeDirective","$timeout","openKeyboard","heartDirective","heartLink","addClass","ionLoading","runLoading","$ionicLoading","showLoading","hideLoading","seconds","PhotogramLoadingDirective","photogramFollowDirective","Photogram","modalFollow","getFollow","photoGridDirective","Gallery","Share","FeedbackModal","photoGridCtrl","isLoadingViewShown","isGalleriesViewShown","isErrorViewShown","isEmptyViewShown","showGalleries","showErrorView","showEmptyView","ensureMoreData","isMoreData","setGalleries","setCurrentPage","loadFeed","objectId","unshift","onReload","onLoadMore","moreDataCanBeLoaded","showLoadingView","actionButtons","share","$emit","buttonDelete","photoCommentDirective","$http","$ionicScrollDelegate","GalleryComment","GalleryForm","nocomments","galleryObj","openModalComment","submitComment","deleteComment","editComment","getComments","myIndexValue","searchPeople","term","peopleList","each","imageUrl","_url","bio","people","when","getPeopleTextRaw","onTap","scrollBottom","dataForm","photoLikeDirective","_model","progress","liked","likesTotal","photoListDirective","photoListController","openComment","load","openLikers","profileModalEditDirective","linkFacebook","submitUpdateProfile","facebookLink","profileModalDirective","profileModalLink","loadingFollow","userObj","isFollow","followersTotal","modalProfile","changeTab","tab","grid","ionSearchDirective","getData","watchSearch","minLength","str","source","settingsModalDirective","Auth","languages","sref","usernameValidatorDirective","usernameValidatorLink","FeedbackModalFactory","GalleryFeedback","GalleryFeedbackForm","submitFeedback","$new","photogramId","GalleryFeedbackFormFactory","feedbackDirective","PhotogramFeedback","PhotogramFeedbackForm","photogram","submit","GalleryCommentController","$stateParams","$ionicHistory","comment","canEdit","goBack","formEdit","LoadingController","intro","ProfileController","vm","galleries","empty","more","isMe","openFollowers","openFollowing","MainTabController","PhotoService","PhotoFilter","ParseFile","styleDefault","postPhoto","modalPost","editFilter","modalFilter","closeAddress","close","base64","imageUploaded","AccountController","getFollower","loadingFollowers","loadingFollowing","loadingPhotos","ActivityController","GalleryActivity","openProfile","HomeController","SearchCtrl","onSearch","SearchMapController","Geolocation","removeGallerys","mapOptions","setPosition","mapTypeId","MapTypeId","ROADMAP","Map","myPosition","coords","loadGallerys","errorMessage","markerOption","Animation","DROP","Size","scaledSize","origin","Point","anchor","Marker","imagePath","latlngbounds","setGallerys","imageThumb","maxRating","scopes","states","onSearchHere","onGalleryClicked","UserAvatarController","submitAvatar","userAvatarDirective","ActionSheet","UserFollowerController","users","clearSearch","searchValue","UserFollowingController","UserIntroController","UserLikerController","UserListController","UserMergeController","recoveryPassDirective","recovery","erro","button","$viewValue","isUndefined","forgot","UserRecoveryPassController","submitForgot","WalkthroughController","$ionicSlideBoxDelegate","currentPlatform","slideIndex","slideChanged","next","previous","slides","ionLanguageDirective","modalLanguageLink","selectLanguage","GeoServiceFactory","getLocation","posOptions","findMe","getGoogleAddress","logErr","address_normal","formatted_address","address_components","imagem","numero","short_name","rua","long_name","bairro","cidade","estado","uf","pais","paisCode","cep","w","parseAddress","place","resume","geometry","addressType","types","componentForm","componentFormName","street","number","city","country","searchAddress","deferred","autocompleteService","getQueryPredictions","getDetails","placeId","detailsService","places","AutocompleteService","PlacesService","street_number","route","locality","sublocality","neighborhood","political","administrative_area_level_1","postal_code","ionLocationDirective","GeoService","ionLocationLink","suggestions","selectPlace","place_id","closeModalLocation","choosePlace","modalLocation","fromTemplate","loading1","ionCropDirective","$jrCrop","ionCropLink","getElem","fileUpload","crop","chooseText","canvas","toDataURL","cropSave","sliderFilterDirective","sliderFilterLink","slider","setSlider","PhotoFilterFactory","elementId","texture","imageFilters","thumbFilter","Image","canvas2","brightnessContrast","brightness","contrast","hueSaturation","hue","saturation","vibrance","denoise","unsharpMask","radius","strength","noise","sepia","vignette","amount","Filter","func","imageFile","nubs","call","resFilter","imageFilter","reset","filters","Adjust","getImage","img3","image3","texture3","canvas3","fx","addNub","addSlider","step","setCode","values","keys","exponent","q","b","loadContentsOf","gl","A","fromElement","B","UNSIGNED_BYTE","getExtension","RGBA","FLOAT","drawTo","g","spareTexture","extraTexture","flippedShader","isInitialized","C","getDefaultShader","drawRect","D","f","uniforms","swapWith","E","F","G","Uint8Array","readPixels","k","arguments","p","z","xa","ya","u","y2","sort","H","t","floor","interpolate","I","initFromBytes","curves","textures","J","texSize","K","N","ensureFormat","triangleBlur","originalTexture","unuse","O","P","Q","lensBlurPrePass","lensBlur0","lensBlur1","lensBlur2","texture1","pow","power","delta0","delta1","tiltShift","blurRadius","gradientRadius","delta","S","T","zoomBlur","U","colorHalftone","angle","scale","V","dotScreen","W","edgeWork1","edgeWork2","X","hexagonalPixelate","Y","ink","Z","bulgePinch","$","matrixWarp","Array","concat","matrix","useTextureSpace","aa","ba","swirl","v","createFramebuffer","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","LINEAR","Float32Array","createProgram","createShader","VERTEX_SHADER","FRAGMENT_SHADER","shaderSource","compileShader","attachShader","linkProgram","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STREAM_DRAW","enableVertexAttribArray","vertexAttribPointer","useProgram","viewport","drawArrays","POINTS","$OES_texture_float_linear$","enumerable","configurable","writable","getContext","getSupportedExtensions","WebGLRenderingContext","premultipliedAlpha","contents","getPixelArray","perspective","edgeWork","lensBlur","splineInterpolate","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","texCoordAttribute","vertexAttribute","program","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","hasOwnProperty","getUniformLocation","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","uniform1f","uniform1i","getParameter","VIEWPORT","vertexBuffer","STATIC_DRAW","texCoordBuffer","getAttribLocation","TRIANGLE_STRIP","defaultShader","clearRect","videoWidth","videoHeight","deleteTexture","activeTexture","TEXTURE0","framebuffer","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","Error","fillUsingCanvas","toImage","createImageData","putImageData","jrCropController","View","inherit","imgWidth","imgHeight","imgSelect","imgFull","posX","posY","rotate","last_scale","last_posX","last_posY","last_rotate","self","loadImage","naturalWidth","naturalHeight","el","querySelector","cloneNode","bindHandlers","initImage","imgAspectRatio","selectAspectRatio","centerX","centerY","setImageTransform","setPosWithinBoundaries","calcMaxPos","min_pos_x","max_pos_x","min_pos_y","max_pos_y","currWidth","currHeight","scaleMin","transforming_correctX","transforming_correctY","scaleMax","image_ratio","cropper_ratio","prevent_default_directions","onGesture","gesture","deltaX","deltaY","rotation","transform","CSS","TRANSFORM","context","correctX","correctY","sourceX","sourceY","translate","drawImage","prop","defaultOptions","aspectRatio","initOptions","_options","PhotoServiceFactory","$cordovaCapture","filterModal","openFilter","image64","actionShowFilter","showFilter","closeModalFilter","cropImage","cropModal","applyFilter","filterEdit","selectFilter","doneFilter","cancelFilter","sliders","closeFilter","submitFilter","dataUrl","setting","filterImage","setOptions","capture","buttonCancel","deviceInformation","allowRotation","allowEdit","popoverOptions","CameraPopoverOptions","jrCrop","getVideo","captureVideo","duration","mediaFiles","fullPath","isIOS","VideoFactory","createFileEntry","fileURI","resolveLocalFileSystemURL","entry","copyFile","fail","fileEntry","substr","lastIndexOf","newName","makeid","dataDirectory","fileSystem2","copyTo","succ","onCopySuccess","nativeURL","PKVideoThumbnail","createThumbnail","prevSucc","prevImageSuccess","correctUrl","possible","charAt","random","saveVideo","localURL","$templateCache","put"],"mappings":"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","file":"scripts/app-5b0a99fbb3.js","sourcesContent":["(function () {\n    'use strict';\n    angular\n        .module('starter', [\n            'ionic',\n            'formlyIonic',\n            'ngMessages',\n            'ngCookies',\n            'ngStorage',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale', // angular-dynamic-locale\n            'angularMoment',\n            'ngFacebook',\n            'angular-cache',\n            'ngSanitize',\n            'mentio',\n            'ion-affix',\n            'jett.ionic.scroll.sista',\n            'ngCordova',\n            'ionic.components',\n            'app.main',\n        ]);\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main', [\n            'ionic',\n            'ngCordova',\n        ]);\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('ionic.components', [\n            'ion-language',\n            'ion-location',\n            // 'ion-affix',\n            // 'ngCache',\n            'ion-photo'\n        ]);\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('href', openTermsDirective);\n\n    function openTermsDirective() {\n        return {\n            restrict: 'A',\n            link    : function (scope, elem, attr) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var href = attr.href;\n\n                    if (window.cordova) {\n                        // Keep in mind that you must add your own images to native resource.\n                        // Images below are for sample only. They are not imported by this plugin.\n                        window.cordova.ThemeableBrowser.open(href, '_blank', {\n                            statusbar         : {\n                                color: '#ffffffff'\n                            },\n                            toolbar           : {\n                                height: 44,\n                                color : '#f0f0f0ff'\n                            },\n                            title             : {\n                                color        : '#000',\n                                showPageTitle: true\n                            },\n                            backButtonCanClose: true\n                        })\n                        ;\n                    } else {\n                        window.open(href);\n                    }\n\n                    return false;\n                }\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main');\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('ion-language', [\n            'ngCookies',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale' // angular-dynamic-locale\n        ])\n        .config(configLanguage);\n\n    function configLanguage($translatePartialLoaderProvider, $translateProvider, AppConfig, tmhDynamicLocaleProvider) {\n\n        // angular-translate configuration\n        $translateProvider.useLoader('$translatePartialLoader', {\n            urlTemplate: '{part}/i18n/{lang}.json'\n        });\n        $translateProvider.useSanitizeValueStrategy(null);\n\n        // Translate Config\n        //$translateProvider.useMissingTranslationHandlerLog();\n        $translateProvider.useLocalStorage(); // saves selected language to localStorage\n        tmhDynamicLocaleProvider.localeLocationPattern('../bower_components/angular-i18n/angular-locale_{{locale}}.js');\n\n        var langvar     = navigator.language || navigator.userlanguage;\n        var userlangvar = langvar.split('-')[0];\n        var language    = AppConfig.preferredLocale;\n        var searchLang  = _.some(AppConfig.locales, {\n            code: userlangvar\n        });\n\n        if (searchLang) {\n            language = AppConfig.locales.filter(function (item) {\n                return language == item.code\n            })[0].code;\n        }\n        $translateProvider.preferredLanguage(language);\n        moment.locale(language);\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('ion-location', [\n      'ionic'\n    ]);\n\n})();\n(function () {\n    'use strict';\n    angular.module('ion-photo', [\n        'ionic',\n        'ngCordova',\n        'jrCrop'\n    ]).constant('config', {\n        path: 'app/component/ion-photo'\n    })\n\n})();\n(function () {\n    'use strict';\n\n    angular\n        .module('starter')\n        .run(startParse)\n        .run(runIonic)\n        .run(runFacebook)\n        .config(configCompile)\n        .config(configFacebook)\n        .config(configIonic);\n\n    function configCompile($compileProvider) {\n        $compileProvider.debugInfoEnabled(false);\n    }\n\n    function startParse(AppConfig, $ionicPlatform, $localStorage, $location, $rootScope) {\n        Parse.initialize(AppConfig.parse.appId);\n        Parse.serverURL = AppConfig.parse.server;\n\n        if (!$localStorage.unit) {\n            $localStorage.unit = AppConfig.map.unit;\n        }\n\n        if (!$localStorage.mapType) {\n            $localStorage.mapType = AppConfig.map.type;\n        }\n\n        $rootScope.currentUser = Parse.User.current();\n        console.log($rootScope.currentUser);\n        if (!$rootScope.currentUser) {\n            $location.path('/');\n        }\n    }\n\n    function runIonic($ionicPlatform, $rootScope, $localStorage, $translate, $cordovaGlobalization, $cordovaSplashscreen, ParsePush, ConnectMonitor, AppConfig, User) {\n\n        // Set Theme Color\n        $rootScope.theme = AppConfig.theme;\n\n        $ionicPlatform.ready(function () {\n\n            if (window.cordova && window.cordova.plugins.Keyboard) {\n                cordova.plugins.Keyboard.disableScroll(true);\n                window.StatusBar.styleLightContent();\n            }\n\n            // Remove back button android\n            $ionicPlatform.registerBackButtonAction(function (event) {\n                event.preventDefault();\n            }, 100);\n\n            if ($localStorage.lang) {\n                $translate.use($localStorage.lang);\n            } else {\n                if (typeof navigator.globalization !== 'undefined') {\n                    $cordovaGlobalization.getPreferredLanguage().then(function (language) {\n                        $translate.use((language.value).split('-')[0]);\n                    }, null);\n                }\n            }\n\n            // Hide Splash Screen\n            if (navigator && navigator.splashscreen) {\n                $cordovaSplashscreen.hide();\n            }\n\n            // Start Parse Push\n            if (Parse.User.current()) {\n                ParsePush.init();\n            }\n\n            //ConnectMonitor.watch();\n        });\n\n\n    }\n\n    function configIonic($ionicConfigProvider) {\n        $ionicConfigProvider.platform.ios.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n        $ionicConfigProvider.platform.android.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n        $ionicConfigProvider.views.swipeBackEnabled(false);\n        $ionicConfigProvider.backButton.text(' ').icon('ion-ios-arrow-left');\n        //$ionicConfigProvider.backButton.previousTitleText (false).text ('Voltar').icon ('ion-ios-arrow-left');\n        //$ionicConfigProvider.views.transition ('platform');\n        $ionicConfigProvider.tabs.position('bottom');\n        $ionicConfigProvider.navBar.alignTitle('center');\n        $ionicConfigProvider.views.maxCache(1);\n    }\n\n    // Facebook\n    function configFacebook($facebookProvider, AppConfig) {\n        if (!window.cordova) {\n            $facebookProvider.setAppId(AppConfig.facebookAppId);\n            $facebookProvider.setPermissions('id,name,email,user_likes,bio');\n        }\n    }\n\n    function runFacebook() {\n\n        if (!window.cordova) {\n            console.log('Facebook Browser');\n            var LangVar     = window.navigator.language || window.navigator.userLanguage;\n            var userLangVar = LangVar.substring(0, 2) + '_' + LangVar.substring(3, 5).toUpperCase();\n\n            (function (d, s, id) {\n                var js, fjs = d.getElementsByTagName(s)[0];\n                if (d.getElementById(id)) {return;}\n                js     = d.createElement(s);\n                js.id  = id;\n                js.src = 'http://connect.facebook.net/' + userLangVar + '/sdk.js';\n                fjs.parentNode.insertBefore(js, fjs);\n            }(document, 'script', 'facebook-jssdk'));\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('ionic').constant('AppConfig', AppConfig());\n\n    function AppConfig() {\n        return {\n            path           : 'app/module/photogram',\n            app            : {\n                name : 'Photogram',\n                url  : 'http://photogramapp.com',\n                image: 'http://photogramapp.com/social-share.jpg',\n            },\n            routes         : {\n                home : 'tab.home',\n                login: 'user.intro'\n            },\n            theme : 'light',\n            gaTrackingId   : 'UA-69485876-2',\n            facebookAppId  : '1024016557617380',\n            parse          : {\n                appId : 'myAppId',\n                server: 'https://photogram.codevibe.io/parse/',\n            },\n            map            : {\n                unit: 'mi',\n                type: 'normal',\n            },\n            locales        : [\n                {\n                    translation: 'portugues',\n                    code       : 'pt'\n                },\n                {\n                    translation: 'english',\n                    code       : 'en'\n                },\n                {\n                    translation: 'turkish',\n                    code       : 'tr'\n                },\n                {\n                    translation: 'persian',\n                    code       : 'fa'\n                },\n                {\n                    translation: 'german',\n                    code       : 'de'\n                }\n            ],\n            preferredLocale: 'en',\n            DAO            : {\n                name  : 'photogram_db',\n                tables: [\n                    {\n                        name   : 'User',\n                        columns: {\n                            id         : 'TEXT PRIMARY KEY',\n                            name       : 'TEXT',\n                            username   : 'TEXT',\n                            email      : 'TEXT',\n                            language   : 'TEXT',\n                            facebookimg: 'TEXT',\n                            gender     : 'TEXT',\n                            img        : 'TEXT',\n                            facebook   : 'INTEGER',\n                            qtdFollow  : 'INTEGER',\n                            status     : 'TEXT',\n                            createdAt  : 'INTEGER',\n                            attributes : 'TEXT'\n                        }\n                    },\n                    {\n                        name   : 'UserFollow',\n                        columns: {\n                            id      : 'TEXT PRIMARY KEY',\n                            user_id : 'TEXT',\n                            followId: 'TEXT'\n                        },\n                    },\n                    {\n                        name   : 'Gallery',\n                        columns: {\n                            id       : 'TEXT PRIMARY KEY',\n                            img      : 'TEXT',\n                            title    : 'TEXT',\n                            user_id  : 'TEXT',\n                            location : 'TEXT',\n                            isLiked  : 'BOOLEAN',\n                            likes    : 'INTEGER',\n                            createdAt: 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GalleryActivity',\n                        columns: {\n                            id        : 'TEXT PRIMARY KEY',\n                            action    : 'TEXT',\n                            img       : 'TEXT',\n                            userAvatar: 'TEXT',\n                            userName  : 'TEXT',\n                            user_id   : 'TEXT',\n                            gallery_id: 'TEXT',\n                            createdAt : 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GalleryComment',\n                        columns: {\n                            id        : 'TEXT PRIMARY KEY',\n                            name      : 'TEXT',\n                            user_id   : 'TEXT',\n                            userName  : 'TEXT',\n                            gallery_id: 'TEXT',\n                            createdAt : 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GallerySetting',\n                        columns: {\n                            key  : 'TEXT',\n                            value: 'TEXT'\n                        }\n                    }\n                ]\n            }\n        };\n    }\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').config(routes);\n\n    function routes($stateProvider, $urlRouterProvider, $translatePartialLoaderProvider) {\n\n        // Translation\n        $translatePartialLoaderProvider.addPart('app');\n\n        $stateProvider\n\n            .state('loading', {\n                url         : '/',\n                templateUrl : 'app/main/loading/loading.html',\n                controller  : 'LoadingCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('walkthrough', {\n                url         : '/walkthrough',\n                templateUrl : 'app/main/walkthrough/walkthrough.html',\n                controller  : 'WalkthroughCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('user', {\n                url        : '/user',\n                abstract   : true,\n                templateUrl: 'app/main/user-layout/user-layout.html'\n            })\n\n            .state('user.avatar', {\n                url         : '/avatar',\n                templateUrl : 'app/main/user-avatar/user-avatar.html',\n                controller  : 'UserAvatarCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('user.intro', {\n                url        : '/intro',\n                templateUrl: 'app/main/user-intro/user-intro.html',\n                controller : 'UserIntroCtrl'\n            })\n\n            .state('user.merge', {\n                url         : '/merge',\n                controller  : 'UserMergeCtrl',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/user-merge/merge.html'\n            })\n\n            .state('logout', {\n                url         : '/logout',\n                template    : '<ion-view view-title=\"Logout\" cache-view=\"false\"><ion-content></ion-content></ion-view>',\n                controller  : function (User, $localStorage, $state) {\n                    //Parse.User.logOut();\n                    delete window.localStorage['Parse/myAppId/currentUser'];\n                    delete window.localStorage['Parse/myAppId/installationId'];\n                    $localStorage.$reset({});\n                    $state.go('user.intro', {clear: true});\n                },\n                controllerAs: 'vm'\n            })\n\n\n            .state('profile', {\n                url         : '/profile/:username',\n                templateUrl : 'app/main/profile/profile.html',\n                controllerAs: 'vm',\n            })\n\n\n            .state('tab', {\n                url         : '/tab',\n                abstract    : true,\n                controller  : 'MainTabCtrl',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/tab/main-tab.html'\n            })\n\n            .state('tab.home', {\n                url  : '/home',\n                views: {\n                    tabHome: {\n                        controller  : 'HomeCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-home/home.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfile', {\n                url  : '/home/:username',\n                views: {\n                    tabHome: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('galleryComments', {\n                url         : '/home/:galleryId/comments',\n                controller  : 'GalleryComment',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/gallery-comment/gallery-comment.html'\n            })\n\n            .state('tab.homeGalleryLikers', {\n                url  : '/home/:galleryId/likers',\n                views: {\n                    tabHome: {\n                        controller  : 'UserLikersCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-likers/user-likers.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfileFollowers', {\n                url  : '/home/:username/followers',\n                views: {\n                    tabHome: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfileFollowing', {\n                url  : '/home/:username/follwing',\n                views: {\n                    tabHome: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.homeUserlist', {\n                url  : '/home/userlist',\n                views: {\n                    tabHome: {\n                        controller  : 'UserListCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-list/user-list.html'\n                    }\n                }\n            })\n\n            .state('tab.search', {\n                url  : '/search/:text',\n                views: {\n                    tabSearch: {\n                        controller  : 'SearchCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-search/search.html',\n                    }\n                }\n            })\n\n            .state('tab.searchProfile', {\n                url  : '/search/:username',\n                views: {\n                    tabSearch: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('tab.searchProfileFollowers', {\n                url  : '/search/:username/followers',\n                views: {\n                    tabSearch: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.map', {\n                url  : '/map',\n                views: {\n                    tabSearch: {\n                        controller  : 'SearchMapCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-search-map/searchMap.html',\n                    }\n                }\n            })\n\n            .state('tab.mapProfile', {\n                url  : '/map/:username',\n                views: {\n                    tabSearch: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('tab.mapProfileFollowers', {\n                url  : '/map/:username/followers',\n                views: {\n                    tabSearch: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.mapProfileFollowing', {\n                url  : '/map/:username/follwing',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.account', {\n                url  : '/account',\n                views: {\n                    tabProfile: {\n                        controller  : 'AccountCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-account/account.html'\n                    }\n                }\n            })\n\n            .state('tab.accountFollowers', {\n                url  : '/account/:username/followers',\n                views: {\n                    tabProfile: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.accountFollowing', {\n                url  : '/account/:username/follwing',\n                views: {\n                    tabProfile: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.activity', {\n                url  : '/activity',\n                views: {\n                    tabActivity: {\n                        controller  : 'ActivityCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-activity/activity.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfile', {\n                url  : '/activity/:username',\n                views: {\n                    tabActivity: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfileFollowers', {\n                url  : '/activity/:username/followers',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfileFollowing', {\n                url  : '/activity/:username/follwing',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n        ;\n\n        // Translation\n        //$translatePartialLoaderProvider.addPart('app/main');\n        $urlRouterProvider.otherwise('/');\n\n    }\n\n\n})();\n// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @externs_url https://raw.githubusercontent.com/google/closure-compiler/master/contrib/externs/maps/google_maps_api_v3.js\n// ==/ClosureCompiler==\n\n/**\n * @name MarkerClusterer for Google Maps v3\n * @version version 1.0\n * @author Luke Mahe\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of\n * markers.\n * <br/>\n * This is a v3 implementation of the\n * <a href=\"http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/\"\n * >v2 MarkerClusterer</a>.\n */\n\n/**\n * @license\n * Copyright 2010 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * A Marker Clusterer that clusters markers.\n *\n * @param {google.maps.Map} map The Google map to attach to.\n * @param {Array.<google.maps.Marker>=} opt_markers Optional markers to add to\n *   the cluster.\n * @param {Object=} opt_options support the following options:\n *     'gridSize': (number) The grid size of a cluster in pixels.\n *     'maxZoom': (number) The maximum zoom level that a marker can be part of a\n *                cluster.\n *     'zoomOnClick': (boolean) Whether the default behaviour of clicking on a\n *                    cluster is to zoom into it.\n *     'averageCenter': (boolean) Whether the center of each cluster should be\n *                      the average of all markers in the cluster.\n *     'minimumClusterSize': (number) The minimum number of markers to be in a\n *                           cluster before the markers are hidden and a count\n *                           is shown.\n *     'styles': (object) An object that has style properties:\n *       'url': (string) The image url.\n *       'height': (number) The image height.\n *       'width': (number) The image width.\n *       'anchor': (Array) The anchor position of the label text.\n *       'textColor': (string) The text color.\n *       'textSize': (number) The text size.\n *       'backgroundPosition': (string) The position of the backgound x, y.\n *       'iconAnchor': (Array) The anchor position of the icon x, y.\n * @constructor\n * @extends google.maps.OverlayView\n */\nfunction MarkerClusterer(map, opt_markers, opt_options) {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    this.extend(MarkerClusterer, google.maps.OverlayView);\n    this.map_ = map;\n\n    /**\n     * @type {Array.<google.maps.Marker>}\n     * @private\n     */\n    this.markers_ = [];\n\n    /**\n     *  @type {Array.<Cluster>}\n     */\n    this.clusters_ = [];\n\n    this.sizes = [53, 56, 66, 78, 90];\n\n    /**\n     * @private\n     */\n    this.styles_ = [];\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.ready_ = false;\n\n    var options = opt_options || {};\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.gridSize_ = options['gridSize'] || 60;\n\n    /**\n     * @private\n     */\n    this.minClusterSize_ = options['minimumClusterSize'] || 2;\n\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.maxZoom_ = options['maxZoom'] || null;\n\n    this.styles_ = options['styles'] || [];\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.imagePath_ = options['imagePath'] ||\n        this.MARKER_CLUSTER_IMAGE_PATH_;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.imageExtension_ = options['imageExtension'] ||\n        this.MARKER_CLUSTER_IMAGE_EXTENSION_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.zoomOnClick_ = true;\n\n    if (options['zoomOnClick'] != undefined) {\n        this.zoomOnClick_ = options['zoomOnClick'];\n    }\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.averageCenter_ = false;\n\n    if (options['averageCenter'] != undefined) {\n        this.averageCenter_ = options['averageCenter'];\n    }\n\n    this.setupStyles_();\n\n    this.setMap(map);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.prevZoom_ = this.map_.getZoom();\n\n    // Add the map event listeners\n    var that = this;\n    google.maps.event.addListener(this.map_, 'zoom_changed', function() {\n        var zoom = that.map_.getZoom();\n\n        if (that.prevZoom_ != zoom) {\n            that.prevZoom_ = zoom;\n            that.resetViewport();\n        }\n    });\n\n    google.maps.event.addListener(this.map_, 'idle', function() {\n        that.redraw();\n    });\n\n    // Finally, add the markers\n    if (opt_markers && opt_markers.length) {\n        this.addMarkers(opt_markers, false);\n    }\n}\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_ = '../images/m';\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_ = 'png';\n\n\n/**\n * Extends a objects prototype by anothers.\n *\n * @param {Object} obj1 The object to be extended.\n * @param {Object} obj2 The object to extend with.\n * @return {Object} The new extended object.\n * @ignore\n */\nMarkerClusterer.prototype.extend = function(obj1, obj2) {\n    return (function(object) {\n        for (var property in object.prototype) {\n            this.prototype[property] = object.prototype[property];\n        }\n        return this;\n    }).apply(obj1, [obj2]);\n};\n\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.onAdd = function() {\n    this.setReady_(true);\n};\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.draw = function() {};\n\n/**\n * Sets up the styles object.\n *\n * @private\n */\nMarkerClusterer.prototype.setupStyles_ = function() {\n    if (this.styles_.length) {\n        return;\n    }\n\n    for (var i = 0, size; size = this.sizes[i]; i++) {\n        this.styles_.push({\n            url: this.imagePath_ + (i + 1) + '.' + this.imageExtension_,\n            height: size,\n            width: size\n        });\n    }\n};\n\n/**\n *  Fit the map to the bounds of the markers in the clusterer.\n */\nMarkerClusterer.prototype.fitMapToMarkers = function() {\n    var markers = this.getMarkers();\n    var bounds = new google.maps.LatLngBounds();\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        bounds.extend(marker.getPosition());\n    }\n\n    this.map_.fitBounds(bounds);\n};\n\n\n/**\n *  Sets the styles.\n *\n *  @param {Object} styles The style to set.\n */\nMarkerClusterer.prototype.setStyles = function(styles) {\n    this.styles_ = styles;\n};\n\n\n/**\n *  Gets the styles.\n *\n *  @return {Object} The styles object.\n */\nMarkerClusterer.prototype.getStyles = function() {\n    return this.styles_;\n};\n\n\n/**\n * Whether zoom on click is set.\n *\n * @return {boolean} True if zoomOnClick_ is set.\n */\nMarkerClusterer.prototype.isZoomOnClick = function() {\n    return this.zoomOnClick_;\n};\n\n/**\n * Whether average center is set.\n *\n * @return {boolean} True if averageCenter_ is set.\n */\nMarkerClusterer.prototype.isAverageCenter = function() {\n    return this.averageCenter_;\n};\n\n\n/**\n *  Returns the array of markers in the clusterer.\n *\n *  @return {Array.<google.maps.Marker>} The markers.\n */\nMarkerClusterer.prototype.getMarkers = function() {\n    return this.markers_;\n};\n\n\n/**\n *  Returns the number of markers in the clusterer\n *\n *  @return {Number} The number of markers.\n */\nMarkerClusterer.prototype.getTotalMarkers = function() {\n    return this.markers_.length;\n};\n\n\n/**\n *  Sets the max zoom for the clusterer.\n *\n *  @param {number} maxZoom The max zoom level.\n */\nMarkerClusterer.prototype.setMaxZoom = function(maxZoom) {\n    this.maxZoom_ = maxZoom;\n};\n\n\n/**\n *  Gets the max zoom for the clusterer.\n *\n *  @return {number} The max zoom level.\n */\nMarkerClusterer.prototype.getMaxZoom = function() {\n    return this.maxZoom_;\n};\n\n\n/**\n *  The function for calculating the cluster icon image.\n *\n *  @param {Array.<google.maps.Marker>} markers The markers in the clusterer.\n *  @param {number} numStyles The number of styles available.\n *  @return {Object} A object properties: 'text' (string) and 'index' (number).\n *  @private\n */\nMarkerClusterer.prototype.calculator_ = function(markers, numStyles) {\n    var index = 0;\n    var count = markers.length;\n    var dv = count;\n    while (dv !== 0) {\n        dv = parseInt(dv / 10, 10);\n        index++;\n    }\n\n    index = Math.min(index, numStyles);\n    return {\n        text: count,\n        index: index\n    };\n};\n\n\n/**\n * Set the calculator function.\n *\n * @param {function(Array, number)} calculator The function to set as the\n *     calculator. The function should return a object properties:\n *     'text' (string) and 'index' (number).\n *\n */\nMarkerClusterer.prototype.setCalculator = function(calculator) {\n    this.calculator_ = calculator;\n};\n\n\n/**\n * Get the calculator function.\n *\n * @return {function(Array, number)} the calculator function.\n */\nMarkerClusterer.prototype.getCalculator = function() {\n    return this.calculator_;\n};\n\n\n/**\n * Add an array of markers to the clusterer.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarkers = function(markers, opt_nodraw) {\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        this.pushMarkerTo_(marker);\n    }\n    if (!opt_nodraw) {\n        this.redraw();\n    }\n};\n\n\n/**\n * Pushes a marker to the clusterer.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.pushMarkerTo_ = function(marker) {\n    marker.isAdded = false;\n    if (marker['draggable']) {\n        // If the marker is draggable add a listener so we update the clusters on\n        // the drag end.\n        var that = this;\n        google.maps.event.addListener(marker, 'dragend', function() {\n            marker.isAdded = false;\n            that.repaint();\n        });\n    }\n    this.markers_.push(marker);\n};\n\n\n/**\n * Adds a marker to the clusterer and redraws if needed.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarker = function(marker, opt_nodraw) {\n    this.pushMarkerTo_(marker);\n    if (!opt_nodraw) {\n        this.redraw();\n    }\n};\n\n\n/**\n * Removes a marker and returns true if removed, false if not\n *\n * @param {google.maps.Marker} marker The marker to remove\n * @return {boolean} Whether the marker was removed or not\n * @private\n */\nMarkerClusterer.prototype.removeMarker_ = function(marker) {\n    var index = -1;\n    if (this.markers_.indexOf) {\n        index = this.markers_.indexOf(marker);\n    } else {\n        for (var i = 0, m; m = this.markers_[i]; i++) {\n            if (m == marker) {\n                index = i;\n                break;\n            }\n        }\n    }\n\n    if (index == -1) {\n        // Marker is not in our list of markers.\n        return false;\n    }\n\n    marker.setMap(null);\n\n    this.markers_.splice(index, 1);\n\n    return true;\n};\n\n\n/**\n * Remove a marker from the cluster.\n *\n * @param {google.maps.Marker} marker The marker to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n * @return {boolean} True if the marker was removed.\n */\nMarkerClusterer.prototype.removeMarker = function(marker, opt_nodraw) {\n    var removed = this.removeMarker_(marker);\n\n    if (!opt_nodraw && removed) {\n        this.resetViewport();\n        this.redraw();\n        return true;\n    } else {\n        return false;\n    }\n};\n\n\n/**\n * Removes an array of markers from the cluster.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n */\nMarkerClusterer.prototype.removeMarkers = function(markers, opt_nodraw) {\n    var removed = false;\n\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        var r = this.removeMarker_(marker);\n        removed = removed || r;\n    }\n\n    if (!opt_nodraw && removed) {\n        this.resetViewport();\n        this.redraw();\n        return true;\n    }\n};\n\n\n/**\n * Sets the clusterer's ready state.\n *\n * @param {boolean} ready The state.\n * @private\n */\nMarkerClusterer.prototype.setReady_ = function(ready) {\n    if (!this.ready_) {\n        this.ready_ = ready;\n        this.createClusters_();\n    }\n};\n\n\n/**\n * Returns the number of clusters in the clusterer.\n *\n * @return {number} The number of clusters.\n */\nMarkerClusterer.prototype.getTotalClusters = function() {\n    return this.clusters_.length;\n};\n\n\n/**\n * Returns the google map that the clusterer is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nMarkerClusterer.prototype.getMap = function() {\n    return this.map_;\n};\n\n\n/**\n * Sets the google map that the clusterer is associated with.\n *\n * @param {google.maps.Map} map The map.\n */\nMarkerClusterer.prototype.setMap = function(map) {\n    this.map_ = map;\n};\n\n\n/**\n * Returns the size of the grid.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getGridSize = function() {\n    return this.gridSize_;\n};\n\n\n/**\n * Sets the size of the grid.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setGridSize = function(size) {\n    this.gridSize_ = size;\n};\n\n\n/**\n * Returns the min cluster size.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getMinClusterSize = function() {\n    return this.minClusterSize_;\n};\n\n/**\n * Sets the min cluster size.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setMinClusterSize = function(size) {\n    this.minClusterSize_ = size;\n};\n\n\n/**\n * Extends a bounds object by the grid size.\n *\n * @param {google.maps.LatLngBounds} bounds The bounds to extend.\n * @return {google.maps.LatLngBounds} The extended bounds.\n */\nMarkerClusterer.prototype.getExtendedBounds = function(bounds) {\n    var projection = this.getProjection();\n\n    // Turn the bounds into latlng.\n    var tr = new google.maps.LatLng(bounds.getNorthEast().lat(),\n        bounds.getNorthEast().lng());\n    var bl = new google.maps.LatLng(bounds.getSouthWest().lat(),\n        bounds.getSouthWest().lng());\n\n    // Convert the points to pixels and the extend out by the grid size.\n    var trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n\n    var blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n\n    // Convert the pixel points back to LatLng\n    var ne = projection.fromDivPixelToLatLng(trPix);\n    var sw = projection.fromDivPixelToLatLng(blPix);\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n\n    return bounds;\n};\n\n\n/**\n * Determins if a marker is contained in a bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @param {google.maps.LatLngBounds} bounds The bounds to check against.\n * @return {boolean} True if the marker is in the bounds.\n * @private\n */\nMarkerClusterer.prototype.isMarkerInBounds_ = function(marker, bounds) {\n    return bounds.contains(marker.getPosition());\n};\n\n\n/**\n * Clears all clusters and markers from the clusterer.\n */\nMarkerClusterer.prototype.clearMarkers = function() {\n    this.resetViewport(true);\n\n    // Set the markers a empty array.\n    this.markers_ = [];\n};\n\n\n/**\n * Clears all existing clusters and recreates them.\n * @param {boolean} opt_hide To also hide the marker.\n */\nMarkerClusterer.prototype.resetViewport = function(opt_hide) {\n    // Remove all the clusters\n    for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n        cluster.remove();\n    }\n\n    // Reset the markers to not be added and to be invisible.\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n        marker.isAdded = false;\n        if (opt_hide) {\n            marker.setMap(null);\n        }\n    }\n\n    this.clusters_ = [];\n};\n\n/**\n *\n */\nMarkerClusterer.prototype.repaint = function() {\n    var oldClusters = this.clusters_.slice();\n    this.clusters_.length = 0;\n    this.resetViewport();\n    this.redraw();\n\n    // Remove the old clusters.\n    // Do it in a timeout so the other clusters have been drawn first.\n    window.setTimeout(function() {\n        for (var i = 0, cluster; cluster = oldClusters[i]; i++) {\n            cluster.remove();\n        }\n    }, 0);\n};\n\n\n/**\n * Redraws the clusters.\n */\nMarkerClusterer.prototype.redraw = function() {\n    this.createClusters_();\n};\n\n\n/**\n * Calculates the distance between two latlng locations in km.\n * @see http://www.movable-type.co.uk/scripts/latlong.html\n *\n * @param {google.maps.LatLng} p1 The first lat lng point.\n * @param {google.maps.LatLng} p2 The second lat lng point.\n * @return {number} The distance between the two points in km.\n * @private\n */\nMarkerClusterer.prototype.distanceBetweenPoints_ = function(p1, p2) {\n    if (!p1 || !p2) {\n        return 0;\n    }\n\n    var R = 6371; // Radius of the Earth in km\n    var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;\n    var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var d = R * c;\n    return d;\n};\n\n\n/**\n * Add a marker to a cluster, or creates a new cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.addToClosestCluster_ = function(marker) {\n    var distance = 40000; // Some large number\n    var clusterToAddTo = null;\n    var pos = marker.getPosition();\n    for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n        var center = cluster.getCenter();\n        if (center) {\n            var d = this.distanceBetweenPoints_(center, marker.getPosition());\n            if (d < distance) {\n                distance = d;\n                clusterToAddTo = cluster;\n            }\n        }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n        clusterToAddTo.addMarker(marker);\n    } else {\n        var cluster = new Cluster(this);\n        cluster.addMarker(marker);\n        this.clusters_.push(cluster);\n    }\n};\n\n\n/**\n * Creates the clusters.\n *\n * @private\n */\nMarkerClusterer.prototype.createClusters_ = function() {\n    if (!this.ready_) {\n        return;\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    var mapBounds = new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),\n        this.map_.getBounds().getNorthEast());\n    var bounds = this.getExtendedBounds(mapBounds);\n\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n        if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n            this.addToClosestCluster_(marker);\n        }\n    }\n};\n\n\n/**\n * A cluster that contains markers.\n *\n * @param {MarkerClusterer} markerClusterer The markerclusterer that this\n *     cluster is associated with.\n * @constructor\n * @ignore\n */\nfunction Cluster(markerClusterer) {\n    this.markerClusterer_ = markerClusterer;\n    this.map_ = markerClusterer.getMap();\n    this.gridSize_ = markerClusterer.getGridSize();\n    this.minClusterSize_ = markerClusterer.getMinClusterSize();\n    this.averageCenter_ = markerClusterer.isAverageCenter();\n    this.center_ = null;\n    this.markers_ = [];\n    this.bounds_ = null;\n    this.clusterIcon_ = new ClusterIcon(this, markerClusterer.getStyles(),\n        markerClusterer.getGridSize());\n}\n\n/**\n * Determins if a marker is already added to the cluster.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker is already added.\n */\nCluster.prototype.isMarkerAlreadyAdded = function(marker) {\n    if (this.markers_.indexOf) {\n        return this.markers_.indexOf(marker) != -1;\n    } else {\n        for (var i = 0, m; m = this.markers_[i]; i++) {\n            if (m == marker) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n\n\n/**\n * Add a marker the cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @return {boolean} True if the marker was added.\n */\nCluster.prototype.addMarker = function(marker) {\n    if (this.isMarkerAlreadyAdded(marker)) {\n        return false;\n    }\n\n    if (!this.center_) {\n        this.center_ = marker.getPosition();\n        this.calculateBounds_();\n    } else {\n        if (this.averageCenter_) {\n            var l = this.markers_.length + 1;\n            var lat = (this.center_.lat() * (l-1) + marker.getPosition().lat()) / l;\n            var lng = (this.center_.lng() * (l-1) + marker.getPosition().lng()) / l;\n            this.center_ = new google.maps.LatLng(lat, lng);\n            this.calculateBounds_();\n        }\n    }\n\n    marker.isAdded = true;\n    this.markers_.push(marker);\n\n    var len = this.markers_.length;\n    if (len < this.minClusterSize_ && marker.getMap() != this.map_) {\n        // Min cluster size not reached so show the marker.\n        marker.setMap(this.map_);\n    }\n\n    if (len == this.minClusterSize_) {\n        // Hide the markers that were showing.\n        for (var i = 0; i < len; i++) {\n            this.markers_[i].setMap(null);\n        }\n    }\n\n    if (len >= this.minClusterSize_) {\n        marker.setMap(null);\n    }\n\n    this.updateIcon();\n    return true;\n};\n\n\n/**\n * Returns the marker clusterer that the cluster is associated with.\n *\n * @return {MarkerClusterer} The associated marker clusterer.\n */\nCluster.prototype.getMarkerClusterer = function() {\n    return this.markerClusterer_;\n};\n\n\n/**\n * Returns the bounds of the cluster.\n *\n * @return {google.maps.LatLngBounds} the cluster bounds.\n */\nCluster.prototype.getBounds = function() {\n    var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    var markers = this.getMarkers();\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        bounds.extend(marker.getPosition());\n    }\n    return bounds;\n};\n\n\n/**\n * Removes the cluster\n */\nCluster.prototype.remove = function() {\n    this.clusterIcon_.remove();\n    this.markers_.length = 0;\n    delete this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {number} The cluster center.\n */\nCluster.prototype.getSize = function() {\n    return this.markers_.length;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {Array.<google.maps.Marker>} The cluster center.\n */\nCluster.prototype.getMarkers = function() {\n    return this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {google.maps.LatLng} The cluster center.\n */\nCluster.prototype.getCenter = function() {\n    return this.center_;\n};\n\n\n/**\n * Calculated the extended bounds of the cluster with the grid.\n *\n * @private\n */\nCluster.prototype.calculateBounds_ = function() {\n    var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n};\n\n\n/**\n * Determines if a marker lies in the clusters bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker lies in the bounds.\n */\nCluster.prototype.isMarkerInClusterBounds = function(marker) {\n    return this.bounds_.contains(marker.getPosition());\n};\n\n\n/**\n * Returns the map that the cluster is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nCluster.prototype.getMap = function() {\n    return this.map_;\n};\n\n\n/**\n * Updates the cluster icon\n */\nCluster.prototype.updateIcon = function() {\n    var zoom = this.map_.getZoom();\n    var mz = this.markerClusterer_.getMaxZoom();\n\n    if (mz && zoom > mz) {\n        // The zoom is greater than our max zoom so show all the markers in cluster.\n        for (var i = 0, marker; marker = this.markers_[i]; i++) {\n            marker.setMap(this.map_);\n        }\n        return;\n    }\n\n    if (this.markers_.length < this.minClusterSize_) {\n        // Min cluster size not yet reached.\n        this.clusterIcon_.hide();\n        return;\n    }\n\n    var numStyles = this.markerClusterer_.getStyles().length;\n    var sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.setSums(sums);\n    this.clusterIcon_.show();\n};\n\n\n/**\n * A cluster icon\n *\n * @param {Cluster} cluster The cluster to be associated with.\n * @param {Object} styles An object that has style properties:\n *     'url': (string) The image url.\n *     'height': (number) The image height.\n *     'width': (number) The image width.\n *     'anchor': (Array) The anchor position of the label text.\n *     'textColor': (string) The text color.\n *     'textSize': (number) The text size.\n *     'backgroundPosition: (string) The background postition x, y.\n * @param {number=} opt_padding Optional padding to apply to the cluster icon.\n * @constructor\n * @extends google.maps.OverlayView\n * @ignore\n */\nfunction ClusterIcon(cluster, styles, opt_padding) {\n    cluster.getMarkerClusterer().extend(ClusterIcon, google.maps.OverlayView);\n\n    this.styles_ = styles;\n    this.padding_ = opt_padding || 0;\n    this.cluster_ = cluster;\n    this.center_ = null;\n    this.map_ = cluster.getMap();\n    this.div_ = null;\n    this.sums_ = null;\n    this.visible_ = false;\n\n    this.setMap(this.map_);\n}\n\n\n/**\n * Triggers the clusterclick event and zoom's if the option is set.\n *\n * @param {google.maps.MouseEvent} event The event to propagate\n */\nClusterIcon.prototype.triggerClusterClick = function(event) {\n    var markerClusterer = this.cluster_.getMarkerClusterer();\n\n    // Trigger the clusterclick event.\n    google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_, event);\n\n    if (markerClusterer.isZoomOnClick()) {\n        // Zoom into the cluster.\n        this.map_.fitBounds(this.cluster_.getBounds());\n    }\n};\n\n\n/**\n * Adding the cluster icon to the dom.\n * @ignore\n */\nClusterIcon.prototype.onAdd = function() {\n    this.div_ = document.createElement('DIV');\n    if (this.visible_) {\n        var pos = this.getPosFromLatLng_(this.center_);\n        this.div_.style.cssText = this.createCss(pos);\n        this.div_.innerHTML = this.sums_.text;\n    }\n\n    var panes = this.getPanes();\n    panes.overlayMouseTarget.appendChild(this.div_);\n\n    var that = this;\n    var isDragging = false;\n    google.maps.event.addDomListener(this.div_, 'click', function(event) {\n        // Only perform click when not preceded by a drag\n        if (!isDragging) {\n            that.triggerClusterClick(event);\n        }\n    });\n    google.maps.event.addDomListener(this.div_, 'mousedown', function() {\n        isDragging = false;\n    });\n    google.maps.event.addDomListener(this.div_, 'mousemove', function() {\n        isDragging = true;\n    });\n};\n\n\n/**\n * Returns the position to place the div dending on the latlng.\n *\n * @param {google.maps.LatLng} latlng The position in latlng.\n * @return {google.maps.Point} The position in pixels.\n * @private\n */\nClusterIcon.prototype.getPosFromLatLng_ = function(latlng) {\n    var pos = this.getProjection().fromLatLngToDivPixel(latlng);\n\n    if (typeof this.iconAnchor_ === 'object' && this.iconAnchor_.length === 2) {\n        pos.x -= this.iconAnchor_[0];\n        pos.y -= this.iconAnchor_[1];\n    } else {\n        pos.x -= parseInt(this.width_ / 2, 10);\n        pos.y -= parseInt(this.height_ / 2, 10);\n    }\n    return pos;\n};\n\n\n/**\n * Draw the icon.\n * @ignore\n */\nClusterIcon.prototype.draw = function() {\n    if (this.visible_) {\n        var pos = this.getPosFromLatLng_(this.center_);\n        this.div_.style.top = pos.y + 'px';\n        this.div_.style.left = pos.x + 'px';\n    }\n};\n\n\n/**\n * Hide the icon.\n */\nClusterIcon.prototype.hide = function() {\n    if (this.div_) {\n        this.div_.style.display = 'none';\n    }\n    this.visible_ = false;\n};\n\n\n/**\n * Position and show the icon.\n */\nClusterIcon.prototype.show = function() {\n    if (this.div_) {\n        var pos = this.getPosFromLatLng_(this.center_);\n        this.div_.style.cssText = this.createCss(pos);\n        this.div_.style.display = '';\n    }\n    this.visible_ = true;\n};\n\n\n/**\n * Remove the icon from the map\n */\nClusterIcon.prototype.remove = function() {\n    this.setMap(null);\n};\n\n\n/**\n * Implementation of the onRemove interface.\n * @ignore\n */\nClusterIcon.prototype.onRemove = function() {\n    if (this.div_ && this.div_.parentNode) {\n        this.hide();\n        this.div_.parentNode.removeChild(this.div_);\n        this.div_ = null;\n    }\n};\n\n\n/**\n * Set the sums of the icon.\n *\n * @param {Object} sums The sums containing:\n *   'text': (string) The text to display in the icon.\n *   'index': (number) The style index of the icon.\n */\nClusterIcon.prototype.setSums = function(sums) {\n    this.sums_ = sums;\n    this.text_ = sums.text;\n    this.index_ = sums.index;\n    if (this.div_) {\n        this.div_.innerHTML = sums.text;\n    }\n\n    this.useStyle();\n};\n\n\n/**\n * Sets the icon to the the styles.\n */\nClusterIcon.prototype.useStyle = function() {\n    var index = Math.max(0, this.sums_.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    var style = this.styles_[index];\n    this.url_ = style['url'];\n    this.height_ = style['height'];\n    this.width_ = style['width'];\n    this.textColor_ = style['textColor'];\n    this.anchor_ = style['anchor'];\n    this.textSize_ = style['textSize'];\n    this.backgroundPosition_ = style['backgroundPosition'];\n    this.iconAnchor_ = style['iconAnchor'];\n};\n\n\n/**\n * Sets the center of the icon.\n *\n * @param {google.maps.LatLng} center The latlng to set as the center.\n */\nClusterIcon.prototype.setCenter = function(center) {\n    this.center_ = center;\n};\n\n\n/**\n * Create the css text based on the position of the icon.\n *\n * @param {google.maps.Point} pos The position.\n * @return {string} The css style text.\n */\nClusterIcon.prototype.createCss = function(pos) {\n    var style = [];\n    style.push('background-image:url(' + this.url_ + ');');\n    var backgroundPosition = this.backgroundPosition_ ? this.backgroundPosition_ : '0 0';\n    style.push('background-position:' + backgroundPosition + ';');\n\n    if (typeof this.anchor_ === 'object') {\n        if (typeof this.anchor_[0] === 'number' && this.anchor_[0] > 0 &&\n            this.anchor_[0] < this.height_) {\n            style.push('height:' + (this.height_ - this.anchor_[0]) +\n                'px; padding-top:' + this.anchor_[0] + 'px;');\n        } else if (typeof this.anchor_[0] === 'number' && this.anchor_[0] < 0 &&\n            -this.anchor_[0] < this.height_) {\n            style.push('height:' + this.height_ + 'px; line-height:' + (this.height_ + this.anchor_[0]) +\n                'px;');\n        } else {\n            style.push('height:' + this.height_ + 'px; line-height:' + this.height_ +\n                'px;');\n        }\n        if (typeof this.anchor_[1] === 'number' && this.anchor_[1] > 0 &&\n            this.anchor_[1] < this.width_) {\n            style.push('width:' + (this.width_ - this.anchor_[1]) +\n                'px; padding-left:' + this.anchor_[1] + 'px;');\n        } else {\n            style.push('width:' + this.width_ + 'px; text-align:center;');\n        }\n    } else {\n        style.push('height:' + this.height_ + 'px; line-height:' +\n            this.height_ + 'px; width:' + this.width_ + 'px; text-align:center;');\n    }\n\n    var txtColor = this.textColor_ ? this.textColor_ : 'black';\n    var txtSize = this.textSize_ ? this.textSize_ : 11;\n\n    style.push('cursor:pointer; top:' + pos.y + 'px; left:' +\n        pos.x + 'px; color:' + txtColor + '; position:absolute; font-size:' +\n        txtSize + 'px; font-family:Arial,sans-serif; font-weight:bold');\n    return style.join('');\n};\n\n\n// Export Symbols for Closure\n// If you are not going to compile with closure then you can remove the\n// code below.\nwindow['MarkerClusterer'] = MarkerClusterer;\nMarkerClusterer.prototype['addMarker'] = MarkerClusterer.prototype.addMarker;\nMarkerClusterer.prototype['addMarkers'] = MarkerClusterer.prototype.addMarkers;\nMarkerClusterer.prototype['clearMarkers'] =\n    MarkerClusterer.prototype.clearMarkers;\nMarkerClusterer.prototype['fitMapToMarkers'] =\n    MarkerClusterer.prototype.fitMapToMarkers;\nMarkerClusterer.prototype['getCalculator'] =\n    MarkerClusterer.prototype.getCalculator;\nMarkerClusterer.prototype['getGridSize'] =\n    MarkerClusterer.prototype.getGridSize;\nMarkerClusterer.prototype['getExtendedBounds'] =\n    MarkerClusterer.prototype.getExtendedBounds;\nMarkerClusterer.prototype['getMap'] = MarkerClusterer.prototype.getMap;\nMarkerClusterer.prototype['getMarkers'] = MarkerClusterer.prototype.getMarkers;\nMarkerClusterer.prototype['getMaxZoom'] = MarkerClusterer.prototype.getMaxZoom;\nMarkerClusterer.prototype['getStyles'] = MarkerClusterer.prototype.getStyles;\nMarkerClusterer.prototype['getTotalClusters'] =\n    MarkerClusterer.prototype.getTotalClusters;\nMarkerClusterer.prototype['getTotalMarkers'] =\n    MarkerClusterer.prototype.getTotalMarkers;\nMarkerClusterer.prototype['redraw'] = MarkerClusterer.prototype.redraw;\nMarkerClusterer.prototype['removeMarker'] =\n    MarkerClusterer.prototype.removeMarker;\nMarkerClusterer.prototype['removeMarkers'] =\n    MarkerClusterer.prototype.removeMarkers;\nMarkerClusterer.prototype['resetViewport'] =\n    MarkerClusterer.prototype.resetViewport;\nMarkerClusterer.prototype['repaint'] =\n    MarkerClusterer.prototype.repaint;\nMarkerClusterer.prototype['setCalculator'] =\n    MarkerClusterer.prototype.setCalculator;\nMarkerClusterer.prototype['setGridSize'] =\n    MarkerClusterer.prototype.setGridSize;\nMarkerClusterer.prototype['setMaxZoom'] =\n    MarkerClusterer.prototype.setMaxZoom;\nMarkerClusterer.prototype['onAdd'] = MarkerClusterer.prototype.onAdd;\nMarkerClusterer.prototype['draw'] = MarkerClusterer.prototype.draw;\n\nCluster.prototype['getCenter'] = Cluster.prototype.getCenter;\nCluster.prototype['getSize'] = Cluster.prototype.getSize;\nCluster.prototype['getMarkers'] = Cluster.prototype.getMarkers;\n\nClusterIcon.prototype['onAdd'] = ClusterIcon.prototype.onAdd;\nClusterIcon.prototype['draw'] = ClusterIcon.prototype.draw;\nClusterIcon.prototype['onRemove'] = ClusterIcon.prototype.onRemove;\n\n(function () {\n    'use strict';\n\n    angular.module('starter').filter('hashtag', hashtag);\n\n    function hashtag($filter) {\n        return function (text, target) {\n            if (!text) return text;\n\n            var replacedText = $filter('linky')(text, target);\n\n            var targetAttr = \"\";\n            if (angular.isDefined(target)) {\n                targetAttr = target;\n            }\n\n            // replace #hashtags and send them to twitter\n            var replacePattern1 = /(^|\\s)#(\\w*[a-zA-Z_]+\\w*)/gim;\n            replacedText        = text.replace(replacePattern1, '$1<a href=\"#/tab/search/%23$2\"' + targetAttr + '>#$2</a>');\n\n            // replace @mentions but keep them to our site\n            var replacePattern2 = /(^|\\s)\\@(\\w*[a-zA-Z_]+\\w*)/gim;\n            replacedText        = replacedText.replace(replacePattern2, '$1<a href=\"#/tab/home/$2\" >@$2</a>');\n\n            return replacedText;\n        };\n    }\n\n})();\n\n\n(function () {\n    'use strict';\n\n    angular.module('starter').filter('words', words);\n\n    function words() {\n\n        ////////////////\n\n        return function (input, words) {\n            if (isNaN(words)) {\n                return input;\n            }\n            if (words <= 0) {\n                return '';\n            }\n            if (input) {\n                var inputWords = input.split(/\\s+/);\n                if (inputWords.length > words) {\n                    input = inputWords.slice(0, words).join(' ') + '\\u2026';\n                }\n            }\n            return input;\n        };\n    }\n\n})();\n\n\n'use strict';\nangular.module(\"ngLocale\", [], [\"$provide\", function ($provide) {\n  var PLURAL_CATEGORY = {\n    ZERO: \"zero\",\n    ONE: \"one\",\n    TWO: \"two\",\n    FEW: \"few\",\n    MANY: \"many\",\n    OTHER: \"other\"\n  };\n  $provide.value(\"$locale\", {\n    \"DATETIME_FORMATS\": {\n      \"AMPMS\": [\n        \"AM\",\n        \"PM\"\n      ],\n      \"DAY\": [\n        \"domingo\",\n        \"segunda-feira\",\n        \"ter\\u00e7a-feira\",\n        \"quarta-feira\",\n        \"quinta-feira\",\n        \"sexta-feira\",\n        \"s\\u00e1bado\"\n      ],\n      \"ERANAMES\": [\n        \"Antes de Cristo\",\n        \"Ano do Senhor\"\n      ],\n      \"ERAS\": [\n        \"a.C.\",\n        \"d.C.\"\n      ],\n      \"FIRSTDAYOFWEEK\": 6,\n      \"MONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"SHORTDAY\": [\n        \"dom\",\n        \"seg\",\n        \"ter\",\n        \"qua\",\n        \"qui\",\n        \"sex\",\n        \"s\\u00e1b\"\n      ],\n      \"SHORTMONTH\": [\n        \"jan\",\n        \"fev\",\n        \"mar\",\n        \"abr\",\n        \"mai\",\n        \"jun\",\n        \"jul\",\n        \"ago\",\n        \"set\",\n        \"out\",\n        \"nov\",\n        \"dez\"\n      ],\n      \"STANDALONEMONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"WEEKENDRANGE\": [\n        5,\n        6\n      ],\n      \"fullDate\": \"EEEE, d 'de' MMMM 'de' y\",\n      \"longDate\": \"d 'de' MMMM 'de' y\",\n      \"medium\": \"d 'de' MMM 'de' y HH:mm:ss\",\n      \"mediumDate\": \"d 'de' MMM 'de' y\",\n      \"mediumTime\": \"HH:mm:ss\",\n      \"short\": \"dd/MM/yy HH:mm\",\n      \"shortDate\": \"dd/MM/yy\",\n      \"shortTime\": \"HH:mm\"\n    },\n    \"NUMBER_FORMATS\": {\n      \"CURRENCY_SYM\": \"R$\",\n      \"DECIMAL_SEP\": \",\",\n      \"GROUP_SEP\": \".\",\n      \"PATTERNS\": [{\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 3,\n        \"minFrac\": 0,\n        \"minInt\": 1,\n        \"negPre\": \"-\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\",\n        \"posSuf\": \"\"\n      }, {\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 2,\n        \"minFrac\": 2,\n        \"minInt\": 1,\n        \"negPre\": \"-\\u00a4\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\\u00a4\",\n        \"posSuf\": \"\"\n      }]\n    },\n    \"id\": \"pt-br\",\n    \"pluralCat\": function (n, opt_precision) {\n      if (n >= 0 && n <= 2 && n != 2) {\n        return PLURAL_CATEGORY.ONE;\n      }\n      return PLURAL_CATEGORY.OTHER;\n    }\n  });\n}]);\n(function () {\n    'use strict';\n    //! moment.js locale configuration\n//! locale : brazilian portuguese (pt-br)\n//! author : Caio Ribeiro Pereira : https://github.com/caio-ribeiro-pereira\n    \n    var pt_br = window.moment.defineLocale('pt', {\n        months: 'Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro'.split(\n            '_'),\n        monthsShort: 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),\n        weekdays: 'Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado'.split('_'),\n        weekdaysShort: 'Dom_Seg_Ter_Qua_Qui_Sex_Sáb'.split('_'),\n        weekdaysMin: 'Dom_2ª_3ª_4ª_5ª_6ª_Sáb'.split('_'),\n        longDateFormat: {\n            LT: 'HH:mm',\n            LTS: 'HH:mm:ss',\n            L: 'DD/MM/YYYY',\n            LL: 'D [de] MMMM [de] YYYY',\n            LLL: 'D [de] MMMM [de] YYYY [às] HH:mm',\n            LLLL: 'dddd, D [de] MMMM [de] YYYY [às] HH:mm'\n        },\n        calendar: {\n            sameDay: '[Hoje às] LT',\n            nextDay: '[Amanhã às] LT',\n            nextWeek: 'dddd [às] LT',\n            lastDay: '[Ontem às] LT',\n            lastWeek: function () {\n                return (this.day() === 0 || this.day() === 6) ?\n                    '[Último] dddd [às] LT' : // Saturday + Sunday\n                    '[Última] dddd [às] LT'; // Monday - Friday\n            },\n            sameElse: 'L'\n        },\n        relativeTime: {\n            future: 'em %s',\n            past: '%s atrás',\n            s: 'segs',\n            m: 'um minuto',\n            mm: '%d minutos',\n            h: 'uma hora',\n            hh: '%d horas',\n            d: 'um dia',\n            dd: '%d dias',\n            M: 'um mês',\n            MM: '%d meses',\n            y: 'um ano',\n            yy: '%d anos'\n        },\n        ordinalParse: /\\d{1,2}º/,\n        ordinal: '%dº'\n    });\n\n    return pt_br;\n})();\n(function () {\n  'use strict';\n  angular\n    .module('starter')\n    .factory('GalleryForm', GalleryFormFactory);\n\n  function GalleryFormFactory($translate) {\n\n    var form = [{\n      key: 'title',\n      type: 'input',\n      templateOptions: {\n        type: 'text',\n        placeholder: $translate.instant('PHOTOGRAM.FORM.TITLE'),\n        icon: 'icon-envelope',\n        required: true,\n        iconPlaceholder: true,\n        focus: true\n      }\n    }, {\n      key: 'geo',\n      type: 'toggle',\n      templateOptions: {\n        label: $translate.instant('PHOTOGRAM.FORM.GEOLOCATION'),\n        toggleClass: 'positive'\n      }\n    }];\n\n    var formComment = [{\n      key: 'text',\n      type: 'input',\n      templateOptions: {\n        placeholder: $translate.instant('addComment'),\n        type: 'text',\n        required: true,\n        focus: true\n          //icon           : 'icon-envelope',\n          //iconPlaceholder: true\n      }\n    }];\n\n    var formShare = [{\n      key: 'facebook',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Facebook',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'twitter',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Twitter',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'whatsapp',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Whatsapp',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'SMS',\n      type: 'toggle',\n      templateOptions: {\n        label: 'SMS',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'email',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Email',\n        toggleClass: 'positive'\n      }\n    }, ];\n    return {\n      form: form,\n      formComment: formComment,\n      formShare: formShare\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .factory('UserForm', UserFormFactory);\n\n    function UserFormFactory($translate) {\n\n        return {\n            login   : login(),\n            register: register(),\n            profile : profile()\n        };\n\n        function login() {\n            return [{\n                type           : 'input',\n                key            : 'username',\n                templateOptions: {\n                    type           : 'text',\n                    placeholder    : $translate.instant('username'),\n                    icon           : 'icon-user',\n                    required       : true,\n                    iconPlaceholder: true\n                }\n            }, {\n                type           : 'input',\n                key            : 'password',\n                templateOptions: {\n                    type           : 'password',\n                    placeholder    : $translate.instant('password'),\n                    icon           : 'icon-lock',\n                    required       : true,\n                    iconPlaceholder: true\n                }\n            }];\n        }\n\n        function register() {\n            return [\n                {\n                    type           : 'input',\n                    key            : 'username',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('username'),\n                        icon           : 'icon-user',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    type           : 'input',\n                    key            : 'email',\n                    templateOptions: {\n                        type           : 'email',\n                        placeholder    : $translate.instant('email'),\n                        icon           : 'icon-envelope',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    type           : 'input',\n                    key            : 'password',\n                    templateOptions: {\n                        type           : 'password',\n                        placeholder    : $translate.instant('password'),\n                        icon           : 'icon-lock',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }];\n        }\n\n        function profile() {\n            return [\n                {\n                    key            : 'username',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('username'),\n                        icon           : 'icon-ios-at',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    key            : 'name',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('name'),\n                        icon           : 'icon-user',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }, {\n                    key            : 'status',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('status'),\n                        icon           : 'ion-quote',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }, {\n                    type           : 'select',\n                    key            : 'gender',\n                    templateOptions: {\n                        label          : $translate.instant('gender'),\n                        options        : [{\n                            'label': $translate.instant('man'),\n                            'id'   : 'male',\n                        }, {\n                            'label': $translate.instant('woman'),\n                            'id'   : 'female',\n                        }],\n                        valueProp      : 'id',\n                        labelProp      : 'label',\n                        //icon           : 'ion-ios-body-outline',\n                        //iconPlaceholder: true\n                    }\n                }];\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ActionSheet', ActionSheetFactory);\n\n    function ActionSheetFactory($ionicActionSheet, Camera, $cordovaActionSheet, $q) {\n\n        return {\n            show : show,\n            image: image\n        };\n\n        function image() {\n            var defer = $q.defer();\n            show({\n                title     : 'Choose an option',\n                cancelText: 'Cancel',\n                options   : [{text: 'Photo Library'}, {text: 'Photo'}]\n            }).then(function (option) {\n                var sourceType;\n                if (option === 1) {\n                    sourceType = 'photoLibrary';\n                }\n\n                if (option === 2) {\n                    sourceType = 'camera';\n                }\n                return Camera.getPicture({sourceType: sourceType});\n            }).then(defer.resolve).catch(defer.reject);\n\n            return defer.promise;\n        }\n\n        function show(params) {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                var options = {\n                    title                    : params.title,\n                    buttonLabels             : _.map(params.options, function (item) {return item.text}),\n                    addCancelButtonWithLabel : params.cancelText,\n                    androidEnableCancelButton: true,\n                    androidTheme             : window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT\n                };\n\n                $cordovaActionSheet.show(options).then(function (btnIndex) {\n                    if (btnIndex !== 3) {\n                        defer.resolve(btnIndex);\n                    }\n                    defer.reject('cancel');\n                });\n\n            } else {\n                var actionSheet = $ionicActionSheet.show({\n                    buttons      : params.options,\n                    titleText    : params.title,\n                    cancelText   : params.cancelText,\n                    cancel       : function () {\n                        actionSheet();\n                    },\n                    buttonClicked: function (btnIndex) {\n                        actionSheet();\n                        if (btnIndex !== 3) {\n                            defer.resolve(btnIndex);\n                        }\n                        defer.reject('cancel');\n                    }\n                });\n\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Auth', function ($q) {\n\n        var mSessionToken = null;\n        return {\n            getLoggedUser  : getLoggedUser,\n            setSessionToken: setSessionToken,\n            ensureLoggedIn : ensureLoggedIn,\n            recoverPassword: recoverPassword,\n            resetPassword  : resetPassword,\n            logIn          : logIn,\n            logOut         : logOut\n        };\n\n        function getLoggedUser() {\n            return Parse.User.current();\n        }\n\n        function setSessionToken(sessionToken) {\n            mSessionToken = sessionToken;\n        }\n\n        function ensureLoggedIn() {\n            var defer = $q.defer();\n\n            if (mSessionToken === null) {\n                defer.reject('Session token invalid');\n                return defer.promise;\n            }\n\n            if (!Parse.User.current()) {\n                Parse.User.become(mSessionToken).then(defer.resolve, defer.reject);\n            } else {\n                defer.resolve(Parse.User.current());\n            }\n\n            return defer.promise;\n        }\n\n        function recoverPassword(email) {\n            var defer = $q.defer();\n            Parse.User.requestPasswordReset(email, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function resetPassword(email) {\n\n            var defer = $q.defer();\n\n            Parse.User.requestPasswordReset(email, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function logIn(obj) {\n            var defer = $q.defer();\n\n            Parse.User.logIn(obj.username, obj.password, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function logOut() {\n            var defer = $q.defer();\n            Parse.User.logOut().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').service('Camera', CameraFactory);\n\n    function CameraFactory($cordovaCamera, $q) {\n\n        return {\n            getPicture   : getPicture,\n            resizeImage  : resizeImage,\n            toBase64Image: toBase64Image\n        };\n\n        function getPicture(params) {\n\n            var defer = $q.defer();\n            if (window.cordova) {\n                var sourceType = params.sourceType || Camera.PictureSourceType.CAMERA;\n                if (params.sourceType === 'photoLibrary') {\n                    sourceType = Camera.PictureSourceType.PHOTOLIBRARY;\n                }\n                if (params.sourceType === 'camera') {\n                    sourceType = Camera.PictureSourceType.CAMERA;\n                }\n\n                var options = {\n                    quality           : 70,\n                    targetWidth       : 800,\n                    targetHeight      : 800,\n                    saveToPhotoAlbum  : false,\n                    correctOrientation: true,\n                    sourceType        : sourceType,\n                    destinationType   : Camera.DestinationType.DATA_URL,\n                    encodingType      : Camera.EncodingType.JPEG,\n                };\n\n                $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n            } else {\n                console.log('Input File');\n                //defer.reject('Unsupported platform');\n\n                var fileInput = angular.element('<input type=\"file\" accept=\"image/x-png, image/gif, image/jpeg\" max-size=\"2048\" />');\n                fileInput[0].click();\n                fileInput.on('change', function (evt) {\n                    var tempImage = evt.currentTarget.files[0];\n                    var reader    = new FileReader();\n                    reader.onload = function (evt) {\n                        defer.resolve(evt.target.result);\n                    };\n                    reader.readAsDataURL(tempImage);\n                });\n            }\n\n            return defer.promise;\n        }\n\n        //https://github.com/timkalinowski/PhoneGap-Image-Resizer\n        function toBase64Image(img_path, width, height) {\n            var defer = $q.defer();\n            window.imageResizer.resizeImage(defer.resolve, defer.reject, img_path, width || 1, height || 1, {\n                imageDataType: ImageResizer.IMAGE_DATA_TYPE_URL,\n                resizeType   : ImageResizer.RESIZE_TYPE_FACTOR,\n                format       : 'jpg'\n            });\n\n            return defer.promise;\n        }\n\n        function resizeImage(img_path, width, height) {\n            var defer = $q.defer();\n            window.imageResizer.resizeImage(defer.resolve, defer.reject,  img_path, width || 640, height || 640, {\n                imageDataType: ImageResizer.IMAGE_DATA_TYPE_URL,\n                resizeType   : ImageResizer.RESIZE_TYPE_MIN_PIXEL,\n                pixelDensity : true,\n                storeImage   : false,\n                photoAlbum   : false,\n                format       : 'jpg'\n            });\n\n            return defer.promise;\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('ConnectMonitor', ConnectMonitorFactory);\n\n    function ConnectMonitorFactory($rootScope, $cordovaNetwork) {\n        \n        return {\n            watch: watch\n        };\n\n        function watch() {\n\n            if (ionic.Platform.isWebView()) {\n                $rootScope.onLine = $cordovaNetwork.isOnline();\n                $rootScope.$apply();\n\n\n                $rootScope.$on('$cordovaNetwork:online', function (event, networkState) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                });\n\n                $rootScope.$on('$cordovaNetwork:offline', function (event, networkState) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                });\n            } else {\n                $rootScope.onLine = navigator.onLine;\n                $rootScope.$apply();\n\n                window.addEventListener('online', function (e) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                }, false);\n\n                window.addEventListener('offline', function (e) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                }, false);\n            }\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('DAO', DAOFactory);\n    function DAOFactory($interval, $q) {\n        var _db;\n        var _tables = [];\n\n        return {\n            init       : init,\n            insert     : insert,\n            query      : query,\n            getLastSync: getLastSync,\n            paginate   : paginate,\n            fetchAll   : fetchAll\n        };\n\n        function init(database) {\n\n            if (!_db) {\n                if (window.sqlitePlugin !== undefined) {\n                    _db = window.sqlitePlugin.openDatabase({\n                        name              : database.name,\n                        location          : 2,\n                        createFromLocation: 1\n                    });\n                } else {\n                    // For debugging in the browser\n                    _db = window.openDatabase(database.name, \"1.0\", \"Database\", 200000);\n                }\n            }\n\n            var _promises = [];\n            angular.forEach(database.tables, function (table) {\n                var columns = [];\n                angular.forEach(table.columns, function (type, name) {\n                    columns.push(name + ' ' + type);\n                });\n                query('DROP TABLE ' + table.name);\n                var _query = 'CREATE TABLE IF NOT EXISTS ' + table.name + ' (' + columns.join(',') + ')';\n                _promises.push(query(_query));\n                _tables.push(table);\n                // console.log(_query);\n                // console.log('Table ' + table.name + ' initialized');\n            });\n\n            return $q.all(_promises);\n        }\n\n        function getLastSync(table, column) {\n            var defer = $q.defer();\n            query(\"SELECT MAX(\" + column + \") as lastSync FROM \" + table)\n                .then(function (data) {\n                    var lastSync = data.rows.item[0].lastSync;\n                    defer.resolve(lastSync);\n                });\n            return defer.promise;\n        }\n\n        function insert(obj) {\n            var defer    = $q.defer();\n            var _columns = [];\n            var _values  = [];\n\n            angular.forEach(obj.columns, function (value, key) {\n                _columns.push(key);\n                if (typeof  value === 'number') {\n                    _values.push(value);\n                } else {\n                    _values.push(\"'\" + value + \"'\");\n                }\n            });\n\n            var _query = \"INSERT OR REPLACE INTO \" + obj.table + \" (\" + _columns.join(',') + \") VALUES (\" + _values.join(',') + \")\"\n            // console.info(_query);\n            query(_query).then(defer.resolve).catch(defer.reject);\n            return defer.promise;\n\n        }\n\n        function query(query, bindings) {\n            bindings  = typeof bindings !== 'undefined' ? bindings : [];\n            var defer = $q.defer();\n\n            _db.transaction(function (transaction) {\n                transaction.executeSql(query, bindings, function (transaction, result) {\n                    // console.log(result);\n                    var results = {\n                        rows: []\n                    };\n                    if (result && result.rows) {\n                        for (var i = 0; i < result.rows.length; i++) {\n                            results.rows.push(angular.copy(result.rows[i]));\n                        }\n                    }\n                    // console.log(results);\n                    defer.resolve(results);\n                }, function (transaction, error) {\n                    console.log(transaction, error);\n                    defer.reject(error);\n                });\n            });\n\n            return defer.promise;\n        }\n\n        function paginate(_table, columns, _where, _join, _order, limit, page) {\n            var defer = $q.defer();\n            if (page === undefined) page = -1;\n            var _columns = columns;\n            var _limit   = limit ? limit : 10;\n            var _query1  = \"SELECT SUM(id) as TOTAL FROM \" + _table + \"  \" + _where;\n            var _query   = \"SELECT \" + _columns + \" FROM \" + _table + \"  \" + _where + \" \" + _join + \" \" + _order + \" LIMIT \" + _limit + \" OFFSET \" + page;\n\n            console.log('query', _query1);\n            console.log('query', _query);\n\n            query(_query1).then(function (data) {\n                var result = {\n                    page : page,\n                    total: data.rows[0].TOTAL,\n                    rows : []\n                };\n\n                query(_query).then(function (data) {\n                    console.log(data);\n\n                    result.rows = data.rows;\n                    defer.resolve(result);\n                });\n            });\n            return defer.promise;\n        }\n\n        function fetchAll(result) {\n            var output = [];\n            for (var i = 0; i < result.rows.length; i++) {\n                output.push(result.rows.item(i));\n            }\n            return output;\n        }\n    }\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('DataUtil', DataUtilFactory);\n\n    function DataUtilFactory() {\n\n        return {\n            parseData: parseData,\n            parseString: parseString,\n            getDate: getDate,\n            formatDate: formatDate,\n            getMonthName: getMonthName,\n            getFirstDay: getFirstDay,\n            getLastDay: getLastDay\n        };\n\n        function parseData(string) {\n            var parts = string.split('-');\n            return new Date(parts[0], parts[1] - 1, parts[2]);\n        }\n\n        function parseString(data) {\n            return new Date(data).toLocaleDateString();\n        }\n\n\n        function getDate() {\n            var data   = new Date();\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function formatDate(milliseconds) {\n            var data   = new Date(milliseconds);\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function getMonthName(data) {\n            var meses = ['Janeiro', 'Feveiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];\n            return meses[data.getMonth()];\n        }\n\n        function getFirstDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth();\n            return new Date(year, month, 1);\n        }\n\n        function getLastDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth() + 1;\n            return new Date(year, month, 0);\n        }\n\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').service('Dialog', DialogFactory);\n\n    function DialogFactory($cordovaDialogs, $ionicPopup, $q) {\n\n        return {\n            alert  : alert,\n            confirm: confirm\n        };\n\n        function alert(message, title) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaDialogs.alert(message, title).then(defer.resolve);\n            } else {\n                $ionicPopup.alert({\n                    title   : title,\n                    template: message\n                });\n            }\n            return defer.promise;\n        }\n\n        function confirm(message, title, buttonsText) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaDialogs.confirm(message, title, buttonsText).then(function (result) {\n                    if (result === 2) {\n                        defer.resolve(true);\n                    }\n                    defer.reject(true);\n                });\n\n            } else {\n                $ionicPopup.confirm({\n                    title   : title,\n                    template: message\n                }).then(function (res) {\n                    if (res) {\n                        defer.resolve(true);\n                    } else {\n                        defer.reject(true);\n                    }\n                });\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').service('Facebook', FacebookFactory);\n\n    function FacebookFactory($q, $facebook, $cordovaFacebook) {\n\n        var facebook = window.cordova ? $cordovaFacebook : $facebook;\n        var me;\n\n        return {\n            logIn         : logIn,\n            logOut        : logOut,\n            me            : getMe,\n            invite        : invite,\n            friends       : friends,\n            api           : api,\n            getCurrentUser: getCurrentUser,\n            getFriends    : getFriends,\n            postImage     : postImage,\n            postImage1    : postImage1,\n            link          : link\n        };\n\n        function getCurrentUser() {\n            return facebook.getLoginStatus();\n        }\n\n        function logIn() {\n            console.log('facebook login', facebook);\n            return facebook.login(['public_profile', 'email']);\n        }\n\n        function logOut() {\n            var defer = $q.defer();\n            $cordovaFacebook.logout().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function postImage(image) {\n            var defer = $q.defer();\n            facebook.api('/me/feed', {\n                method     : 'feed',\n                name       : image.title,\n                link       : 'https://photogram.codevibe.io/',\n                picture    : image.image.url(),\n                caption    : image.title,\n                description: image.title\n            }, {scope: 'publish_actions'}, defer.resolve);\n            return defer.promise;\n        }\n\n        function postImage1(image) {\n            var defer = $q.defer();\n            facebook.api('/me/feed', 'post', {\n                message: image.title,\n                picture: image.image.url()\n            }, defer.resolve);\n            return defer.promise;\n        }\n\n        function getFriends() {\n            var defer = $q.defer();\n            facebook.api('/me/friends', defer.resolve)\n            return defer.promise;\n        }\n\n        function getMe() {\n\n            var defer = $q.defer();\n            if (window.cordova) {\n\n                $cordovaFacebook\n                    .api('me?fields=name,first_name,last_name,gender,email', ['public_profile'])\n                    .then(defer.resolve, defer.reject);\n\n            } else {\n                facebook.api('/me', {fields: 'name, first_name, last_name, gender, email'}).then(function (response) {\n                    if (!response || response.error) {\n                        defer.reject(response.error);\n                    } else {\n                        defer.resolve(response);\n                    }\n                });\n            }\n\n            return defer.promise;\n        }\n\n        function invite() {\n            var defer = $q.defer();\n            if (window.cordova) {\n                facebook.showDialog({\n                    method : 'apprequests',\n                    message: 'Venha para o nosso clube!'\n                }).then(defer.resolve, defer.reject);\n            } else {\n                facebook.ui({\n                    method : 'apprequests',\n                    message: 'Venha para o nosso clube!'\n                }).then(defer.resolve, defer.reject);\n            }\n            return defer.promise;\n        }\n\n\n        function friends() {\n            var defer = $q.defer();\n            facebook.api('me/friends').then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function api(api) {\n            var defer = $q.defer();\n            facebook.api(api).then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function link(user) {\n            var defer = $q.defer();\n            if (user) {\n                facebook.login(['email']).then(function (response) {\n                    console.log('facebook login', response);\n                    console.log(user, response, data);\n\n                    Parse.FacebookUtils.link(user, {\n                        id             : String(response.authResponse.userID),\n                        access_token   : response.authResponse.accessToken,\n                        expiration_date: (new Date().getTime() + 1000).toString()\n                    }, {\n                        success: function (user) {\n                            // Função caso tenha logado tanto no face quanto no Parse\n                            console.log('User', user);\n                            user.set('facebook', response['authResponse']['userID']);\n                            user.set('facebookimg', 'https://graph.facebook.com/' + response['authResponse']['userID'] + '/picture?width=250&height=250');\n                            user.set('facebook_complete', Boolean(true));\n                            user.save().then(defer.resolve);\n                        }\n                    });\n                }, defer.resolve);\n            } else {\n                defer.reject('not logged');\n            }\n\n            return defer.promise;\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryActivity', function ($q, ParseCloud, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryActivity', {\n            getStatus: function () {\n                if (this.isApproved) {\n                    return 'Approved';\n                } else if (this.isApproved === false) {\n                    return 'Rejected';\n                } else {\n                    return 'Pending';\n                }\n            }\n        }, {\n            update : function (item) {\n                var defer = $q.defer();\n                item.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy: function (item) {\n                var defer = $q.defer();\n                item.destroy({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            feed   : function (params) {\n                return ParseCloud.run('feedActivity', params);\n            },\n            all    : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n                // Order Table\n                if (params.order) {\n                    if (params.order.indexOf('-') < -1) {\n                        query.ascending(params.order);\n                    } else {\n                        query.descending(params.order.replace('-'));\n                    }\n                }\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n\n                }\n\n                query.include('gallery')\n                query.include('user')\n                query.limit(params.limit);\n                query.skip((params.page * params.limit) - params.limit);\n                query.find({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            count  : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n                }\n\n                query.count({\n                    success: function (count) {\n                        defer.resolve(count);\n                    },\n                    error  : function (error) {\n                        defer.reject(error);\n                    }\n                });\n\n                return defer.promise;\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'fromUser', {\n            get: function () {\n                return this.get('fromUser');\n            },\n            set: function (value) {\n                this.set('fromUser', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'toUser', {\n            get: function () {\n                return this.get('toUser');\n            },\n            set: function (value) {\n                this.set('toUser', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'gallery', {\n            get: function () {\n                return this.get('gallery');\n            },\n            set: function (value) {\n                this.set('gallery', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'hashtags', {\n            get: function () {\n                return this.get('hashtags');\n            },\n            set: function (value) {\n                this.set('hashtags', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'words', {\n            get: function () {\n                return this.get('words');\n            },\n            set: function (value) {\n                this.set('words', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'address', {\n            get: function () {\n                return this.get('address');\n            },\n            set: function (value) {\n                this.set('address', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'location', {\n            get: function () {\n                return this.get('location');\n            },\n            set: function (val) {\n                this.set('location', new Parse.GeoPoint({\n                    latitude : val.latitude,\n                    longitude: val.longitude\n                }));\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryComment', function ($q, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryComment', {\n            getStatus: function () {\n                if (this.isApproved) {\n                    return 'Approved';\n                } else if (this.isApproved === false) {\n                    return 'Rejected';\n                } else {\n                    return 'Pending';\n                }\n            }\n        }, {\n            get        : function (itemId) {\n                var defer = $q.defer();\n                new Parse.Query(this)\n                    .get(itemId, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                return defer.promise;\n            },\n            create : function (item) {\n                var defer = $q.defer();\n                new ParseObject().save(item, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            update : function (item) {\n                var defer = $q.defer();\n                item.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy: function (item) {\n                var defer = $q.defer();\n                item.destroy({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            all    : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                // Order Table\n\n                query.include('user');\n                query.ascending('createdAt');\n                query.equalTo('gallery', params.gallery);\n                query.limit(params.limit);\n                query.skip((params.page * params.limit) - params.limit);\n                query.find({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            count  : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n                }\n\n                query.count({\n                    success: function (count) {\n                        defer.resolve(count);\n                    },\n                    error  : function (error) {\n                        defer.reject(error);\n                    }\n                });\n\n                return defer.promise;\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'user', {\n            get: function () {\n                return this.get('user');\n            },\n            set: function (value) {\n                this.set('user', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'text', {\n            get: function () {\n                return this.get('text');\n            },\n            set: function (value) {\n                this.set('text', value);\n            }\n        });\n\n        return ParseObject;\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Gallery', GalleryFactory);\n\n    function GalleryFactory($q, ParseCloud, moment) {\n\n        var ParseObject = Parse.Object.extend('Gallery', {\n                getStatus: function () {\n                    if (this.isApproved) {\n                        return 'Approved';\n                    } else if (this.isApproved === false) {\n                        return 'Rejected';\n                    } else {\n                        return 'Pending';\n                    }\n                }\n            },\n            {\n                create     : function (item) {\n                    var defer    = $q.defer();\n                    var objPlace = new ParseObject();\n\n                    if (item.address.geo) {\n                        item.location = new Parse.GeoPoint(item.address.geo);\n                    }\n\n                    objPlace.save(item, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                    return defer.promise;\n                },\n                update     : function (item) {\n                    var defer = $q.defer();\n                    item.save(null, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                destroy    : function (item) {\n                    var defer = $q.defer();\n                    item.destroy({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                comments   : function (params) {\n                    return ParseCloud.run('commentGallery', params);\n                },\n                feed       : function (params) {\n                    return ParseCloud.run('feedGallery', params);\n                },\n                search       : function (params) {\n                    return ParseCloud.run('searchGallery', params);\n                },\n                follow     : function (params) {\n                    console.log('Follow', params);\n                    return ParseCloud.run('followUser', params);\n                },\n                likeGallery: function (params) {\n                    console.log(params);\n                    return ParseCloud.run('likeGallery', {galleryId: params.galleryId});\n                },\n                get        : function (galleryId) {\n                    var defer = $q.defer();\n                    new Parse.Query(this)\n\n                        .get(galleryId, {\n                            success: defer.resolve,\n                            error  : defer.reject\n                        });\n\n                    return defer.promise;\n                },\n                all        : function (params) {\n                    var defer = $q.defer();\n                    var query = new Parse.Query(this);\n\n                    //if (params.filter != '') {\n                    //    query.contains('words', params.filter);\n                    //}\n\n                    // Order Table\n                    if (params.order) {\n                        if (params.order.indexOf('-') < -1) {\n                            query.ascending(params.order);\n                        } else {\n                            query.descending(params.order.replace('-'));\n                        }\n                    }\n\n                    // Status\n                    if (params.status && params.status !== null) {\n                        if (params.status === 'pending') {\n                            query.doesNotExist('isApproved');\n                        } else if (params.status === 'rejected') {\n                            query.equalTo('isApproved', false);\n                        } else if (params.status === 'approved') {\n                            query.equalTo('isApproved', true);\n                        }\n                    }\n\n                    // Limit by page\n                    query.limit(params.limit);\n\n                    // Paginate\n                    query.skip((params.page * params.limit) - params.limit);\n                    query.find({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                    return defer.promise;\n                },\n                count      : function (params) {\n                    var defer = $q.defer();\n                    var query = new Parse.Query(this);\n\n                    if (params.filter != '') {\n                        query.contains('words', params.filter);\n                    }\n\n                    if (params.date && params.date !== null) {\n                        var start = moment(params.date).startOf('day');\n                        var end   = moment(params.date).endOf('day');\n                        query.greaterThanOrEqualTo('createdAt', start.toDate());\n                        query.lessThanOrEqualTo('createdAt', end.toDate());\n                    }\n\n                    if (params.status && params.status !== null) {\n\n                        if (params.status === 'pending') {\n                            query.doesNotExist('isApproved');\n                        } else if (params.status === 'rejected') {\n                            query.equalTo('isApproved', false);\n                        } else if (params.status === 'approved') {\n                            query.equalTo('isApproved', true);\n                        }\n                    }\n\n                    query.count({\n                        success: function (count) {\n                            defer.resolve(count);\n                        },\n                        error  : function (error) {\n                            defer.reject(error);\n                        }\n                    });\n\n                    return defer.promise;\n                }\n            });\n\n        Object.defineProperty(ParseObject.prototype, 'likesTotal', {\n            get: function () {\n                return this.get('likesTotal');\n            },\n            set: function (value) {\n                this.set('likesTotal', value);\n            }\n        });\n        Object.defineProperty(ParseObject.prototype, 'user', {\n            get: function () {\n                return this.get('user');\n            },\n            set: function (value) {\n                this.set('user', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'hashtags', {\n            get: function () {\n                return this.get('hashtags');\n            },\n            set: function (value) {\n                this.set('hashtags', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'words', {\n            get: function () {\n                return this.get('words');\n            },\n            set: function (value) {\n                this.set('words', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'location', {\n            get: function () {\n                return this.get('location');\n            },\n            set: function (val) {\n                this.set('location', new Parse.GeoPoint({\n                    latitude : val.latitude,\n                    longitude: val.longitude\n                }));\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'address', {\n            get: function () {\n                return this.get('address');\n            },\n            set: function (value) {\n                this.set('address', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'icon', {\n            get: function () {\n                return this.get('icon');\n            },\n            set: function (value) {\n                this.set('icon', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('GalleryFeedback', function ($q, moment) {\n\n    var ParseObject = Parse.Object.extend('GalleryFeedback', {\n      getStatus: function () {\n        if (this.isApproved) {\n          return 'Approved';\n        } else if (this.isApproved === false) {\n          return 'Rejected';\n        } else {\n          return 'Pending';\n        }\n      }\n    }, {\n      create : function (item) {\n        var defer    = $q.defer();\n        var objPlace = new ParseObject();\n        item.user    = Parse.User.current();\n        objPlace.save(item, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      update : function (item) {\n        var defer = $q.defer();\n        item.save(null, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      destroy: function (item) {\n        var defer = $q.defer();\n        item.destroy({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      all    : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('words', params.filter);\n        }\n\n        if (params.date && params.date !== null) {\n          var start = moment(params.date).startOf('day');\n          var end   = moment(params.date).endOf('day');\n          query.greaterThanOrEqualTo('createdAt', start.toDate());\n          query.lessThanOrEqualTo('createdAt', end.toDate());\n        }\n\n        if (params.status && params.status !== null) {\n\n          if (params.status === 'pending') {\n            query.doesNotExist('isApproved');\n          } else if (params.status === 'rejected') {\n            query.equalTo('isApproved', false);\n          } else if (params.status === 'approved') {\n            query.equalTo('isApproved', true);\n          }\n\n        }\n\n        query.include('gallery')\n        query.include('User')\n        query.descending('createdAt');\n        query.limit(params.limit);\n        query.skip((params.page * params.limit) - params.limit);\n        query.find({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      count  : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('words', params.filter);\n        }\n\n        if (params.date && params.date !== null) {\n          var start = moment(params.date).startOf('day');\n          var end   = moment(params.date).endOf('day');\n          query.greaterThanOrEqualTo('createdAt', start.toDate());\n          query.lessThanOrEqualTo('createdAt', end.toDate());\n        }\n\n        // Order Table\n        if (params.order) {\n          if (params.order.indexOf('-') < -1) {\n            query.ascending(params.order);\n          } else {\n            query.descending(params.order.replace('-'));\n          }\n        }\n\n        if (params.status && params.status !== null) {\n\n          if (params.status === 'pending') {\n            query.doesNotExist('isApproved');\n          } else if (params.status === 'rejected') {\n            query.equalTo('isApproved', false);\n          } else if (params.status === 'approved') {\n            query.equalTo('isApproved', true);\n          }\n        }\n\n        query.count({\n          success: function (count) {\n            defer.resolve(count);\n          },\n          error  : function (error) {\n            defer.reject(error);\n          }\n        });\n\n        return defer.promise;\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'user', {\n      get: function () {\n        return this.get('user');\n      },\n      set: function (value) {\n        this.set('user', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'subject', {\n      get: function () {\n        return this.get('subject');\n      },\n      set: function (value) {\n        this.set('subject', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'title', {\n      get: function () {\n        return this.get('title');\n      },\n      set: function (value) {\n        this.set('title', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'hashtags', {\n      get: function () {\n        return this.get('hashtags');\n      },\n      set: function (value) {\n        this.set('hashtags', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'words', {\n      get: function () {\n        return this.get('words');\n      },\n      set: function (value) {\n        this.set('words', value);\n      }\n    });\n\n\n    Object.defineProperty(ParseObject.prototype, 'isApproved', {\n      get: function () {\n        return this.get('isApproved');\n      },\n      set: function (value) {\n        this.set('isApproved', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n      get: function () {\n        return this.get('expiresAt');\n      },\n      set: function (value) {\n        this.set('expiresAt', value);\n      }\n    });\n\n    return ParseObject;\n\n  });\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('GallerySetting', function ($q, moment) {\n\n    var ParseObject = Parse.Object.extend('GallerySetting', {\n      getStatus: function () {\n        if (moment().toDate() >= this.expiresAt) {\n          return 'Expired';\n        }\n        else if (this.isApproved) {\n          return 'Approved';\n        } else if (this.isApproved === false) {\n          return 'Rejected';\n        } else {\n          return 'Pending';\n        }\n      }\n    }, {\n      create : function (item) {\n        var defer    = $q.defer();\n        var objPlace = new ParseObject();\n\n        objPlace.save(item, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      update : function (item) {\n        var defer = $q.defer();\n        item.save(null, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      destroy: function (item) {\n        var defer = $q.defer();\n        item.destroy({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      all    : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('canonical', params.filter);\n        }\n\n        query.descending('createdAt');\n        query.limit(params.limit);\n        query.skip((params.page * params.limit) - params.limit);\n        query.find({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      count  : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        query.count({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      }\n\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'key', {\n      get: function () {\n        return this.get('key');\n      },\n      set: function (value) {\n        this.set('key', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'value', {\n      get: function () {\n        return this.get('value');\n      },\n      set: function (value) {\n        this.set('value', value);\n      }\n    });\n\n    return ParseObject;\n\n  });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Geolocation', GeolocationFactory);\n\n    function GeolocationFactory($ionicPlatform, $q) {\n        return {\n            getCurrentPosition: getCurrentPosition\n        };\n\n        function getCurrentPosition($cordovaGeolocation) {\n            var defer = $q.defer();\n\n            $ionicPlatform.ready(function () {\n                var options = {\n                    maximumAge        : 3000,\n                    timeout           : 1000,\n                    enableHighAccuracy: true\n                };\n\n                var options = {timeout: 10000, enableHighAccuracy: true};\n\n                if (navigator.geolocation) {\n                    navigator.geolocation.getCurrentPosition(\n                        function(position) {\n                            // Get current cordinates.\n                            console.log(position);\n                            defer.resolve(position);\n                        },\n                        function(error) {\n                            defer.reject(error);\n                        },\n                        {timeout: 30000, enableHighAccuracy: true, maximumAge: 75000}\n                    );\n                }\n                \n                //$cordovaGeolocation.getCurrentPosition(options).then(defer.resolve).catch(defer.reject);\n\n                //navigator.geolocation.getCurrentPosition(\n                //    defer.resolve,\n                //    defer.reject,\n                //    options);\n            });\n\n            return defer.promise;\n        }\n    }\n\n})();\n(function () {\n  'use strict';\n  angular.module('starter').factory('GoogleAnalytics', GoogleAnalyticsFactory);\n\n  function GoogleAnalyticsFactory($cordovaGoogleAnalytics) {\n    var TAG      = 'AnalyticsService';\n    var canTrack = false;\n    return {\n      init          : init,\n      trackView     : trackView,\n      trackEvent    : trackEvent,\n      trackException: trackException\n    };\n\n    function init(trackingId) {\n      if (trackingId !== null && trackingId !== '' && window.cordova) {\n        $cordovaGoogleAnalytics.debugMode();\n        $cordovaGoogleAnalytics.startTrackerWithId(trackingId);\n        canTrack = true;\n      } else {\n        console.warn('[' + TAG + ']: Invalid Tracker ID or not using emulator');\n      }\n    }\n\n    function trackEvent(category, action, label) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackEvent(category, action, label);\n      }\n    }\n\n    function trackView(viewName) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackView(viewName);\n      }\n    }\n\n    function trackException(description, isFatal) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackException(description, isFatal)\n      }\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Install', InstallFactory);\n\n    function InstallFactory(ParseCloud) {\n        return {\n            start : start,\n            status: status,\n        };\n\n        function start(data) {\n            return ParseCloud.run('install', data);\n        }\n\n        function status(data) {\n            return ParseCloud.run('status', data);\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ParseCloud', ParseCloudFactory);\n\n    function ParseCloudFactory($q) {\n        return {\n            run: run\n        };\n\n        function run(action, data) {\n            var defer = $q.defer();\n            Parse.Cloud.run(action, data, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('ParseFile', function ($q) {\n    return {\n      upload: upload\n    };\n\n    function upload(file, ext) {\n      var defer = $q.defer();\n      var filename = 'file.jpg';\n\n      if (ext) {\n        filename.replace('.jpg', ext);\n      }\n      \n      new Parse.File(filename, file)\n        .save({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n      return defer.promise;\n    }\n  });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ParsePush', ParsePushFactory);\n\n    function ParsePushFactory($q, $cordovaDevice) {\n\n        return {\n            init         : init,\n            on           : on,\n            subscribe    : subscribe,\n            unsubscribe  : unsubscribe,\n            subscribeUser: subscribeUser,\n        };\n\n\n        function installation(installationId) {\n            var installationObj = Parse.Object.extend('UserDevice');\n            return new installationObj()\n                .set('device', $cordovaDevice.getDevice())\n                .set('cordova', $cordovaDevice.getCordova())\n                .set('model', $cordovaDevice.getModel())\n                .set('platform', $cordovaDevice.getPlatform())\n                .set('uuid', $cordovaDevice.getUUID())\n                .set('version', $cordovaDevice.getVersion())\n                .set('user', Parse.User.current())\n                .set('installationId', installationId)\n                .save();\n        }\n\n        function init() {\n            if (window.ParsePushPlugin) {\n\n                ParsePushPlugin.getInstallationId(function (id) {\n                    // note that the javascript client has its own installation id,\n                    // which is different from the device installation id.\n                    console.log(\"device installationId: \" + id);\n                    installation(id);\n                }, function (e) {\n                    console.log('error', e);\n                });\n\n                ParsePushPlugin.getSubscriptions(function (subscriptions) {\n                    console.log(subscriptions);\n                }, function (e) {\n                    console.log('error', e);\n                });\n\n\n                on('receivePN', function (pn) {\n                    console.log('yo i got this push notification:' + JSON.stringify(pn));\n                });\n\n                //\n                // When the app is off or in background, push notifications get added\n                // to the notification tray. When a user open a notification, you\n                // can catch it via openPN\n                on('openPN', function (pn) {\n                    console.log('a notification was opened:' + JSON.stringify(pn));\n                });\n            }\n        }\n\n\n        function subscribeUser() {\n            var user = Parse.User.current();\n            if (window.ParsePushPlugin && user) {\n                var channel = 'user_' + user.attributes.username;\n                subscribe(channel);\n            }\n        }\n\n        function on(event, callback) {\n            if (window.ParsePushPlugin) {\n                ParsePushPlugin.on(event, callback);\n            }\n        }\n\n        function subscribe(channel) {\n            var defer = $q.defer();\n            if (window.ParsePushPlugin) {\n                ParsePushPlugin.subscribe(channel, function (resp) {\n                    console.log('Subcribe in channel', channel);\n                    defer.resolve(resp);\n                }, function (err) {\n                    console.log('Not Subcribe in channel', channel);\n                    defer.reject(err);\n                });\n            }\n            return defer.promise;\n        }\n\n        function unsubscribe(channel) {\n            var defer = $q.defer();\n            if (window.ParsePushPlugin) {\n                ParsePushPlugin.unsubscribe(channel, function (resp) {\n                    console.log('Unsubcribe in channel', channel);\n                    defer.resolve(resp);\n                }, function (err) {\n                    console.log('Not Unsubcribe in channel', channel);\n                    defer.reject(err);\n                });\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').factory('Share', PhotogramShareFactory);\n\n    function PhotogramShareFactory(AppConfig, $q, $translate, $window) {\n\n        var options = {\n            title  : $translate.instant('Join me from ') + AppConfig.app.name + '!',\n            subject: $translate.instant(\"I'm at \") + AppConfig.app.name + '!. ' + (\n                'Install the application and follow me!') + ' ' + AppConfig.app.url,\n            image  : AppConfig.app.image,\n            link   : AppConfig.app.url\n        };\n\n        return {\n            open: open\n        };\n\n        function open(image, title) {\n            var defer = $q.defer();\n\n            if (image) {\n                options.image = image;\n            }\n\n            if (title) {\n                options.title = title;\n            }\n\n            $window.plugins.socialsharing.shareWithOptions(options, defer.success, defer.reject);\n\n            return defer.promise;\n        }\n\n    }\n})();\n\n(function () {\n  'use strict';\n\n  angular.module('starter').factory('Toast', ToastFactory);\n\n  function ToastFactory($cordovaToast, $ionicPopup) {\n\n    return {\n      alert  : alert,\n      confirm: confirm\n    };\n\n    function alert(params) {\n      if (window.cordova) {\n        $cordovaToast.show(params.text, 'short', 'bottom');\n      } else {\n        $ionicPopup.alert({\n          title   : params.title,\n          template: params.text,\n          okType  : 'button button-clear button-assertive',\n        });\n      }\n    }\n\n    function confirm(title, msg) {\n      return $ionicPopup.confirm({\n        title   : title,\n        template: msg\n      });\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('User', UserFactory);\n\n    function UserFactory($q, $cordovaDevice, ParseCloud, ParsePush) {\n\n        var User = Parse.User.extend({}, {\n            profile               : function (username) {\n                return ParseCloud.run('profile', {username: username})\n            },\n            list                  : function (params) {\n                return ParseCloud.run('listUsers', params)\n            },\n            getFollowers          : function (username) {\n                return ParseCloud.run('getFollowers', {username: username})\n            },\n            getLikers             : function (galleryId) {\n                return ParseCloud.run('getLikers', {galleryId: galleryId})\n            },\n            getFollowing          : function (username) {\n                return ParseCloud.run('getFollowing', {username: username})\n            },\n            signIn                : function (obj) {\n                var defer = $q.defer();\n\n                Parse.User.logIn(obj.username, obj.password, {\n                    success: function (currentUser) {\n\n                        // device\n                        var device;\n                        if (window.cordova) {\n                            device = {\n                                device  : $cordovaDevice.getDevice(),\n                                cordova : $cordovaDevice.getCordova(),\n                                model   : $cordovaDevice.getModel(),\n                                platform: $cordovaDevice.getPlatform(),\n                                uuid    : $cordovaDevice.getUUID(),\n                                version : $cordovaDevice.getVersion()\n                            };\n                        } else {\n                            device = {\n                                device  : {device: window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[0]},\n                                cordova : '',\n                                model   : window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[0],\n                                platform: window.navigator.platform,\n                                uuid    : '',\n                                version : window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[1]\n                            };\n                        }\n\n                        console.log(currentUser);\n                        console.log(device);\n\n                        User.update(device).then(function () {\n                            defer.resolve(currentUser);\n                        }).catch(defer.reject)\n\n                        ParsePush.init().then(function () {\n                            ParsePush.subscribeUser();\n                        });\n\n                        console.log('updateUser', device);\n                        //user.save(defer.resolve, defer.reject);\n                    },\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            signUp                : function (data) {\n                var user = new Parse.User()\n                    .set({'name': data.name})\n                    .set({'username': data.username})\n                    .set({'email': data.email})\n                    .set({'password': data.password})\n                    .set({'roleName': 'User'});\n\n                var acl = new Parse.ACL();\n                acl.setPublicReadAccess(false);\n                acl.setPublicWriteAccess(false);\n                user.setACL(acl);\n                return user.save(null);\n\n            },\n            signInViaFacebook     : function (authData) {\n                //var expiration = new Date();\n\n                var facebookAuthData = {\n                    id             : authData.authResponse.userID,\n                    access_token   : authData.authResponse.accessToken,\n                    expiration_date: (new Date().getTime() +1000).toString()\n                };\n\n                console.log(authData, facebookAuthData);\n\n                var defer = $q.defer();\n\n                Parse.FacebookUtils.logIn(facebookAuthData, {\n                    success: function (user) {\n                        console.log('User', user);\n                        defer.resolve(user);\n                    },\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            logOut                : function () {\n                return Parse.User.logOut();\n            },\n            findByEmail           : function (email) {\n                return ParseCloud.run('findUserByEmail', {email: email});\n            },\n            updateWithFacebookData: function (data) {\n                var defer = $q.defer();\n                ParseCloud.run('saveFacebookPicture', {}).then(function () {\n                    var user = Parse.User.current();\n\n                    if (user.attributes.username === '') {\n                        user.set({'username': data.email});\n                    }\n\n                    user.set({'email': data.email});\n                    user.set({'name': data.name});\n                    user.setACL(new Parse.ACL(user));\n                    user.save(null, {\n                        success: function () {\n                            user.fetch().then(function (userFetched) {\n                                defer.resolve(userFetched);\n                            }, function (error) {\n                                defer.reject(error);\n                            });\n                        }\n                    });\n                }).catch(defer.reject);\n                return defer.promise;\n            },\n            getPublicData         : function (user) {\n                console.log(user);\n                var defer = $q.defer();\n                new Parse.Query('UserData').equalTo('user', user).first().then(function (userData) {\n                    if (userData) {\n                        defer.resolve(userData);\n                    } else {\n                        defer.reject(Parse.Promise.error({\n                            code   : 1,\n                            message: 'User Data not found'\n                        }));\n                    }\n                }, defer.reject);\n                return defer.promise;\n            },\n            recoverPassword       : function (email) {\n                return Parse.User.requestPasswordReset(email);\n            },\n            destroy               : function () {\n                return Parse.User.current().destroy();\n            },\n            setPhoto              : function (parseFile) {\n                var defer = $q.defer();\n                var user  = Parse.User.current();\n                user.set({'photo': parseFile});\n                user.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            follow                : function (userId) {\n                return ParseCloud.run('followUser', {userId: userId});\n            },\n            all                   : function (params) {\n                return ParseCloud.run('getUsers', params);\n            },\n            validateUsername      : function (input) {\n                return ParseCloud.run('validateUsername', {username: input});\n            },\n            validateEmail         : function (input) {\n                return ParseCloud.run('validateEmail', {email: input});\n            },\n            update                : function (params) {\n                var user = Parse.User.current();\n                angular.forEach(params, function (value, key) {\n                    user.set(key, value);\n                });\n                return user.save();\n            },\n            delete                : function (data) {\n                return ParseCloud.run('destroyUser', data);\n            },\n            fetch                 : function () {\n                var defer = $q.defer();\n                if (Parse.User.current()) {\n                    Parse.User.current().fetch().then(defer.resolve, defer.reject);\n                } else {\n                    defer.reject();\n                }\n                return defer.promise;\n            }\n\n        });\n\n        Object.defineProperty(User.prototype, 'name', {\n            get: function () {\n                return this.get('name');\n            },\n            set: function (val) {\n                this.set('name', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'username', {\n            get: function () {\n                return this.get('username');\n            },\n            set: function (val) {\n                this.set('username', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'status', {\n            get: function () {\n                return this.get('status');\n            },\n            set: function (val) {\n                this.set('status', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'gender', {\n            get: function () {\n                return this.get('gender');\n            },\n            set: function (val) {\n                this.set('gender', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'email', {\n            get: function () {\n                return this.get('email');\n            },\n            set: function (val) {\n                this.set('email', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'photo', {\n            get: function () {\n                return this.get('photo');\n            },\n            set: function (val) {\n                this.set('photo', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'photoThumb', {\n            get: function () {\n                return this.get('photoThumb');\n            },\n            set: function (val) {\n                this.set('photoThumb', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'roleName', {\n            get: function () {\n                return this.get('roleName');\n            },\n            set: function (val) {\n                this.set('roleName', val);\n            }\n        });\n\n        return User;\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('signinModal', signinModalDirective);\n\n    function signinModalDirective($ionicModal, Loading, User, $state, Toast, UserForm, AppConfig, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : signinModalLink,\n        };\n\n        function signinModalLink($scope, elem, attr) {\n            elem.bind('click', function () {\n\n                $scope.formFields  = UserForm.login;\n                $scope.routeLogged = AppConfig.routes.home;\n\n                $scope.form = {\n                    username: '',\n                    password: ''\n                };\n\n                $scope.submitLogin = function (rForm, data) {\n                    var form = angular.copy(data);\n                    if (rForm.$valid) {\n                        Loading.start();\n                        User.signIn(form).then(function (data) {\n                            console.log(data);\n                            $rootScope.currentUser = data;\n                            $state.go($scope.routeLogged, {\n                                clear: true\n                            });\n                            $scope.closeModal();\n                            Loading.end();\n                        }).catch(function (resp) {\n                            Toast.alert({\n                                title: 'Error',\n                                text : 'Incorrect username or password'\n                            });\n                            Loading.end();\n                        });\n                    } else {\n                        return false;\n                    }\n                };\n\n                $ionicModal.fromTemplateUrl('app/directive/SigninModalDirective.html', {\n                    scope          : $scope,\n                    animation      : 'slide-in-up',\n                    focusFirstInput: true,\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n            });\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('signupModal', signupModalDirective);\n\n    function signupModalDirective(UserForm, AppConfig, Loading, User, $state, Toast, $ionicModal, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : signupModalLink,\n        };\n\n        function signupModalLink($scope, elem, attr) {\n            elem.bind('click', function () {\n\n                $scope.formFields  = UserForm.register;\n                $scope.routeLogged = AppConfig.routes.home;\n\n                $scope.form = {\n                    username: '',\n                    email   : '',\n                    password: ''\n                };\n\n                $scope.submitRegister = function (rForm, data) {\n                    if (rForm.$valid) {\n                        Loading.start();\n                        var form = angular.copy(data);\n                        User.signUp(form).then(function (resp) {\n                            console.log(resp);\n\n                            // After register, login\n                            User.signIn({\n                                username: form.username,\n                                password: form.password\n                            }).then(function (data) {\n                                console.log(data);\n                                $rootScope.currentUser = Parse.User.current();\n                                $state.go('user.avatar', {\n                                    clear: true\n                                });\n                                Loading.end();\n                                $scope.closeModal();\n                            }).catch(function (resp) {\n                                console.log(resp);\n                                Toast.alert({\n                                    title: 'Alert',\n                                    text : resp.error\n                                });\n                                Loading.end();\n                            });\n                        }).catch(function (resp) {\n                            console.log(resp);\n                            Toast.alert({\n                                title: 'Alert',\n                                text : resp.error\n                            });\n                            Loading.end();\n                        });\n                    }\n\n\n                };\n\n                $ionicModal.fromTemplateUrl('app/directive/SignupModalDirective.html', {\n                    scope          : $scope,\n                    animation      : 'slide-in-up',\n                    focusFirstInput: true,\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n            });\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .directive('buy', buyDirective);\n\n    function buyDirective($cordovaInAppBrowser) {\n        return {\n            restrict: 'A',\n            link: buyLink\n        };\n\n        function buyLink(scope, elem) {\n            elem.bind('click', function () {\n                var url     = 'https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S';\n\n                if(window.cordova ) {\n                    cordova\n                        .ThemeableBrowser\n                        .open(url, '_blank', {\n                            statusbar: {\n                                color: '#ffffffff'\n                            },\n                            toolbar: {\n                                height: 44,\n                                color: '#f0f0f0ff'\n                            },\n                            title: {\n                                color: '#333333',\n                                showPageTitle: true\n                            },\n                            closeButton: {\n                                image: 'close',\n                                imagePressed: 'close_pressed',\n                                align: 'left',\n                                event: 'closePressed'\n                            },\n                            backButtonCanClose: true\n                        });\n                } else {\n                    window.open(url,'_blank');\n                }\n            });\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('compareTo', compareToDirective);\n\n    function compareToDirective() {\n        return {\n            restrict: 'A',\n            scope   : {\n                targetModel: '=compareTo'\n            },\n            require : 'ngModel',\n            link    : function postLink(scope, element, attrs, ctrl) {\n\n                var compare = function () {\n\n                    var e1 = element.val();\n                    var e2 = scope.targetModel;\n\n                    if (e2 !== null) {\n                        return e1 === e2;\n                    }\n\n                    return false;\n                };\n\n                scope.$watch(compare, function (newValue) {\n                    ctrl.$setValidity('errorCompareTo', newValue);\n                });\n\n            }\n        };\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('distanceModal', distanceModalDirective);\n\n    function distanceModalDirective($localStorage, $ionicModal) {\n        return {\n            restrict: 'A',\n            link    : distanceModalLink\n        };\n\n        function distanceModalLink($scope, elem, attr) {\n\n            elem.bind('click', function () {\n                    $scope.storage   = $localStorage;\n                    $scope.distances = [\n                        {\n                            val : 0.20,\n                            text: 'perto'\n                        },\n                        {\n                            val : 0.60,\n                            text: 'longe'\n                        },\n                        {\n                            val : 1.00,\n                            text: '1 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 5.00,\n                            text: '5 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 10.00,\n                            text: '10 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 25.00,\n                            text: '25 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 50.00,\n                            text: '50 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 100.00,\n                            text: '100 ' + $scope.storage.unit\n                        },\n                    ];\n\n                    $ionicModal.fromTemplateUrl('app/directive/distanceModal.html', {\n                        scope: $scope\n                    }).then(function (modal) {\n                        $scope.modal = modal;\n                        $scope.modal.show();\n\n                    });\n\n                    $scope.onDistanceSelected = function (distance) {\n                        console.log('Distance', distance);\n                    };\n\n                    $scope.closeDistanceModal = function () {\n                        $scope.modal.hide();\n                        $scope.modal.remove();\n                    };\n\n\n                }\n            );\n        }\n    }\n\n})\n();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('emailValidator', emailValidatorDirective);\n\n    function emailValidatorDirective(User) {\n        return {\n            require: 'ngModel',\n            link    : emailValidatorLink,\n        };\n\n        function emailValidatorLink(scope, elem, attr,ngModel) {\n            ngModel.$asyncValidators.email = function  (modelValue, viewValue) {\n                console.log(viewValue);\n                if(viewValue) {\n                    return User.validateEmail(viewValue);\n                }\n            }\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('facebookLogin', facebookLoginDirective);\n\n    function facebookLoginDirective(Loading, $q, $ionicPlatform, $state, $translate, AppConfig, Facebook, Dialog, User, $rootScope, Toast) {\n        return {\n            restrict: 'E',\n            link    : facebookLoginLink,\n            template: '<button class=\"button button-block button-facebook\"><i class=\"icon ion-social-facebook\"></i> <ion-spinner ng-if=\"loading\"></ion-spinner> <span ng-if=\"!loading\">{{ me.name || \\'loginWithFacebook\\'| translate}}</span> </button>',\n        };\n\n        function facebookLoginLink(scope, elem, attr) {\n\n            scope.facebookStatus = null;\n\n            $ionicPlatform.ready(function () {\n                Facebook.me().then(function (resp) {\n                    console.log(resp);\n                    scope.me = resp;\n                }).catch(function () {\n                    console.log('Not logged');\n                });\n            });\n\n\n            elem.bind('click', facebookLogin);\n\n            function facebookLogin() {\n                console.log('Facebook login');\n\n                scope.loading = true;\n\n                Facebook.logIn().then(function (fbAuthData) {\n                    console.log(fbAuthData);\n                    if (fbAuthData.status === 'connected') {\n                        var fbData = null;\n                        return Facebook.me().then(function (data) {\n                            fbData = data;\n                            return User.findByEmail(data.email);\n                        }).then(function (user) {\n                            if (!user.id) {\n                                return User.signInViaFacebook(fbAuthData);\n                            } else if (user.get('authData')) {\n                                if (user.get('authData').facebook.id === fbData.id) {\n                                    return User.signInViaFacebook(fbAuthData);\n                                }\n                            } else {\n                                $rootScope.tempUser = user;\n                                $state.go('user.merge', {clear: true});\n                            }\n                        }).then(function () {\n                            return User.updateWithFacebookData(fbData);\n                        }).then(function (user) {\n                            if (user) {\n                                $rootScope.currentUser = user;\n                                $state.go(AppConfig.routes.home, {\n                                    clear: true\n                                });\n                                console.log(user, user.attributes);\n                                $rootScope.$broadcast('onUserLogged');\n                                Loading.end();\n                                Toast.alert({text: $translate.instant('loggedInAsText') + ' ' + user.get('email')});\n                            } else {\n                                console.log('Error ');\n                            }\n                        }, function (error) {\n                            Dialog.alert(error);\n                            Loading.end();\n                            scope.loading = false;\n                        });\n                    }\n\n                }).catch(function (err) {\n                    console.log('err', err);\n                    Loading.end();\n                    scope.loading = false;\n                });\n\n            }\n\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('focusMe', focusMeDirective);\n\n    function focusMeDirective($timeout, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : function (scope, element, attrs) {\n\n                $rootScope.$on('openKeyboard', openKeyboard);\n\n                openKeyboard();\n\n                function openKeyboard() {\n                    $timeout(function () {\n                        element[0].focus();\n                        element[0].click();\n                        if (window.cordova) {\n                            cordova.plugins.Keyboard.show();\n                        }\n                    }, 750);\n                }\n            }\n        };\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n angular\n    .module('starter')\n    .directive('heart', heartDirective);\n\n  function heartDirective() {\n    return {\n      restrict: 'A',\n      scope: {\n        item: '='\n      },\n      link: heartLink\n    };\n\n    function heartLink(scope, elem, attr) {\n      elem.bind('click', function () {\n        console.log(scope.item);\n        elem.addClass('happy');\n      });\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter')\n           .directive('ionLoading', ionLoading)\n           .run(runLoading)\n           .factory('Loading', Loading);\n\n    function ionLoading() {\n        return {\n            restrict: 'E',\n            scope   : {\n                icon   : '@',\n                loading: '='\n            },\n            template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n        };\n    }\n\n    function runLoading($rootScope, $ionicLoading) {\n        //Loading\n        $rootScope.$on('ionicLoading:true', function (text) {\n            $rootScope.loading = true;\n            $ionicLoading.show(text);\n        });\n        $rootScope.$on('ionicLoading:false', function () {\n            $rootScope.loading = false;\n            $ionicLoading.hide();\n        });\n    }\n\n    function Loading($rootScope, $timeout) {\n        var seconds = 0;\n\n        return {\n            start: showLoading,\n            end: hideLoading,\n        };\n\n\n        function showLoading(text) {\n            $rootScope.$broadcast('ionicLoading:true', text);\n        }\n\n        function hideLoading() {\n            $timeout(function () {\n                $rootScope.$broadcast('ionicLoading:false');\n            }, parseInt(seconds + '000'));\n        }\n    }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .directive('loading', PhotogramLoadingDirective);\n\n  function PhotogramLoadingDirective() {\n    return {\n      restrict: 'E',\n      scope   : {\n        loading: '=',\n        icon   : '@'\n      },\n      template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n    };\n  }\n\n})();\n\n(function () {\n  'use strict';\n  \n  angular\n    .module('starter')\n    .directive('photogramFollow', photogramFollowDirective);\n\n  function photogramFollowDirective($ionicModal, AppConfig, Photogram) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        user: '='\n      },\n      link: function (scope, elem, attr) {\n        elem.bind('click', openModal);\n        scope.closeModal = closeModal;\n\n        function openModal() {\n          $ionicModal.fromTemplateUrl(path + '/directive/follow/photogram.follow.modal.html', {\n            scope: scope\n          }).then(function (modal) {\n            scope.modalFollow = modal;\n            console.log('Open modal follow', scope.user);\n\n            Photogram\n              .getFollow(scope.user)\n              .then(function (resp) {\n                console.log(resp);\n                scope.data = resp;\n                scope.modalFollow.show();\n              });\n\n          });\n        }\n\n        function closeModal() {\n          scope.modalFollow.hide();\n          scope.modalFollow.remove();\n        }\n      }\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoGrid', photoGridDirective);\n\n    function photoGridDirective(Gallery, $rootScope, $ionicPopup, Share, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                username: '=',\n                user    : '=',\n                profile : '=',\n                onReload: '=',\n            },\n            templateUrl: 'app/directive/photoGridDirective.html',\n            link       : photoGridCtrl\n        };\n\n        function photoGridCtrl($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 1;\n            $scope.data        = [];\n\n            if ($scope.username) {\n                $scope.params.username = $scope.username;\n            }\n\n            $scope.loading = true;\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n\n            $rootScope.$on('gallery:search', function (elem, item) {\n                console.log(elem, item);\n                $scope.params.search = item.text;\n                $scope.onReload();\n            });\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n\n            var isMoreData = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n\n                Gallery.feed($scope.params).then(function (data) {\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.loading = false;\n                    $rootScope.$broadcast('scroll.infiniteScrollComplete');\n                    $rootScope.$broadcast('scroll.refreshComplete');\n\n                }).catch(function () {\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                $scope.loading     = true;\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $scope.action = function (gallery) {\n\n                var buttons = [\n                    {\n                        text: '<i class=\"icon ion-share\"></i>' + ('Share')\n                    }, {\n                        text: '<i class=\"icon ion-alert-circled\"></i>' + ('Report')\n                    }\n                ];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user_id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + ('Delete your photo')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    titleText    : ('Photo'),\n                    cancelText   : ('Cancel'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            Share.share(message);\n                            break;\n                        case 1:\n                            FeedbackModal.modal(gallery);\n                            break;\n                        case 2:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : ('Delete photo'),\n                                    template: ('Are you sure?')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery).then(function () {\n                                            console.log('Photo deleted');\n                                            $scope.$emit('PhotogramHome:reload');\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoComment', photoCommentDirective);\n\n    function photoCommentDirective($ionicModal, $http, $q, $ionicScrollDelegate, Loading, $ionicPopup, User, Dialog, $rootScope, Gallery, GalleryComment, GalleryForm) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function ($scope, elem) {\n\n\n                elem.bind('click', openModalComment);\n\n                function init() {\n                    $scope.currentUser = Parse.User.current();\n                    $scope.nocomments  = false;\n                    $scope.loading     = false;\n                    $scope.form        = {\n                        gallery: $scope.ngModel.galleryObj,\n                        text   : ''\n                    };\n                }\n\n                function openModalComment() {\n                    console.log($scope.ngModel);\n\n                    init();\n\n                    $scope.loading       = true;\n                    $scope.formFields    = GalleryForm.formComment;\n                    $scope.submitComment = submitComment;\n                    $scope.deleteComment = deleteComment;\n                    $scope.editComment   = editComment;\n                    $scope.closeModal    = function () {\n                        $scope.modal.hide();\n                        $scope.modal.remove();\n                    };\n\n                    getComments();\n\n                    //Mentios\n                    // shows the use of dynamic values in mentio-id and mentio-for to link elements\n                    $scope.myIndexValue = \"5\";\n\n\n                    $scope.searchPeople = function (term) {\n                        var peopleList = [];\n                        return User.getFollowing().then(function (response) {\n                            _.each(response, function (item) {\n                                item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                                item.bio      = item.status;\n                                if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                                    peopleList.push(item);\n                                }\n                            });\n                            $scope.people = peopleList;\n                            console.log(peopleList);\n                            return $q.when(peopleList);\n                        });\n                    };\n\n                    $scope.getPeopleTextRaw = function (item) {\n                        return '@' + item.username;\n                    };\n\n\n                    //$scope.comments = $scope.ngModel.comments || [];\n                    //$timeout(function () {\n                    //    if ($scope.comments.length === 0) {\n                    //        $scope.nocomments = true;\n                    //    }\n                    //}, 500);\n\n\n                    $ionicModal.fromTemplateUrl('app/directive/photoCommentDirective.html', {\n                        scope          : $scope,\n                        focusFirstInput: true\n                    }).then(function (modal) {\n                        $scope.modal = modal;\n                        $scope.modal.show();\n\n                    });\n                }\n\n                function deleteComment(obj) {\n                    console.log(obj);\n                    Dialog.confirm(('Delete comment'), ('You are sure?')).then(function (resp) {\n                        console.log(resp);\n                        if (resp) {\n                            GalleryComment.destroy(obj).then(function (resp) {\n                                console.log(resp);\n                                getComments();\n                            });\n                        }\n                    });\n                }\n\n                function editComment(obj) {\n                    console.log(obj);\n                    // An elaborate, custom popup\n                    $scope.data = angular.copy(obj);\n                    $ionicPopup\n                        .show({\n                            template: '<input type=\"text\" ng-model=\"data.text\">',\n                            title   : ('Edit comment'),\n                            //subTitle: 'Please use normal things',\n                            scope   : scope,\n                            buttons : [{\n                                text: ('Cancel')\n                            }, {\n                                text : '<b>OK</b>',\n                                type : 'button-positive',\n                                onTap: function (e) {\n                                    console.log($scope.data);\n                                    if (!$scope.data.text) {\n                                        //don't allow the user to close unless he enters wifi password\n                                        e.preventDefault();\n                                    } else {\n                                        return $scope.data;\n                                    }\n                                }\n                            }]\n                        })\n                        .then(function (resp) {\n                            console.log(resp);\n                            if (resp) {\n                                GalleryComment.update(resp)\n                                              .then(function (resp) {\n                                                  console.log(resp);\n                                                  getComments();\n                                              });\n                            }\n                        });\n                }\n\n                function getComments() {\n                    $scope.loading = true;\n\n\n                    Gallery.comments({galleryId: $scope.ngModel.id}).then(function (resp) {\n                        $scope.comments         = resp;\n                        $scope.ngModel.comments = resp;\n                        $scope.loading          = false;\n\n                        $timeout(function () {\n                            // Scroll to bottom\n                            $ionicScrollDelegate.scrollBottom();\n                        }, 1);\n                    });\n                }\n\n                function submitComment(rForm, form) {\n                    if (rForm.$valid) {\n                        var dataForm = angular.copy(form);\n                        console.log(dataForm);\n                        Loading.start();\n                        GalleryComment.create(dataForm).then(function (resp) {\n                            console.log(resp);\n                            getComments();\n                            $rootScope.$emit('openKeyboard');\n                            Loading.end();\n                            $scope.closeModal();\n                        });\n                    }\n                }\n\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('photoLike', photoLikeDirective);\n\n    function photoLikeDirective(Gallery) {\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function (scope, elem) {\n                elem.bind('click', function () {\n                        var _model      = scope.ngModel;\n                        _model.progress = true;\n                        _model.liked    = !_model.liked;\n\n                        Gallery.likeGallery({galleryId: scope.ngModel.objectId}).then(function (resp) {\n                            console.log(resp);\n                            _model.likes    = resp.likes;\n                            _model.progress = false;\n                            console.log(_model, resp);\n                            if (resp.action === 'like') {\n                                scope.ngModel.isLiked = true;\n                                scope.ngModel.likesTotal += 1;\n                            }\n\n                            if (resp.action === 'unlike') {\n                                scope.ngModel.isLiked = false;\n                                scope.ngModel.likesTotal -= 1;\n                            }\n                        });\n                    }\n                );\n\n            }\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoList', photoListDirective);\n\n    function photoListDirective(Gallery, $rootScope, $ionicPopup, $translate, $state, Share, Toast, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                username  : '=',\n                profile   : '=',\n                load      : '=',\n                openLikers: '=',\n                onReload  : '=',\n            },\n            templateUrl: 'app/directive/photoListDirective.html',\n            link       : photoListController\n        };\n\n        function photoListController($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 0;\n            $scope.data        = [];\n\n            if ($scope.username) {\n                $scope.params.username = $scope.username;\n            }\n\n            $scope.loading = true;\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n            $scope.openComment = function (galleryId) {\n                $state.go('galleryComments', {galleryId: galleryId})\n            };\n\n            $scope.share = Share.open;\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n            var isMoreData           = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n                Gallery.feed($scope.params).then(function (data) {\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.loading = false;\n                    $rootScope.$broadcast('scroll.infiniteScrollComplete');\n                    $rootScope.$broadcast('scroll.refreshComplete');\n\n                }).catch(function () {\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $rootScope.$on('onUserLogged', $scope.onReload);\n\n            $scope.action = function (gallery) {\n\n                var buttons = [\n                    {\n                        text: '<i class=\"icon ion-alert-circled\"></i>' + $translate.instant('reportText')\n                    }\n                ];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user.obj.id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + $translate.instant('deleteGallery')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    cancelText   : $translate.instant('cancelText'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            FeedbackModal.modal(gallery.galleryObj);\n                            break;\n                        case 1:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : $translate.instant('deleteGalleryConfirmText'),\n                                    template: $translate.instant('areSure')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery.galleryObj).then(function () {\n                                            console.log('Photo deleted');\n                                            Toast.alert({\n                                                title: 'Photo',\n                                                text : 'Photo deleted'\n                                            })\n                                            $scope.onReload();\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('profileModalEdit', profileModalEditDirective);\n\n    function profileModalEditDirective($ionicModal, $rootScope, $localStorage, User, Loading, UserForm, $state) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                user: '='\n            },\n            template: '',\n            link    : function (scope, elem) {\n\n\n                elem.bind('click', openModal);\n\n\n                function init() {\n                    scope.theme      = $rootScope.theme;\n                    var user         = Parse.User.current().attributes;\n                    scope.form       = {\n                        name    : user.name,\n                        email   : user.email,\n                        status  : user.status,\n                        photo   : user.photo,\n                        username: user.username,\n                        gender  : user.gender,\n                        facebook: user.facebook\n                    };\n                    scope.formFields = UserForm.profile;\n                }\n\n\n                function openModal() {\n\n                    scope.linkFacebook        = linkFacebook;\n                    scope.logout              = logout;\n                    scope.submitUpdateProfile = submitUpdateProfile;\n                    scope.closeModal          = closeModal;\n                    scope.currentUser         = $rootScope.currentUser;\n\n                    init();\n\n                    $ionicModal.fromTemplateUrl('app/directive/profile-edit-modal.html', {\n                        scope: scope\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n                    });\n\n                    // Cleanup the modal when we're done with it!\n                    scope.$on('$destroy', function () {\n                        scope.modal.remove();\n                    });\n\n                }\n\n                function logout() {\n                    delete window.localStorage['Parse/myAppId/currentUser'];\n                    delete window.localStorage['Parse/myAppId/installationId'];\n                    $localStorage.$reset({});\n                    $state.go('user.intro', {clear: true});\n                    scope.closeModal();\n                }\n\n                function linkFacebook() {\n                    User.facebookLink().then(function (resp) {\n                        console.log(resp);\n                    });\n                }\n\n                function submitUpdateProfile() {\n                    var dataForm = angular.copy(scope.form);\n                    Loading.start();\n                    User.update(dataForm).then(function (resp) {\n                        scope.user             = resp;\n                        $rootScope.currentUser = resp;\n                        Loading.end();\n                        scope.closeModal();\n                    });\n                }\n\n                function closeModal() {\n                    scope.modal.hide();\n                }\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('profileModal', profileModalDirective);\n\n    function profileModalDirective($ionicModal, User) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                username: '='\n            },\n            link    : profileModalLink\n        };\n\n        function profileModalLink(scope, elem) {\n            elem.bind('click', function () {\n\n                console.log(scope.username);\n\n                User.profile(scope.username).then(function (data) {\n                    console.log(data);\n                    scope.user = data;\n                    openModal();\n                });\n\n            });\n\n            function openModal() {\n\n                console.log(scope.user.attributes);\n\n                $ionicModal.fromTemplateUrl('app/directive/profile-modal.html', {\n                    scope: scope\n                }).then(function (modal) {\n                    scope.modalProfile  = modal;\n                    scope.loadingFollow = true;\n                    scope.changeTab     = changeTab;\n                    scope.follow        = follow;\n                    scope.closeModal    = closeModal;\n                    scope.modalProfile.show();\n\n                    changeTab('list');\n\n                    function follow() {\n\n                        scope.loadingFollow = true;\n                        var status;\n\n                        if (scope.user.follow) {\n                            status = false;\n                        } else {\n                            status = true;\n                        }\n\n                        User.follow(scope.user.userObj.id).then(function (resp) {\n                            console.log('Follow result', resp);\n                            scope.user.isFollow = (resp === 'follow') ? true : false;\n                            if (resp == 'follow') {\n                                scope.user.followersTotal += 1;\n                            }\n                            if (resp == 'unfollow') {\n                                scope.user.followersTotal -= 1;\n                            }\n                            scope.loadingFollow = false;\n                        });\n\n\n                    }\n\n                    function closeModal() {\n                        delete scope.data;\n                        scope.modalProfile.hide();\n                    }\n                });\n\n                // Cleanup the modal when we're done with it!\n                scope.$on('$destroy', function () {\n                    scope.modalProfile.remove();\n                });\n            }\n\n            function changeTab(tab) {\n                if (tab === 'list') {\n                    scope.tab = {\n                        list: true,\n                        grid: false\n                    };\n                } else {\n                    scope.tab = {\n                        list: false,\n                        grid: true\n                    };\n                }\n            }\n\n\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .directive('ionSearch', ionSearchDirective);\n\n  function ionSearchDirective($timeout) {\n\n    return {\n      restrict   : 'E',\n      scope      : {\n        getData: '&source',\n        ngModel: '=?',\n        search : '=?filter'\n      },\n      templateUrl: 'app/module/photogram/directive/search/search-directive.html',\n      link       : function (scope, element, attrs) {\n        attrs.minLength = attrs.minLength || 0;\n        scope.placeholder = attrs.placeholder || '';\n        scope.clear = function () {\n          console.log('Limpar campo');\n          scope.input = '';\n          scope.$apply();\n        };\n\n        if (attrs.class) {\n          element.addClass(attrs.class);\n        }\n\n        if (attrs.source) {\n          scope.$watch('search.value', watchSearch);\n        }\n\n        function watchSearch(newValue) {\n          if (newValue.length > attrs.minLength) {\n            $timeout(function () {\n              scope\n                .getData({\n                  str: newValue\n                })\n                .then(function (results) {\n                  scope.ngModel = results;\n                });\n            }, 1000);\n          } else {\n            scope.ngModel = [];\n          }\n        }\n\n      }\n\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('starter')\n        .directive('settingsModal', settingsModalDirective);\n\n    function settingsModalDirective($ionicModal, $translate, AppConfig, $cordovaInAppBrowser, Share, Auth, User, UserForm, $state) {\n\n        return {\n            restrict: 'A',\n            template: '',\n            link    : function (scope, elem) {\n\n                elem.bind('click', openModal);\n                scope.closeModal     = closeModal;\n                scope.link           = link;\n                scope.share          = Share.share;\n\n                scope.logout = function  () {\n                    $state.go(AppConfig.routes.login);\n                    scope.closeModal();\n                };\n\n                function init() {\n                    scope.form       = Auth.getLoggedUser();\n                    scope.formFields = UserForm.profile;\n                    scope.languages  = AppConfig.locales;\n                    scope.language   = $translate.use();\n                }\n\n                function openModal() {\n\n                    init();\n                    $ionicModal.fromTemplateUrl('app/directive/settings-modal.html', {\n                        scope: scope\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n                    });\n                }\n\n                function link(sref) {\n                    $state.go(sref);\n                    scope.closeModal();\n                }\n\n                function submitUpdateProfile(form) {\n                    var dataForm = angular.copy(form);\n                    User.update(dataForm).then(function (resp) {\n                        console.log(resp);\n                        init();\n                        scope.closeModal();\n                    });\n                }\n\n                function closeModal() {\n                    scope.modal.hide();\n                    scope.modal.remove();\n                }\n\n            }\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('usernameValidator', usernameValidatorDirective);\n\n    function usernameValidatorDirective(User) {\n        return {\n            require: 'ngModel',\n            restrict: 'A',\n            link    : usernameValidatorLink,\n        };\n\n        function usernameValidatorLink(scope, elem, attr, ngModel) {\n            ngModel.$asyncValidators.username = function  (modelValue, viewValue) {\n                if(viewValue) {\n                    return User.validateUsername(viewValue);\n                }\n            }\n        }\n    }\n\n})();\n(function () {\n\n    angular.module('app.main').factory('FeedbackModal', FeedbackModalFactory);\n\n    function FeedbackModalFactory($q, AppConfig, GalleryFeedback, $rootScope, GalleryFeedbackForm, $ionicModal, Loading, Toast) {\n        var path = AppConfig.path;\n\n        return {\n            modal: modal\n        };\n        function modal(gallery) {\n            var $scope            = $rootScope.$new();\n            $scope.formFields     = GalleryFeedbackForm.form;\n            $scope.submitFeedback = submitFeedback;\n            $scope.closeModal     = closeModal;\n            $scope.form           = {\n                photogramId: gallery.id,\n                subject    : 'complaint'\n            };\n\n            function submitFeedback() {\n                var dataForm = angular.copy($scope.form);\n                Loading.start();\n                GalleryFeedback.create(dataForm).then(function (resp) {\n                    Loading.end();\n                    closeModal();\n\n                });\n            }\n\n\n            function closeModal() {\n                $scope.modal.hide();\n                $scope.modal.remove();\n                delete $scope.modal;\n            }\n\n            $ionicModal\n                .fromTemplateUrl('app/main/feedback/feedback-modal.html', {\n                    scope          : $scope,\n                    focusFirstInput: true\n                })\n                .then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n        }\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .factory('GalleryFeedbackForm', GalleryFeedbackFormFactory);\n\n    function GalleryFeedbackFormFactory($translate) {\n\n        var form = [{\n            key: 'title',\n            type: 'input',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('feedbackTitle'),\n                required: true\n            }\n        }, {\n            key: 'subject',\n            type: 'select',\n            templateOptions: {\n                label: $translate.instant('subject'),\n                options: [{\n                    'label': $translate.instant('complaint'),\n                    'id': 'complaint',\n                }, {\n                    'label': $translate.instant('bug'),\n                    'id': 'bug',\n                }, {\n                    'label': $translate.instant('suggestion'),\n                    'id': 'suggestion',\n                }],\n                valueProp: 'id',\n                labelProp: 'label',\n                icon: 'icon-list',\n                iconPlaceholder: true\n            }\n        }, {\n            key: 'status',\n            type: 'textarea',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('message'),\n                icon: 'ion-quote',\n                required: true,\n                iconPlaceholder: true\n            }\n        }];\n\n        return {\n            form: form\n        };\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  \n  angular.module('app.main').directive('feedback', feedbackDirective);\n\n  function feedbackDirective($ionicModal, AppConfig, PhotogramFeedback, PhotogramFeedbackForm, $state) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        photogram: '@'\n      },\n      template: '',\n      link: function (scope, elem, attr) {\n\n        scope.link = link;\n        scope.submitFeedback = submitFeedback;\n        scope.closeModal = closeModal;\n        elem.bind('click', openModal);\n\n        function init() {\n          scope.form = {\n            photogramId: scope.photogram\n          };\n          scope.formFields = PhotogramFeedbackForm.form;\n        }\n\n        function openModal() {\n\n          init();\n          $ionicModal.fromTemplateUrl('app/main/feedback/feedback-modal.html', {\n              scope: scope,\n              focusFirstInput: true\n            })\n            .then(function (modal) {\n              scope.modal = modal;\n              scope.modal.show();\n            });\n        }\n\n        function link(sref) {\n          $state.go(sref)\n          scope.closeModal();\n        }\n\n        function submitFeedback() {\n          var dataForm = angular.copy(scope.form);\n          PhotogramFeedback\n            .submit(dataForm)\n            .then(function (resp) {\n              console.log(resp);\n              init();\n              scope.closeModal();\n            });\n        }\n\n\n        function closeModal() {\n          scope.modal.hide();\n          scope.modal.remove();\n        }\n\n      }\n    };\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').controller('GalleryComment', GalleryCommentController);\n\n    function GalleryCommentController($scope, $stateParams, $q, $ionicScrollDelegate, $ionicHistory, Loading, $ionicPopup, User, Dialog, $timeout, Gallery, GalleryComment, GalleryForm) {\n\n        $scope.currentUser = Parse.User.current();\n        $scope.loading     = true;\n        $scope.formFields  = GalleryForm.formComment;\n\n        function init() {\n            $scope.nocomments = false;\n            Gallery.get($stateParams.galleryId).then(function (gallery) {\n                $scope.form = {\n                    gallery: gallery,\n                    text   : ''\n                };\n            });\n        }\n\n        $scope.backButton = function () {\n            $ionicHistory.goBack();\n        };\n\n        getComments();\n        init();\n\n        //Mentios\n        // shows the use of dynamic values in mentio-id and mentio-for to link elements\n        $scope.myIndexValue = \"5\";\n\n        $scope.searchPeople = function (term) {\n            var peopleList = [];\n            return User.getFollowing().then(function (response) {\n                _.each(response, function (item) {\n                    item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                    item.bio      = item.status;\n\n                    if (item.name) {\n                        if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                            peopleList.push(item);\n                        }\n                    } else {\n                        item.name = 'Not name';\n                        peopleList.push(item);\n                    }\n                });\n                $scope.people = peopleList;\n                console.log(peopleList);\n                return $q.when(peopleList);\n            });\n        };\n\n        $scope.getPeopleTextRaw = function (item) {\n            return '@' + item.username;\n        };\n\n\n        $scope.deleteComment = function (item, index) {\n            console.log(item);\n            Dialog.confirm(('Delete comment'), ('You are sure?')).then(function (resp) {\n                if (resp) {\n                    GalleryComment.get(item.id).then(function (comment) {\n                        GalleryComment.destroy(comment).then(function (resp) {\n                            $scope.comments.splice(index, 1);\n                        });\n                    })\n                }\n            });\n        }\n\n        $scope.editComment = function (obj, index) {\n            console.log(obj);\n            // An elaborate, custom popup\n            $scope.formEdit = {\n                id  : obj.id,\n                text: obj.text\n            };\n\n            $ionicPopup\n                .show({\n                    template: '<input type=\"text\" ng-model=\"formEdit.text\">',\n                    title   : ('Edit comment'),\n                    //subTitle: 'Please use normal things',\n                    scope   : $scope,\n                    buttons : [{\n                        text: ('Cancel')\n                    }, {\n                        text : '<b>OK</b>',\n                        type : 'button-positive',\n                        onTap: function (e) {\n                            console.log($scope.formEdit);\n                            if (!$scope.formEdit.text) {\n                                //don't allow the user to close unless he enters wifi password\n                                e.preventDefault();\n                            } else {\n                                return $scope.formEdit;\n                            }\n                        }\n                    }]\n                })\n                .then(function (resp) {\n                    console.log(resp);\n                    if (resp) {\n                        GalleryComment.get(obj.id).then(function (comment) {\n                            comment.text                = resp.text;\n                            $scope.comments[index].text = resp.text;\n                            comment.save();\n                        });\n                    }\n                });\n        }\n\n        function getComments() {\n            $scope.loading = true;\n            Gallery.comments({galleryId: $stateParams.galleryId}).then(function (resp) {\n                $scope.comments = [];\n\n                resp.map(function (comment) {\n                    console.log(comment);\n                    comment.canEdit = (comment.user.obj.id === $scope.currentUser.id) ? true : false;\n                    $scope.comments.push(comment);\n                });\n\n                $scope.loading = false;\n                $ionicScrollDelegate.scrollBottom();\n            });\n        }\n\n        $scope.submitComment = function (rForm, form) {\n            if (rForm.$valid) {\n                var dataForm   = angular.copy(form);\n                $scope.loading = true;\n                GalleryComment.create(dataForm).then(function (resp) {\n                    getComments();\n                    $scope.form.text = '';\n                });\n            }\n        }\n\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('LoadingCtrl', LoadingController);\n\n    function LoadingController($scope, $rootScope, $ionicPlatform, $cordovaSplashscreen, AppConfig, $state) {\n        var user  = $rootScope.currentUser;\n        var intro = window.localStorage['walkthrough'];\n\n        if (intro !== 'true') {\n            $state.go('walkthrough', {clear: true});\n        } else {\n            if (user) {\n                console.log(user);\n                if (user.name) {\n                    $state.go(AppConfig.routes.home, {\n                        clear: true\n                    });\n                } else {\n                    $state.go('user.avatar', {\n                        clear: true\n                    });\n                }\n            } else {\n                $state.go(AppConfig.routes.login, {\n                    clear: true\n                });\n            }\n        }\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                }\n            });\n        });\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('ProfileCtrl', ProfileController);\n\n    function ProfileController(User, $state, $stateParams) {\n        var vm       = this;\n        vm.changeTab = changeTab;\n\n        vm.loading = true;\n        User.profile($stateParams.username).then(function (data) {\n            console.log(data);\n            console.log(Parse.User.current());\n            vm.isMe    = Parse.User.current().id === data.id ? true : false;\n            vm.user    = data;\n            vm.loading = false;\n        });\n\n        vm.openFollowers = function () {\n            console.log($state, $stateParams);\n            switch ($state.current.name) {\n                case 'tab.homeProfile':\n                    $state.go('tab.homeProfileFollowers', {username: $stateParams.username});\n                    break;\n                case 'tab.activityProfile':\n                    $state.go('tab.activityProfileFollowers', {username: $stateParams.username});\n                    break;\n            }\n        };\n\n        vm.openFollowing = function () {\n            console.log($state, $stateParams);\n            switch ($state.current.name) {\n                case 'tab.homeProfile':\n                    $state.go('tab.homeProfileFollowing', {username: $stateParams.username});\n                    break;\n                case 'tab.activityProfile':\n                    $state.go('tab.activityProfileFollowing', {username: $stateParams.username});\n                    break;\n            }\n        };\n\n        vm.follow = function () {\n\n            vm.loadingFollow = true;\n\n\n            User.follow(vm.user.obj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                vm.user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    vm.user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    vm.user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n\n        init();\n        changeTab('grid');\n\n        function changeTab(tab) {\n            if (tab === 'list') {\n                vm.tab = {\n                    list: true,\n                    grid: false\n                };\n            } else {\n                vm.tab = {\n                    list: false,\n                    grid: true\n                };\n            }\n        }\n\n        function init() {\n            vm.data  = {\n                total    : false,\n                galleries: []\n            };\n            vm.page  = 0;\n            vm.empty = false;\n            vm.more  = false;\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('MainTabCtrl', MainTabController);\n\n    function MainTabController($localStorage, $rootScope, $scope, PhotoService, User, $ionicPlatform, $q, Gallery, PhotoFilter, ParseFile, $ionicModal, Loading, Toast) {\n        var vm = this;\n        var tempImage;\n\n        $scope.storage = $localStorage;\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    window.StatusBar.styleDefault();\n                }\n            });\n        });\n\n        vm.postPhoto = function () {\n\n            PhotoService.open().then(modalPost).then(function (form) {\n                Loading.start();\n                ParseFile.upload({base64: form.image}).then(function (imageUploaded) {\n                    form.image = imageUploaded;\n                    Gallery.create(form).then(function (item) {\n                        $scope.$emit('photoInclude', item);\n                        Loading.end();\n                    });\n                });\n            });\n\n\n            function modalPost(image) {\n                var defer    = $q.defer();\n                $scope.image = image;\n                $scope.form  = {\n                    title: ''\n                };\n\n                $scope.editFilter = function () {\n                    PhotoFilter.load(tempImage).then(function (image) {\n                        $scope.image = image;\n                    });\n                };\n\n                //Mentios\n                // shows the use of dynamic values in mentio-id and mentio-for to link elements\n                $scope.searchPeople = function (term) {\n                    var peopleList = [];\n                    return User.getFollowing().then(function (response) {\n                        _.each(response, function (item) {\n                            item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                            item.bio      = item.status;\n                            if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                                peopleList.push(item);\n                            }\n                        });\n                        $scope.people = peopleList;\n                        //console.log(peopleList);\n                        return $q.when(peopleList);\n                    });\n                };\n\n                $scope.getPeopleTextRaw = function (item) {\n                    return '@' + item.username;\n                };\n\n                $scope.theme = $rootScope.theme;\n\n                $ionicModal.fromTemplateUrl('app/main/share/share-modal.html', {\n                    scope          : $scope,\n                    focusFirstInput: true\n                }).then(function (modal) {\n                    $scope.modalFilter = modal;\n                    $scope.modalFilter.show();\n                });\n\n\n                $scope.form.address = {};\n                $scope.closeAddress = function () {\n                    $scope.form.address = {};\n                };\n\n                $scope.close = function () {\n                    $scope.modalFilter.hide();\n                };\n\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n\n                $scope.submit = function () {\n                    var form   = angular.copy($scope.form);\n                    form.image = $scope.image;\n                    tempImage  = '';\n                    $scope.close();\n                    defer.resolve(form);\n                };\n\n                return defer.promise;\n            }\n        };\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('AccountCtrl', AccountController);\n\n    function AccountController(User, $state, $rootScope) {\n        var vm       = this;\n        vm.changeTab = changeTab;\n\n        vm.user  = $rootScope.currentUser;\n        vm.photo = $rootScope.currentUser.attributes.photo;\n\n        vm.loading = true;\n        User.getPublicData(Parse.User.current()).then(function (user) {\n            console.log('Profile', user.attributes);\n            vm.user    = user;\n            vm.loading = false;\n        });\n\n        vm.openFollowers = function () {\n            $state.go('tab.accountFollowers', {username: $rootScope.currentUser.attributes.username});\n        };\n\n        vm.openFollowing = function () {\n            $state.go('tab.accountFollowing', {username: $rootScope.currentUser.attributes.username});\n        };\n\n        init();\n        changeTab('grid');\n\n        function changeTab(tab) {\n            if (tab === 'list') {\n                vm.tab = {\n                    list: true,\n                    grid: false\n                };\n            } else {\n                vm.tab = {\n                    list: false,\n                    grid: true\n                };\n            }\n        }\n\n        function init() {\n            vm.data  = {\n                total    : false,\n                galleries: []\n            };\n            vm.page  = 0;\n            vm.empty = false;\n            vm.more  = false;\n            getFollower();\n        }\n\n        function getFollower() {\n            vm.loadingFollowers = true;\n            vm.loadingFollowing = true;\n            vm.loadingPhotos    = true;\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main').controller('ActivityCtrl', ActivityController);\n\n    function ActivityController($scope, $state, GalleryActivity) {\n        var vm          = this;\n        vm.params       = {};\n        vm.params.page  = 1;\n        vm.params.limit = 30;\n        vm.data         = [];\n\n        vm.openProfile = function (username) {\n            $state.go('tab.activityProfile', {username: username})\n        };\n\n        $scope.loading = true;\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                vm.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            vm.params.page = page;\n        }\n\n        function loadFeed() {\n\n            GalleryActivity.feed(vm.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage(vm.params.page + 1);\n                setGalleries(data);\n\n                if (vm.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.$broadcast('scroll.infiniteScrollComplete');\n                $scope.$broadcast('scroll.refreshComplete');\n                $scope.loading = false;\n\n            }).catch(function () {\n                if (vm.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        vm.onLoadMore = function () {\n            loadFeed();\n        };\n\n        vm.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        vm.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        vm.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        vm.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        vm.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        vm.onReload = function () {\n            vm.params.page = 0;\n            vm.data        = [];\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('HomeCtrl', HomeController);\n\n    function HomeController($state) {\n        var vm = this;\n\n        vm.openProfile = function (username) {\n            $state.go('tab.homeProfile', {username: username})\n        };\n\n        vm.openLikers = function (galleryId) {\n            $state.go('tab.homeGalleryLikers', {galleryId: galleryId})\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('SearchCtrl', SearchCtrl);\n\n    function SearchCtrl($scope, $filter, Gallery, $rootScope) {\n\n\n        $scope.onSearch = function () {\n            var text             = $filter('lowercase')($scope.params.search);\n            $scope.params.search = text;\n            $scope.onReload();\n        };\n\n        $scope.params      = {};\n        $scope.params.page = 1;\n        $scope.params.text = '';\n        $scope.data        = [];\n\n        if ($scope.username) {\n            $scope.params.username = $scope.username;\n        }\n\n        $scope.loading = true;\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                $scope.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            $scope.params.page = page;\n        }\n\n        function loadFeed() {\n\n            Gallery.search($scope.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage($scope.params.page + 1);\n                setGalleries(data);\n\n                if ($scope.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.loading = false;\n                $rootScope.$broadcast('scroll.infiniteScrollComplete');\n                $rootScope.$broadcast('scroll.refreshComplete');\n\n            }).catch(function () {\n                if ($scope.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        $scope.onLoadMore = function () {\n            loadFeed();\n        };\n\n        $scope.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        $scope.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        $scope.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        $scope.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        $scope.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        $scope.onReload = function () {\n            $scope.params.page = 0;\n            $scope.data        = [];\n            $scope.loading     = true;\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main').controller('SearchMapCtrl', SearchMapController);\n\n    function SearchMapController($scope, $state, $localStorage, Toast, Gallery, Geolocation, Dialog) {\n\n        var markers      = [];\n        var latlngbounds = new google.maps.LatLngBounds();\n        $scope.maxRating = 5;\n        $scope.storage   = $localStorage;\n        $scope.galleries = [];\n        $scope.params    = {\n            location: null,\n            distance: 100.00,\n            page    : 1,\n            limit   : 10\n        };\n        $scope.loading   = true;\n        $scope.map\n\n        function init() {\n            $scope.galleries = [];\n            removeGallerys();\n            removeMarkers();\n\n            var position   = {\n                latitude : -18.8800397,\n                longitude: -47.05878999999999\n            };\n            var mapOptions = {\n                center   : setPosition(position),\n                zoom     : 15,\n                mapTypeId: google.maps.MapTypeId.ROADMAP\n            };\n\n            $scope.map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);\n        }\n\n        $scope.$on('$ionicView.enter', function (scopes, states) {\n            if(!$scope.map) {\n                init();\n                myPosition();\n            }\n        });\n\n\n        function myPosition() {\n            Geolocation.getCurrentPosition().then(function (position) {\n\n                console.log(position);\n\n                $scope.params.location = {\n                    latitude : position.coords.latitude,\n                    longitude: position.coords.longitude\n                };\n\n                var marker = {\n                    position: setPosition($scope.params.location),\n                    title   : 'I am here',\n                    id      : 0\n                }\n\n                addMarker(marker);\n\n                // Set center locale\n                $scope.map.setCenter(setPosition($scope.params.location));\n\n                loadGallerys();\n            }, function (error) {\n                $scope.params.location = null;\n\n                var errorMessage;\n                if (error.code === 1 || error.code === 3) {\n                    errorMessage = 'errorGpsDisabledText';\n                } else {\n                    errorMessage = 'errorLocationMissingText';\n                }\n                Dialog.alert(errorMessage);\n\n            });\n        }\n\n        function setPosition(location) {\n            if (location) {\n                return new google.maps.LatLng(location.latitude, location.longitude);\n            }\n        }\n\n        function addMarker(item) {\n\n\n            var markerOption = {\n                id       : item.id,\n                map      : $scope.map,\n                position : item.position,\n                title    : item.title,\n                animation: google.maps.Animation.DROP\n            };\n\n            if (item.icon) {\n                var size          = 40;\n                markerOption.icon = {\n                    url       : item.icon,\n                    size      : new google.maps.Size(size, size),\n                    scaledSize: new google.maps.Size(size, size),\n                    origin    : new google.maps.Point(0, 0),\n                    anchor    : new google.maps.Point(size / 4, size / 4),\n                };\n            }\n\n            // VariÃ¡vel que define as opÃ§Ãµes do marcador\n            var marker = new google.maps.Marker(markerOption);\n\n            // Procedimento que mostra a Info Window atravÃ©s de um click no marcador\n            google.maps.event.addListener(marker, 'click', function () {\n                // Open Profile\n                if(item.username) {\n                    $state.go('tab.mapProfile', {username: item.username})\n                }\n\n            });\n\n            markers.push(marker);\n\n            new MarkerClusterer($scope.map, markers, {\n                imagePath: '../img/m'\n            });\n\n            latlngbounds.extend(item.position);\n            $scope.map.fitBounds(latlngbounds);\n        }\n\n        function setGallerys(galleries) {\n            $scope.galleries = galleries;\n            galleries.map(function (item) {\n\n                if (item.location) {\n                    var marker = {\n                        map     : $scope.map,\n                        id      : item.id,\n                        position: setPosition(item.location),\n                        title   : item.title,\n                        image   : item.image.url(),\n                        icon    : item.imageThumb.url(),\n                        username: item.attributes.user.attributes.username\n                    };\n\n                    addMarker(marker)\n                }\n            });\n\n\n        }\n\n        function loadGallerys() {\n            $scope.loading = true;\n            Gallery.all($scope.params).then(function (galleries) {\n\n                if (galleries.length > 0) {\n                    setGallerys(galleries);\n                } else {\n                    Dialog.alert('galleriesNotFoundText');\n                }\n\n                $scope.loading = false;\n\n            }, function () {\n                Toast.show('errorText');\n            });\n        }\n\n        function removeGallerys() {\n            $scope.galleries = [];\n        }\n\n        function removeMarkers() {\n            markers.map(function (item) {\n                item.setMap(null);\n            });\n            markers = [];\n        };\n\n        $scope.onSearchHere = function () {\n            $scope.params.location.latitude  = $scope.map.getCenter().lat();\n            $scope.params.location.longitude = $scope.map.getCenter().lng();\n            removeGallerys();\n            removeMarkers();\n            loadGallerys();\n        }\n\n        $scope.onGalleryClicked = function (item) {\n            console.log(item);\n        };\n    }\n\n})();\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name UserAvatarCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.main')\n        .controller('UserAvatarCtrl', UserAvatarController);\n\n    function UserAvatarController(User, Auth, AppConfig, $rootScope, $state, Toast, UserForm) {\n        var vm          = this;\n        vm.submitAvatar = submitAvatar;\n        init();\n\n        vm.photo = Parse.User.current().attributes.photo;\n\n        function init() {\n            var user      = Auth.getLoggedUser();\n            vm.form       = {\n                name    : user.name,\n                email   : user.email,\n                status  : user.status,\n                gender  : user.gender,\n                img     : user.img,\n                username: user.username\n            };\n            vm.formFields = UserForm.profile;\n            console.log(vm.form);\n            console.log(vm.formFields);\n        }\n\n        function submitAvatar() {\n            console.log(vm.rForm);\n\n            if (vm.rForm.$valid) {\n                var dataForm = angular.copy(vm.form);\n                console.log(dataForm);\n\n                User.update(dataForm).then(function (resp) {\n                    console.log(resp);\n                    $rootScope.currentUser = Parse.User.current();\n                    $state.go(AppConfig.routes.home, {\n                        clear: true\n                    });\n                });\n            } else {\n                Toast.alert({\n                    title: ('Invalid form'),\n                    text : ('Fill out the fields in red')\n                });\n            }\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').directive('userAvatar', userAvatarDirective);\n\n    function userAvatarDirective(ActionSheet, $rootScope, ParseFile, User) {\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function ($scope, elem) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var tempImage;\n                    var user        = $scope.ngModel;\n                    var currentUser = $rootScope.currentUser;\n\n                    console.log(user);\n                    console.log(currentUser);\n\n                    if (user.id != currentUser.id) {\n                        return false;\n                    }\n\n                    ActionSheet.image().then(function (image) {\n                        tempImage = image;\n                        //return PhotoFilter.load(image);\n                        return image;\n                    }).then(function (form) {\n                        $scope.loading = true;\n                        ParseFile.upload({base64: form}).then(function (imageUploaded) {\n                            User.setPhoto(imageUploaded).then(function (user) {\n                                console.log(user);\n                                $scope.ngModel = user.attributes.photo;\n                                console.log(user.attributes.photo);\n                                $scope.loading = false;\n                            });\n                        });\n                    });\n                }\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserFollowerCtrl', UserFollowerController);\n\n    function UserFollowerController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n        User.getFollowers($stateParams.username).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserFollowingCtrl', UserFollowingController);\n\n    function UserFollowingController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n        User.getFollowing($stateParams.username).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserIntroCtrl', UserIntroController);\n\n    function UserIntroController($scope, $ionicPlatform, $cordovaSplashscreen) {\n        var vm = this;\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                    window.StatusBar.styleLightContent();\n                }\n            });\n        });\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserLikersCtrl', UserLikerController);\n\n    function UserLikerController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n\n        User.getLikers($stateParams.galleryId).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserListCtrl', UserListController);\n\n    function UserListController(User, $scope, $state) {\n        var vm          = this;\n        vm.params       = {};\n        vm.params.page  = 1;\n        vm.params.limit = 30;\n        vm.data         = [];\n\n        vm.loading = true;\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                vm.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            vm.params.page = page;\n        }\n\n        function loadFeed() {\n\n            User.list(vm.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage(vm.params.page + 1);\n                setGalleries(data);\n\n                if (vm.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.$broadcast('scroll.infiniteScrollComplete');\n                $scope.$broadcast('scroll.refreshComplete');\n                vm.loading = false;\n\n            }).catch(function () {\n                if (vm.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        vm.onLoadMore = function () {\n            loadFeed();\n        };\n\n        vm.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        vm.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        vm.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        vm.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        vm.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        vm.onReload = function () {\n            vm.params.page = 0;\n            vm.data        = [];\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            user.loading = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                user.loading = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('UserMergeCtrl', UserMergeController);\n\n    function UserMergeController(Auth, $rootScope, AppConfig, Facebook, $state, Toast, UserForm) {\n        var vm        = this;\n        vm.formFields = UserForm.register;\n\n        init();\n        function init() {\n            if ($rootScope.tempUser) {\n                vm.form = {\n                    email   : $rootScope.tempUser.attributes.email,\n                    username: $rootScope.tempUser.attributes.username,\n                    password: ''\n                };\n            } else {\n                $state.go('user.intro', {clear: true});\n            }\n        }\n\n        vm.submit = function (rForm, form) {\n\n            console.log(rForm);\n            console.table(form);\n            if (vm.form.password !== '') {\n                console.log(form);\n                Auth.logIn(form).then(function (user) {\n                    console.log(user);\n                    $rootScope.currentUser = user;\n                    if (Auth.getLoggedUser()) {\n                        Facebook.link(Parse.User.current()).then(function (resp) {\n                            console.log(resp);\n                            $state.go(AppConfig.routes.home, {\n                                clear: true\n                            });\n                        }).catch(function (resp) {\n                            console.log(resp);\n                            Toast.alert({\n                                title: 'Ops',\n                                text : resp.message\n                            });\n                        });\n                    }\n\n\n                }).catch(function (resp) {\n                    Toast.alert({\n                        title: 'Ops',\n                        text : resp.message\n                    });\n                });\n            } else {\n                Toast.alert({\n                    title: ('Invalid form'),\n                    text : ('Please enter your email')\n                });\n            }\n\n        };\n\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name recoveryPass\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict E\n   * */\n\n  angular\n    .module('app.main')\n    .directive('recoveryPass', recoveryPassDirective);\n\n  function recoveryPassDirective(User, $ionicPopup, Loading, Toast) {\n    return {\n      restrict: 'A',\n      scope: {\n        login: '@',\n        register: '@',\n      },\n      link: function ($scope, elem) {\n\n        elem.bind('click', openModal);\n\n        function openModal() {\n\n          $scope.form = {\n            recovery: ''\n          };\n\n          $scope.erro = '';\n\n          $scope.text = {\n            button: (''),\n            input: ('Email')\n          };\n\n          $ionicPopup\n            .show({\n              scope: $scope,\n              template: '<div class=\"popup-recovery\"><form name=\"form.recovery\" form-manager><label class=\"item item-input\"><i class=\"icon ion-email placeholder-icon\"></i><input type=\"email\" ng-model=\"email\" id=\"email\" name=\"email\" placeholder=\"{{ text.input }}\" required ng-maxlength=\"80\"></label><span class=\"error-msg\">{{erro}}</span></form></div>',\n              title: ('A new password will be sent to your e-mail address'),\n              buttons: [{\n                text: ('Cancel'),\n                type: 'button-calm'\n              }, {\n                text: ('Send'),\n                type: 'button-positive',\n                onTap: function (e) {\n                  if ($scope.form.recovery.$valid) {\n                    return $scope.form.recovery.email.$viewValue;\n                  } else {\n                    //não permite o usuário fechar até ele digitar o email\n                    e.preventDefault();\n                    $scope.erro = ('Invalid Email');\n                  }\n                }\n              }]\n            })\n            .then(function (res) {\n              if (!angular.isUndefined(res)) {\n                var email = res;\n\n                console.log(res);\n\n                Loading.start();\n\n                User\n                  .forgot(email)\n                  .then(function (resp) {\n                    console.log(resp);\n                    Toast.alert({\n                      login: ('Forgot your password'),\n                      text: ('Access your accout mail')\n                    });\n                    Loading.end();\n                  })\n                  .catch(function (resp) {\n                    Toast.alert({\n                      login: 'Ops',\n                      text: resp\n                    });\n                    Loading.end();\n                  });\n              }\n            });\n\n        }\n      }\n    };\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name UserRecoveryPassCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.main')\n    .controller('UserRecoveryPassCtrl', UserRecoveryPassController);\n\n  function UserRecoveryPassController(User, Toast) {\n    var vm = this;\n    vm.form = {};\n    vm.submitForgot = submitForgot;\n\n    function submitForgot() {\n      User\n        .forgot(vm.form)\n        .then(function (resp) {\n          console.log(resp);\n        })\n        .catch(function (resp) {\n          Toast.alert('Ops', resp);\n        });\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('WalkthroughCtrl', WalkthroughController);\n\n    function WalkthroughController($ionicSlideBoxDelegate, $scope, $ionicPlatform, $cordovaSplashscreen) {\n        var vm              = this;\n        var currentPlatform = window.ionic.Platform.platform();\n        vm.slideIndex       = 0;\n\n        vm.slideChanged = function (index) {\n            vm.slideIndex = index;\n        };\n        vm.next         = function () {\n            $ionicSlideBoxDelegate.next();\n        };\n        vm.previous     = function () {\n            $ionicSlideBoxDelegate.previous();\n        };\n\n        if (currentPlatform) {\n            vm.device = (currentPlatform === 'android') ? 'android' : 'iphone';\n        } else {\n            vm.device = 'android';\n        }\n\n        vm.slides                          = [\n            {\n                text: 'STEP1',\n                img : 'img/intro1.png'\n            }, {\n                text: 'STEP2',\n                img : 'img/intro2.png'\n            }, {\n                text: 'STEP3',\n                img : 'img/intro3.png'\n            }, {\n                text: 'STEP4',\n                img : 'img/intro4.png'\n            }, {\n                text: 'STEP5',\n                img : 'img/intro5.png'\n            }, {\n                text: 'STEP6',\n                img : 'img/intro6.png'\n            }, {\n                text: 'STEP7',\n                img : 'img/intro7.png'\n            }\n        ];\n        window.localStorage['walkthrough'] = true;\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                    window.StatusBar.styleLightContent()\n                }\n            });\n        });\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name modalLanguage\n     *\n     * @description\n     * _Please update the description and restriction._\n     *\n     * @restrict A\n     * */\n\n    var path = 'app/component/ion-language';\n\n    angular\n        .module('ion-language')\n        .directive('ionLanguage', ionLanguageDirective);\n\n    function ionLanguageDirective(AppConfig, $translate, $timeout, Loading, $ionicModal) {\n        return {\n            restrict: 'E',\n            link: modalLanguageLink,\n            templateUrl: path + '/ion-language.html'\n        };\n\n        function modalLanguageLink(scope, elem, attr) {\n\n\n            scope.languages = AppConfig.locales;\n            scope.language  = scope.languages.filter(function (item) {\n                return item.code === $translate.use()\n            })[0];\n\n            console.log(scope.language);\n\n            elem.bind('click', openModal);\n\n            function openModal() {\n\n                if(window.cordova) {\n                    window.StatusBar.styleDefault();\n                }\n\n                scope.closeModal = function () {\n                    scope.modal.hide();\n                    // scope.modal.remove();\n                    if(window.cordova) {\n                        window.StatusBar.styleLightContent();\n                    }\n                };\n\n\n                scope.searchValue = '';\n\n                scope.selectLanguage = function (language) {\n                    console.log(language);\n                    $translate.use(language.code);\n                    moment.locale(language.code);\n                    scope.language = language;\n                    Loading.start();\n                    scope.closeModal();\n                    $timeout(function () {\n                        Loading.end();\n                    }, 1000);\n                };\n\n                $ionicModal\n                    .fromTemplateUrl(path + '/modal-language.html', {\n                        scope: scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n\n                    });\n            }\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n\n    angular\n        .module('ion-location')\n        .factory('GeoService', GeoServiceFactory);\n\n    function GeoServiceFactory($http, $window, $cordovaGeolocation, $ionicPopup, $timeout, $q) {\n\n        /**\n         'street_address', //indicates a precise street address.\n         'route', //indicates a named route (such as \"US 101\").\n         'intersection', //indicates a major intersection, usually of two major roads.\n         'political', //indicates a political entity. Usually, this type indicates a polygon of some civil administration.\n         'country', //indicates the national political entity, and is typically the highest order type returned by the Geocoder.\n         'administrative_area_level_1', //indicates a first-order civil entity below the country level. Within the United States, these administrative levels are states. Not all nations exhibit these administrative levels.\n         'administrative_area_level_2', //indicates a second-order civil entity below the country level. Within the United States, these administrative levels are counties. Not all nations exhibit these administrative levels.\n         'administrative_area_level_3', //indicates a third-order civil entity below the country level. This type indicates a minor civil division. Not all nations exhibit these administrative levels.\n         'colloquial_area', //indicates a commonly-used alternative name for the entity.\n         'locality', //indicates an incorporated city or town political entity.\n         'sublocality', //indicates an first-order civil entity below a locality\n         'neighborhood', //indicates a named neighborhood\n         'premise', //indicates a named location, usually a building or collection of buildings with a common name\n         'subpremise', //indicates a first-order entity below a named location, usually a singular building within a collection of buildings with a common name\n         'postal_code', //indicates a postal code as used to address postal mail within the country.\n         'natural_feature', //indicates a prominent natural feature.\n         'airport', //indicates an airport.\n         'park', //indicates a named park.\n         'point_of_interest', //indicates a named point of interest. Typically, these \"POI\"s are prominent local entities that don't easily fit in another category such as \"Empire State Building\" or \"Statue of Liberty.\"\n\n         //In addition to the above, address components may exhibit the following types:\n\n         'post_box', //indicates a specific postal box.\n         'street_number', //indicates the precise street number.\n         'floor indicates', //the floor of a building address.\n         'room indicates'; //the room of a building address.'\n         */\n        var options             = {\n            types: ['geocode']\n        };\n        var autocompleteService = new $window.google.maps.places.AutocompleteService();\n        var detailsService      = new $window.google.maps.places.PlacesService($window.document.createElement('input'),\n            options);\n        var componentForm       = {\n            street_number              : 'long_name',\n            //number\n            route                      : 'long_name',\n            //street\n            locality                   : 'long_name',\n            // district\n            sublocality                : 'long_name',\n            // district\n            neighborhood               : 'long_name',\n            //state\n            political                  : 'long_name',\n            //state\n            administrative_area_level_1: 'long_name',\n            //state\n            country                    : 'long_name',\n            //country\n            postal_code                : 'long_name' //zipcode\n        };\n        var componentFormName   = {\n            street_number              : 'number',\n            //number\n            route                      : 'street',\n            //street\n            locality                   : 'city',\n            // district\n            administrative_area_level_1: 'state',\n            //state\n            country                    : 'country',\n            //country\n            postal_code                : 'zipcode',\n            //zipcode\n            neighborhood               : 'district' //zipcode\n        };\n\n        var data = {\n            coords: {},\n            src   : ''\n        };\n\n\n        return {\n            src          : src,\n            getDetails   : getDetails,\n            searchAddress: searchAddress,\n            parseAddress : parseAddress,\n            findMe       : findMe\n        };\n\n        function getLocation() {\n            // Pega a Localização da Pessoa\n            var defer = $q.defer();\n\n            if (data.location) {\n                $timeout(function () {\n                    defer.resolve(data.location);\n                }, 1000);\n            } else {\n                var posOptions = {\n                    timeout           : 10000,\n                    enableHighAccuracy: false\n                };\n                $cordovaGeolocation.getCurrentPosition(posOptions).then(function (position) {\n                    // console.log('Fez a requisição', position);\n                    data.location = {\n                        latitude : position.coords.latitude,\n                        longitude: position.coords.longitude\n                    };\n                    defer.resolve(data.location);\n                }, function (err) {\n                    // error\n                    // console.log('Error na geolocalização', err);\n                    $ionicPopup.alert({\n                        title   : 'Geo Error',\n                        template: err.message\n                    });\n                    defer.reject(err);\n                });\n            }\n\n\n            return defer.promise;\n        }\n\n\n        function findMe() {\n            var defer = $q.defer();\n\n            getLocation().then(function (pos) {\n                console.log(pos);\n                getGoogleAddress(pos.latitude, pos.longitude).success(function (resp) {\n                    resp.geolocation = pos;\n                    console.log(resp);\n                    defer.resolve(resp);\n                }).error(logErr);\n            });\n            return defer.promise;\n        }\n\n\n        function logErr(error) {\n            console.log(error);\n        }\n\n        function getGoogleAddress(lat, lng) {\n            return $http.get('http://maps.google.com/maps/api/geocode/json?latlng=' + lat + ',' + lng + '&sensor=true')\n                        .success(function (data) {\n                            data.address_normal = data.results[0].formatted_address;\n                            data.address        = address(data.results[0].address_components);\n                            data.src            = imagem(lat, lng, 18, 500, 300);\n                        });\n        }\n\n        function address(data) {\n            if (!data) {\n                return false;\n            } else {\n                return {\n                    numero  : data[0].short_name,\n                    rua     : data[1].long_name,\n                    bairro  : data[2].short_name,\n                    cidade  : data[3].short_name,\n                    estado  : data[5].long_name,\n                    uf      : data[5].short_name,\n                    pais    : data[6].long_name,\n                    paisCode: data[6].short_name,\n                    cep     : data[7].short_name\n                };\n            }\n\n        }\n\n        function imagem(lat, lng, zoom, w, h) {\n            return 'http://maps.google.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom + '&size=' +\n                w + 'x' + h + '&maptype=roadmap&sensor=true';\n        }\n\n        function parseAddress(place) {\n            var defer = $q.defer();\n            console.log('parseAddress', place);\n            if(!place) {\n                defer.reject('not place')\n            }\n            var address = {\n                resume: '',\n                geo   : {\n                    latitude : place.geometry.location.lat(),\n                    longitude: place.geometry.location.lng()\n                }\n            };\n            var image   = src(address.geo.latitude, address.geo.longitude, 16, 900, 200);\n\n            for (var i = 0; i < place.address_components.length; i++) {\n                var addressType = place.address_components[i].types[0];\n                if (componentForm[addressType]) {\n                    var val                                 = place.address_components[i][componentForm[addressType]];\n                    address[componentFormName[addressType]] = val;\n                }\n            }\n            address.name   = place.name;\n            address.street = address.street + ', ' + address.number;\n            address.image  = image;\n            address.resume = address.street + ' - ' + address.city + ', ' + address.state + ', ' + address.country;\n            defer.resolve(address);\n\n            return defer.promise;\n        }\n\n        function searchAddress(input) {\n            var deferred = $q.defer();\n            autocompleteService.getQueryPredictions({\n                input: input\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function getDetails(placeId) {\n            var deferred = $q.defer();\n            detailsService.getDetails({\n                placeId: placeId\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function src(lat, lng, zoom, w, h) {\n            console.log('src latitude', lat, lng, zoom, w, h);\n\n            var link = 'http://maps.googleapis.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom +\n                '&scale=1&size=' + w + 'x' + h +\n                '&maptype=roadmap&format=jpg&visual_refresh=true&markers=size:small%7Ccolor:0xff2600%7Clabel:0%7C' + lat +\n                ',' + lng + '&sensor=true';\n            console.log(link);\n            return link;\n        }\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-location').directive('ionLocation', ionLocationDirective);\n\n    function ionLocationDirective($ionicModal, GeoService) {\n        return {\n            restrict: 'A',\n            scope   : {\n                location: '=ngModel'\n            },\n            link    : ionLocationLink\n        };\n\n        function ionLocationLink($scope, element) {\n\n\n            element.bind('click', function () {\n                function init() {\n                    $scope.search             = {};\n                    $scope.search.suggestions = [];\n                    $scope.search.query       = '';\n                }\n\n\n                function selectPlace(place_id) {\n                    GeoService.getDetails(place_id).then(function (location) {\n                        GeoService.parseAddress(location).then(function (address) {\n                            console.log(address);\n                            $scope.location = address;\n                            $scope.closeModalLocation();\n                        })\n                    });\n                }\n\n                init();\n\n                $scope.findMe = function () {\n                    $scope.loading = true;\n                    GeoService.findMe().then(function (location) {\n                        GeoService.searchAddress(location.address_normal).then(function (result) {\n                            console.log(result);\n                            $scope.search.suggestions = result;\n                            $scope.loading            = false;\n                        });\n                    });\n                };\n\n                $scope.findMe();\n\n                $scope.choosePlace = function (place) {\n                    selectPlace(place.place_id);\n                }\n\n                $scope.modalLocation = $ionicModal.fromTemplate('<ion-modal-view>' +\n                    '<ion-header-bar class=\"bar bar-light item-input-inset\">' +\n                    '<ion-spinner ng-if=\"loading\"></ion-spinner>' +\n                    '<button class=\"button button-clear button-icon ion-navigate\" ng-click=\"findMe()\" ng-hide=\"loading\"></button>' +\n                    '<label class=\"item-input-wrapper\">' +\n                    '<input type=\"search\" ng-model=\"search.query\" ng-model-options=\"{ debounce: 1500 }\" placeholder=\"{{ \\'searchText\\' | translate }}\"></label>' +\n                    '<button class=\"button button-clear\" ng-click=\"closeModalLocation()\" translate=\"cancel\"></button>' +\n                    '</ion-header-bar>' +\n                    '<ion-content padding=\"false\">' +\n                    '<ion-list>' +\n                    '<div class=\"center padding\" ng-if=\"loading1\"><ion-spinner ></ion-spinner></div>' +\n                    '<ion-item ng-repeat=\"suggestion in search.suggestions\" ng-click=\"choosePlace(suggestion)\" ng-bind=\"suggestion.description\"></ion-item>' +\n                    '<ion-item class=\"item-divider\"><img src=\"https://developers.google.com/maps/documentation/places/images/powered-by-google-on-white.png\"alt=\"\"/></ion-item>' +\n                    '</ion-list>' +\n                    '</ion-content>' +\n                    '</ion-modal-view>', {\n                        scope          : $scope,\n                        focusFirstInput: true\n                    }\n                );\n\n                $scope.modalLocation.show();\n\n                $scope.closeModalLocation = function () {\n                    $scope.modalLocation.hide();\n                    $scope.modalLocation.remove();\n                };\n\n                $scope.$watch('search.query', function (newValue) {\n                    if (newValue) {\n                        $scope.loading1           = true;\n                        $scope.search.suggestions = [];\n                        GeoService.searchAddress(newValue).then(function (result) {\n                            console.log(result);\n                            $scope.search.suggestions = result;\n                            $scope.loading1           = false;\n                        });\n                    }\n                });\n\n\n            });\n\n        }\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').directive('ionCrop', ionCropDirective);\n\n    function ionCropDirective($jrCrop, $translate, $ionicActionSheet) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel : '=',\n                option  : '=',\n                cropSave: '&'\n            },\n            template: '<div><input type=\"file\" id=\"browseBtn\" image=\"image\" accept=\"image/*\" style=\"display: none\"/></div>',\n            link    : ionCropLink\n        };\n\n        function ionCropLink($scope, element) {\n\n            // Triggered on a button click, or some other target\n            $scope.action = action;\n            element.bind('click', getElem);\n            $scope.crop = crop;\n            angular.element(document.getElementById('browseBtn'))\n                   .on('change', fileUpload);\n\n\n            function getElem() {\n                document.getElementById('browseBtn')\n                        .click();\n            }\n\n            function action() {\n\n                // Show the action sheet\n                $ionicActionSheet.show({\n                    buttons      : [\n                        {\n                            text: '<i class=\"icon ion-camera\"></i>' + ('Photo Camera')\n                        }, {\n                            text: '<i class=\"icon ion-images\"></i> ' + ('Photo Album')\n                        }\n                    ],\n                    //destructiveText:  ('Delete'),\n                    titleText    : ('Change Image'),\n                    cancelText   : ('Cancel'),\n                    cancel       : function () {\n                        // add cancel code..\n                    },\n                    buttonClicked: function (index) {\n\n                        if (index === 0) {\n                            console.log('Photo Camera');\n                        }\n                        // Photo Album\n                        if (index === 1) {\n                            document.getElementById('browseBtn')\n                                    .click();\n                        }\n                        return true;\n                    }\n                });\n\n            }\n\n            function fileUpload(e) {\n\n                var file   = e.target.files[0];\n                var reader = new FileReader();\n                reader.readAsDataURL(file);\n\n                reader.onload = function (event) {\n                    var image = event.target.result;\n                    $scope.crop(image);\n                };\n\n                // Clear input file\n                angular.element(document.getElementById('browseBtn')).val('');\n\n            }\n\n            function crop(image) {\n\n                console.log($scope.option);\n\n                $jrCrop\n                    .crop({\n                        url       : image,\n                        width     : $scope.option ? $scope.option.width : 200,\n                        height    : $scope.option ? $scope.option.height : 200,\n                        cancelText: ('Cancel'),\n                        chooseText: ('Save')\n                    })\n                    .then(function (canvas) {\n                        var image = canvas.toDataURL();\n                        //            var name = $scope.option ? $scope.option.name : 'thumb';\n                        //            var filename = ($scope.option ? $scope.option.name : '') + '_' + name + window.Number(new window.Date() + '.jpg';\n\n                        //var file = base64ToBlob(image.replace('data:image/png;base64,', ''), 'image/jpeg');\n                        //            file.name = filename;\n\n                        //upload(file);\n\n                        console.log(image);\n                        $scope.ngModel = image;\n\n\n                    });\n\n            }\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').directive('sliderFilter', sliderFilterDirective);\n\n    function sliderFilterDirective() {\n        return {\n            restrict: 'E',\n            link    : sliderFilterLink,\n            scope   : {\n                filter: '='\n            },\n            template: '<div class=\"item range range-positive\"> ' +\n            '<input type=\"range\" name=\"filter.slider.name\" min=\"-100\" max=\"100\" step=\"1\" ng-model=\"filter.slider.value\"  > ' +\n            '</div>'\n        };\n\n        function sliderFilterLink(scope, elem, attr) {\n\n            console.log(scope.filter);\n\n            scope.$watch('filter.slider.value', function (value) {\n                if (value) {\n                    scope.filter.slider.value = parseInt(value);\n                    scope.filter.setSlider(scope.filter.slider);\n                }\n            });\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('ion-photo').factory('PhotoFilter', PhotoFilterFactory);\n\n    function PhotoFilterFactory($q, $timeout) {\n\n        var image, image3, texture, texture3;\n        // Try Canvas\n        try {\n            var canvas  = fx.canvas();\n            var canvas2 = fx.canvas();\n            var canvas3 = fx.canvas();\n        } catch (err) {\n            alert(err);\n            return;\n        }\n\n        var imageFilter = {\n            brightness: 0,\n            contrast  : 0,\n            hue       : 0,\n            denoise   : 20,\n            saturation: 0,\n            vibrance  : 0,\n            radius    : 0,\n            strength  : 0,\n            noise     : 0,\n            sepia     : 0,\n            size      : 0,\n            amount    : 0,\n        };\n\n        var imageFilters = [\n            {\n                name  : 'Normal',\n                id    : 'normal',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: 0,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Claredon',\n                id    : 'claredon',\n                filter: {\n                    brightness: 0.3,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: 0,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Gingham',\n                id    : 'gingham',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0.5,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: 0.1,\n                    vibrance  : 0.3,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0.3,\n                }\n            },\n            {\n                name  : 'Moon',\n                id    : 'moon',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: -1,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0.8,\n                }\n            },\n            {\n                name  : 'Lark',\n                id    : 'lark',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: 0,\n                    vibrance  : -0.3,\n                    radius    : 0.2,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Reyes',\n                id    : 'reyes',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: -1,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Juno',\n                id    : 'juno',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: -1,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Slumber',\n                id    : 'slumber',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: -1,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Crema',\n                id    : 'crema',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: -1,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            }\n        ];\n\n        function init(elementId) {\n            var defer = $q.defer();\n            // convert the image to a texture\n            image     = document.getElementById(elementId);\n            // convert the image to a texture\n            texture   = canvas.texture(image);\n            // replace the image with the canvas\n            canvas.draw(texture).update();\n            image.src = canvas.toDataURL('image/jpeg', 0.8);\n\n            $timeout(function () {\n\n                // Generate Filters Thumb\n                imageFilters.map(function (imageThumb) {\n                    var thumbFilter = document.getElementById(imageThumb.id);\n                    if (thumbFilter) {\n                        var img = new Image();\n                        img.src = image.src;\n                        canvas2\n                            .draw(canvas2.texture(img))\n                            .brightnessContrast(imageThumb.filter.brightness, imageThumb.filter.contrast)\n                            .hueSaturation(imageThumb.filter.hue, imageThumb.filter.saturation)\n                            .vibrance(imageThumb.filter.vibrance)\n                            .denoise(imageThumb.filter.denoise * 100)\n                            .unsharpMask(imageThumb.filter.radius * 100, imageThumb.filter.strength)\n                            .noise(imageThumb.filter.noise)\n                            .sepia(imageThumb.filter.sepia)\n                            .vignette(imageThumb.filter.size, imageThumb.filter.amount)\n                            .update();\n                        thumbFilter.src = canvas2.toDataURL('image/jpeg', 0.7);\n                    }\n                });\n                defer.resolve();\n            }, 100);\n\n            return defer.promise;\n\n        }\n\n        function Filter(name, icon, func, init, update, imageFile) {\n            this.name      = name;\n            this.icon      = icon;\n            this.func      = func;\n            this.update    = update;\n            this.imageFile = imageFile;\n            this.slider    = {};\n            this.nubs      = [];\n            init.call(this);\n        }\n\n        Filter.prototype.addNub = function (name, x, y) {\n            this.nubs.push({\n                name: name,\n                x   : x,\n                y   : y\n            });\n        };\n\n        Filter.prototype.addSlider = function (name, label, min, max, value, step) {\n            this.slider = {\n                name : name,\n                label: label,\n                min  : min,\n                max  : max,\n                value: value,\n                step : step\n            };\n        };\n\n        Filter.prototype.setSlider = function (slider) {\n            this[slider.name] = slider.value / 100;\n            this.update();\n        };\n\n        Filter.prototype.setCode = function (values) {\n            imageFilter[Object.keys(values)[0]] = values[Object.keys(values)[0]];\n\n            canvas\n                .draw(texture)\n                .brightnessContrast(imageFilter.brightness, imageFilter.contrast)\n                .hueSaturation(imageFilter.hue, imageFilter.saturation)\n                .vibrance(imageFilter.vibrance)\n                .denoise(imageFilter.denoise * 100)\n                .unsharpMask(imageFilter.radius * 100, imageFilter.strength)\n                .noise(imageFilter.noise)\n                .sepia(imageFilter.sepia)\n                .vignette(imageFilter.size, imageFilter.amount)\n                .update();\n\n            image.src = canvas.toDataURL('image/jpeg', 0.8);\n        };\n\n        var perspectiveNubs = [175, 156, 496, 55, 161, 279, 504, 330];\n        var filters         = {\n            'Adjust': [\n                new Filter('Brightness', 'ion-ios-sunny-outline', 'brightnessContrast', function () {\n                    this.addSlider('brightness', 'Brightness', -100, 100, 0, 0.1);\n                }, function () {\n                    this.setCode({\n                        brightness: this.brightness\n                    });\n                }),\n                new Filter('Contrast', 'ion-contrast', 'brightnessContrast', function () {\n                    this.addSlider('contrast', 'Contrast', -100, 100, 0, 0.1);\n                }, function () {\n                    this.setCode({\n                        contrast: this.contrast,\n                    });\n                }),\n                new Filter('Hue', 'ion-ios-color-filter-outline', 'hueSaturation', function () {\n                    this.addSlider('hue', 'Hue', -100, 100, 0, 0.1);\n                }, function () {\n                    this.setCode({\n                        hue: this.hue\n                    });\n                }),\n                new Filter('Saturation', 'ion-ios-partlysunny-outline', 'hueSaturation', function () {\n                    this.addSlider('saturation', 'Saturation', -100, 100, 0, 0.1);\n                }, function () {\n                    this.setCode({\n                        saturation: this.saturation,\n                    });\n                }),\n                new Filter('Vibrance', 'ion-ios-flower-outline', 'vibrance', function () {\n                    this.addSlider('amount', 'Amount', -100, 100, 0.5, 0.1);\n                }, function () {\n                    this.setCode({\n                        vibrance: this.amount\n                    });\n                }),\n                new Filter('Denoise', 'ion-ios-eye-outline', 'denoise', function () {\n                    this.addSlider('exponent', 'Exponent', 0, 50, 20, 1);\n                }, function () {\n                    this.setCode({\n                        denoise: this.exponent\n                    });\n                }),\n                //new Filter('Unsharp Mask', 'ion-ios-rose-outline', 'unsharpMask', function () {\n                //    this.addSlider('radius', 'Radius', 0, 200, 0, 0.1);\n                //    this.addSlider('strength', 'Strength', 0, 50, 0, 0.01);\n                //}, function () {\n                //    //this.setCode('canvas.draw(texture).unsharpMask(' + this.radius + ', ' + this.strength + ').update();');\n                //    this.setCode({\n                //        radius  : this.radius,\n                //        strength: this.strength,\n                //    });\n                //}),\n                new Filter('Noise', 'ion-ios-analytics-outline', 'noise', function () {\n                    this.addSlider('amount', 'Amount', 0, 100, 5, 1);\n                }, function () {\n                    this.setCode({\n                        noise: this.amount,\n                    });\n                }),\n                new Filter('Sepia', 'ion-ios-partlysunny-outline', 'sepia', function () {\n                    this.addSlider('amount', 'Amount', 0, 100, 0, 1);\n                }, function () {\n                    this.setCode({\n                        sepia: this.amount,\n                    });\n                }),\n                //new Filter('Vignette Size', 'ion-ios-glasses-outline', 'vignette', function () {\n                //    this.addSlider('size', 'Size', 0, 100, 0, 1);\n                //}, function () {\n                //    this.setCode({\n                //        amount: this.amount,\n                //    });\n                //}),\n                new Filter('Vignette', 'ion-ios-glasses-outline', 'vignette', function () {\n                    this.addSlider('amount', 'Amount', 0, 100, 0, 1);\n                }, function () {\n                    this.setCode({\n                        amount: this.amount,\n                    });\n                })\n            ],\n            //'Blur'  : [\n            //    new Filter('Zoom Blur', 'zoomBlur', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('strength', 'Strength', 0, 1, 0.3, 0.01);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).zoomBlur(' + this.center.x + ', ' + this.center.y + ', ' + this.strength + ').update();');\n            //    }),\n            //    new Filter('Triangle Blur', 'triangleBlur', function () {\n            //        this.addSlider('radius', 'Radius', 0, 200, 50, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).triangleBlur(' + this.radius + ').update();');\n            //    }),\n            //    new Filter('Tilt Shift', 'tiltShift', function () {\n            //        this.addNub('start', 0.15, 0.75);\n            //        this.addNub('end', 0.75, 0.6);\n            //        this.addSlider('blurRadius', 'Blur Radius', 0, 50, 15, 1);\n            //        this.addSlider('gradientRadius', 'Gradient Radius', 0, 400, 200, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).tiltShift(' + this.start.x + ', ' + this.start.y + ', ' + this.end.x + ', ' + this.end.y + ', ' + this.blurRadius + ', ' + this.gradientRadius + ').update();');\n            //    }),\n            //    new Filter('Lens Blur', 'lensBlur', function () {\n            //        this.addSlider('radius', 'Radius', 0, 50, 10, 1);\n            //        this.addSlider('brightness', 'Brightness', -1, 1, 0.75, 0.01);\n            //        this.addSlider('angle', 'Angle', -Math.PI, Math.PI, 0, 0.01);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).lensBlur(' + this.radius + ', ' + this.brightness + ', ' + this.angle + ').update();');\n            //    }, 'lighthouse.jpg')\n            //],\n            //'Warp'  : [\n            //    new Filter('Swirl', 'swirl', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('angle', 'Angle', -25, 25, 3, 0.1);\n            //        this.addSlider('radius', 'Radius', 0, 600, 200, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).swirl(' + this.center.x + ', ' + this.center.y + ', ' + this.radius + ', ' + this.angle + ').update();');\n            //    }),\n            //    new Filter('Bulge / Pinch', 'bulgePinch', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('strength', 'Strength', -1, 1, 0.5, 0.01);\n            //        this.addSlider('radius', 'Radius', 0, 600, 200, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).bulgePinch(' + this.center.x + ', ' + this.center.y + ', ' + this.radius + ', ' + this.strength + ').update();');\n            //    }),\n            //    new Filter('Perspective', 'perspective', function () {\n            //        var w = 640, h = 425;\n            //        this.addNub('a', perspectiveNubs[0] / w, perspectiveNubs[1] / h);\n            //        this.addNub('b', perspectiveNubs[2] / w, perspectiveNubs[3] / h);\n            //        this.addNub('c', perspectiveNubs[4] / w, perspectiveNubs[5] / h);\n            //        this.addNub('d', perspectiveNubs[6] / w, perspectiveNubs[7] / h);\n            //    }, function () {\n            //        var before = perspectiveNubs;\n            //        var after  = [this.a.x, this.a.y, this.b.x, this.b.y, this.c.x, this.c.y, this.d.x, this.d.y];\n            //        this.setCode('canvas.draw(texture).perspective([' + before + '], [' + after + ']).update();');\n            //    }, 'perspective.jpg')\n            //],\n            //'Fun'   : [\n            //    new Filter('Ink', 'ink', function () {\n            //        this.addSlider('strength', 'Strength', 0, 1, 0.25, 0.01);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).ink(' + this.strength + ').update();');\n            //    }),\n            //    new Filter('Edge Work', 'edgeWork', function () {\n            //        this.addSlider('radius', 'Radius', 0, 200, 10, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).edgeWork(' + this.radius + ').update();');\n            //    }),\n            //    new Filter('Hexagonal Pixelate', 'hexagonalPixelate', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('scale', 'Scale', 10, 100, 20, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).hexagonalPixelate(' + this.center.x + ', ' + this.center.y + ', ' + this.scale + ').update();');\n            //    }),\n            //    new Filter('Dot Screen', 'dotScreen', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('angle', 'Angle', 0, Math.PI / 2, 1.1, 0.01);\n            //        this.addSlider('size', 'Size', 3, 20, 3, 0.01);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).dotScreen(' + this.center.x + ', ' + this.center.y + ', ' + this.angle + ', ' + this.size + ').update();');\n            //    }),\n            //    new Filter('Color Halftone', 'colorHalftone', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('angle', 'Angle', 0, Math.PI / 2, 0.25, 0.01);\n            //        this.addSlider('size', 'Size', 3, 20, 4, 0.01);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).colorHalftone(' + this.center.x + ', ' + this.center.y + ', ' + this.angle + ', ' + this.size + ').update();');\n            //    })\n            //]\n        };\n\n        function apply(resFilter) {\n\n            imageFilter = resFilter;\n\n            canvas\n                .draw(texture)\n                .brightnessContrast(imageFilter.brightness, imageFilter.contrast)\n                .hueSaturation(imageFilter.hue, imageFilter.saturation)\n                .vibrance(imageFilter.vibrance)\n                .denoise(imageFilter.denoise * 100)\n                .unsharpMask(imageFilter.radius * 100, imageFilter.strength)\n                .noise(imageFilter.noise)\n                .sepia(imageFilter.sepia)\n                .vignette(imageFilter.size, imageFilter.amount)\n                .update();\n\n            image.src = canvas.toDataURL('image/png');\n        }\n\n        function reset() {\n\n            _.map(filters.Adjust, function (filter) {\n                filter.slider.value = 0;\n                filter.setSlider(filter.slider);\n            });\n\n            imageFilter = {\n                brightness: 0,\n                contrast  : 0,\n                hue       : 0,\n                denoise   : 20,\n                saturation: 0,\n                vibrance  : 0,\n                radius    : 0,\n                strength  : 0,\n                noise     : 0,\n                sepia     : 0,\n                size      : 0,\n                amount    : 0,\n            };\n            canvas\n                .draw(texture)\n                .brightnessContrast(imageFilter.brightness, imageFilter.contrast)\n                .hueSaturation(imageFilter.hue, imageFilter.saturation)\n                .vibrance(imageFilter.vibrance)\n                .denoise(imageFilter.denoise * 100)\n                .unsharpMask(imageFilter.radius * 100, imageFilter.strength)\n                .noise(imageFilter.noise)\n                .sepia(imageFilter.sepia)\n                .vignette(imageFilter.size, imageFilter.amount)\n                .update();\n\n            image.src = canvas.toDataURL('image/jpeg', 0.8);\n        }\n\n        function getImage() {\n            var defer = $q.defer();\n            var img3  = new Image();\n            img3.src  = image.src;\n\n            // Generate Image\n            image3   = document.getElementById('image3');\n            texture3 = canvas3.texture(img3);\n            canvas3.draw(texture3).update();\n            defer.resolve(canvas3.toDataURL('image/jpeg', 0.8));\n            return defer.promise;\n        }\n\n\n        return {\n            filters     : filters,\n            imageFilters: imageFilters,\n            init        : init,\n            reset       : reset,\n            apply       : apply,\n            getImage    : getImage\n        };\n\n\n    }\n\n})();\n/*\n * glfx.js\n * http://evanw.github.com/glfx.js/\n *\n * Copyright 2011 Evan Wallace\n * Released under the MIT license\n */\nvar fx=function(){function q(a,d,c){return Math.max(a,Math.min(d,c))}function w(b){return{_:b,loadContentsOf:function(b){a=this._.gl;this._.loadContentsOf(b)},destroy:function(){a=this._.gl;this._.destroy()}}}function A(a){return w(r.fromElement(a))}function B(b,d){var c=a.UNSIGNED_BYTE;if(a.getExtension(\"OES_texture_float\")&&a.getExtension(\"OES_texture_float_linear\")){var e=new r(100,100,a.RGBA,a.FLOAT);try{e.drawTo(function(){c=a.FLOAT})}catch(g){}e.destroy()}this._.texture&&this._.texture.destroy();\nthis._.spareTexture&&this._.spareTexture.destroy();this.width=b;this.height=d;this._.texture=new r(b,d,a.RGBA,c);this._.spareTexture=new r(b,d,a.RGBA,c);this._.extraTexture=this._.extraTexture||new r(0,0,a.RGBA,c);this._.flippedShader=this._.flippedShader||new h(null,\"uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,vec2(texCoord.x,1.0-texCoord.y));}\");this._.isInitialized=!0}function C(a,d,c){this._.isInitialized&&\na._.width==this.width&&a._.height==this.height||B.call(this,d?d:a._.width,c?c:a._.height);a._.use();this._.texture.drawTo(function(){h.getDefaultShader().drawRect()});return this}function D(){this._.texture.use();this._.flippedShader.drawRect();return this}function f(a,d,c,e){(c||this._.texture).use();this._.spareTexture.drawTo(function(){a.uniforms(d).drawRect()});this._.spareTexture.swapWith(e||this._.texture)}function E(a){a.parentNode.insertBefore(this,a);a.parentNode.removeChild(a);return this}\nfunction F(){var b=new r(this._.texture.width,this._.texture.height,a.RGBA,a.UNSIGNED_BYTE);this._.texture.use();b.drawTo(function(){h.getDefaultShader().drawRect()});return w(b)}function G(){var b=this._.texture.width,d=this._.texture.height,c=new Uint8Array(4*b*d);this._.texture.drawTo(function(){a.readPixels(0,0,b,d,a.RGBA,a.UNSIGNED_BYTE,c)});return c}function k(b){return function(){a=this._.gl;return b.apply(this,arguments)}}function x(a,d,c,e,g,l,n,p){var m=c-g,h=e-l,f=n-g,k=p-l;g=a-c+g-n;l=\nd-e+l-p;var q=m*k-f*h,f=(g*k-f*l)/q,m=(m*l-g*h)/q;return[c-a+f*c,e-d+f*e,f,n-a+m*n,p-d+m*p,m,a,d,1]}function y(a){var d=a[0],c=a[1],e=a[2],g=a[3],l=a[4],n=a[5],p=a[6],m=a[7];a=a[8];var f=d*l*a-d*n*m-c*g*a+c*n*p+e*g*m-e*l*p;return[(l*a-n*m)/f,(e*m-c*a)/f,(c*n-e*l)/f,(n*p-g*a)/f,(d*a-e*p)/f,(e*g-d*n)/f,(g*m-l*p)/f,(c*p-d*m)/f,(d*l-c*g)/f]}function z(a){var d=a.length;this.xa=[];this.ya=[];this.u=[];this.y2=[];a.sort(function(a,b){return a[0]-b[0]});for(var c=0;c<d;c++)this.xa.push(a[c][0]),this.ya.push(a[c][1]);\nthis.u[0]=0;this.y2[0]=0;for(c=1;c<d-1;++c){a=this.xa[c+1]-this.xa[c-1];var e=(this.xa[c]-this.xa[c-1])/a,g=e*this.y2[c-1]+2;this.y2[c]=(e-1)/g;this.u[c]=(6*((this.ya[c+1]-this.ya[c])/(this.xa[c+1]-this.xa[c])-(this.ya[c]-this.ya[c-1])/(this.xa[c]-this.xa[c-1]))/a-e*this.u[c-1])/g}this.y2[d-1]=0;for(c=d-2;0<=c;--c)this.y2[c]=this.y2[c]*this.y2[c+1]+this.u[c]}function u(a,d){return new h(null,a+\"uniform sampler2D texture;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 coord=texCoord*texSize;\"+\nd+\"gl_FragColor=texture2D(texture,coord/texSize);vec2 clampedCoord=clamp(coord,vec2(0.0),texSize);if(coord!=clampedCoord){gl_FragColor.a*=max(0.0,1.0-length(coord-clampedCoord));}}\")}function H(b,d){a.brightnessContrast=a.brightnessContrast||new h(null,\"uniform sampler2D texture;uniform float brightness;uniform float contrast;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.rgb+=brightness;if(contrast>0.0){color.rgb=(color.rgb-0.5)/(1.0-contrast)+0.5;}else{color.rgb=(color.rgb-0.5)*(1.0+contrast)+0.5;}gl_FragColor=color;}\");\nf.call(this,a.brightnessContrast,{brightness:q(-1,b,1),contrast:q(-1,d,1)});return this}function t(a){a=new z(a);for(var d=[],c=0;256>c;c++)d.push(q(0,Math.floor(256*a.interpolate(c/255)),255));return d}function I(b,d,c){b=t(b);1==arguments.length?d=c=b:(d=t(d),c=t(c));for(var e=[],g=0;256>g;g++)e.splice(e.length,0,b[g],d[g],c[g],255);this._.extraTexture.initFromBytes(256,1,e);this._.extraTexture.use(1);a.curves=a.curves||new h(null,\"uniform sampler2D texture;uniform sampler2D map;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.r=texture2D(map,vec2(color.r)).r;color.g=texture2D(map,vec2(color.g)).g;color.b=texture2D(map,vec2(color.b)).b;gl_FragColor=color;}\");\na.curves.textures({map:1});f.call(this,a.curves,{});return this}function J(b){a.denoise=a.denoise||new h(null,\"uniform sampler2D texture;uniform float exponent;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec4 center=texture2D(texture,texCoord);vec4 color=vec4(0.0);float total=0.0;for(float x=-4.0;x<=4.0;x+=1.0){for(float y=-4.0;y<=4.0;y+=1.0){vec4 sample=texture2D(texture,texCoord+vec2(x,y)/texSize);float weight=1.0-abs(dot(sample.rgb-center.rgb,vec3(0.25)));weight=pow(weight,exponent);color+=sample*weight;total+=weight;}}gl_FragColor=color/total;}\");\nfor(var d=0;2>d;d++)f.call(this,a.denoise,{exponent:Math.max(0,b),texSize:[this.width,this.height]});return this}function K(b,d){a.hueSaturation=a.hueSaturation||new h(null,\"uniform sampler2D texture;uniform float hue;uniform float saturation;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float angle=hue*3.14159265;float s=sin(angle),c=cos(angle);vec3 weights=(vec3(2.0*c,-sqrt(3.0)*s-c,sqrt(3.0)*s-c)+1.0)/3.0;float len=length(color.rgb);color.rgb=vec3(dot(color.rgb,weights.xyz),dot(color.rgb,weights.zxy),dot(color.rgb,weights.yzx));float average=(color.r+color.g+color.b)/3.0;if(saturation>0.0){color.rgb+=(average-color.rgb)*(1.0-1.0/(1.001-saturation));}else{color.rgb+=(average-color.rgb)*(-saturation);}gl_FragColor=color;}\");\nf.call(this,a.hueSaturation,{hue:q(-1,b,1),saturation:q(-1,d,1)});return this}function L(b){a.noise=a.noise||new h(null,\"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec4 color=texture2D(texture,texCoord);float diff=(rand(texCoord)-0.5)*amount;color.r+=diff;color.g+=diff;color.b+=diff;gl_FragColor=color;}\");\nf.call(this,a.noise,{amount:q(0,b,1)});return this}function M(b){a.sepia=a.sepia||new h(null,\"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float r=color.r;float g=color.g;float b=color.b;color.r=min(1.0,(r*(1.0-(0.607*amount)))+(g*(0.769*amount))+(b*(0.189*amount)));color.g=min(1.0,(r*0.349*amount)+(g*(1.0-(0.314*amount)))+(b*0.168*amount));color.b=min(1.0,(r*0.272*amount)+(g*0.534*amount)+(b*(1.0-(0.869*amount))));gl_FragColor=color;}\");\nf.call(this,a.sepia,{amount:q(0,b,1)});return this}function N(b,d){a.unsharpMask=a.unsharpMask||new h(null,\"uniform sampler2D blurredTexture;uniform sampler2D originalTexture;uniform float strength;uniform float threshold;varying vec2 texCoord;void main(){vec4 blurred=texture2D(blurredTexture,texCoord);vec4 original=texture2D(originalTexture,texCoord);gl_FragColor=mix(blurred,original,1.0+strength);}\");\nthis._.extraTexture.ensureFormat(this._.texture);this._.texture.use();this._.extraTexture.drawTo(function(){h.getDefaultShader().drawRect()});this._.extraTexture.use(1);this.triangleBlur(b);a.unsharpMask.textures({originalTexture:1});f.call(this,a.unsharpMask,{strength:d});this._.extraTexture.unuse(1);return this}function O(b){a.vibrance=a.vibrance||new h(null,\"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;float mx=max(color.r,max(color.g,color.b));float amt=(mx-average)*(-amount*3.0);color.rgb=mix(color.rgb,vec3(mx),amt);gl_FragColor=color;}\");\nf.call(this,a.vibrance,{amount:q(-1,b,1)});return this}function P(b,d){a.vignette=a.vignette||new h(null,\"uniform sampler2D texture;uniform float size;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float dist=distance(texCoord,vec2(0.5,0.5));color.rgb*=smoothstep(0.8,size*0.799,dist*(amount+size));gl_FragColor=color;}\");\nf.call(this,a.vignette,{size:q(0,b,1),amount:q(0,d,1)});return this}function Q(b,d,c){a.lensBlurPrePass=a.lensBlurPrePass||new h(null,\"uniform sampler2D texture;uniform float power;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color=pow(color,vec4(power));gl_FragColor=vec4(color);}\");var e=\"uniform sampler2D texture0;uniform sampler2D texture1;uniform vec2 delta0;uniform vec2 delta1;uniform float power;varying vec2 texCoord;\"+\ns+\"vec4 sample(vec2 delta){float offset=random(vec3(delta,151.7182),0.0);vec4 color=vec4(0.0);float total=0.0;for(float t=0.0;t<=30.0;t++){float percent=(t+offset)/30.0;color+=texture2D(texture0,texCoord+delta*percent);total+=1.0;}return color/total;}\";\na.lensBlur0=a.lensBlur0||new h(null,e+\"void main(){gl_FragColor=sample(delta0);}\");a.lensBlur1=a.lensBlur1||new h(null,e+\"void main(){gl_FragColor=(sample(delta0)+sample(delta1))*0.5;}\");a.lensBlur2=a.lensBlur2||(new h(null,e+\"void main(){vec4 color=(sample(delta0)+2.0*texture2D(texture1,texCoord))/3.0;gl_FragColor=pow(color,vec4(power));}\")).textures({texture1:1});for(var e=\n[],g=0;3>g;g++){var l=c+2*g*Math.PI/3;e.push([b*Math.sin(l)/this.width,b*Math.cos(l)/this.height])}b=Math.pow(10,q(-1,d,1));f.call(this,a.lensBlurPrePass,{power:b});this._.extraTexture.ensureFormat(this._.texture);f.call(this,a.lensBlur0,{delta0:e[0]},this._.texture,this._.extraTexture);f.call(this,a.lensBlur1,{delta0:e[1],delta1:e[2]},this._.extraTexture,this._.extraTexture);f.call(this,a.lensBlur0,{delta0:e[1]});this._.extraTexture.use(1);f.call(this,a.lensBlur2,{power:1/b,delta0:e[2]});return this}\nfunction R(b,d,c,e,g,l){a.tiltShift=a.tiltShift||new h(null,\"uniform sampler2D texture;uniform float blurRadius;uniform float gradientRadius;uniform vec2 start;uniform vec2 end;uniform vec2 delta;uniform vec2 texSize;varying vec2 texCoord;\"+s+\"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);vec2 normal=normalize(vec2(start.y-end.y,end.x-start.x));float radius=smoothstep(0.0,1.0,abs(dot(texCoord*texSize-start,normal))/gradientRadius)*blurRadius;for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta/texSize*percent*radius);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}\");\nvar n=c-b,p=e-d,m=Math.sqrt(n*n+p*p);f.call(this,a.tiltShift,{blurRadius:g,gradientRadius:l,start:[b,d],end:[c,e],delta:[n/m,p/m],texSize:[this.width,this.height]});f.call(this,a.tiltShift,{blurRadius:g,gradientRadius:l,start:[b,d],end:[c,e],delta:[-p/m,n/m],texSize:[this.width,this.height]});return this}function S(b){a.triangleBlur=a.triangleBlur||new h(null,\"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;\"+s+\"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta*percent);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}\");\nf.call(this,a.triangleBlur,{delta:[b/this.width,0]});f.call(this,a.triangleBlur,{delta:[0,b/this.height]});return this}function T(b,d,c){a.zoomBlur=a.zoomBlur||new h(null,\"uniform sampler2D texture;uniform vec2 center;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;\"+s+\"void main(){vec4 color=vec4(0.0);float total=0.0;vec2 toCenter=center-texCoord*texSize;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=0.0;t<=40.0;t++){float percent=(t+offset)/40.0;float weight=4.0*(percent-percent*percent);vec4 sample=texture2D(texture,texCoord+toCenter*percent*strength/texSize);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}\");\nf.call(this,a.zoomBlur,{center:[b,d],strength:c,texSize:[this.width,this.height]});return this}function U(b,d,c,e){a.colorHalftone=a.colorHalftone||new h(null,\"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(float angle){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);vec3 cmy=1.0-color.rgb;float k=min(cmy.x,min(cmy.y,cmy.z));cmy=(cmy-k)/(1.0-k);cmy=clamp(cmy*10.0-3.0+vec3(pattern(angle+0.26179),pattern(angle+1.30899),pattern(angle)),0.0,1.0);k=clamp(k*10.0-5.0+pattern(angle+0.78539),0.0,1.0);gl_FragColor=vec4(1.0-cmy-k,color.a);}\");\nf.call(this,a.colorHalftone,{center:[b,d],angle:c,scale:Math.PI/e,texSize:[this.width,this.height]});return this}function V(b,d,c,e){a.dotScreen=a.dotScreen||new h(null,\"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;gl_FragColor=vec4(vec3(average*10.0-5.0+pattern()),color.a);}\");\nf.call(this,a.dotScreen,{center:[b,d],angle:c,scale:Math.PI/e,texSize:[this.width,this.height]});return this}function W(b){a.edgeWork1=a.edgeWork1||new h(null,\"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;\"+s+\"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec3 sample=texture2D(texture,texCoord+delta*percent).rgb;float average=(sample.r+sample.g+sample.b)/3.0;color.x+=average*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=average*weight;total.y+=weight;}}gl_FragColor=vec4(color/total,0.0,1.0);}\");\na.edgeWork2=a.edgeWork2||new h(null,\"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;\"+s+\"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec2 sample=texture2D(texture,texCoord+delta*percent).xy;color.x+=sample.x*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=sample.y*weight;total.y+=weight;}}float c=clamp(10000.0*(color.y/total.y-color.x/total.x)+0.5,0.0,1.0);gl_FragColor=vec4(c,c,c,1.0);}\");\nf.call(this,a.edgeWork1,{delta:[b/this.width,0]});f.call(this,a.edgeWork2,{delta:[0,b/this.height]});return this}function X(b,d,c){a.hexagonalPixelate=a.hexagonalPixelate||new h(null,\"uniform sampler2D texture;uniform vec2 center;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 tex=(texCoord*texSize-center)/scale;tex.y/=0.866025404;tex.x-=tex.y*0.5;vec2 a;if(tex.x+tex.y-floor(tex.x)-floor(tex.y)<1.0)a=vec2(floor(tex.x),floor(tex.y));else a=vec2(ceil(tex.x),ceil(tex.y));vec2 b=vec2(ceil(tex.x),floor(tex.y));vec2 c=vec2(floor(tex.x),ceil(tex.y));vec3 TEX=vec3(tex.x,tex.y,1.0-tex.x-tex.y);vec3 A=vec3(a.x,a.y,1.0-a.x-a.y);vec3 B=vec3(b.x,b.y,1.0-b.x-b.y);vec3 C=vec3(c.x,c.y,1.0-c.x-c.y);float alen=length(TEX-A);float blen=length(TEX-B);float clen=length(TEX-C);vec2 choice;if(alen<blen){if(alen<clen)choice=a;else choice=c;}else{if(blen<clen)choice=b;else choice=c;}choice.x+=choice.y*0.5;choice.y*=0.866025404;choice*=scale/texSize;gl_FragColor=texture2D(texture,choice+center/texSize);}\");\nf.call(this,a.hexagonalPixelate,{center:[b,d],scale:c,texSize:[this.width,this.height]});return this}function Y(b){a.ink=a.ink||new h(null,\"uniform sampler2D texture;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 dx=vec2(1.0/texSize.x,0.0);vec2 dy=vec2(0.0,1.0/texSize.y);vec4 color=texture2D(texture,texCoord);float bigTotal=0.0;float smallTotal=0.0;vec3 bigAverage=vec3(0.0);vec3 smallAverage=vec3(0.0);for(float x=-2.0;x<=2.0;x+=1.0){for(float y=-2.0;y<=2.0;y+=1.0){vec3 sample=texture2D(texture,texCoord+dx*x+dy*y).rgb;bigAverage+=sample;bigTotal+=1.0;if(abs(x)+abs(y)<2.0){smallAverage+=sample;smallTotal+=1.0;}}}vec3 edge=max(vec3(0.0),bigAverage/bigTotal-smallAverage/smallTotal);gl_FragColor=vec4(color.rgb-dot(edge,edge)*strength*100000.0,color.a);}\");\nf.call(this,a.ink,{strength:b*b*b*b*b,texSize:[this.width,this.height]});return this}function Z(b,d,c,e){a.bulgePinch=a.bulgePinch||u(\"uniform float radius;uniform float strength;uniform vec2 center;\",\"coord-=center;float distance=length(coord);if(distance<radius){float percent=distance/radius;if(strength>0.0){coord*=mix(1.0,smoothstep(0.0,radius/distance,percent),strength*0.75);}else{coord*=mix(1.0,pow(percent,1.0+strength*0.75)*radius/distance,1.0-percent);}}coord+=center;\");\nf.call(this,a.bulgePinch,{radius:c,strength:q(-1,e,1),center:[b,d],texSize:[this.width,this.height]});return this}function $(b,d,c){a.matrixWarp=a.matrixWarp||u(\"uniform mat3 matrix;uniform bool useTextureSpace;\",\"if(useTextureSpace)coord=coord/texSize*2.0-1.0;vec3 warp=matrix*vec3(coord,1.0);coord=warp.xy/warp.z;if(useTextureSpace)coord=(coord*0.5+0.5)*texSize;\");b=Array.prototype.concat.apply([],b);if(4==b.length)b=\n[b[0],b[1],0,b[2],b[3],0,0,0,1];else if(9!=b.length)throw\"can only warp with 2x2 or 3x3 matrix\";f.call(this,a.matrixWarp,{matrix:d?y(b):b,texSize:[this.width,this.height],useTextureSpace:c|0});return this}function aa(a,d){var c=x.apply(null,d),e=x.apply(null,a),c=y(c);return this.matrixWarp([c[0]*e[0]+c[1]*e[3]+c[2]*e[6],c[0]*e[1]+c[1]*e[4]+c[2]*e[7],c[0]*e[2]+c[1]*e[5]+c[2]*e[8],c[3]*e[0]+c[4]*e[3]+c[5]*e[6],c[3]*e[1]+c[4]*e[4]+c[5]*e[7],c[3]*e[2]+c[4]*e[5]+c[5]*e[8],c[6]*e[0]+c[7]*e[3]+c[8]*e[6],\nc[6]*e[1]+c[7]*e[4]+c[8]*e[7],c[6]*e[2]+c[7]*e[5]+c[8]*e[8]])}function ba(b,d,c,e){a.swirl=a.swirl||u(\"uniform float radius;uniform float angle;uniform vec2 center;\",\"coord-=center;float distance=length(coord);if(distance<radius){float percent=(radius-distance)/radius;float theta=percent*percent*angle;float s=sin(theta);float c=cos(theta);coord=vec2(coord.x*c-coord.y*s,coord.x*s+coord.y*c);}coord+=center;\");\nf.call(this,a.swirl,{radius:c,center:[b,d],angle:e,texSize:[this.width,this.height]});return this}var v={};(function(){function a(b){if(!b.getExtension(\"OES_texture_float\"))return!1;var c=b.createFramebuffer(),e=b.createTexture();b.bindTexture(b.TEXTURE_2D,e);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);\nb.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null);b.bindFramebuffer(b.FRAMEBUFFER,c);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,e,0);c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texImage2D(b.TEXTURE_2D,\n0,b.RGBA,2,2,0,b.RGBA,b.FLOAT,new Float32Array([2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]));var e=b.createProgram(),d=b.createShader(b.VERTEX_SHADER),g=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,\"attribute vec2 vertex;void main(){gl_Position=vec4(vertex,0.0,1.0);}\");b.shaderSource(g,\"uniform sampler2D texture;void main(){gl_FragColor=texture2D(texture,vec2(0.5));}\");b.compileShader(d);b.compileShader(g);b.attachShader(e,d);b.attachShader(e,\ng);b.linkProgram(e);d=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,d);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0]),b.STREAM_DRAW);b.enableVertexAttribArray(0);b.vertexAttribPointer(0,2,b.FLOAT,!1,0,0);d=new Uint8Array(4);b.useProgram(e);b.viewport(0,0,1,1);b.bindTexture(b.TEXTURE_2D,c);b.drawArrays(b.POINTS,0,1);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,d);return 127===d[0]||128===d[0]}function d(){}function c(a){\"OES_texture_float_linear\"===a?(void 0===this.$OES_texture_float_linear$&&Object.defineProperty(this,\n\"$OES_texture_float_linear$\",{enumerable:!1,configurable:!1,writable:!1,value:new d}),a=this.$OES_texture_float_linear$):a=n.call(this,a);return a}function e(){var a=f.call(this);-1===a.indexOf(\"OES_texture_float_linear\")&&a.push(\"OES_texture_float_linear\");return a}try{var g=document.createElement(\"canvas\").getContext(\"experimental-webgl\")}catch(l){}if(g&&-1===g.getSupportedExtensions().indexOf(\"OES_texture_float_linear\")&&a(g)){var n=WebGLRenderingContext.prototype.getExtension,f=WebGLRenderingContext.prototype.getSupportedExtensions;\nWebGLRenderingContext.prototype.getExtension=c;WebGLRenderingContext.prototype.getSupportedExtensions=e}})();var a;v.canvas=function(){var b=document.createElement(\"canvas\");try{a=b.getContext(\"experimental-webgl\",{premultipliedAlpha:!1})}catch(d){a=null}if(!a)throw\"This browser does not support WebGL\";b._={gl:a,isInitialized:!1,texture:null,spareTexture:null,flippedShader:null};b.texture=k(A);b.draw=k(C);b.update=k(D);b.replace=k(E);b.contents=k(F);b.getPixelArray=k(G);b.brightnessContrast=k(H);\nb.hexagonalPixelate=k(X);b.hueSaturation=k(K);b.colorHalftone=k(U);b.triangleBlur=k(S);b.unsharpMask=k(N);b.perspective=k(aa);b.matrixWarp=k($);b.bulgePinch=k(Z);b.tiltShift=k(R);b.dotScreen=k(V);b.edgeWork=k(W);b.lensBlur=k(Q);b.zoomBlur=k(T);b.noise=k(L);b.denoise=k(J);b.curves=k(I);b.swirl=k(ba);b.ink=k(Y);b.vignette=k(P);b.vibrance=k(O);b.sepia=k(M);return b};v.splineInterpolate=t;var h=function(){function b(b,c){var e=a.createShader(b);a.shaderSource(e,c);a.compileShader(e);if(!a.getShaderParameter(e,\na.COMPILE_STATUS))throw\"compile error: \"+a.getShaderInfoLog(e);return e}function d(d,l){this.texCoordAttribute=this.vertexAttribute=null;this.program=a.createProgram();d=d||c;l=l||e;l=\"precision highp float;\"+l;a.attachShader(this.program,b(a.VERTEX_SHADER,d));a.attachShader(this.program,b(a.FRAGMENT_SHADER,l));a.linkProgram(this.program);if(!a.getProgramParameter(this.program,a.LINK_STATUS))throw\"link error: \"+a.getProgramInfoLog(this.program);}var c=\"attribute vec2 vertex;attribute vec2 _texCoord;varying vec2 texCoord;void main(){texCoord=_texCoord;gl_Position=vec4(vertex*2.0-1.0,0.0,1.0);}\",\ne=\"uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,texCoord);}\";d.prototype.destroy=function(){a.deleteProgram(this.program);this.program=null};d.prototype.uniforms=function(b){a.useProgram(this.program);for(var e in b)if(b.hasOwnProperty(e)){var c=a.getUniformLocation(this.program,e);if(null!==c){var d=b[e];if(\"[object Array]\"==Object.prototype.toString.call(d))switch(d.length){case 1:a.uniform1fv(c,new Float32Array(d));break;\ncase 2:a.uniform2fv(c,new Float32Array(d));break;case 3:a.uniform3fv(c,new Float32Array(d));break;case 4:a.uniform4fv(c,new Float32Array(d));break;case 9:a.uniformMatrix3fv(c,!1,new Float32Array(d));break;case 16:a.uniformMatrix4fv(c,!1,new Float32Array(d));break;default:throw\"dont't know how to load uniform \\\"\"+e+'\" of length '+d.length;}else if(\"[object Number]\"==Object.prototype.toString.call(d))a.uniform1f(c,d);else throw'attempted to set uniform \"'+e+'\" to invalid value '+(d||\"undefined\").toString();\n}}return this};d.prototype.textures=function(b){a.useProgram(this.program);for(var c in b)b.hasOwnProperty(c)&&a.uniform1i(a.getUniformLocation(this.program,c),b[c]);return this};d.prototype.drawRect=function(b,c,e,d){var f=a.getParameter(a.VIEWPORT);c=void 0!==c?(c-f[1])/f[3]:0;b=void 0!==b?(b-f[0])/f[2]:0;e=void 0!==e?(e-f[0])/f[2]:1;d=void 0!==d?(d-f[1])/f[3]:1;null==a.vertexBuffer&&(a.vertexBuffer=a.createBuffer());a.bindBuffer(a.ARRAY_BUFFER,a.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,new Float32Array([b,\nc,b,d,e,c,e,d]),a.STATIC_DRAW);null==a.texCoordBuffer&&(a.texCoordBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,a.texCoordBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),a.STATIC_DRAW));null==this.vertexAttribute&&(this.vertexAttribute=a.getAttribLocation(this.program,\"vertex\"),a.enableVertexAttribArray(this.vertexAttribute));null==this.texCoordAttribute&&(this.texCoordAttribute=a.getAttribLocation(this.program,\"_texCoord\"),a.enableVertexAttribArray(this.texCoordAttribute));\na.useProgram(this.program);a.bindBuffer(a.ARRAY_BUFFER,a.vertexBuffer);a.vertexAttribPointer(this.vertexAttribute,2,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,a.texCoordBuffer);a.vertexAttribPointer(this.texCoordAttribute,2,a.FLOAT,!1,0,0);a.drawArrays(a.TRIANGLE_STRIP,0,4)};d.getDefaultShader=function(){a.defaultShader=a.defaultShader||new d;return a.defaultShader};return d}();z.prototype.interpolate=function(a){for(var d=0,c=this.ya.length-1;1<c-d;){var e=c+d>>1;this.xa[e]>a?c=e:d=e}var e=this.xa[c]-\nthis.xa[d],g=(this.xa[c]-a)/e;a=(a-this.xa[d])/e;return g*this.ya[d]+a*this.ya[c]+((g*g*g-g)*this.y2[d]+(a*a*a-a)*this.y2[c])*e*e/6};var r=function(){function b(b,c,d,f){this.gl=a;this.id=a.createTexture();this.width=b;this.height=c;this.format=d;this.type=f;a.bindTexture(a.TEXTURE_2D,this.id);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,\na.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);b&&c&&a.texImage2D(a.TEXTURE_2D,0,this.format,b,c,0,this.format,this.type,null)}function d(a){null==c&&(c=document.createElement(\"canvas\"));c.width=a.width;c.height=a.height;a=c.getContext(\"2d\");a.clearRect(0,0,c.width,c.height);return a}b.fromElement=function(c){var d=new b(0,0,a.RGBA,a.UNSIGNED_BYTE);d.loadContentsOf(c);return d};b.prototype.loadContentsOf=function(b){this.width=b.width||b.videoWidth;this.height=b.height||b.videoHeight;a.bindTexture(a.TEXTURE_2D,\nthis.id);a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,this.type,b)};b.prototype.initFromBytes=function(b,c,d){this.width=b;this.height=c;this.format=a.RGBA;this.type=a.UNSIGNED_BYTE;a.bindTexture(a.TEXTURE_2D,this.id);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,this.type,new Uint8Array(d))};b.prototype.destroy=function(){a.deleteTexture(this.id);this.id=null};b.prototype.use=function(b){a.activeTexture(a.TEXTURE0+(b||0));a.bindTexture(a.TEXTURE_2D,this.id)};b.prototype.unuse=function(b){a.activeTexture(a.TEXTURE0+\n(b||0));a.bindTexture(a.TEXTURE_2D,null)};b.prototype.ensureFormat=function(b,c,d,f){if(1==arguments.length){var h=arguments[0];b=h.width;c=h.height;d=h.format;f=h.type}if(b!=this.width||c!=this.height||d!=this.format||f!=this.type)this.width=b,this.height=c,this.format=d,this.type=f,a.bindTexture(a.TEXTURE_2D,this.id),a.texImage2D(a.TEXTURE_2D,0,this.format,b,c,0,this.format,this.type,null)};b.prototype.drawTo=function(b){a.framebuffer=a.framebuffer||a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,\na.framebuffer);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.id,0);if(a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE)throw Error(\"incomplete framebuffer\");a.viewport(0,0,this.width,this.height);b();a.bindFramebuffer(a.FRAMEBUFFER,null)};var c=null;b.prototype.fillUsingCanvas=function(b){b(d(this));this.format=a.RGBA;this.type=a.UNSIGNED_BYTE;a.bindTexture(a.TEXTURE_2D,this.id);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,c);return this};\nb.prototype.toImage=function(b){this.use();h.getDefaultShader().drawRect();var f=4*this.width*this.height,k=new Uint8Array(f),n=d(this),p=n.createImageData(this.width,this.height);a.readPixels(0,0,this.width,this.height,a.RGBA,a.UNSIGNED_BYTE,k);for(var m=0;m<f;m++)p.data[m]=k[m];n.putImageData(p,0,0);b.src=c.toDataURL()};b.prototype.swapWith=function(a){var b;b=a.id;a.id=this.id;this.id=b;b=a.width;a.width=this.width;this.width=b;b=a.height;a.height=this.height;this.height=b;b=a.format;a.format=\nthis.format;this.format=b};return b}(),s=\"float random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\";return v}();\n\n(function () {\n    'use strict';\n    /**\n     * jr-crop - A simple ionic plugin to crop your images.\n     * @version 1.0.0\n     * @link https://github.com/JrSchild/jr-crop\n     * @author Joram Ruitenschild\n     * @license MIT\n     */\n    angular.module('jrCrop', [])\n           .factory('$jrCrop', function ($ionicModal, $rootScope, $q) {\n\n               var template = '<div class=\"jr-crop modal\">' +\n                   '<div class=\"jr-crop-center-container\">' +\n                   '<div class=\"jr-crop-img\" ng-style=\"{width: width + \\'px\\', height: height + \\'px\\'}\"></div>' +\n                   '</div>' +\n                   '<div class=\"jr-crop-center-container\">' +\n                   '<div class=\"jr-crop-select\" style=\"overflow: hidden\" ng-style=\"{width: width + \\'px\\', height: height + \\'px\\'}\"></div>' +\n                   '</div>' +\n                   '<div class=\"bar bar-footer bar-dark jr-crop-footer\">' +\n                   '<button class=\"button button-clear\" ng-click=\"cancel()\">{{cancelText}}</button>' +\n                   '<div class=\"title\">{{title}}</div>' +\n                   '<button class=\"button button-clear\" ng-click=\"crop()\">{{chooseText}}</button>' +\n                   '</div>' +\n                   '</div>';\n\n               var jrCropController = ionic.views.View.inherit({\n\n                   promise  : null,\n                   imgWidth : null,\n                   imgHeight: null,\n\n                   // Elements that hold the cropped version and the full\n                   // overlaying image.\n                   imgSelect: null,\n                   imgFull  : null,\n\n                   // Values exposed by scaling and moving. Needed\n                   // to calculate the result of cropped image\n                   posX  : 0,\n                   posY  : 0,\n                   scale : 1,\n                   rotate: 0,\n\n                   last_scale : 1,\n                   last_posX  : 0,\n                   last_posY  : 0,\n                   last_rotate: 0,\n\n                   initialize: function (options) {\n                       var self = this;\n\n                       self.options = options;\n                       self.promise = $q.defer();\n                       self.loadImage().then(function (elem) {\n                           self.imgWidth  = elem.naturalWidth;\n                           self.imgHeight = elem.naturalHeight;\n\n                           self.options.modal.el.querySelector('.jr-crop-img')\n                               .appendChild(self.imgSelect = elem.cloneNode());\n                           self.options.modal.el.querySelector('.jr-crop-select')\n                               .appendChild(self.imgFull = elem.cloneNode());\n\n                           self.bindHandlers();\n                           self.initImage();\n                       });\n\n                       // options === scope. Expose actions for modal.\n                       self.options.cancel = this.cancel.bind(this);\n                       self.options.crop   = this.crop.bind(this);\n                   },\n\n                   /**\n                    * Init the image in a center position\n                    */\n                   initImage: function () {\n                       if (this.options.height < this.imgHeight || this.options.width < this.imgWidth) {\n                           var imgAspectRatio    = this.imgWidth / this.imgHeight;\n                           var selectAspectRatio = this.options.width / this.options.height;\n\n                           if (selectAspectRatio > imgAspectRatio) {\n                               this.scale = this.last_scale = this.options.width / this.imgWidth;\n                           } else {\n                               this.scale = this.last_scale = this.options.height / this.imgHeight;\n                           }\n                       }\n\n                       var centerX = (this.imgWidth - this.options.width) / 2;\n                       var centerY = (this.imgHeight - this.options.height) / 2;\n\n                       this.posX = this.last_posX = -centerX;\n                       this.posY = this.last_posY = -centerY;\n\n                       this.setImageTransform();\n                   },\n\n                   cancel: function () {\n                       var self = this;\n\n                       self.options.modal.remove().then(function () {\n                           self.promise.reject('canceled');\n                       });\n                   },\n\n                   /**\n                    * This is where the magic happens\n                    */\n                   bindHandlers: function () {\n                       var self                                             = this,\n\n                           min_pos_x                                        = 0, min_pos_y = 0,\n                           max_pos_x                                        = 0, max_pos_y = 0,\n                           transforming_correctX = 0, transforming_correctY = 0,\n\n                           scaleMax                                         = 1, scaleMin,\n                           image_ratio                                      = self.imgWidth / self.imgHeight,\n                           cropper_ratio                                    = self.options.width / self.options.height;\n\n                       if (cropper_ratio < image_ratio) {\n                           scaleMin = self.options.height / self.imgHeight;\n                       } else {\n                           scaleMin = self.options.width / self.imgWidth;\n                       }\n\n                       function setPosWithinBoundaries() {\n                           calcMaxPos();\n                           if (self.posX > min_pos_x) {\n                               self.posX = min_pos_x;\n                           }\n                           if (self.posX < max_pos_x) {\n                               self.posX = max_pos_x;\n                           }\n                           if (self.posY > min_pos_y) {\n                               self.posY = min_pos_y;\n                           }\n                           if (self.posY < max_pos_y) {\n                               self.posY = max_pos_y;\n                           }\n                       }\n\n                       /**\n                        * Calculate the minimum and maximum positions.\n                        * This took some headaches to write, good luck\n                        * figuring this out.\n                        */\n                       function calcMaxPos() {\n                           // Calculate current proportions of the image.\n                           var currWidth  = self.scale * self.imgWidth;\n                           var currHeight = self.scale * self.imgHeight;\n\n                           // Images are scaled from the center\n                           min_pos_x = (currWidth - self.imgWidth) / 2;\n                           min_pos_y = (currHeight - self.imgHeight) / 2;\n                           max_pos_x = -(currWidth - min_pos_x - self.options.width);\n                           max_pos_y = -(currHeight - min_pos_y - self.options.height);\n                       }\n\n                       // Based on: http://stackoverflow.com/questions/18011099/pinch-to-zoom-using-hammer-js\n                       var options = {\n                           prevent_default_directions: ['left', 'right', 'up', 'down']\n                       };\n                       ionic.onGesture('touch transform drag dragstart dragend rotate', function (e) {\n                           switch (e.type) {\n                               case 'touch':\n                                   self.last_scale = self.scale;\n                                   break;\n                               case 'drag':\n                                   self.posX = self.last_posX + e.gesture.deltaX - transforming_correctX;\n                                   self.posY = self.last_posY + e.gesture.deltaY - transforming_correctY;\n                                   setPosWithinBoundaries();\n                                   break;\n                               case 'transform':\n                                   self.scale = Math.max(scaleMin, Math.min(self.last_scale * e.gesture.scale, scaleMax));\n                                   setPosWithinBoundaries();\n                                   break;\n                               case 'dragend':\n                                   self.last_posX = self.posX;\n                                   self.last_posY = self.posY;\n                                   break;\n                               case 'dragstart':\n                                   self.last_scale = self.scale;\n\n                                   // After scaling, hammerjs needs time to reset the deltaX and deltaY values,\n                                   // when the user drags the image before this is done the image will jump.\n                                   // This is an attempt to fix that.\n                                   if (e.gesture.deltaX > 1 || e.gesture.deltaX < -1) {\n                                       transforming_correctX = e.gesture.deltaX;\n                                       transforming_correctY = e.gesture.deltaY;\n                                   } else {\n                                       transforming_correctX = 0;\n                                       transforming_correctY = 0;\n                                   }\n                                   break;\n                               case 'rotate':\n                                   self.rotate = self.last_rotate + e.gesture.rotation;\n                                   break;\n                           }\n\n                           self.setImageTransform();\n\n                       }, self.options.modal.el, options);\n                   },\n\n                   setImageTransform: function () {\n                       var self = this;\n\n                       var transform =\n                               'translate3d(' + self.posX + 'px,' + self.posY + 'px, 0) ' +\n                               'scale3d(' + self.scale + ',' + self.scale + ', 1)' +\n                               'rotate(' + self.rotate + 'deg)';\n\n                       self.imgSelect.style[ionic.CSS.TRANSFORM] = transform;\n                       self.imgFull.style[ionic.CSS.TRANSFORM]   = transform;\n                   },\n\n                   /**\n                    * Calculate the new image from the values calculated by\n                    * user input. Return a canvas-object with the image on it.\n                    *\n                    * Note: It doesn't actually downsize the image, it only returns\n                    * a cropped version. Since there's inconsistenties in image-quality\n                    * when downsizing it's up to the developer to implement this. Preferably\n                    * on the server.\n                    */\n                   crop: function () {\n                       var canvas  = document.createElement('canvas');\n                       var context = canvas.getContext('2d');\n\n                       // Canvas size is original proportions but scaled down.\n                       canvas.width  = this.options.width / this.scale;\n                       canvas.height = this.options.height / this.scale;\n\n                       // The full proportions\n                       var currWidth  = this.imgWidth * this.scale;\n                       var currHeight = this.imgHeight * this.scale;\n\n                       // Because the top/left position doesn't take the scale of the image in\n                       // we need to correct this value.\n                       var correctX = (currWidth - this.imgWidth) / 2;\n                       var correctY = (currHeight - this.imgHeight) / 2;\n\n                       var sourceX = (this.posX - correctX) / this.scale;\n                       var sourceY = (this.posY - correctY) / this.scale;\n\n                       //see http://creativejs.com/2012/01/day-10-drawing-rotated-images-into-canvas/\n                       //move the origin\n                       context.translate(sourceX, sourceY);\n                       //move to center and rotate\n                       context.translate(this.imgWidth / 2, this.imgHeight / 2);\n                       context.rotate(this.rotate * Math.PI / 180);\n\n                       context.drawImage(this.imgFull, this.imgWidth / 2 * -1, this.imgHeight / 2 * -1);\n\n                       this.options.modal.remove();\n                       this.promise.resolve(canvas);\n                   },\n\n                   /**\n                    * Load the image and return the element.\n                    * Return Promise that will fail when unable to load image.\n                    */\n                   loadImage: function () {\n                       var promise = $q.defer();\n\n                       // Load the image and resolve with the DOM node when done.\n                       angular.element('<img />')\n                              .bind('load', function (e) {\n                                  promise.resolve(this);\n                              })\n                              .bind('error', promise.reject)\n                              .prop('src', this.options.url);\n\n                       // Return the promise\n                       return promise.promise;\n                   }\n               });\n\n               return {\n                   defaultOptions: {\n                       width      : 0,\n                       height     : 0,\n                       aspectRatio: 0,\n                       cancelText : 'Cancel',\n                       chooseText : 'Choose'\n                   },\n\n                   crop: function (options) {\n                       options = this.initOptions(options);\n\n                       var scope = $rootScope.$new(true);\n\n                       ionic.extend(scope, options);\n\n                       scope.modal = $ionicModal.fromTemplate(template, {\n                           scope: scope\n                       });\n\n                       // Show modal and initialize cropper.\n                       return scope.modal.show().then(function () {\n                           return (new jrCropController(scope)).promise.promise;\n                       });\n                   },\n\n                   initOptions: function (_options) {\n                       var options;\n\n                       // Apply default values to options.\n                       options = ionic.extend({}, this.defaultOptions);\n                       options = ionic.extend(options, _options);\n\n                       if (options.aspectRatio) {\n\n                           if (!options.width && options.height) {\n                               options.width = 200;\n                           }\n\n                           if (options.width) {\n                               options.height = options.width / options.aspectRatio;\n                           } else if (options.height) {\n                               options.width = options.height * options.aspectRatio;\n                           }\n                       }\n\n                       return options;\n                   }\n               };\n           });\n})();\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').factory('PhotoService', PhotoServiceFactory);\n\n    function PhotoServiceFactory($ionicActionSheet, $cordovaCapture, $cordovaCamera, $timeout, PhotoFilter, $translate, AppConfig, Share, $cordovaActionSheet, $jrCrop, $rootScope, $ionicModal, ActionSheet, $q) {\n\n        var deviceInformation = ionic.Platform.device();\n        var isIOS             = ionic.Platform.isIOS();\n\n        console.log('isIOS', isIOS);\n\n        // Default Setting\n        var tempImage;\n        var cordova = window.cordova;\n        var setting = {\n            jrCrop            : true,\n            filterImage       : true,\n            quality           : 90,\n            allowEdit         : false,\n            filter            : true,\n            correctOrientation: true,\n            targetWidth       : 320,\n            targetHeight      : 320,\n            saveToPhotoAlbum  : false,\n            allowRotation     : false,\n            aspectRatio       : 0\n        };\n\n\n        return {\n            open  : openModal,\n            crop  : cropModal,\n            filter: filterModal\n        };\n\n        function filterModal(image) {\n            var defer = $q.defer();\n\n            if (setting.filterImage) {\n                openFilter(image);\n            } else {\n                defer.resolve(image);\n            }\n\n            function openFilter(image64) {\n                var scope  = $rootScope.$new(true);\n                tempImage  = image64;\n                scope.form = {\n                    photo: image64\n                };\n\n                scope.theme = $rootScope.theme;\n                $ionicModal.fromTemplateUrl('app/component/ion-photo/view/filter.modal.html', {\n                    scope          : scope,\n                    focusFirstInput: true\n                }).then(function (modal) {\n                    scope.modalFilter = modal;\n                    scope.modalFilter.show();\n                    scope.loading = true;\n                    $timeout(function () {\n                        PhotoFilter.init('image', image64).then(function () {\n                            scope.loading = false;\n                        });\n                    }, 500)\n                });\n\n                scope.actionShowFilter = function (option) {\n                    scope.showFilter = option;\n                };\n\n                scope.closeModalFilter = function () {\n                    scope.modalFilter.hide();\n                };\n\n                scope.cropImage = function () {\n                    scope.modalFilter.remove();\n                    cropModal(tempImage)\n                        .then(openFilter);\n                };\n\n                // Filter\n                scope.filters      = PhotoFilter.filters.Adjust;\n                scope.imageFilters = PhotoFilter.imageFilters;\n                scope.reset        = PhotoFilter.reset;\n\n                scope.applyFilter = function (filter) {\n                    PhotoFilter.apply(filter.filter);\n                };\n\n                scope.filterEdit = false;\n                scope.showFilter = true;\n\n                scope.selectFilter = function (filter) {\n                    console.log('filter', filter);\n                    scope.filter     = filter;\n                    scope.filterEdit = true;\n                };\n\n                scope.doneFilter = function () {\n                    scope.filterEdit = false;\n                };\n\n                scope.cancelFilter = function (filter) {\n                    filter.slider.value = 0;\n                    filter.setSlider(filter.slider);\n                    scope.filterEdit = false;\n                };\n\n                scope.$watch('scope.filterSelected', function (item) {\n                    if (item) {\n                        var filter    = _.find(scope.filters, {func: item});\n                        scope.filter  = filter;\n                        scope.sliders = filter.sliders;\n                        console.log(filter);\n                    }\n                });\n\n                scope.$watch('filter.slider.value', function (value) {\n                    if (value) {\n                        scope.filter.slider.value = parseInt(value);\n                        scope.filter.setSlider(scope.filter.slider);\n                    }\n                });\n\n                scope.closeFilter = function () {\n                    defer.reject();\n                    scope.modalFilter.hide();\n                };\n\n                scope.submitFilter = function () {\n                    var dataUrl = PhotoFilter.getImage();\n                    scope.modalFilter.remove();\n                    defer.resolve(dataUrl);\n                };\n\n\n                // Cleanup the modal when we're done with it!\n                scope.$on('$destroy', function () {\n                    scope.modal.remove();\n                });\n            }\n\n            return defer.promise;\n        }\n\n        function openModal(setOptions) {\n            var defer = $q.defer();\n            console.log(deviceInformation);\n\n            // Change Settings\n            if (setOptions) {\n                setOptions.each(function (value, key) {\n                    setting[key] = value;\n                });\n            }\n\n            var options     = {\n                quality           : setting.quality,\n                aspectRatio       : setting.aspectRatio,\n                allowRotation     : setting.allowRotation,\n                allowEdit         : setting.allowEdit,\n                correctOrientation: setting.correctOrientation,\n                targetWidth       : setting.targetWidth,\n                targetHeight      : setting.targetHeight,\n                saveToPhotoAlbum  : setting.saveToPhotoAlbum,\n                destinationType   : window.cordova ? Camera.DestinationType.DATA_URL : null,\n                encodingType      : window.cordova ? Camera.EncodingType.JPEG : null,\n                popoverOptions    : window.cordova ? CameraPopoverOptions : null,\n            };\n            var buttons     = [\n                {\n                    text: '<i class=\"icon ion-images\"></i>' + $translate.instant('capturePhoto')\n                },\n                {\n                    text: '<i class=\"icon ion-ios-camera\"></i>' + $translate.instant('captureLibrary')\n                }\n            ];\n            var actionSheet = $ionicActionSheet.show({\n                buttons      : buttons,\n                titleText    : $translate.instant('submit'),\n                cancelText   : $translate.instant('cancel'),\n                cancel       : buttonCancel,\n                buttonClicked: buttonClicked\n            });\n\n            function buttonClicked(index) {\n                console.log(index);\n                actionSheet();\n                capture(index, options)\n                    .then(cropModal)\n                    .then(filterModal)\n                    .then(defer.resolve)\n                    .catch(buttonCancel);\n            }\n\n\n            function buttonCancel(resp) {\n                actionSheet(resp);\n            }\n\n            return defer.promise;\n        }\n\n        function cropModal(image) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                image = 'data:image/jpeg;base64,' + image;\n            }\n\n            if (setting.jrCrop) {\n                $jrCrop.crop({\n                    url          : image,\n                    aspectRatio  : 1,\n                    allowRotation: setting.allowRotation,\n                    width        : setting.targetWidth,\n                    height       : setting.targetHeight,\n                    cancelText   : $translate.instant('cancel'),\n                    chooseText   : $translate.instant('submit')\n                }).then(function (canvas) {\n                    defer.resolve(canvas.toDataURL());\n                }).catch(defer.reject);\n            } else {\n                defer.resolve(image);\n            }\n\n            return defer.promise;\n        }\n\n        function show(params) {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                var options = {\n                    title                    : params.title,\n                    buttonLabels             : _.map(params.options, function (item) {return item.text}),\n                    addCancelButtonWithLabel : params.cancelText,\n                    androidEnableCancelButton: true,\n                    androidTheme             : window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT\n                };\n\n                $cordovaActionSheet.show(options).then(function (btnIndex) {\n                    if (btnIndex !== 3) {\n                        defer.resolve(btnIndex);\n                    }\n                    defer.reject('cancel');\n                });\n\n            } else {\n                var actionSheet = $ionicActionSheet.show({\n                    buttons      : params.options,\n                    titleText    : params.title,\n                    cancelText   : params.cancelText,\n                    cancel       : function () {\n                        actionSheet();\n                    },\n                    buttonClicked: function (btnIndex) {\n                        actionSheet();\n                        if (btnIndex !== 3) {\n                            defer.resolve(btnIndex);\n                        }\n                        defer.reject('cancel');\n                    }\n                });\n\n            }\n            return defer.promise;\n        }\n\n        function capture(type, options) {\n            var defer = $q.defer();\n\n            // CAMERA\n            if (type === 0) {\n                getPicture(0);\n            }\n\n            // GALLERY\n            if (type === 1) {\n                getPicture(1);\n            }\n\n            // Video\n            if (type === 2) {\n                getVideo();\n            }\n\n            function getPicture(method) {\n                if (method === 0 && cordova) options.sourceType = Camera.PictureSourceType.CAMERA;\n                if (method === 1 && cordova) options.sourceType = Camera.PictureSourceType.PHOTOLIBRARY;\n\n                if (cordova) {\n                    $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n                } else {\n                    var fileInput = angular.element('<input type=\"file\" accept=\"image/x-png, image/gif, image/jpeg\" max-size=\"2048\" />');\n                    fileInput[0].click();\n                    fileInput.on('change', function (evt) {\n                        tempImage     = evt.currentTarget.files[0];\n                        var reader    = new FileReader();\n                        reader.onload = function (evt) {\n                            defer.resolve(evt.target.result);\n                        };\n                        reader.readAsDataURL(tempImage);\n                    });\n                }\n            }\n\n            function getVideo() {\n                $cordovaCapture.captureVideo({\n                    limit   : 1,\n                    duration: 5\n                }).then(function (mediaFiles) {\n                    tempImage = mediaFiles[0].fullPath;\n                    defer.resolve(tempImage);\n                }, defer.reject);\n            }\n\n\n            return defer.promise;\n        }\n\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').factory('Video', VideoFactory);\n\n    function VideoFactory($window, $q) {\n        var deferred = $q.defer();\n        //https://devdactic.com/capture-and-store-videos-ionic/\n        // Resolve the URL to the local file\n        // Start the copy process\n        function createFileEntry(fileURI) {\n            $window.resolveLocalFileSystemURL(fileURI, function (entry) {\n                return copyFile(entry);\n            }, fail);\n        }\n\n        // Create a unique name for the videofile\n        // Copy the recorded video to the app dir\n        function copyFile(fileEntry) {\n            var name    = fileEntry.fullPath.substr(fileEntry.fullPath.lastIndexOf('/') + 1);\n            var newName = makeid() + name;\n\n            $window.resolveLocalFileSystemURL(cordova.file.dataDirectory, function (fileSystem2) {\n                    fileEntry.copyTo(fileSystem2, newName, function (succ) {\n                        return onCopySuccess(succ);\n                    }, fail);\n                },\n                fail\n            );\n        }\n\n        // Called on successful copy process\n        // Creates a thumbnail from the movie\n        // The name is the moviename but with .png instead of .mov\n        function onCopySuccess(entry) {\n            var name = entry.nativeURL.slice(0, -4);\n            $window.PKVideoThumbnail.createThumbnail(entry.nativeURL, name + '.png', function (prevSucc) {\n                return prevImageSuccess(prevSucc);\n            }, fail);\n        }\n\n        // Called on thumbnail creation success\n        // Generates the currect URL to the local moviefile\n        // Finally resolves the promies and returns the name\n        function prevImageSuccess(succ) {\n            var correctUrl = succ.slice(0, -4);\n            correctUrl += '.MOV';\n            deferred.resolve(correctUrl);\n        }\n\n        // Called when anything fails\n        // Rejects the promise with an Error\n        function fail(error) {\n            console.log('FAIL: ' + error.code);\n            deferred.reject('ERROR');\n        }\n\n        // Function to make a unique filename\n        function makeid() {\n            var text     = '';\n            var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n            for (var i = 0; i < 5; i++) {\n                text += possible.charAt(Math.floor(Math.random() * possible.length));\n            }\n            return text;\n        }\n\n        // The object and functions returned from the Service\n        return {\n            // This is the initial function we call from our controller\n            // Gets the videoData and calls the first service function\n            // with the local URL of the video and returns the promise\n            saveVideo: function (data) {\n                createFileEntry(data[0].localURL);\n                return promise;\n            }\n        };\n    }\n\n})();\n\n;(function() {\n\"use strict\";\n\nangular.module(\"ionic\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/directive/SigninModalDirective.html\",\"<ion-modal-view id=\\\"user-layout\\\" class=\\\"modal-auth bg-animate\\\" cache-view=\\\"false\\\"><ion-header-bar><h1 class=\\\"title\\\" \\ntranslate=\\\"signin\\\"></h1><a ng-click=\\\"closeModal()\\\" class=\\\"button button-icon icon ion-ios-close-empty\\\"></a>\\n</ion-header-bar><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step2\\\"><form name=\\\"myForm\\\" \\nnovalidate=\\\"novalidate\\\" ng-submit=\\\"submitLogin(myForm, form)\\\"><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-user placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"username\\\" \\nng-model=\\\"form.username\\\" ng-minlength=\\\"4\\\" ng-maxlength=\\\"12\\\" ng-model-options=\\\"{debounce: 1000}\\\" \\nng-pattern=\\\"/^[a-zA-Z\\'. -]+$/\\\" placeholder=\\\"{{\\'yourLogin\\' | translate}}\\\"></label><div ng-if=\\\"myForm.username.$dirty\\\">\\n<div ng-messages=\\\"myForm.email.$error\\\" class=\\\"validation-error\\\"><div ng-message=\\\"required\\\" \\ntranslate=\\\"usernameRequired\\\"></div><div ng-message=\\\"email\\\" translate=\\\"usernameInUse\\\"></div></div><div \\nng-messages=\\\"myForm.email.$pending\\\" class=\\\"validation-pending\\\"><div ng-message=\\\"email\\\" translate=\\\"checkingUsername\\\">\\n</div></div></div><label class=\\\"item item-input\\\"><i class=\\\"icon icon-lock placeholder-icon\\\"></i> <input required \\ntype=\\\"password\\\" name=\\\"password\\\" ng-model=\\\"form.password\\\" placeholder=\\\"{{\\'password\\'|translate}}\\\"></label><button \\nclass=\\\"button button-block button-outline button-light\\\" type=\\\"submit\\\" translate=\\\"{{\\'submit\\' | translate}}\\\"></button>\\n</form><span class=\\\"term\\\">{{\\'termAccept\\' | translate}} <a href=\\\"https://photogramapp.com\\\">{{\\'terms\\' | translate}}</a>\\n</span></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/SignupModalDirective.html\",\"<ion-modal-view id=\\\"user-layout\\\" class=\\\"modal-auth bg-animate\\\" cache-view=\\\"false\\\"><ion-header-bar><h1 class=\\\"title\\\" \\ntranslate=\\\"register\\\"></h1><a ng-click=\\\"closeModal()\\\" class=\\\"button button-icon icon ion-ios-close-empty\\\"></a>\\n</ion-header-bar><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step2\\\"><form name=\\\"myForm\\\" \\nnovalidate=\\\"novalidate\\\" ng-submit=\\\"submitRegister(myForm, form)\\\"><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-envelope placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"email\\\" name=\\\"email\\\" \\nng-model=\\\"form.email\\\" email-validator ng-model-options=\\\"{debounce: 1000}\\\" placeholder=\\\"user@example.com\\\"></label><div \\nng-if=\\\"myForm.email.$dirty\\\"><div ng-messages=\\\"myForm.email.$error\\\" class=\\\"validation-error\\\"><div ng-message=\\\"required\\\" \\ntranslate=\\\"emailRequired\\\"></div><div ng-message=\\\"email\\\" translate=\\\"emailInUse\\\"></div></div><div \\nng-messages=\\\"myForm.email.$pending\\\" class=\\\"validation-pending\\\"><div ng-message=\\\"email\\\" translate=\\\"checkingEmail\\\"></div>\\n</div></div><label class=\\\"item item-input\\\"><i class=\\\"icon icon-user placeholder-icon\\\"></i> <input required=\\\"required\\\" \\ntype=\\\"text\\\" name=\\\"username\\\" ng-model=\\\"form.username\\\" username-validator ng-minlength=\\\"4\\\" ng-maxlength=\\\"12\\\" \\nng-model-options=\\\"{debounce: 1000}\\\" ng-pattern=\\\"/^[a-zA-Z\\'. -]+$/\\\" placeholder=\\\"{{\\'yourLogin\\' | translate}}\\\"></label>\\n<div ng-if=\\\"myForm.username.$dirty\\\"><div ng-messages=\\\"myForm.email.$error\\\" class=\\\"validation-error\\\"><div \\nng-message=\\\"required\\\" translate=\\\"usernameRequired\\\"></div><div ng-message=\\\"email\\\" translate=\\\"usernameInUse\\\"></div></div>\\n<div ng-messages=\\\"myForm.email.$pending\\\" class=\\\"validation-pending\\\"><div ng-message=\\\"email\\\" \\ntranslate=\\\"checkingUsername\\\"></div></div></div><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-lock placeholder-icon\\\"></i> <input required type=\\\"password\\\" name=\\\"password\\\" ng-model=\\\"form.password\\\" \\nplaceholder=\\\"{{\\'password\\'|translate}}\\\"></label><button class=\\\"button button-block button-outline button-light\\\" \\ntype=\\\"submit\\\" translate=\\\"{{\\'submit\\' | translate}}\\\"></button></form><span class=\\\"term\\\">{{\\'termAccept\\' | translate}} <a \\nhref=\\\"https://photogramapp.com\\\">{{\\'terms\\' | translate}}</a></span></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/distanceModal.html\",\"<ion-modal-view><ion-header-bar class=\\\"bar-light\\\"><div class=\\\"buttons\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-close-empty\\\" ng-click=\\\"closeDistanceModal()\\\"></button></div><div \\nclass=\\\"title\\\">{{ \\\"chooseDistanceText\\\" | translate }}</div></ion-header-bar><ion-content><ion-list><ion-item \\nclass=\\\"item item-icon-right\\\" ng-repeat=\\\"distance in distances\\\" ng-click=\\\"onDistanceSelected(distance.val)\\\" bindonce><h2\\n bo-bind=\\\"distance.text\\\"></h2><i class=\\\"icon ion-checkmark\\\" ng-show=\\\"params.distance === distance.val\\\"></i></ion-item>\\n</ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/follow.modal.html\",\"<ion-modal-view class=\\\"modal-profile photogram-profile\\\"><ion-header-bar class=\\\"bar-positive\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\nFollow Users</div></ion-header-bar><ion-content><div class=\\\"list\\\"><div class=\\\"item item-avatar item-button-right\\\" \\nng-repeat=\\\"item in data\\\"><img ng-src=\\\"{{ ::item.src }}\\\"><h2>{{ ::item.name }}</h2><p>{{ ::item.status }}</p><button \\nclass=\\\"button\\\" ng-click=\\\"item.follow = !item.follow\\\" ng-class=\\\"item.follow ? \\'button-positive\\' : \\'button-stable\\'\\\"><i \\nclass=\\\"icon\\\" ng-class=\\\"item.follow? \\'ion-thumbsup\\' : \\'ion-plus\\'\\\"></i></button></div></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/likeDirective.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar-dark\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ ::\\'Likes\\' | translate }} ({{ ::likes.length }})</div></ion-header-bar><ion-content><div class=\\\"list step1\\\"><div \\nng-repeat=\\\"item in likes\\\" class=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ ::item.user.img }}\\\"><h2>\\n{{ ::item.user.name }}</h2><div>{{ ::item.text }}</div><p>{{ ::item.created | amTimeAgo }}</p><button \\nclass=\\\"button button-positive button-outline\\\"><i class=\\\"icon ion-ios-plus-empty\\\"></i> {{ ::\\'Follow\\' }}</button></div>\\n</div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/photoCommentDirective.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n<span translate=\\\"commentPhotoText\\\"></span>({{ comments.length }})</div></ion-header-bar><ion-content><div \\nclass=\\\"padding center\\\" ng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><ion-list class=\\\"list\\\" \\nng-show=\\\"comments.length\\\" can-swipe=\\\"true\\\"><ion-item ng-repeat=\\\"item in comments | orderBy:createdAt\\\" \\nclass=\\\"item item-avatar\\\"><img ng-src=\\\"{{ ::item.user.photo._url || \\'./img/user.png\\'}}\\\"><div class=\\\"row\\\"><h2>\\n{{ ::item.user.name }}</h2></div><div class=\\\"row\\\"><div class=\\\"text\\\">{{ ::item.text }}</div></div><div class=\\\"row\\\"><p>\\n{{ ::item.createdAt | amTimeAgo }}</p></div><div ng-if=\\\"item.user.id === currentUser.id\\\"><ion-option-button \\nclass=\\\"button-info\\\" ng-click=\\\"editComment(item)\\\" translate=\\\"edit\\\">Edit</ion-option-button><ion-option-button \\nclass=\\\"button-assertive\\\" ng-click=\\\"deleteComment(item)\\\" translate=\\\"remove\\\">Remove</ion-option-button></div></ion-item>\\n</ion-list><div class=\\\"center-ico\\\" ng-if=\\\"nocomments\\\"><i class=\\\"icon ion-ios-chatbubble-outline\\\"></i><h1 \\ntranslate=\\\"noComments\\\"></h1></div></ion-content><form name=\\\"rForm\\\" ng-submit=\\\"submitComment(rForm, form)\\\" novalidate>\\n<ion-footer-bar class=\\\"bar-stable item-input-inset message-footer\\\" keyboard-attach><label class=\\\"item-input-wrapper\\\"><i\\n class=\\\"icon ion-ios-compose-outline placeholder-icon\\\"></i><textarea mentio mentio-trigger-char=\\\"\\'@\\'\\\" \\nmentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" mentio-search=\\\"searchPeople(term)\\\" \\nmentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" ng-model=\\\"form.text\\\" \\nplaceholder=\\\"Send a comment...\\\" required minlength=\\\"1\\\" maxlength=\\\"1500\\\">\\n                </textarea></label><div \\nclass=\\\"footer-btn-wrap\\\"><button class=\\\"button button-positive button-outline\\\" type=\\\"submit\\\" \\nng-disabled=\\\"!form.text || form.text === \\'\\'\\\">Publish</button></div></ion-footer-bar></form></ion-modal-view>\");\n$templateCache.put(\"app/directive/photoGridDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><div class=\\\"row animated fadeIn\\\" ng-if=\\\"$index % 3 === 0\\\" \\nng-repeat=\\\"image in data | orderBy:\\'createdAt\\':true\\\"><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index].user.obj\\\" \\nng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 1 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 1].user.obj\\\" \\nng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 2 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 2].user.obj\\\" \\nng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"></div></div><ion-infinite-scroll \\non-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/photoListDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><div class=\\\"list card\\\" ng-repeat=\\\"gallery in data | orderBy:\\'createdAt\\':true\\\" \\nng-if=\\\"showGalleries()\\\"><div class=\\\"item item-avatar\\\" ng-click=\\\"load(gallery.user.username)\\\" ion-affix \\ndata-affix-within-parent-with-class=\\\"card\\\"><img ng-if=\\\"profile\\\" ng-src=\\\"{{ ::gallery.user.photo._url}}\\\"> <img \\nng-src=\\\"{{ ::gallery.user.photo._url || \\'img/user.png\\'}}\\\"><h2>{{ ::gallery.user.name}}</h2><p>\\n{{ ::gallery.user.status}}</p><span>{{ ::gallery.createdAt | amTimeAgo}}</span></div><div class=\\\"item item-body\\\" \\non-double-tap=\\\"like(gallery.objectId)\\\" ng-model=\\\"gallery\\\"><div class=\\\"icon ion-ios-heart heart\\\" \\nng-class=\\\"gallery.isLiked ? \\'happy\\' : \\'broken\\' \\\"></div><i class=\\\"icon\\\" ng-if=\\\"like\\\"></i> <img \\nng-src=\\\"{{ gallery.image._url}}\\\" id=\\\"{{ ::gallery.objectId}}\\\"></div><div class=\\\"item item-buttons\\\"><div class=\\\"row\\\">\\n<div class=\\\"col col-75\\\"><ion-spinner ng-show=\\\"gallery.progress\\\"></ion-spinner><button photo-like ng-model=\\\"gallery\\\" \\nng-if=\\\"!gallery.progress\\\" ng-class=\\\"gallery.isLiked ? \\'ion-ios-heart\\' : \\'ion-ios-heart-outline\\' \\\" \\nclass=\\\"button-clear button-icon button-heart\\\"></button> <button ng-click=\\\"openComment(gallery.objectId)\\\" \\nng-model=\\\"gallery\\\" class=\\\"button-clear button-icon ion-ios-chatbubble-outline\\\"></button> <button \\nng-click=\\\"share(gallery.image._url, gallery.title)\\\" photogram=\\\"{{ :: gallery.objectId }}\\\" \\nclass=\\\"button-clear button-icon ion-android-share\\\"></button></div><div class=\\\"col text-right\\\"><button \\nng-click=\\\"action(gallery)\\\" photogram=\\\"{{ :: gallery.objectId }}\\\" \\nclass=\\\"button-clear button-icon ion-android-more-vertical\\\"></button></div></div></div><div class=\\\"padding\\\"><span \\nclass=\\\"likes\\\" ng-click=\\\"openLikers(gallery.objectId)\\\"><i class=\\\"icon ion-ios-heart\\\"></i> <span \\nng-if=\\\"!gallery.progress\\\">{{ gallery.likesTotal }}</span> <span translate=\\\"likesText\\\"></span></span><div \\nclass=\\\"list-comments\\\"><div class=\\\"comment-item\\\"><span profile-modal username=\\\"gallery.user.username\\\" class=\\\"username\\\">\\n{{ :: gallery.user.name }}</span> <span class=\\\"comment\\\" ng-bind-html=\\\"gallery.title | hashtag \\\"></span></div><div \\nclass=\\\"comment-item\\\" ng-repeat=\\\"item in gallery.comments |limitTo:3 | orderBy:\\'createdAt\\':true\\\"><span class=\\\"username\\\" \\nprofile-modal username=\\\"gallery.user.username\\\">{{ :: item.user.name }}</span> <span class=\\\"comment\\\" \\nng-bind-html=\\\"item.text | hashtag\\\"></span></div><a class=\\\"comment-item\\\" photo-comment ng-model=\\\"gallery\\\" \\nng-if=\\\"gallery.commentsTotal>3\\\" translate=\\\"seeAllCommentText\\\"></a></div><button \\nclass=\\\"button button-block button-clear button-comment\\\" photo-comment ng-model=\\\"gallery\\\"><span translate=\\\"addComment\\\">\\n</span></button></div></div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner>\\n</ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/profile-edit-modal.html\",\"<ion-modal-view class=\\\"profile-edit\\\"><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><button class=\\\"button button-clear\\\" \\nng-click=\\\"closeModal()\\\" translate=\\\"cancel\\\"></button><div class=\\\"title\\\">{{ ::\\'editProfile\\' | translate }}</div>\\n</ion-header-bar><ion-content class=\\\"view-avatar\\\"><div class=\\\"step2\\\"><form name=\\\"rForm\\\" \\nng-submit=\\\"submitUpdateProfile(rForm, form)\\\" novalidate><img class=\\\"avatar\\\" user-avatar ng-model=\\\"currentUser\\\" \\nng-src=\\\"{{ currentUser.photo.url() || \\'img/user.png\\' }}\\\"><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-clipboard placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"name\\\" \\nng-model=\\\"form.name\\\" placeholder=\\\"{{\\'name\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-pound placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"username\\\" \\nng-model=\\\"form.username\\\" ng-minlength=\\\"4\\\" ng-maxlength=\\\"12\\\" ng-pattern=\\\"/^[a-zA-Z\\'. -]+$/\\\" \\nplaceholder=\\\"{{\\'username\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-earth placeholder-icon\\\"></i> <input type=\\\"url\\\" name=\\\"website\\\" ng-model=\\\"form.website\\\" \\nplaceholder=\\\"{{\\'site\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-information-circled placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"status\\\" \\nng-model=\\\"form.status\\\" placeholder=\\\"{{\\'status\\' | translate}}\\\"></label><ion-item class=\\\"item-divider\\\" \\ntranslate=\\\"privateInformation\\\"></ion-item><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-envelope placeholder-icon\\\"></i> <input type=\\\"email\\\" name=\\\"email\\\" ng-model=\\\"form.email\\\" \\ndisabled=\\\"disabled\\\" ng-model-options=\\\"{debounce: 1000}\\\" placeholder=\\\"user@example.com\\\"></label><label \\nclass=\\\"item item-input\\\"><i class=\\\"icon ion-iphone placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"tel\\\" \\nname=\\\"phone\\\" ng-model=\\\"form.phone\\\" placeholder=\\\"{{\\'phone\\' | translate }}\\\"></label><div class=\\\"padding\\\"><button \\ntype=\\\"submit\\\" class=\\\"button button-block button-positive\\\" translate=\\\"submit\\\"></button></div></form></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/profile-modal.html\",\"<ion-modal-view id=\\\"account-view\\\"><ion-header-bar class=\\\"bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ user.name }}</div></ion-header-bar><ion-content overflow-scroll=\\\"true\\\"><div class=\\\"profile-top\\\"><div class=\\\"row\\\">\\n<div class=\\\"col-25\\\"><img class=\\\"avatar\\\" ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\"></div><div \\nclass=\\\"col col-statics\\\"><div class=\\\"row\\\"><div class=\\\"row\\\"><div class=\\\"col\\\"><span class=\\\"text-center\\\">\\n{{ ::user.galleriesTotal || 0}}</span><h3 translate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\"><span class=\\\"text-center\\\">\\n{{ user.followersTotal || 0}}</span><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\"><span \\nclass=\\\"text-center\\\">{{ ::user.followingsTotal || 0}}</span><h3 translate=\\\"followingText\\\"></h3></div></div></div><div \\nclass=\\\"row col-edit\\\"><div class=\\\"col\\\"><photogram-loading loading=\\\"loadingFollow\\\"></photogram-loading><button \\nng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-follow\\': !user.isFollow}\\\" ng-click=\\\"follow()\\\" class=\\\"button\\\"><span\\n ng-show=\\\"!user.isFollow\\\" translate>Follow</span> <span ng-show=\\\"user.isFollow\\\" translate>Following</span></button>\\n</div></div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">{{ user.name }}</span><p class=\\\"user-status\\\">\\n{{ user.status }}</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button \\nclass=\\\"button button-icon icon ion-grid\\\" ng-class=\\\"{active: tab.grid}\\\" ng-click=\\\"changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: tab.list}\\\" ng-click=\\\"changeTab(\\'list\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recent\\\"></div><div class=\\\"tab\\\" ng-if=\\\"tab.list\\\"></div><div class=\\\"tab\\\" ng-if=\\\"tab.grid\\\"></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/search-directive.html\",\"<label class=\\\"item item-input\\\"><i class=\\\"icon ion-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"input\\\" \\nplaceholder=\\\"{{\\'SEARCH.FORM.INPUT\\' | translate }}\\\"> <button class=\\\"button button-icon\\\" ng-if=\\\"input.length\\\" \\nng-click=\\\"clearSearch()\\\"><i class=\\\"icon ion-close\\\"></i></button></label>\");\n$templateCache.put(\"app/directive/settings-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"settingTitle\\\"></div></ion-header-bar><ion-content class=\\\"animated fadeIn\\\"><div class=\\\"list\\\"><ion-language>\\n</ion-language><ion-toggle class=\\\"toggle-positive\\\" ng-model=\\\"form.push\\\"><h3><small translate=\\\"notificationText\\\">\\n</small></h3><p ng-if=\\\"form.push\\\" translate=\\\"on\\\"></p><p ng-if=\\\"!form.push\\\" translate=\\\"off\\\"></p></ion-toggle><ion-item \\nclass=\\\"item-icon-right\\\" href=\\\"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S\\\"><h3>\\n<small translate=\\\"buy\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" href=\\\"http://photogramapp.com\\\"><h3><small translate=\\\"help\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item class=\\\"item-icon-right\\\" href=\\\"http://photogramapp.com\\\"><h3>\\n<small translate=\\\"terms\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" ng-click=\\\"show();\\\"><h3><small translate=\\\"report\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item></div><div class=\\\"padding\\\"><button ng-click=\\\"logout()\\\" \\nclass=\\\"button button-block button-positive\\\" translate=\\\"logout\\\"></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/mentio/people-mentions.html\",\"<ul class=\\\"list-group user-search\\\"><li mentio-menu-item=\\\"person\\\" ng-repeat=\\\"person in items\\\" class=\\\"list-group-item\\\">\\n<img ng-src=\\\"{{person.imageUrl}}\\\" class=\\\"user-photo\\\"><div class=\\\"description\\\"><span class=\\\"text-primary\\\" \\nng-bind-html=\\\"person.username | mentioHighlight:typedTerm:\\'menu-highlighted\\' | unsafe\\\"></span> <em class=\\\"text-muted\\\" \\nng-bind=\\\"person.status | words:5\\\"></em></div></li></ul>\");\n$templateCache.put(\"app/mentio/photo-mentions.html\",\"<ul class=\\\"list-group product-search demo-scrollable-menu\\\"><li mentio-menu-item=\\\"product\\\" ng-repeat=\\\"product in items\\\" \\nclass=\\\"list-group-item clearfix\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-2 text-center\\\"><img ng-src=\\\"{{product.imageUrl}}\\\" \\nclass=\\\"product-photo\\\"></div><div class=\\\"col-xs-10\\\"><h4 class=\\\"list-group-item-heading\\\">{{product.title | words:5}}</h4>\\n<p class=\\\"list-group-item-text\\\">{{product.description | words:7}}</p></div></div></li></ul>\");\n$templateCache.put(\"app/component/ion-language/ion-language.html\",\"<button class=\\\"button button-block button-clear button-{{theme} button-language\\\">{{language.translation | translate}} \\n<i class=\\\"icon ion-chevron-down\\\"></i></button>\");\n$templateCache.put(\"app/component/ion-language/modal-language.html\",\"<ion-modal-view><ion-header-bar><h1 class=\\\"title\\\" translate=\\\"selectLanguageText\\\"></h1><a ng-click=\\\"closeModal()\\\" \\nclass=\\\"button button-icon icon ion-close\\\"></a></ion-header-bar><div \\nclass=\\\"bar bar-subheader item-input-inset bar-stable\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" placeholder=\\\"{{\\'searchText\\' | translate}}\\\" \\nng-model=\\\"searchValue\\\"></label><button type=\\\"button\\\" class=\\\"button button-clear\\\" ng-show=\\\"searchValue.length\\\" \\nng-click=\\\"searchValue=\\'\\'\\\">Clear</button></div><ion-content class=\\\"has-subheader has-header\\\"><ion-list><ion-item \\nclass=\\\"item\\\" ng-click=\\\"selectLanguage(item)\\\" ng-repeat=\\\"item in languages | filter:searchValue\\\" \\nng-bind-html=\\\"item.translation | translate\\\"></ion-item></ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/feedback/feedback-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"feedbackTitle\\\"></div></ion-header-bar><ion-content><formly-form model=\\\"form\\\" form=\\\"rForm\\\" \\nfields=\\\"formFields\\\"></formly-form><div class=\\\"padding\\\"><button class=\\\"button button-block button-positive\\\" \\nng-click=\\\"submitFeedback()\\\"><span translate=\\\"submit\\\"></span></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/account-friend-list/account-friend-list.html\",\"<ion-view><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/main/gallery-comment/gallery-comment.html\",\"<ion-view class=\\\"modal-comment\\\" cache-view=\\\"false\\\"><ion-nav-bar class=\\\"bar bar-{{theme}}\\\"><ion-nav-buttons side=\\\"left\\\">\\n<button class=\\\"button button-icon button-clear ion-ios-arrow-left\\\" ng-click=\\\"$ionicGoBack()\\\"></button>\\n</ion-nav-buttons><ion-nav-title><div class=\\\"title\\\"><span translate=\\\"commentPhotoText\\\"></span>({{ comments.length }})\\n</div></ion-nav-title></ion-nav-bar><ion-content><div class=\\\"padding center\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><ion-list class=\\\"list\\\" ng-if=\\\"!loading\\\" can-swipe=\\\"true\\\"><ion-item \\nng-repeat=\\\"item in comments | orderBy:\\'createdAt\\':false\\\" class=\\\"item item-avatar\\\"><img \\nng-src=\\\"{{ ::item.user.photo._url || \\'./img/user.png\\'}}\\\"><div class=\\\"row\\\"><h2>{{ ::item.user.name }}</h2></div><div \\nclass=\\\"row\\\"><div class=\\\"text\\\">{{ ::item.text }}</div></div><div class=\\\"row\\\"><p>{{ ::item.createdAt | amTimeAgo }}</p>\\n</div><div ng-if=\\\"item.canEdit\\\"><ion-option-button class=\\\"button-info\\\" ng-click=\\\"editComment(item, $index)\\\" \\ntranslate=\\\"edit\\\">Edit</ion-option-button><ion-option-button class=\\\"button-assertive\\\" \\nng-click=\\\"deleteComment(item, $index)\\\" translate=\\\"remove\\\">Remove</ion-option-button></div></ion-item></ion-list><div \\nclass=\\\"center-ico\\\" ng-if=\\\"nocomments\\\"><i class=\\\"icon ion-ios-chatbubble-outline\\\"></i><h1 translate=\\\"noComments\\\"></h1>\\n</div></ion-content><form name=\\\"rForm\\\" ng-submit=\\\"submitComment(rForm, form)\\\" novalidate><ion-footer-bar \\nng-hide=\\\"loading\\\" class=\\\"bar-stable item-input-inset message-footer\\\" keyboard-attach><label class=\\\"item-input-wrapper\\\">\\n<i class=\\\"icon ion-ios-compose-outline placeholder-icon\\\"></i><textarea mentio mentio-trigger-char=\\\"\\'@\\'\\\" \\nmentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" mentio-search=\\\"searchPeople(term)\\\" \\nmentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" ng-model=\\\"form.text\\\" focus-me \\nid=\\\"textComment\\\" placeholder=\\\"Send a comment...\\\" required minlength=\\\"1\\\" maxlength=\\\"1500\\\">\\n                </textarea>\\n</label><div class=\\\"footer-btn-wrap\\\"><button class=\\\"button button-positive button-outline\\\" type=\\\"submit\\\" \\nng-disabled=\\\"!form.text || form.text === \\'\\'\\\">Publish</button></div></ion-footer-bar></form></ion-view>\");\n$templateCache.put(\"app/main/loading/loading.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/main/profile/profile.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-bar class=\\\"bar bar-{{theme}}\\\"><ion-nav-back-button>\\n</ion-nav-back-button></ion-nav-bar><ion-nav-title><span>{{ vm.user.name }}</span></ion-nav-title><ion-content \\nscroll-sista=\\\"header-tabs\\\" class=\\\"animated fadeIn\\\"><ion-refresher pulling-text=\\\"Loading\\\" on-refresh=\\\"onReload()\\\">\\n</ion-refresher><div class=\\\"profile-top\\\"><div class=\\\"row\\\"><div class=\\\"col-25\\\"><img class=\\\"avatar\\\" user-avatar \\nng-model=\\\"vm.user\\\" ng-src=\\\"{{ vm.user.photo._url || \\'img/user.png\\' }}\\\"></div><div class=\\\"col col-statics\\\"><div \\nclass=\\\"row\\\"><div class=\\\"col\\\"><span class=\\\"text-center\\\">{{ vm.user.galleriesTotal || 0}}</span><h3 \\ntranslate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\" ng-click=\\\"vm.openFollowers()\\\"><span class=\\\"text-center\\\">\\n{{ vm.user.followersTotal || 0}}</span><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\" \\nng-click=\\\"vm.openFollowing()\\\"><span class=\\\"text-center\\\">{{ vm.user.followingsTotal || 0}}</span><h3 \\ntranslate=\\\"followingText\\\"></h3></div></div><div class=\\\"row col-edit\\\"><div class=\\\"col center\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"col\\\" ng-if=\\\"vm.isMe && !vm.loading\\\"><button profile-modal-edit \\nuser=\\\"vm.user\\\" class=\\\"button\\\"><div translate=\\\"editProfile\\\"></div></button></div><div class=\\\"col\\\" \\nng-if=\\\"!vm.isMe && !vm.loading\\\"><button \\nng-class=\\\"{\\'button-unfollow\\': vm.user.isFollow, \\'button-follow\\': !vm.user.isFollow}\\\" ng-click=\\\"vm.follow()\\\" \\nclass=\\\"button\\\"><span ng-show=\\\"!vm.user.isFollow\\\" translate>Follow</span> <span ng-show=\\\"vm.user.isFollow\\\" translate>\\nFollowing</span></button></div></div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">{{ vm.user.name }}\\n</span><p class=\\\"user-status\\\">{{ vm.user.status }}</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button\\n class=\\\"button button-icon icon ion-grid\\\" ng-class=\\\"{active: vm.tab.grid}\\\" ng-click=\\\"vm.changeTab(\\'grid\\')\\\"></button> \\n<button class=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: vm.tab.list}\\\" ng-click=\\\"vm.changeTab(\\'list\\')\\\">\\n</button> <button class=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"center padding\\\" \\nng-if=\\\"vm.loading\\\"><ion-spinner></ion-spinner></div><div ng-if=\\\"!vm.loading\\\"><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recentText\\\">Recent</div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.list\\\"><photo-list username=\\\"vm.user.username\\\" \\non-reload=\\\"onReload\\\"></photo-list></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.grid\\\"><photo-grid username=\\\"vm.user.username\\\" \\non-reload=\\\"onReload\\\"></photo-grid></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/share/post-modal.html\",\"<ion-modal-view class=\\\"modal-post\\\"><ion-header-bar class=\\\"bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closePost()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"SHARE.TITLE\\\"></div><button class=\\\"button button-positive\\\" ng-click=\\\"submitPost(form)\\\"><i \\nclass=\\\"icon ion-arrow-right-b\\\"></i></button></ion-header-bar><ion-content><div id=\\\"image\\\"><img ng-src=\\\"{{image}}\\\">\\n</div><ul class=\\\"list\\\"><li class=\\\"item\\\"><textarea ng-model=\\\"form.title\\\" \\nplaceholder=\\\"{{ \\'SHARE.FORM.LEGEND\\' | translate }}\\\"></textarea></li></ul></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/share/share-modal.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-close-empty\\\" ng-click=\\\"close()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"shareGalleryText\\\"></div></ion-header-bar><ion-content><div class=\\\"list\\\"><div \\nclass=\\\"item item-thumbnail-left\\\"><img ng-src=\\\"{{image}}\\\" ng-click=\\\"editFilter()\\\"><textarea mentio \\nmentio-trigger-char=\\\"\\'@\\'\\\" mentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" \\nmentio-search=\\\"searchPeople(term)\\\" mentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" \\ntype=\\\"text\\\" ng-model=\\\"form.title\\\" placeholder=\\\"{{ \\'description\\'|translate }}\\\"></textarea></div></div><div class=\\\"list\\\">\\n<a class=\\\"item item-icon-left\\\" ion-location ng-model=\\\"form.address\\\" ng-if=\\\"!form.address.resume\\\"><i \\nclass=\\\"icon ion-ios-location\\\"></i> <span translate=\\\"addLocale\\\"></span></a><li class=\\\"item item-toggle\\\">\\nCompartilhar no Facebook?<label class=\\\"toggle toggle-assertive\\\"><input type=\\\"checkbox\\\"><div class=\\\"track\\\"><div \\nclass=\\\"handle\\\"></div></div></label></li><a class=\\\"item item-icon-left item-button-right\\\" ng-if=\\\"form.address.resume\\\"><i\\n class=\\\"icon ion-ios-location\\\"></i><h2>{{form.address.name || form.address.resume}}</h2><p>{{form.address.resume}}</p>\\n<button class=\\\"button button-icon\\\" ng-click=\\\"closeAddress()\\\"><i class=\\\"icon ion-ios-close\\\"></i></button></a></div><div \\nclass=\\\"padding\\\"><button class=\\\"button button-block button-positive\\\" type=\\\"button\\\" ng-click=\\\"submit(form)\\\" \\ntranslate=\\\"submit\\\"></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/tab/main-tab.html\",\"<ion-view><ion-nav-bar class=\\\"bar bar-{{theme}}\\\"><ion-nav-back-button></ion-nav-back-button></ion-nav-bar><ion-tabs \\nclass=\\\"tabs-{{theme}} tabs-photogram\\\"><ion-tab title=\\\"{{ \\'PHOTOGRAM.TITLE.HOME\\' | translate }}\\\" icon-on=\\\"ion-ios-home\\\" \\nicon-off=\\\"ion-ios-home-outline\\\" ui-sref=\\\"tab.home\\\"><ion-nav-view name=\\\"tabHome\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SEARCH\\' | translate }}\\\" icon-on=\\\"ion-ios-world\\\" icon-off=\\\"ion-ios-world-outline\\\" \\nui-sref=\\\"tab.search\\\"><ion-nav-view name=\\\"tabSearch\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SHARE\\' | translate }}\\\" icon-on=\\\"ion-ios-camera\\\" icon-off=\\\"ion-ios-camera-outline\\\" \\nng-click=\\\"vm.postPhoto()\\\"><ion-nav-view name=\\\"tabCapture\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.ACTIVITY\\' | translate }}\\\" icon-on=\\\"ion-ios-heart\\\" icon-off=\\\"ion-ios-heart-outline\\\" \\nui-sref=\\\"tab.activity\\\"><ion-nav-view name=\\\"tabActivity\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.PROFILE\\' | translate }}\\\" icon-on=\\\"ion-ios-person\\\" icon-off=\\\"ion-ios-person-outline\\\" \\nui-sref=\\\"tab.account\\\"><ion-nav-view name=\\\"tabProfile\\\"></ion-nav-view></ion-tab></ion-tabs></ion-view>\");\n$templateCache.put(\"app/main/tab-account/account.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-title><span>{{ vm.user.attributes.name }}</span>\\n</ion-nav-title><ion-nav-buttons side=\\\"right\\\"><button settings-modal class=\\\"button button-icon icon ion-gear-a\\\">\\n</button></ion-nav-buttons><ion-content scroll-sista=\\\"header-tabs\\\" class=\\\"animated fadeIn\\\"><div class=\\\"profile-top\\\">\\n<div class=\\\"row\\\"><div class=\\\"col-25\\\"><img class=\\\"avatar\\\" user-avatar ng-model=\\\"currentUser\\\" \\nng-src=\\\"{{ currentUser.photo.url() || \\'img/user.png\\' }}\\\"></div><div class=\\\"col col-statics\\\"><div class=\\\"row\\\"><div \\nclass=\\\"col\\\"><span ng-if=\\\"!vm.loading\\\" class=\\\"text-center\\\">{{ vm.user.attributes.galleriesTotal || 0}}</span>\\n<ion-spinner ng-if=\\\"vm.loading\\\"></ion-spinner><h3 translate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\" \\nng-click=\\\"vm.openFollowers()\\\"><span ng-if=\\\"!vm.loading\\\" class=\\\"text-center\\\">{{ vm.user.attributes.followersTotal || 0}}\\n</span><ion-spinner ng-if=\\\"vm.loading\\\"></ion-spinner><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\" \\nng-click=\\\"vm.openFollowing()\\\"><span ng-if=\\\"!vm.loading\\\" class=\\\"text-center\\\">\\n{{ vm.user.attributes.followingsTotal || 0}}</span><ion-spinner ng-if=\\\"vm.loading\\\"></ion-spinner><h3 \\ntranslate=\\\"followingText\\\"></h3></div></div><div class=\\\"row col-edit\\\"><div class=\\\"col\\\"><button profile-modal-edit \\nuser=\\\"vm.user\\\" class=\\\"button\\\"><div translate=\\\"editProfile\\\"></div></button></div></div></div></div><div class=\\\"padding\\\">\\n<span class=\\\"user-username\\\">{{ vm.user.attributes.name }}</span><p class=\\\"user-status\\\">{{ vm.user.attributes.status }}\\n</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button class=\\\"button button-icon icon ion-grid\\\" \\nng-class=\\\"{active: vm.tab.grid}\\\" ng-click=\\\"vm.changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: vm.tab.list}\\\" ng-click=\\\"vm.changeTab(\\'list\\')\\\"></button> \\n<button class=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recentText\\\">Recent</div><ion-refresher pulling-text=\\\"Loading\\\" on-refresh=\\\"onReload()\\\"></ion-refresher><div \\nclass=\\\"tab\\\" ng-if=\\\"vm.tab.list && !vm.loading\\\"><photo-list username=\\\"vm.user.attributes.username\\\" on-reload=\\\"onReload\\\">\\n</photo-list></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.grid && !vm.loading\\\"><photo-grid username=\\\"currentUser.username\\\" \\non-reload=\\\"onReload\\\"></photo-grid></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-activity/activity.html\",\"<ion-view class=\\\"list-activity\\\"><ion-nav-title><span translate=\\\"activities\\\"></span></ion-nav-title><ion-content \\nscroll-sista=\\\"\\\"><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"vm.showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-positive\\\" ng-click=\\\"vm.onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"vm.showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i>\\n<p>{{ \\\"activityNotFoundText\\\" | translate }}</p></div></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" \\non-refresh=\\\"onReload()\\\"></ion-refresher><div class=\\\"list\\\"><div class=\\\"item item-avatar item-animate1\\\" \\nng-repeat=\\\"item in vm.data | orderBy:\\'createdAt\\':true\\\"><img ng-src=\\\"{{ item.user.photo._url  || \\'./img/user.png\\'}}\\\"><h2\\n ng-click=\\\"vm.openProfile(item.user.username)\\\">{{ item.user.name}}</h2><div class=\\\"text\\\">{{ item.action | translate }}\\n</div><p>{{ item.createdAt | amTimeAgo }}</p><div class=\\\"img-right\\\" ng-if=\\\"item.item.gallery\\\"><img \\nng-src=\\\"{{ item.item.gallery.attributes.imageThumb._url}}\\\"></div><div class=\\\"item-button-right\\\" \\nng-if=\\\"!item.item.gallery\\\"><button class=\\\"button button-positive button-outline icon\\\" \\nng-class=\\\"{\\'ion-ios-person-outline\\': item.user.isFollow, \\'ion-ios-personadd-outline\\': !item.user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"></button></div></div></div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" \\nng-if=\\\"vm.moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-home/home.html\",\"<ion-view class=\\\"view-home\\\"><ion-nav-buttons side=\\\"left\\\"><button \\nclass=\\\"button button-icon icon ion-ios-personadd-outline\\\" ui-sref=\\\"tab.homeUserlist\\\"></button></ion-nav-buttons>\\n<ion-nav-title><span class=\\\"icon2-logo\\\"></span></ion-nav-title><ion-content><ion-refresher pulling-text=\\\"Loading\\\" \\non-refresh=\\\"onReload()\\\"></ion-refresher><photo-list profile=\\\"true\\\" load=\\\"vm.openProfile\\\" open-likers=\\\"vm.openLikers\\\" \\non-reload=\\\"onReload\\\"></photo-list></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-search/search.html\",\"<ion-view><ion-nav-title><span>{{ \\'searchText\\' | translate }}</span></ion-nav-title><ion-nav-buttons side=\\\"right\\\">\\n<button class=\\\"button button-icon ion-ios-location\\\" ui-sref=\\\"tab.map\\\"></button></ion-nav-buttons><ion-header-bar \\nclass=\\\"bar bar-{{theme}} bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"params.search\\\" ng-change=\\\"onSearch()\\\" \\nng-model-options=\\\"{debounce:1000}\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-clear\\\" ng-if=\\\"search.length\\\" ng-click=\\\"clearSearch()\\\">{{ \\\"cancelText\\\" | translate }}</button>\\n</ion-header-bar><ion-content class=\\\"has-subheader\\\"><ion-refresher pulling-text=\\\"Loading\\\" on-refresh=\\\"onReload()\\\">\\n</ion-refresher><div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><div class=\\\"row animated fadeIn\\\" ng-if=\\\"$index % 3 === 0\\\" \\nng-repeat=\\\"image in data | orderBy:\\'createdAt\\':true\\\"><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index < data.length\\\" ui-sref=\\\"tab.searchProfile({username: data[$index].user.username})\\\"><img ng-if=\\\"profile\\\" \\nprofile-modal user=\\\"data[$index].user.obj\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"> <img \\nng-if=\\\"!profile\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 1 < data.length\\\" ui-sref=\\\"tab.searchProfile({username: data[$index].user.username})\\\"><img \\nng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 1].user.obj\\\" ng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" \\nwidth=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" ng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div \\nclass=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index + 2 < data.length\\\" \\nui-sref=\\\"tab.searchProfile({username: data[$index].user.username})\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data[$index + 2].user.obj\\\" ng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"></div></div><ion-infinite-scroll \\non-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll></ion-content>\\n</ion-view>\");\n$templateCache.put(\"app/main/tab-search-map/searchMap.html\",\"<ion-view id=\\\"view-map\\\"><ion-nav-title>{{ \\'mapTitle\\' | translate }}</ion-nav-title><ion-content scroll=\\\"false\\\"><div \\nid=\\\"map_canvas\\\" data-tap-disabled=\\\"true\\\"></div></ion-content><ion-footer-bar><div class=\\\"row\\\" ng-if=\\\"loading\\\"><div \\nclass=\\\"col\\\"><div class=\\\"center\\\"><ion-spinner></ion-spinner></div></div></div><button ng-if=\\\"!loading\\\" \\nclass=\\\"button button-positive button-block button-outline\\\" ng-click=\\\"onSearchHere()\\\">{{ \\'searchInHere\\' | translate }}\\n</button></ion-footer-bar></ion-view>\");\n$templateCache.put(\"app/main/user-avatar/user-avatar.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content class=\\\"padding view-avatar\\\"><div class=\\\"row step1\\\"><div \\nclass=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar ng-model=\\\"vm.user\\\" ng-src=\\\"{{ vm.user._url || \\'img/user.png\\' }}\\\"></div>\\n</div><div class=\\\"step2\\\"><form><label class=\\\"item item-input\\\"><i class=\\\"icon icon-envelope placeholder-icon\\\"></i> \\n<input type=\\\"email\\\" name=\\\"email\\\" ng-model=\\\"vm.form.email\\\" disabled=\\\"disabled\\\"></label></form><formly-form \\nmodel=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"vm.rForm\\\"></formly-form></div><div class=\\\"step3\\\"><button \\nng-click=\\\"vm.submitAvatar()\\\" class=\\\"button button-block button-positive\\\" translate=\\\"submit\\\"></button></div>\\n</ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-followers/user-followers.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"followersText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-following/user-following.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"followingText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-intro/user-intro.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><div class=\\\"bar bar-header\\\"><ion-language>\\n</ion-language></div><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"center\\\"><div class=\\\"step1\\\"><div \\nclass=\\\"logo\\\"><span class=\\\"icon2-logo\\\"></span></div><p>{{\\'userIntroText\\' | translate}}</p><facebook-login>\\n</facebook-login></div></div></ion-content><ion-footer-bar><div class=\\\"row\\\"><div class=\\\"col\\\"><button \\nclass=\\\"button button-block button-light button-outline\\\" translate=\\\"signin\\\" signin-modal></button></div><div \\nclass=\\\"col\\\"><button class=\\\"button button-block button-light button-outline\\\" translate=\\\"register\\\" signup-modal></button>\\n</div></div></ion-footer-bar></ion-view>\");\n$templateCache.put(\"app/main/user-layout/user-layout.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content padding=\\\"false\\\"><ion-nav-view></ion-nav-view></ion-content>\\n</ion-view>\");\n$templateCache.put(\"app/main/user-likers/user-likers.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"likersText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-list/user-list.html\",\"<ion-view id=\\\"user-list\\\" cache-view=\\\"false\\\"><ion-nav-title><span translate=\\\"findPeople\\\"></span></ion-nav-title>\\n<ion-header-bar class=\\\"bar bar-{{theme}} bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div \\nclass=\\\"error\\\"><i class=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button\\n class=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\"><ion-spinner>\\n</ion-spinner></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" on-refresh=\\\"vm.onReload()\\\">\\n</ion-refresher><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.data | filter:searchValue | orderBy:\\'createdAt\\':true\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-disabled=\\\"user.loading\\\" \\nng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" ng-click=\\\"vm.follow(user)\\\"><div \\nng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>Unfollow</div></button> </a><span\\n class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img ng-src=\\\"{{ gallery.imageThumb._url}}\\\" \\nid=\\\"{{ ::gallery.id}}\\\"></span></span></div></div><ion-infinite-scroll on-infinite=\\\"vm.onLoadMore()\\\" \\nng-if=\\\"vm.moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-merge/merge.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><ion-content class=\\\"view-avatar padding\\\"><div \\nclass=\\\"row step1\\\"><div class=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar \\nng-src=\\\"{{ tempUser.attributes.photo._url || \\'./img/user.png\\' }}\\\"></div></div><div class=\\\"step2\\\"><formly-form \\nmodel=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"rForm\\\"><input type=\\\"hidden\\\" ng-model=\\\"vm.form.facebookimg\\\"></formly-form>\\n</div><div class=\\\"padding step3\\\"><button ng-click=\\\"vm.submit(rForm, vm.form)\\\" \\nclass=\\\"button button-block button-facebook\\\"><i class=\\\"icon ion-social-facebook\\\"></i> <span translate=\\\"mergeAccount\\\">\\n</span></button></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/walkthrough/walkthrough.html\",\"<ion-view class=\\\"view-intro bg-animate\\\" can-swipe-back=\\\"false\\\"><ion-content scroll=\\\"false\\\"><div class=\\\"intro-slider\\\">\\n<ion-slide-box active-slide=\\\"slideIndex\\\" show-pager=\\\"true\\\" on-slide-changed=\\\"vm.slideChanged($index)\\\"><ion-slide \\nng-repeat=\\\"item in vm.slides track by $index\\\"><div class=\\\"content\\\" ng-if=\\\"$index == vm.slideIndex\\\"><span class=\\\"top\\\">\\n<h2>{{ item.text | translate }}</h2></span><div class=\\\"phone {{ vm.device }}\\\"><img ng-src=\\\"{{ item.img }}\\\"></div></div>\\n</ion-slide><ion-slide><div class=\\\"content\\\" ng-if=\\\"vm.slides.length == vm.slideIndex\\\"><div class=\\\"last\\\"><div \\nclass=\\\"logo2 step1\\\"><img src=\\\"img/icon.png\\\"> <span class=\\\"icon2-logo\\\"></span></div><button \\nclass=\\\"button button-block button-clear step2\\\" ui-sref=\\\"user.intro\\\" translate=\\\"signin\\\"></button></div></div>\\n</ion-slide></ion-slide-box></div><button class=\\\"button button-positive button-fab left\\\" ng-if=\\\"vm.slideIndex\\\" \\nng-click=\\\"vm.previous()\\\"><i class=\\\"icon ion-ios-arrow-left\\\"></i></button> <button \\nclass=\\\"button button-positive button-fab right\\\" ng-hide=\\\"vm.slideIndex === vm.slides.length\\\" ng-click=\\\"vm.next()\\\"><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></button></ion-content></ion-view>\");\n$templateCache.put(\"app/component/ion-photo/view/filter.modal.html\",\"<ion-modal-view id=\\\"photo-filter\\\"><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModalFilter()\\\"></button><div \\nclass=\\\"title\\\">{{ \\'Filter\\' | translate }}</div><button class=\\\"button button-icon\\\" ng-click=\\\"submitFilter()\\\"><i \\nclass=\\\"icon ion-ios-arrow-thin-right\\\"></i></button></ion-header-bar><ion-content><div class=\\\"box-image\\\"><img \\nid=\\\"image\\\" src=\\\"{{form.photo}}\\\" ng-hide=\\\"loading\\\"><ion-spinner ng-show=\\\"loading\\\"></ion-spinner></div><img id=\\\"image3\\\" \\nsrc=\\\"\\\" style=\\\"display: none\\\"><div ng-show=\\\"showFilter\\\" class=\\\"slider-filters animate1\\\"><ion-scroll direction=\\\"x\\\" \\nclass=\\\"image-filter\\\"><a ng-repeat=\\\"filter in imageFilters\\\" ng-click=\\\"applyFilter(filter)\\\"><p>{{ filter.name }}</p><img \\nid=\\\"{{filter.id}}\\\" class=\\\"img-filter\\\" src=\\\"\\\"></a></ion-scroll><div class=\\\"row\\\"><div class=\\\"col\\\"><button \\nclass=\\\"button button-block bold\\\">Filter</button></div><div class=\\\"col\\\"><button class=\\\"button button-block\\\" \\nng-click=\\\"actionShowFilter(false)\\\">Edit</button></div></div></div><div ng-hide=\\\"showFilter\\\" class=\\\"slider-filters\\\"><div\\n ng-show=\\\"filterEdit\\\" class=\\\"slider-filters\\\"><p class=\\\"text-center\\\">{{filter.name}}</p><div \\nclass=\\\"item range range-positive\\\"><input type=\\\"range\\\" min=\\\"-100\\\" max=\\\"100\\\" ng-model=\\\"filter.slider.value\\\" \\nng-model-options=\\\"{debounce:100}\\\" step=\\\"0.1\\\"></div><div class=\\\"row\\\"><div class=\\\"col\\\"><button \\nclass=\\\"button button-block\\\" ng-click=\\\"cancelFilter(filter)\\\">Cancel</button></div><div class=\\\"col\\\"><button \\nclass=\\\"button button-block bold\\\" ng-click=\\\"doneFilter()\\\">Done</button></div></div></div><div ng-show=\\\"!filterEdit\\\" \\nclass=\\\"slider-filters\\\"><ion-scroll direction=\\\"x\\\"><a ng-repeat=\\\"filter in filters\\\" ng-click=\\\"selectFilter(filter)\\\"><p>\\n{{ filter.name }}</p><i class=\\\"icon {{filter.icon}}\\\"></i> </a><a ng-click=\\\"reset()\\\"><p>Reset</p><i \\nclass=\\\"icon ion-android-refresh\\\"></i></a></ion-scroll><div class=\\\"row\\\"><div class=\\\"col\\\"><button \\nclass=\\\"button button-block\\\" ng-click=\\\"actionShowFilter(true)\\\">Filter</button></div><div class=\\\"col\\\"><button \\nclass=\\\"button button-block bold\\\">Edit</button></div></div></div></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/component/ion-photo/view/modal.share.photo.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar-dark\\\"><div class=\\\"title\\\">{{ ::\\'Share\\' | translate }}\\n</div><button class=\\\"button button-positive\\\" ng-click=\\\"modal.hide()\\\"><i class=\\\"icon ion-arrow-right-b\\\"></i></button>\\n</ion-header-bar><ion-content ng-cloak><div id=\\\"image\\\"><img ng-src=\\\"{{ ::form.photo}}\\\"><div class=\\\"title\\\">\\n{{ ::form.title }}</div></div><ul class=\\\"list\\\"><li class=\\\"padding\\\"><button ng-repeat=\\\"social in sociais\\\" \\nng-click=\\\"share(form, social)\\\" class=\\\"button button-block button-{{ social }}\\\"><i class=\\\"icon ion-social-{{ social }}\\\">\\n</i> {{ ::social | uppercase }}</button></li></ul></ion-content></ion-modal-view>\");}]);\n}());\n"],"sourceRoot":"/source/"}