{"version":3,"sources":["scripts/app.js"],"names":["angular","module","openTermsDirective","restrict","link","scope","elem","attr","openModal","href","window","cordova","ThemeableBrowser","open","statusbar","color","toolbar","height","title","showPageTitle","backButtonCanClose","bind","directive","configLanguage","$translatePartialLoaderProvider","$translateProvider","AppConfig","tmhDynamicLocaleProvider","useLoader","urlTemplate","useSanitizeValueStrategy","useLocalStorage","localeLocationPattern","langvar","navigator","language","userlanguage","userlangvar","split","preferredLocale","searchLang","_","some","locales","code","filter","item","preferredLanguage","moment","locale","$inject","config","configTranslate","addPart","path","constant","configCompile","$compileProvider","debugInfoEnabled","startParse","$location","$rootScope","Parse","initialize","parse","appId","serverURL","server","currentUser","User","current","console","log","runIonic","$ionicPlatform","$localStorage","$translate","$cordovaGlobalization","ConnectMonitor","OneSignal","StatusBar","ready","plugins","Keyboard","disableScroll","registerBackButtonAction","event","preventDefault","lang","use","globalization","getPreferredLanguage","then","init","statusBarColor","onesignal","id","google","watch","configIonic","$ionicConfigProvider","platform","ios","backButton","previousTitleText","icon","android","tabs","position","navBar","alignTitle","views","maxCache","configFacebook","$facebookProvider","setAppId","facebook","setPermissions","runFacebook","LangVar","userLanguage","userLangVar","substring","toUpperCase","d","s","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","run","app","name","url","image","routes","home","login","gaTrackingId","unit","mapType","translation","DAO","tables","columns","username","email","facebookimg","gender","img","qtdFollow","status","createdAt","attributes","user_id","followId","location","isLiked","likes","action","userAvatar","userName","gallery_id","key","value","$stateProvider","$urlRouterProvider","state","templateUrl","controller","controllerAs","abstract","template","Auth","$state","logOut","go","clear","tabHome","tabSearch","tabProfile","tabActivity","otherwise","buyDirective","$cordovaInAppBrowser","buyLink","closeButton","imagePressed","align","distanceModalDirective","$ionicModal","distanceModalLink","$scope","storage","distances","val","text","fromTemplateUrl","modal","show","onDistanceSelected","distance","closeDistanceModal","hide","remove","facebookLoginDirective","Loading","$q","Facebook","Dialog","Toast","facebookLoginLink","facebookLogin","processFacebookLogin","fbAuthData","start","fbData","me","data","findByEmail","user","signInViaFacebook","get","deferred","defer","reject","instant","promise","updateWithFacebookData","error","alert","getCurrentUser","tempUser","end","facebookStatus","resp","userFacebook","heartDirective","heartLink","addClass","ionLoading","loading","runLoading","$ionicLoading","$on","$timeout","showLoading","$broadcast","hideLoading","parseInt","seconds","factory","PhotogramLoadingDirective","photogramFollowDirective","Photogram","modalFollow","getFollow","closeModal","photoGridDirective","Gallery","$ionicPopup","Share","FeedbackModal","$ionicActionSheet","photoGridCtrl","isLoadingViewShown","isGalleriesViewShown","isErrorViewShown","isEmptyViewShown","showGalleries","showErrorView","showEmptyView","ensureMoreData","length","isMoreData","setGalleries","i","push","setCurrentPage","page","params","loadFeed","feed","objectId","unshift","onLoadMore","moreDataCanBeLoaded","showLoadingView","onReload","gallery","actionButtons","index","share","message","confirm","res","destroy","$emit","buttons","buttonDelete","actionSheet","titleText","cancelText","buttonClicked","profile","photoCommentDirective","GalleryComment","GalleryForm","ngModel","getLoggedUser","nocomments","form","galleryObj","openModalComment","formFields","formComment","submitComment","deleteComment","editComment","getComments","focusFirstInput","obj","copy","type","onTap","e","update","comments","galleryId","rForm","$valid","dataForm","create","photoLikeDirective","_model","progress","liked","likeGallery","likesTotal","photoListDirective","photoListController","userId","instante","profileModalEditDirective","UserForm","photo","logout","linkFacebook","facebookLink","submitUpdateProfile","profileModalDirective","profileModalLink","follow","followResp","loadingFollow","modalProfile","changeTab","tab","list","grid","getPublicData","userObj","ionSearchDirective","getData","search","element","attrs","watchSearch","newValue","minLength","str","results","placeholder","input","$apply","source","$watch","settingsModalDirective","languages","sref","$provide","PLURAL_CATEGORY","ZERO","ONE","TWO","FEW","MANY","OTHER","DATETIME_FORMATS","AMPMS","DAY","ERANAMES","ERAS","FIRSTDAYOFWEEK","MONTH","SHORTDAY","SHORTMONTH","STANDALONEMONTH","WEEKENDRANGE","fullDate","longDate","medium","mediumDate","mediumTime","short","shortDate","shortTime","NUMBER_FORMATS","CURRENCY_SYM","DECIMAL_SEP","GROUP_SEP","PATTERNS","gSize","lgSize","maxFrac","minFrac","minInt","negPre","negSuf","posPre","posSuf","pluralCat","n","opt_precision","pt_br","defineLocale","months","monthsShort","weekdays","weekdaysShort","weekdaysMin","longDateFormat","LT","LTS","L","LL","LLL","LLLL","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","this","day","sameElse","relativeTime","future","past","m","mm","h","hh","dd","M","MM","y","yy","ordinalParse","ordinal","GalleryFormFactory","templateOptions","required","iconPlaceholder","focus","label","toggleClass","formShare","UserFormFactory","register","options","valueProp","labelProp","ActionSheetFactory","Camera","$cordovaActionSheet","option","sourceType","getPicture","resolve","buttonLabels","addCancelButtonWithLabel","androidEnableCancelButton","androidTheme","actionsheet","ANDROID_THEMES","THEME_HOLO_LIGHT","btnIndex","cancel","setSessionToken","sessionToken","mSessionToken","ensureLoggedIn","become","recoverPassword","requestPasswordReset","success","resetPassword","logIn","password","CameraFactory","$cordovaCamera","PictureSourceType","CAMERA","PHOTOLIBRARY","quality","targetWidth","targetHeight","saveToPhotoAlbum","correctOrientation","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","fileInput","click","on","evt","tempImage","currentTarget","files","reader","FileReader","onload","target","result","readAsDataURL","toBase64Image","img_path","width","imageResizer","resizeImage","imageDataType","ImageResizer","IMAGE_DATA_TYPE_URL","resizeType","RESIZE_TYPE_FACTOR","format","RESIZE_TYPE_MIN_PIXEL","pixelDensity","storeImage","photoAlbum","service","ConnectMonitorFactory","$cordovaNetwork","ionic","Platform","isWebView","onLine","isOnline","networkState","addEventListener","DAOFactory","$interval","database","_db","undefined","sqlitePlugin","openDatabase","createFromLocation","_promises","forEach","table","query","_query","join","_tables","all","getLastSync","column","lastSync","rows","insert","_columns","_values","bindings","transaction","executeSql","paginate","_table","_where","_join","_order","limit","_limit","_query1","total","TOTAL","fetchAll","output","fetch","DataUtilFactory","parseData","string","parts","Date","parseString","toLocaleDateString","getDate","inicio","year","getFullYear","month","getMonth","slice","formatDate","milliseconds","getMonthName","meses","getFirstDay","getLastDay","DialogFactory","$cordovaDialogs","buttonsText","FacebookFactory","$facebook","$cordovaFacebook","getLoginStatus","api","fields","response","invite","showDialog","method","ui","friends","getTime","FacebookUtils","access_token","expiration_date","set","Boolean","save","ParseCloud","ParseObject","Object","extend","getStatus","isApproved","Query","contains","order","indexOf","ascending","descending","replace","date","startOf","endOf","greaterThanOrEqualTo","toDate","lessThanOrEqualTo","doesNotExist","equalTo","include","skip","find","count","defineProperty","prototype","GeoPoint","latitude","longitude","GalleryFactory","objPlace","lat","lng","expiresAt","GeolocationFactory","getCurrentPosition","maximumAge","timeout","enableHighAccuracy","geolocation","GoogleAnalyticsFactory","$cordovaGoogleAnalytics","trackingId","debugMode","startTrackerWithId","canTrack","warn","TAG","trackEvent","category","trackView","viewName","trackException","description","isFatal","InstallFactory","OneSignalFactory","setLogLevel","logLevel","visualLevel","googleProjectNumber","jsonData","JSON","stringify","enableInAppAlertNotification","ParseCloudFactory","Cloud","upload","file","ext","filename","File","PhotogramShareFactory","$cordovaSocialSharing","social","err","detail","socialsharing","shareViaInstagram","shareViaFacebook","shareViaTwitter","shareViaWhatsApp","shareViaEmail","subject","StatusBarFactory","$cordovaStatusbar","overlaysWebView","isAndroid","luminance","styleHex","hex","lum","String","c","rgb","substr","Math","round","min","max","toString","ToastFactory","$cordovaToast","okType","msg","UserFactory","$cordovaDevice","signIn","cordovaDevice","device","getDevice","getCordova","model","getModel","getPlatform","uuid","getUUID","version","getVersion","first","signUp","roleName","acl","ACL","setPublicReadAccess","setPublicWriteAccess","setACL","authData","expiration","setSeconds","getSeconds","authResponse","expiresIn","toISOString","facebookAuthData","userID","accessToken","userFetched","userData","Promise","setPhoto","parseFile","otherUser","validateUsername","validateEmail","findUsername","delete","ionLanguageDirective","modalLanguageLink","searchValue","selectLanguage","GeoServiceFactory","$http","$window","$cordovaGeolocation","getLocation","posOptions","coords","findMe","pos","getGoogleAddress","logErr","address_normal","formatted_address","address","address_components","imagem","numero","short_name","rua","long_name","bairro","cidade","estado","uf","pais","paisCode","cep","zoom","w","parseAddress","place","resume","geo","geometry","H","addressType","types","componentForm","componentFormName","street","number","city","country","searchAddress","autocompleteService","getQueryPredictions","getDetails","placeId","detailsService","maps","places","AutocompleteService","PlacesService","street_number","route","locality","sublocality","neighborhood","political","administrative_area_level_1","postal_code","ionLocationDirective","GeoService","ionLocationLink","suggestions","selectPlace","place_id","info","district","zipcode","closeModalLocation","choosePlace","modalLocation","fromTemplate","FeedbackModalFactory","GalleryFeedback","GalleryFeedbackForm","submitFeedback","$new","photogramId","GalleryFeedbackFormFactory","feedbackDirective","PhotogramFeedback","PhotogramFeedbackForm","photogram","submit","LoadingController","intro","localStorage","MainTabController","ActionSheet","PhotoFilter","ParseFile","vm","postPhoto","modalPost","editFilter","load","modalFilter","close","base64","imageUploaded","AccountController","galleries","empty","more","getFollower","loadingFollowers","loadingFollowing","loadingPhotos","ActivityController","GalleryActivity","HomeController","SearchCtrl","$filter","onSearch","SearchMapController","$stateParams","Geolocation","setPosition","plugin","LatLng","isMapViewShown","showMap","setMapPosition","map","moveCamera","animateCameraWithBounds","points","latLngBounds","LatLngBounds","setMapZoomToFit","setGallerys","size","addMarker","animation","Animation","DROP","styles","maxWidth","snippet","markerClick","marker","showInfoWindow","infoClick","markers","loadGallerys","trans","placesNotFoundText","errorText","removeGallerys","removeMarkers","maxRating","categoryId","div","Map","getMap","MAP_READY","setMyLocationEnabled","refreshLayout","MapTypeId","ROADMAP","SATELLITE","setMapTypeId","errorMessage","errorGpsDisabledText","errorLocationMissingText","onSearchGallerys","getCameraPosition","camera","onGalleryClicked","closeGallerysModal","getPosition","openGallerysModal","setClickable","off","toState","UserAvatarController","submitAvatar","userAvatarDirective","UserLoginController","submitLogin","routeLogged","UserMergeController","recoveryPassDirective","recovery","erro","button","$viewValue","isUndefined","forgot","UserRecoveryPassController","submitForgot","UserRegisterController","submitRegister","WalkthroughController","$ionicSlideBoxDelegate","currentPlatform","slideIndex","slideChanged","next","previous","slides","top","camanDirective","CamanJs","camanDirectiveLink","effect","ionCropDirective","$jrCrop","ionCropLink","getElem","fileUpload","crop","chooseText","canvas","toDataURL","cropSave","photoShareDirective","PhotogramSetting","PhotoService","photoShareLink","allowEdit","allowRotation","goHome","closeModalPost","submitPost","post","closePost","photoFilterCarouselDirective","apply","filters","applyFilter","photoFilterDirective","CamanJsFactory","Caman","revert","render","resetEffect","reset","PhotoFilterFactory","submitCapture","dataUrl","PhotoServiceFactory","$cordovaCapture","capture","cropModal","filterModal","buttonCancel","jrCrop","setting","aspectRatio","popoverOptions","CameraPopoverOptions","shareModal","shareSocial","PhotogramShare","socials","sociais","openFilter","closeFilter","submitFilter","templateFilter","cropImage","getVideo","captureVideo","duration","mediaFiles","fullPath","VideoFactory","createFileEntry","fileURI","resolveLocalFileSystemURL","entry","copyFile","fail","fileEntry","lastIndexOf","newName","makeid","dataDirectory","fileSystem2","copyTo","succ","onCopySuccess","nativeURL","PKVideoThumbnail","createThumbnail","prevSucc","prevImageSuccess","correctUrl","possible","charAt","floor","random","saveVideo","localURL","$templateCache","put"],"mappings":"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","file":"scripts/app-f0272a33ab.js","sourcesContent":["(function () {\n    'use strict';\n    angular\n        .module('starter', [\n            'ionic',\n            'formlyIonic',\n            'ngCookies',\n            'ngStorage',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale', // angular-dynamic-locale\n            'angularMoment',\n            'ngFacebook',\n            'uiGmapgoogle-maps',\n            'angular-cache',\n            'ngCordova',\n            'ionic.components',\n            'app.main',\n        ]);\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('ionic.components', [\n            'ion-language',\n            // 'ion-affix',\n            // 'ngCache',\n            'ion-photo'\n        ]);\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('href', openTermsDirective);\n\n    function openTermsDirective() {\n        return {\n            restrict: 'A',\n            link    : function (scope, elem, attr) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var href = attr.href;\n\n                    if (window.cordova) {\n                        // Keep in mind that you must add your own images to native resource.\n                        // Images below are for sample only. They are not imported by this plugin.\n                        window.cordova.ThemeableBrowser.open(href, '_blank', {\n                            statusbar         : {\n                                color: '#ffffffff'\n                            },\n                            toolbar           : {\n                                height: 44,\n                                color : '#f0f0f0ff'\n                            },\n                            title             : {\n                                color        : '#000',\n                                showPageTitle: true\n                            },\n                            backButtonCanClose: true\n                        })\n                        ;\n                    } else {\n                        window.open(href);\n                    }\n\n                    return false;\n                }\n            }\n        };\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('app.main', [\n      'ionic',\n      'ngCordova'\n    ]);\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('app.user', ['ionic']);\n\n})();\n\n(function () {\n    'use strict';\n\n    var path = 'app/component/ion-language';\n\n    angular\n        .module('ion-language', [\n            'ngCookies',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale' // angular-dynamic-locale\n        ])\n        .config(configLanguage);\n\n\n\n    function configLanguage($translatePartialLoaderProvider, $translateProvider, AppConfig, tmhDynamicLocaleProvider) {\n\n        // angular-translate configuration\n        $translateProvider.useLoader('$translatePartialLoader', {\n            urlTemplate: '{part}/i18n/{lang}.json'\n        });\n        $translateProvider.useSanitizeValueStrategy(null);\n\n        // Translate Config\n        //$translateProvider.useMissingTranslationHandlerLog();\n        $translateProvider.useLocalStorage(); // saves selected language to localStorage\n        tmhDynamicLocaleProvider.localeLocationPattern('../bower_components/angular-i18n/angular-locale_{{locale}}.js');\n\n        var langvar     = navigator.language || navigator.userlanguage;\n        var userlangvar = langvar.split('-')[0];\n        var language    = AppConfig.preferredLocale;\n        var searchLang  = _.some(AppConfig.locales, {\n            code: userlangvar\n        });\n\n        if (searchLang) {\n            language = AppConfig.locales.filter(function  (item) {\n                return language == item.code\n            })[0].code;\n        }\n        $translateProvider.preferredLanguage(language);\n        moment.locale(language);\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('ion-location', [\n      'ionic'\n    ]);\n\n})();\n(function () {\n  'use strict';\n  angular\n    .module('ion-photo', [\n      'ionic',\n      'ngCordova',\n      'jrCrop'\n    ])\n    .constant('config', {\n      path: 'app/component/ion-photo'\n    })\n    .config(configTranslate);\n\n  function configTranslate($translatePartialLoaderProvider, config) {\n    $translatePartialLoaderProvider.addPart(config.path);\n  }\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.main');\n\n})();\n\n(function () {\n    'use strict';\n\n    var cordova = window.cordova;\n    angular\n        .module('starter')\n        .run(startParse)\n        .run(runIonic)\n        .run(runFacebook)\n        .config(configCompile)\n        .config(configFacebook)\n        .config(configIonic);\n\n\n    function configCompile($compileProvider) {\n        $compileProvider.debugInfoEnabled(false);\n    }\n\n\n    function startParse(AppConfig, $location, $rootScope) {\n        Parse.initialize(AppConfig.parse.appId);\n        Parse.serverURL        = AppConfig.parse.server;\n        $rootScope.currentUser = Parse.User.current();\n\n        console.log($rootScope.currentUser);\n        if (!$rootScope.currentUser) {\n            $location.path('/');\n        }\n    }\n\n    function runIonic($ionicPlatform, $localStorage, $translate, $cordovaGlobalization, ConnectMonitor, OneSignal, AppConfig, StatusBar, User) {\n        //User.init();\n\n        $ionicPlatform.ready(function () {\n\n            if (window.cordova && window.cordova.plugins.Keyboard) {\n                cordova.plugins.Keyboard.disableScroll(true);\n            }\n\n\n            // Remove back button android\n            $ionicPlatform.registerBackButtonAction(function (event) {\n                event.preventDefault();\n            }, 100);\n\n            if ($localStorage.lang) {\n                $translate.use($localStorage.lang);\n            } else {\n                if (typeof navigator.globalization !== 'undefined') {\n                    $cordovaGlobalization.getPreferredLanguage().then(function (language) {\n                        $translate.use((language.value).split('-')[0]);\n                    }, null);\n                }\n            }\n\n\n            StatusBar.init(AppConfig.statusBarColor);\n            OneSignal.init(AppConfig.onesignal.id, AppConfig.onesignal.google);\n            ConnectMonitor.watch();\n        });\n\n\n    }\n\n    function configIonic($ionicConfigProvider) {\n        $ionicConfigProvider.platform.ios.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n        $ionicConfigProvider.platform.android.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n        //$ionicConfigProvider.views.swipeBackEnabled (true);\n        //$ionicConfigProvider.backButton.text(' ').icon('ion-ios-arrow-left');\n        //$ionicConfigProvider.backButton.previousTitleText (false).text ('Voltar').icon ('ion-ios-arrow-left');\n        //$ionicConfigProvider.views.transition ('platform');\n        $ionicConfigProvider.tabs.position('bottom');\n        $ionicConfigProvider.navBar.alignTitle('center');\n        $ionicConfigProvider.views.maxCache(1);\n    }\n\n    // Facebook\n    function configFacebook($facebookProvider, AppConfig) {\n        if (!window.cordova) {\n            $facebookProvider.setAppId(AppConfig.facebook);\n            $facebookProvider.setPermissions('id,name,email,user_likes,bio');\n        }\n    }\n\n    function runFacebook() {\n        if (!window.cordova) {\n            var LangVar     = window.navigator.language || window.navigator.userLanguage;\n            var userLangVar = LangVar.substring(0, 2) + '_' + LangVar.substring(3, 5).toUpperCase();\n\n            // Load the SDK asynchronously\n            (function (d, s, id) {\n                var js, fjs = d.getElementsByTagName(s)[0];\n                if (d.getElementById(id)) return;\n                js     = d.createElement(s);\n                js.id  = id;\n                js.src = 'http://connect.facebook.net/' + userLangVar + '/sdk.js';\n                fjs.parentNode.insertBefore(js, fjs);\n            }(document, 'script', 'facebook-jssdk'));\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('ionic')\n    .constant('AppConfig', AppConfig());\n\n  function AppConfig() {\n    return {\n      path: 'app/module/photogram',\n      app: {\n        name: 'Photogram',\n        url: 'http://photogramapp.com',\n        image: 'http://photogramapp.com/social-share.jpg',\n      },\n      routes: {\n        home: 'tab.home',\n        login: 'user.login'\n      },\n      statusBarColor: '#00796B',\n      gaTrackingId: 'UA-69485876-2',\n      unit: 'mi',\n      mapType: 'normal',\n      facebook: '1024016557617380',\n      parse: {\n        appId: 'myAppId',\n        server: 'http://localhost:1337/parse/',\n        //server: 'https://photogramapp.com/parse/'\n      },\n      onesignal: {\n        id: 'd13d00d0-013f-406f-9811-66ce0737d7bc',\n        google: 'AIzaSyCEBeAMSs4nrAC-2cvG6N6Q_KqJpnUrnh0'\n      },\n      locales: [\n        {\n          translation: 'LANG.PORTUGUES',\n          code: 'pt'\n        },\n        {\n          translation: 'LANG.ENGLISH',\n          code: 'en'\n        },\n        {\n          translation: 'LANG.TURKISH',\n          code: 'tr'\n        },\n        {\n          translation: 'LANG.PERSIAN',\n          code: 'fa'\n        },\n        {\n          translation: 'LANG.GERMAN',\n          code: 'de'\n        }\n      ],\n      preferredLocale: 'en',\n      DAO: {\n        name: 'photogram_db',\n        tables: [\n          {\n            name: 'User',\n            columns: {\n              id: 'TEXT PRIMARY KEY',\n              name: 'TEXT',\n              username: 'TEXT',\n              email: 'TEXT',\n              language: 'TEXT',\n              facebookimg: 'TEXT',\n              gender: 'TEXT',\n              img: 'TEXT',\n              facebook: 'INTEGER',\n              qtdFollow: 'INTEGER',\n              status: 'TEXT',\n              createdAt: 'INTEGER',\n              attributes: 'TEXT'\n            }\n          },\n          {\n            name: 'UserFollow',\n            columns: {\n              id: 'TEXT PRIMARY KEY',\n              user_id: 'TEXT',\n              followId: 'TEXT'\n            },\n          },\n          {\n            name: 'Gallery',\n            columns: {\n              id: 'TEXT PRIMARY KEY',\n              img: 'TEXT',\n              title: 'TEXT',\n              user_id: 'TEXT',\n              location: 'TEXT',\n              isLiked: 'BOOLEAN',\n              likes: 'INTEGER',\n              createdAt: 'INTEGER'\n            }\n          },\n          {\n            name: 'GalleryActivity',\n            columns: {\n              id: 'TEXT PRIMARY KEY',\n              action: 'TEXT',\n              img: 'TEXT',\n              userAvatar: 'TEXT',\n              userName: 'TEXT',\n              user_id: 'TEXT',\n              gallery_id: 'TEXT',\n              createdAt: 'INTEGER'\n            }\n          },\n          {\n            name: 'GalleryComment',\n            columns: {\n              id: 'TEXT PRIMARY KEY',\n              name: 'TEXT',\n              user_id: 'TEXT',\n              userName: 'TEXT',\n              gallery_id: 'TEXT',\n              createdAt: 'INTEGER'\n            }\n          },\n          {\n            name: 'GallerySetting',\n            columns: {\n              key: 'TEXT',\n              value: 'TEXT'\n            }\n          }\n        ]\n      }\n    };\n  }\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').config(routes);\n\n    function routes($stateProvider, $urlRouterProvider, $translatePartialLoaderProvider) {\n\n        // Translation\n        $translatePartialLoaderProvider.addPart('app/');\n\n        $stateProvider\n\n            .state('loading', {\n                url         : '/',\n                templateUrl : 'app/main/loading/loading.html',\n                controller  : 'LoadingCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('walkthrough', {\n                url         : '/walkthrough',\n                templateUrl : 'app/main/walkthrough/walkthrough.html',\n                controller  : 'WalkthroughCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('user', {\n                url        : '/user',\n                abstract   : true,\n                templateUrl: 'app/main/user-layout/user-layout.html'\n            })\n\n            .state('user.avatar', {\n                url         : '/avatar',\n                templateUrl : 'app/main/user-avatar/user-avatar.html',\n                controller  : 'UserAvatarCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('user.register', {\n                url         : '/register',\n                templateUrl : 'app/main/user-register/user-register.html',\n                controller  : 'UserRegisterCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('user.login', {\n                url         : '/login',\n                templateUrl : 'app/main/user-login/user-login.html',\n                controller  : 'UserLoginCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('user.merge', {\n                url         : '/merge',\n                controller  : 'UserMergeCtrl',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/user-merge/merge.html'\n            })\n\n            .state('logout', {\n                url         : '/logout',\n                template    : '<ion-view view-title=\"Logout\" cache-view=\"false\"><ion-content></ion-content></ion-view>',\n                controller  : function (Auth, $state) {\n                    Auth.logOut();\n                    $state.go('user.login', {clear: true});\n                },\n                controllerAs: 'vm'\n            })\n\n            .state('tab', {\n                url         : '/tab',\n                abstract    : true,\n                controller  : 'MainTabCtrl',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/tab/main-tab.html'\n            })\n\n            .state('tab.home', {\n                url  : '/home',\n                views: {\n                    tabHome: {\n                        controller  : 'HomeCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-home/home.html'\n                    }\n                }\n            })\n\n            .state('tab.search', {\n                url  : '/search',\n                views: {\n                    tabSearch: {\n                        controller  : 'SearchCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-search/search.html',\n                    }\n                }\n            })\n\n            .state('tab.map', {\n                url  : '/map',\n                views: {\n                    tabSearch: {\n                        controller  : 'SearchMapCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-search-map/searchMap.html',\n                    }\n                }\n            })\n\n            .state('tab.account', {\n                url  : '/account',\n                views: {\n                    tabProfile: {\n                        controller  : 'AccountCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-account/account.html'\n                    }\n                }\n            })\n\n            .state('tab.activity', {\n                url  : '/activity',\n                views: {\n                    tabActivity: {\n                        controller  : 'ActivityCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-activity/activity.html'\n                    }\n                }\n            })\n\n        ;\n\n        // Translation\n        //$translatePartialLoaderProvider.addPart('app/main');\n        $urlRouterProvider.otherwise('/');\n\n    }\n\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .directive('buy', buyDirective);\n\n    function buyDirective($cordovaInAppBrowser) {\n        return {\n            restrict: 'A',\n            link: buyLink\n        };\n\n        function buyLink(scope, elem) {\n            elem.bind('click', function () {\n                var url     = 'https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S';\n\n                if(window.cordova ) {\n                    cordova\n                        .ThemeableBrowser\n                        .open(url, '_blank', {\n                            statusbar: {\n                                color: '#ffffffff'\n                            },\n                            toolbar: {\n                                height: 44,\n                                color: '#f0f0f0ff'\n                            },\n                            title: {\n                                color: '#333333',\n                                showPageTitle: true\n                            },\n                            closeButton: {\n                                image: 'close',\n                                imagePressed: 'close_pressed',\n                                align: 'left',\n                                event: 'closePressed'\n                            },\n                            backButtonCanClose: true\n                        });\n                } else {\n                    window.open(url,'_blank');\n                }\n            });\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('distanceModal', distanceModalDirective);\n\n    function distanceModalDirective($localStorage, $ionicModal) {\n        return {\n            restrict: 'A',\n            link    : distanceModalLink\n        };\n\n        function distanceModalLink($scope, elem, attr) {\n\n            elem.bind('click', function () {\n                    $scope.storage   = $localStorage;\n                    $scope.distances = [\n                        {\n                            val : 0.20,\n                            text: 'perto'\n                        },\n                        {\n                            val : 0.60,\n                            text: 'longe'\n                        },\n                        {\n                            val : 1.00,\n                            text: '1 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 5.00,\n                            text: '5 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 10.00,\n                            text: '10 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 25.00,\n                            text: '25 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 50.00,\n                            text: '50 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 100.00,\n                            text: '100 ' + $scope.storage.unit\n                        },\n                    ];\n\n                    $ionicModal.fromTemplateUrl('app/directive/distanceModal.html', {\n                        scope: $scope\n                    }).then(function (modal) {\n                        $scope.modal = modal;\n                        $scope.modal.show();\n\n                    });\n\n                    $scope.onDistanceSelected = function (distance) {\n                        console.log('Distance', distance);\n                    };\n\n                    $scope.closeDistanceModal = function () {\n                        $scope.modal.hide();\n                        $scope.modal.remove();\n                    };\n\n\n                }\n            );\n        }\n    }\n\n})\n();\n(function () {\n    'use strict';\n\n    angular\n        .module('starter')\n        .directive('facebookLogin', facebookLoginDirective);\n\n    function facebookLoginDirective(Loading, $state, $q, $translate, Facebook, Dialog, User, $rootScope, AppConfig, Toast) {\n        return {\n            restrict: 'E',\n            link    : facebookLoginLink,\n            template: '<button class=\"button button-block button-facebook\"><i class=\"icon ion-social-facebook\"></i> <span>{{ \\'loginWith\\'| translate}} {{name || \\'Facebook\\'}}</span> </button>',\n        };\n\n        function facebookLoginLink(scope, elem, attr) {\n\n            scope.facebookStatus = null;\n            Facebook.getCurrentUser().then(function (resp) {\n                console.log(resp);\n                scope.facebookStatus = resp;\n                return resp;\n            }).then(function (facebookStatus) {\n                if (facebookStatus.status === 'connected') {\n                    Facebook.me().then(function (userFacebook) {\n                        scope.name = userFacebook.name;\n                    });\n                }\n            }).catch(function () {\n                console.log('Not logged');\n            });\n\n            elem.bind('click', facebookLogin);\n\n            function facebookLogin() {\n                Loading.start();\n\n                Facebook.getCurrentUser().then(function (fbAuthData) {\n                    console.log(fbAuthData);\n\n                    if (fbAuthData.status === 'connected') {\n                        var fbData = null;\n                        return Facebook.me().then(function (data) {\n                            fbData = data;\n                            return User.findByEmail(data.email);\n                        }).then(function (user) {\n\n                            if (!user.id) {\n                                return User.signInViaFacebook(fbAuthData);\n                            } else if (user.get('authData')) {\n                                if (user.get('authData').facebook.id === fbData.id) {\n                                    return User.signInViaFacebook(fbAuthData);\n                                }\n                            } else {\n                                console.log(user);\n                                console.log(user.attributes);\n                                // merge\n                                $rootScope.tempUser = user;\n                                $state.go('user.merge', {\n                                    clear: true\n                                });\n                                Loading.end();\n                                //var deferred = $q.defer();\n                                //deferred.reject($translate.instant('emailFacebookTakenText'));\n                                //return deferred.promise;\n                            }\n                        });\n                        //           .then(function () {\n                        //               return User.updateWithFacebookData(fbData);\n                        //           }).then(function (user) {\n                        //    Toast.show($translate.instant('loggedInAsText') + ' ' + user.get('email'));\n                        //}, function (error) {\n                        //    Dialog.alert(error);\n                        //});\n\n                    }\n\n                    switch (fbAuthData.status) {\n                        case 'connected':\n                            // logado\n                            processFacebookLogin();\n                            //Loading.end();\n                            //$state.go(AppConfig.routes.home, {\n                            //    clear: true\n                            //});\n                            break;\n                        case 1:\n                            // novo user\n                            $state.go('user.avatar', {\n                                clear: true\n                            });\n                            break;\n                        case 2:\n                            // merge\n                            $state.go('user.merge', {\n                                clear: true\n                            });\n                            break;\n                    }\n                }).catch(function () {\n                    Loading.end();\n                });\n\n                function processFacebookLogin(fbAuthData) {\n\n                    Loading.start();\n\n                    var fbData = null;\n\n                    return Facebook.me().then(function (data) {\n                        fbData = data;\n                        return User.findByEmail(data.email);\n                    }).then(function (user) {\n                        if (!user.id) {\n                            return User.signInViaFacebook(fbAuthData);\n                        } else if (user.get('authData')) {\n                            if (user.get('authData').facebook.id === fbData.id) {\n                                return User.signInViaFacebook(fbAuthData);\n                            }\n                        } else {\n                            var deferred = $q.defer();\n                            deferred.reject($translate.instant('emailFacebookTakenText'));\n                            return deferred.promise;\n                        }\n                    }).then(function () {\n                        return User.updateWithFacebookData(fbData);\n                    }).then(function (user) {\n                        Toast.show($translate.instant('loggedInAsText') + ' ' + user.get('email'));\n                    }, function (error) {\n                        Dialog.alert(error);\n                    });\n                }\n\n            }\n\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n angular\n    .module('starter')\n    .directive('heart', heartDirective);\n\n  function heartDirective() {\n    return {\n      restrict: 'A',\n      scope: {\n        item: '='\n      },\n      link: heartLink\n    };\n\n    function heartLink(scope, elem, attr) {\n      elem.bind('click', function () {\n        console.log(scope.item);\n        elem.addClass('happy');\n      });\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter')\n           .directive('ionLoading', ionLoading)\n           .run(runLoading)\n           .factory('Loading', Loading);\n\n    function ionLoading() {\n        return {\n            restrict: 'E',\n            scope   : {\n                icon   : '@',\n                loading: '='\n            },\n            template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n        };\n    }\n\n    function runLoading($rootScope, $ionicLoading) {\n        //Loading\n        $rootScope.$on('ionicLoading:true', function (text) {\n            $rootScope.loading = true;\n            $ionicLoading.show(text);\n        });\n        $rootScope.$on('ionicLoading:false', function () {\n            $rootScope.loading = false;\n            $ionicLoading.hide();\n        });\n    }\n\n    function Loading($rootScope, $timeout) {\n        var seconds = 0;\n\n        return {\n            start: showLoading,\n            end: hideLoading,\n        };\n\n\n        function showLoading(text) {\n            $rootScope.$broadcast('ionicLoading:true', text);\n        }\n\n        function hideLoading() {\n            $timeout(function () {\n                $rootScope.$broadcast('ionicLoading:false');\n            }, parseInt(seconds + '000'));\n        }\n    }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .directive('loading', PhotogramLoadingDirective);\n\n  function PhotogramLoadingDirective() {\n    return {\n      restrict: 'E',\n      scope   : {\n        loading: '=',\n        icon   : '@'\n      },\n      template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n    };\n  }\n\n})();\n\n(function () {\n  'use strict';\n  \n  angular\n    .module('starter')\n    .directive('photogramFollow', photogramFollowDirective);\n\n  function photogramFollowDirective($ionicModal, AppConfig, Photogram) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        user: '='\n      },\n      link: function (scope, elem, attr) {\n        elem.bind('click', openModal);\n        scope.closeModal = closeModal;\n\n        function openModal() {\n          $ionicModal.fromTemplateUrl(path + '/directive/follow/photogram.follow.modal.html', {\n            scope: scope\n          }).then(function (modal) {\n            scope.modalFollow = modal;\n            console.log('Open modal follow', scope.user);\n\n            Photogram\n              .getFollow(scope.user)\n              .then(function (resp) {\n                console.log(resp);\n                scope.data = resp;\n                scope.modalFollow.show();\n              });\n\n          });\n        }\n\n        function closeModal() {\n          scope.modalFollow.hide();\n          scope.modalFollow.remove();\n        }\n      }\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoGrid', photoGridDirective);\n\n    function photoGridDirective(Gallery, $rootScope, $ionicPopup, Share, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                user   : '=',\n                profile: '='\n            },\n            templateUrl: 'app/directive/photoGridDirective.html',\n            link       : photoGridCtrl\n        };\n\n        function photoGridCtrl($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 1;\n            $scope.data        = [];\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n\n            var isMoreData = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n\n                Gallery.feed($scope.params).then(function (data) {\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                    $scope.$broadcast('scroll.refreshComplete');\n\n                }).catch(function () {\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $scope.action = function (gallery) {\n\n                var buttons = [{\n                    text: '<i class=\"icon ion-share\"></i>' + ('Share')\n                }, {\n                    text: '<i class=\"icon ion-alert-circled\"></i>' + ('Report')\n                }];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user_id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + ('Delete your photo')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    titleText    : ('Photo'),\n                    cancelText   : ('Cancel'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            Share.share(message);\n                            break;\n                        case 1:\n                            FeedbackModal.modal(gallery);\n                            break;\n                        case 2:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : ('Delete photo'),\n                                    template: ('Are you sure?')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery).then(function () {\n                                            console.log('Photo deleted');\n                                            $scope.$emit('PhotogramHome:reload');\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoComment', photoCommentDirective);\n\n    function photoCommentDirective($ionicModal, Loading, $ionicPopup, Auth, Dialog, Gallery, GalleryComment, GalleryForm) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function (scope, elem) {\n\n\n                elem.bind('click', openModalComment);\n\n                function init() {\n                    scope.currentUser = Auth.getLoggedUser();\n                    scope.nocomments  = false;\n                    scope.loading     = false;\n                    scope.form        = {\n                        gallery: scope.ngModel.galleryObj,\n                        text   : ''\n                    };\n                }\n\n                function openModalComment() {\n                    console.log(scope.ngModel);\n\n                    init();\n\n                    scope.formFields    = GalleryForm.formComment;\n                    scope.submitComment = submitComment;\n                    scope.deleteComment = deleteComment;\n                    scope.editComment   = editComment;\n                    scope.closeModal    = function () {\n                        scope.modal.hide();\n                        scope.modal.remove();\n                    };\n\n                    getComments();\n\n\n                    //scope.comments = scope.ngModel.comments || [];\n                    //$timeout(function () {\n                    //    if (scope.comments.length === 0) {\n                    //        scope.nocomments = true;\n                    //    }\n                    //}, 500);\n\n\n                    $ionicModal.fromTemplateUrl('app/directive/photoCommentDirective.html', {\n                        scope          : scope,\n                        focusFirstInput: true\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n\n                    });\n                }\n\n                function deleteComment(obj) {\n                    console.log(obj);\n                    Dialog.confirm(('Delete comment'), ('You are sure?')).then(function (resp) {\n                        console.log(resp);\n                        if (resp) {\n                            GalleryComment.destroy(obj)\n                                          .then(function (resp) {\n                                              console.log(resp);\n                                              getComments();\n                                          });\n                        }\n                    });\n                }\n\n                function editComment(obj) {\n                    console.log(obj);\n                    // An elaborate, custom popup\n                    scope.data = angular.copy(obj);\n                    $ionicPopup\n                        .show({\n                            template: '<input type=\"text\" ng-model=\"data.text\">',\n                            title   : ('Edit comment'),\n                            //subTitle: 'Please use normal things',\n                            scope   : scope,\n                            buttons : [{\n                                text: ('Cancel')\n                            }, {\n                                text : '<b>OK</b>',\n                                type : 'button-positive',\n                                onTap: function (e) {\n                                    console.log(scope.data);\n                                    if (!scope.data.text) {\n                                        //don't allow the user to close unless he enters wifi password\n                                        e.preventDefault();\n                                    } else {\n                                        return scope.data;\n                                    }\n                                }\n                            }]\n                        })\n                        .then(function (resp) {\n                            console.log(resp);\n                            if (resp) {\n                                GalleryComment.update(resp)\n                                              .then(function (resp) {\n                                                  console.log(resp);\n                                                  getComments();\n                                              });\n                            }\n                        });\n                }\n\n                function getComments() {\n                    scope.loading = true;\n\n\n                    Gallery.comments({galleryId: scope.ngModel.id}).then(function (resp) {\n                        scope.comments         = resp;\n                        scope.ngModel.comments = resp;\n                        scope.loading          = false;\n                    });\n                }\n\n                function submitComment(rForm, form) {\n                    if (rForm.$valid) {\n                        var dataForm = angular.copy(form);\n                        console.log(dataForm);\n                        Loading.start();\n                        GalleryComment.create(dataForm).then(function (resp) {\n                            console.log(resp);\n                            getComments();\n                            Loading.end();\n                            scope.closeModal();\n                        });\n                    }\n                }\n\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('photoLike', photoLikeDirective);\n\n    function photoLikeDirective(Gallery) {\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function (scope, elem) {\n                elem.bind('click', function () {\n                        var _model      = scope.ngModel;\n                        _model.progress = true;\n                        _model.liked    = !_model.liked;\n\n                        Gallery.likeGallery({galleryId: scope.ngModel.galleryObj.id}).then(function (resp) {\n                            console.log(resp);\n                            _model.likes    = resp.likes;\n                            _model.progress = false;\n                            console.log(_model, resp);\n                            if (resp.action === 'like') {\n                                scope.ngModel.isLiked = true;\n                                scope.ngModel.likesTotal += 1;\n                            }\n\n                            if (resp.action === 'unlike') {\n                                scope.ngModel.isLiked = false;\n                                scope.ngModel.likesTotal -= 1;\n                            }\n                        });\n                    }\n                );\n\n            }\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoList', photoListDirective);\n\n    function photoListDirective(Gallery, $rootScope, $ionicPopup, $translate, Share, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                user   : '=',\n                profile: '='\n            },\n            templateUrl: 'app/directive/photoListDirective.html',\n            link       : photoListController\n        };\n\n        function photoListController($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 0;\n            $scope.data        = [];\n\n            if ($scope.user) {\n                $scope.params.userId = $scope.user;\n            }\n\n            console.log($scope.params);\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n\n            var isMoreData = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n\n                Gallery.feed($scope.params).then(function (data) {\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                    $scope.$broadcast('scroll.refreshComplete');\n\n                }).catch(function () {\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $scope.action = function (gallery) {\n\n                var buttons = [{\n                    text: '<i class=\"icon ion-alert-circled\"></i>' + $translate.instant('reportText')\n                }];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user_id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + $translate.instant('deleteGalleryConfirmText')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    cancelText   : $translate.instant('cancelText'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            Share.share(message);\n                            break;\n                        case 1:\n                            FeedbackModal.modal(gallery);\n                            break;\n                        case 2:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : $translate.instant('deleteGalleryConfirmText'),\n                                    template: $translate.instante('areSure')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery).then(function () {\n                                            console.log('Photo deleted');\n                                            $scope.$emit('PhotogramHome:reload');\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('profileModalEdit', profileModalEditDirective);\n\n    function profileModalEditDirective($ionicModal, User, Loading, UserForm, $state) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                user: '='\n            },\n            template: '',\n            link    : function (scope, elem) {\n\n                scope.linkFacebook        = linkFacebook;\n                scope.logout              = logout;\n                scope.submitUpdateProfile = submitUpdateProfile;\n                scope.closeModal          = closeModal;\n\n                elem.bind('click', openModal);\n                function init() {\n                    var user   = Parse.User.current().attributes;\n                    scope.form = {\n                        name    : user.name,\n                        email   : user.email,\n                        status  : user.status,\n                        photo   : user.photo,\n                        username: user.username,\n                        gender  : user.gender,\n                        facebook: user.facebook\n                    };\n                    console.log(scope.form);\n                    scope.formFields = UserForm.profile;\n                }\n\n\n                function openModal() {\n\n                    init();\n                    $ionicModal.fromTemplateUrl('app/directive/profile-edit-modal.html', {\n                        scope: scope\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n                    });\n\n                    // Cleanup the modal when we're done with it!\n                    scope.$on('$destroy', function () {\n                        scope.modal.remove();\n                    });\n\n                }\n\n                function logout() {\n                    $state.go('logout');\n                    scope.closeModal();\n                }\n\n                function linkFacebook() {\n                    User.facebookLink().then(function (resp) {\n                        console.log(resp);\n                    });\n                }\n\n                function submitUpdateProfile() {\n                    var dataForm = angular.copy(scope.form);\n                    Loading.start();\n                    User.update(dataForm).then(function (resp) {\n                        console.log(resp);\n                        scope.user = resp;\n                        Loading.end();\n                        scope.closeModal();\n                    });\n                }\n\n                function closeModal() {\n                    scope.modal.hide();\n                }\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('profileModal', profileModalDirective);\n\n    function profileModalDirective($ionicModal, User) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                userObj: '=user'\n            },\n            link    : profileModalLink\n        };\n\n        function profileModalLink(scope, elem) {\n            elem.bind('click', function () {\n\n                User.getPublicData(scope.userObj).then(function (data) {\n                    console.log(data);\n                    scope.user = data;\n                    openModal();\n                });\n\n            });\n\n            function openModal() {\n\n                console.log(scope.user.attributes);\n\n                $ionicModal\n                    .fromTemplateUrl('app/directive/profile-modal.html', {\n                        scope: scope\n                    })\n                    .then(function (modal) {\n                        scope.modalProfile  = modal;\n                        scope.loadingFollow = true;\n                        scope.changeTab     = changeTab;\n                        scope.follow        = follow;\n                        scope.closeModal    = closeModal;\n                        scope.modalProfile.show();\n\n                        changeTab('list');\n\n                        function follow() {\n\n                            scope.loadingFollow = true;\n                            var status;\n\n                            if (scope.user.follow) {\n                                status = false;\n                            } else {\n                                status = true;\n                            }\n\n                            User.follow(status, scope.user).then(followResp);\n\n                            function followResp(resp) {\n\n                                console.log('Follow result', resp);\n                                scope.user.follow   = status;\n                                scope.loadingFollow = false;\n                            }\n                        }\n\n                        function closeModal() {\n                            delete scope.data;\n                            scope.modalProfile.hide();\n                        }\n                    });\n\n                // Cleanup the modal when we're done with it!\n                scope.$on('$destroy', function () {\n                    scope.modalProfile.remove();\n                });\n            }\n\n            function changeTab(tab) {\n                if (tab === 'list') {\n                    scope.tab = {\n                        list: true,\n                        grid: false\n                    };\n                } else {\n                    scope.tab = {\n                        list: false,\n                        grid: true\n                    };\n                }\n            }\n\n\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .directive('ionSearch', ionSearchDirective);\n\n  function ionSearchDirective($timeout) {\n\n    return {\n      restrict   : 'E',\n      scope      : {\n        getData: '&source',\n        ngModel: '=?',\n        search : '=?filter'\n      },\n      templateUrl: 'app/module/photogram/directive/search/search-directive.html',\n      link       : function (scope, element, attrs) {\n        attrs.minLength = attrs.minLength || 0;\n        scope.placeholder = attrs.placeholder || '';\n        scope.clear = function () {\n          console.log('Limpar campo');\n          scope.input = '';\n          scope.$apply();\n        };\n\n        if (attrs.class) {\n          element.addClass(attrs.class);\n        }\n\n        if (attrs.source) {\n          scope.$watch('search.value', watchSearch);\n        }\n\n        function watchSearch(newValue) {\n          if (newValue.length > attrs.minLength) {\n            $timeout(function () {\n              scope\n                .getData({\n                  str: newValue\n                })\n                .then(function (results) {\n                  scope.ngModel = results;\n                });\n            }, 1000);\n          } else {\n            scope.ngModel = [];\n          }\n        }\n\n      }\n\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('starter')\n        .directive('settingsModal', settingsModalDirective);\n\n    function settingsModalDirective($ionicModal, $translate, AppConfig, $cordovaInAppBrowser, Share, Auth, User, UserForm, $state) {\n\n        return {\n            restrict: 'A',\n            template: '',\n            link    : function (scope, elem) {\n\n                elem.bind('click', openModal);\n                scope.closeModal     = closeModal;\n                scope.link           = link;\n                scope.share          = Share.share;\n\n                function init() {\n                    scope.form       = Auth.getLoggedUser();\n                    scope.formFields = UserForm.profile;\n                    scope.languages  = AppConfig.locales;\n                    scope.language   = $translate.use();\n                }\n\n                function openModal() {\n\n                    init();\n                    $ionicModal.fromTemplateUrl('app/directive/settings-modal.html', {\n                        scope: scope\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n                    });\n                }\n\n                function link(sref) {\n                    $state.go(sref);\n                    scope.closeModal();\n                }\n\n                function submitUpdateProfile(form) {\n                    var dataForm = angular.copy(form);\n                    User.update(dataForm).then(function (resp) {\n                        console.log(resp);\n                        init();\n                        scope.closeModal();\n                    });\n                }\n\n                function closeModal() {\n                    scope.modal.hide();\n                    scope.modal.remove();\n                }\n\n            }\n        };\n    }\n\n\n})();\n\n'use strict';\nangular.module(\"ngLocale\", [], [\"$provide\", function ($provide) {\n  var PLURAL_CATEGORY = {\n    ZERO: \"zero\",\n    ONE: \"one\",\n    TWO: \"two\",\n    FEW: \"few\",\n    MANY: \"many\",\n    OTHER: \"other\"\n  };\n  $provide.value(\"$locale\", {\n    \"DATETIME_FORMATS\": {\n      \"AMPMS\": [\n        \"AM\",\n        \"PM\"\n      ],\n      \"DAY\": [\n        \"domingo\",\n        \"segunda-feira\",\n        \"ter\\u00e7a-feira\",\n        \"quarta-feira\",\n        \"quinta-feira\",\n        \"sexta-feira\",\n        \"s\\u00e1bado\"\n      ],\n      \"ERANAMES\": [\n        \"Antes de Cristo\",\n        \"Ano do Senhor\"\n      ],\n      \"ERAS\": [\n        \"a.C.\",\n        \"d.C.\"\n      ],\n      \"FIRSTDAYOFWEEK\": 6,\n      \"MONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"SHORTDAY\": [\n        \"dom\",\n        \"seg\",\n        \"ter\",\n        \"qua\",\n        \"qui\",\n        \"sex\",\n        \"s\\u00e1b\"\n      ],\n      \"SHORTMONTH\": [\n        \"jan\",\n        \"fev\",\n        \"mar\",\n        \"abr\",\n        \"mai\",\n        \"jun\",\n        \"jul\",\n        \"ago\",\n        \"set\",\n        \"out\",\n        \"nov\",\n        \"dez\"\n      ],\n      \"STANDALONEMONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"WEEKENDRANGE\": [\n        5,\n        6\n      ],\n      \"fullDate\": \"EEEE, d 'de' MMMM 'de' y\",\n      \"longDate\": \"d 'de' MMMM 'de' y\",\n      \"medium\": \"d 'de' MMM 'de' y HH:mm:ss\",\n      \"mediumDate\": \"d 'de' MMM 'de' y\",\n      \"mediumTime\": \"HH:mm:ss\",\n      \"short\": \"dd/MM/yy HH:mm\",\n      \"shortDate\": \"dd/MM/yy\",\n      \"shortTime\": \"HH:mm\"\n    },\n    \"NUMBER_FORMATS\": {\n      \"CURRENCY_SYM\": \"R$\",\n      \"DECIMAL_SEP\": \",\",\n      \"GROUP_SEP\": \".\",\n      \"PATTERNS\": [{\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 3,\n        \"minFrac\": 0,\n        \"minInt\": 1,\n        \"negPre\": \"-\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\",\n        \"posSuf\": \"\"\n      }, {\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 2,\n        \"minFrac\": 2,\n        \"minInt\": 1,\n        \"negPre\": \"-\\u00a4\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\\u00a4\",\n        \"posSuf\": \"\"\n      }]\n    },\n    \"id\": \"pt-br\",\n    \"pluralCat\": function (n, opt_precision) {\n      if (n >= 0 && n <= 2 && n != 2) {\n        return PLURAL_CATEGORY.ONE;\n      }\n      return PLURAL_CATEGORY.OTHER;\n    }\n  });\n}]);\n(function () {\n    'use strict';\n    //! moment.js locale configuration\n//! locale : brazilian portuguese (pt-br)\n//! author : Caio Ribeiro Pereira : https://github.com/caio-ribeiro-pereira\n    \n    var pt_br = window.moment.defineLocale('pt', {\n        months: 'Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro'.split(\n            '_'),\n        monthsShort: 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),\n        weekdays: 'Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado'.split('_'),\n        weekdaysShort: 'Dom_Seg_Ter_Qua_Qui_Sex_Sáb'.split('_'),\n        weekdaysMin: 'Dom_2ª_3ª_4ª_5ª_6ª_Sáb'.split('_'),\n        longDateFormat: {\n            LT: 'HH:mm',\n            LTS: 'HH:mm:ss',\n            L: 'DD/MM/YYYY',\n            LL: 'D [de] MMMM [de] YYYY',\n            LLL: 'D [de] MMMM [de] YYYY [às] HH:mm',\n            LLLL: 'dddd, D [de] MMMM [de] YYYY [às] HH:mm'\n        },\n        calendar: {\n            sameDay: '[Hoje às] LT',\n            nextDay: '[Amanhã às] LT',\n            nextWeek: 'dddd [às] LT',\n            lastDay: '[Ontem às] LT',\n            lastWeek: function () {\n                return (this.day() === 0 || this.day() === 6) ?\n                    '[Último] dddd [às] LT' : // Saturday + Sunday\n                    '[Última] dddd [às] LT'; // Monday - Friday\n            },\n            sameElse: 'L'\n        },\n        relativeTime: {\n            future: 'em %s',\n            past: '%s atrás',\n            s: 'segs',\n            m: 'um minuto',\n            mm: '%d minutos',\n            h: 'uma hora',\n            hh: '%d horas',\n            d: 'um dia',\n            dd: '%d dias',\n            M: 'um mês',\n            MM: '%d meses',\n            y: 'um ano',\n            yy: '%d anos'\n        },\n        ordinalParse: /\\d{1,2}º/,\n        ordinal: '%dº'\n    });\n\n    return pt_br;\n})();\n(function () {\n  'use strict';\n  angular\n    .module('starter')\n    .factory('GalleryForm', GalleryFormFactory);\n\n  function GalleryFormFactory($translate) {\n\n    var form = [{\n      key: 'title',\n      type: 'input',\n      templateOptions: {\n        type: 'text',\n        placeholder: $translate.instant('PHOTOGRAM.FORM.TITLE'),\n        icon: 'icon-envelope',\n        required: true,\n        iconPlaceholder: true,\n        focus: true\n      }\n    }, {\n      key: 'geo',\n      type: 'toggle',\n      templateOptions: {\n        label: $translate.instant('PHOTOGRAM.FORM.GEOLOCATION'),\n        toggleClass: 'positive'\n      }\n    }];\n\n    var formComment = [{\n      key: 'text',\n      type: 'input',\n      templateOptions: {\n        placeholder: $translate.instant('addComment'),\n        type: 'text',\n        required: true,\n        focus: true\n          //icon           : 'icon-envelope',\n          //iconPlaceholder: true\n      }\n    }];\n\n    var formShare = [{\n      key: 'facebook',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Facebook',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'twitter',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Twitter',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'whatsapp',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Whatsapp',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'SMS',\n      type: 'toggle',\n      templateOptions: {\n        label: 'SMS',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'email',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Email',\n        toggleClass: 'positive'\n      }\n    }, ];\n    return {\n      form: form,\n      formComment: formComment,\n      formShare: formShare\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .factory('UserForm', UserFormFactory);\n\n    function UserFormFactory($translate) {\n\n        return {\n            login   : login(),\n            register: register(),\n            profile : profile()\n        };\n\n        function login() {\n            return [{\n                type           : 'input',\n                key            : 'username',\n                templateOptions: {\n                    type           : 'text',\n                    placeholder    : $translate.instant('username'),\n                    icon           : 'icon-account',\n                    required       : true,\n                    iconPlaceholder: true\n                }\n            }, {\n                type           : 'input',\n                key            : 'password',\n                templateOptions: {\n                    type           : 'password',\n                    placeholder    : $translate.instant('password'),\n                    icon           : 'icon-lock',\n                    required       : true,\n                    iconPlaceholder: true\n                }\n            }];\n        }\n\n        function register() {\n            return [\n                {\n                    type           : 'input',\n                    key            : 'username',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('username'),\n                        icon           : 'icon-account',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    type           : 'input',\n                    key            : 'email',\n                    templateOptions: {\n                        type           : 'email',\n                        placeholder    : $translate.instant('email'),\n                        icon           : 'icon-envelope',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    type           : 'input',\n                    key            : 'password',\n                    templateOptions: {\n                        type           : 'password',\n                        placeholder    : $translate.instant('password'),\n                        icon           : 'icon-lock',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }];\n        }\n\n        function profile() {\n            return [\n                {\n                    key            : 'username',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('username'),\n                        icon           : 'icon-user',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    key            : 'name',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('name'),\n                        icon           : 'icon-user',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }, {\n                    key            : 'status',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('status'),\n                        icon           : 'ion-quote',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }, {\n                    type           : 'select',\n                    key            : 'gender',\n                    templateOptions: {\n                        label          : $translate.instant('gender'),\n                        options        : [{\n                            'label': $translate.instant('man'),\n                            'id'   : 'male',\n                        }, {\n                            'label': $translate.instant('woman'),\n                            'id'   : 'female',\n                        }],\n                        valueProp      : 'id',\n                        labelProp      : 'label',\n                        icon           : 'icon-list',\n                        iconPlaceholder: true\n                    }\n                }];\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ActionSheet', ActionSheetFactory);\n\n    function ActionSheetFactory($ionicActionSheet, Camera, $cordovaActionSheet, $q) {\n\n        return {\n            show : show,\n            image: image\n        };\n\n        function image() {\n            var defer = $q.defer();\n            show({\n                title     : 'Choose an option',\n                cancelText: 'Cancel',\n                options   : [{text: 'Photo Library'}, {text: 'Photo'}]\n            }).then(function (option) {\n                var sourceType;\n                if (option === 1) {\n                    sourceType = 'photoLibrary';\n                }\n\n                if (option === 2) {\n                    sourceType = 'camera';\n                }\n                return Camera.getPicture({sourceType: sourceType});\n            }).then(defer.resolve).catch(defer.reject);\n\n            return defer.promise;\n        }\n\n        function show(params) {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                var options = {\n                    title                    : params.title,\n                    buttonLabels             : params.options,\n                    addCancelButtonWithLabel : params.cancelText,\n                    androidEnableCancelButton: true,\n                    androidTheme             : window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT\n                };\n\n                $cordovaActionSheet.show(options).then(function (btnIndex) {\n                    if (btnIndex !== 3) {\n                        defer.resolve(btnIndex);\n                    }\n                    defer.reject('cancel');\n                });\n\n            } else {\n                var actionSheet = $ionicActionSheet.show({\n                    buttons      : params.options,\n                    titleText    : params.title,\n                    cancelText   : params.cancelText,\n                    cancel       : function () {\n                        actionSheet();\n                    },\n                    buttonClicked: function (btnIndex) {\n                        actionSheet();\n                        if (btnIndex !== 3) {\n                            defer.resolve(btnIndex);\n                        }\n                        defer.reject('cancel');\n                    }\n                });\n\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Auth', function ($q) {\n\n        var mSessionToken = null;\n        return {\n            getLoggedUser  : getLoggedUser,\n            setSessionToken: setSessionToken,\n            ensureLoggedIn : ensureLoggedIn,\n            recoverPassword: recoverPassword,\n            resetPassword  : resetPassword,\n            logIn          : logIn,\n            logOut         : logOut\n        };\n\n        function getLoggedUser() {\n            return Parse.User.current();\n        }\n\n        function setSessionToken(sessionToken) {\n            mSessionToken = sessionToken;\n        }\n\n        function ensureLoggedIn() {\n            var defer = $q.defer();\n\n            if (mSessionToken === null) {\n                defer.reject('Session token invalid');\n                return defer.promise;\n            }\n\n            if (!Parse.User.current()) {\n                Parse.User.become(mSessionToken).then(defer.resolve, defer.reject);\n            } else {\n                defer.resolve(Parse.User.current());\n            }\n\n            return defer.promise;\n        }\n\n        function recoverPassword(email) {\n            var defer = $q.defer();\n            Parse.User.requestPasswordReset(email, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function resetPassword(email) {\n\n            var defer = $q.defer();\n\n            Parse.User.requestPasswordReset(email, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function logIn(obj) {\n            var defer = $q.defer();\n\n            Parse.User.logIn(obj.username, obj.password, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function logOut() {\n            var defer = $q.defer();\n            Parse.User.logOut().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').service('Camera', CameraFactory);\n\n    function CameraFactory($cordovaCamera, $q) {\n\n        return {\n            getPicture   : getPicture,\n            resizeImage  : resizeImage,\n            toBase64Image: toBase64Image\n        };\n\n        function getPicture(params) {\n\n            var defer = $q.defer();\n            if (window.cordova) {\n                var sourceType = params.sourceType || Camera.PictureSourceType.CAMERA;\n                if (params.sourceType === 'photoLibrary') {\n                    sourceType = Camera.PictureSourceType.PHOTOLIBRARY;\n                }\n                if (params.sourceType === 'camera') {\n                    sourceType = Camera.PictureSourceType.CAMERA;\n                }\n\n                var options = {\n                    quality           : 70,\n                    targetWidth       : 800,\n                    targetHeight      : 800,\n                    saveToPhotoAlbum  : false,\n                    correctOrientation: true,\n                    sourceType        : sourceType,\n                    destinationType   : Camera.DestinationType.DATA_URL,\n                    encodingType      : Camera.EncodingType.JPEG,\n                };\n\n                $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n            } else {\n                console.log('Input File');\n                //defer.reject('Unsupported platform');\n\n                var fileInput = angular.element('<input type=\"file\" accept=\"image/x-png, image/gif, image/jpeg\" max-size=\"2048\" />');\n                fileInput[0].click();\n                fileInput.on('change', function (evt) {\n                    var tempImage = evt.currentTarget.files[0];\n                    var reader    = new FileReader();\n                    reader.onload = function (evt) {\n                        defer.resolve(evt.target.result);\n                    };\n                    reader.readAsDataURL(tempImage);\n                });\n            }\n\n            return defer.promise;\n        }\n\n        //https://github.com/timkalinowski/PhoneGap-Image-Resizer\n        function toBase64Image(img_path, width, height) {\n            var defer = $q.defer();\n            window.imageResizer.resizeImage(defer.resolve, defer.reject, img_path, width || 1, height || 1, {\n                imageDataType: ImageResizer.IMAGE_DATA_TYPE_URL,\n                resizeType   : ImageResizer.RESIZE_TYPE_FACTOR,\n                format       : 'jpg'\n            });\n\n            return defer.promise;\n        }\n\n        function resizeImage(img_path, width, height) {\n            var defer = $q.defer();\n            window.imageResizer.resizeImage(defer.resolve, defer.reject,  img_path, width || 640, height || 640, {\n                imageDataType: ImageResizer.IMAGE_DATA_TYPE_URL,\n                resizeType   : ImageResizer.RESIZE_TYPE_MIN_PIXEL,\n                pixelDensity : true,\n                storeImage   : false,\n                photoAlbum   : false,\n                format       : 'jpg'\n            });\n\n            return defer.promise;\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('ConnectMonitor', ConnectMonitorFactory);\n\n    function ConnectMonitorFactory($rootScope, $cordovaNetwork) {\n        \n        return {\n            watch: watch\n        };\n\n        function watch() {\n\n            if (ionic.Platform.isWebView()) {\n                $rootScope.onLine = $cordovaNetwork.isOnline();\n                $rootScope.$apply();\n\n\n                $rootScope.$on('$cordovaNetwork:online', function (event, networkState) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                });\n\n                $rootScope.$on('$cordovaNetwork:offline', function (event, networkState) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                });\n            } else {\n                $rootScope.onLine = navigator.onLine;\n                $rootScope.$apply();\n\n                window.addEventListener('online', function (e) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                }, false);\n\n                window.addEventListener('offline', function (e) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                }, false);\n            }\n        }\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('starter')\n    .factory('DAO', DAOFactory);\n  function DAOFactory($interval, $q) {\n    var _db;\n    var _tables = [];\n\n    return {\n      init       : init,\n      insert     : insert,\n      query      : query,\n      getLastSync: getLastSync,\n      paginate   : paginate,\n      fetch      : fetch,\n      fetchAll   : fetchAll\n    };\n\n    function init(database) {\n\n      if (!_db) {\n        if (window.sqlitePlugin !== undefined) {\n          _db = window.sqlitePlugin.openDatabase({\n            name              : database.name,\n            location          : 2,\n            createFromLocation: 1\n          });\n        } else {\n          // For debugging in the browser\n          _db = window.openDatabase(database.name, \"1.0\", \"Database\", 200000);\n        }\n      }\n\n      var _promises = [];\n      angular.forEach(database.tables, function (table) {\n        var columns = [];\n        angular.forEach(table.columns, function (type, name) {\n          columns.push(name + ' ' + type);\n        });\n        query('DROP TABLE ' + table.name);\n        var _query = 'CREATE TABLE IF NOT EXISTS ' + table.name + ' (' + columns.join(',') + ')';\n        _promises.push(query(_query));\n        _tables.push(table);\n        // console.log(_query);\n        // console.log('Table ' + table.name + ' initialized');\n      });\n\n      return $q.all(_promises);\n    }\n\n    function getLastSync(table, column) {\n      var defer = $q.defer();\n      query(\"SELECT MAX(\" + column + \") as lastSync FROM \" + table)\n        .then(function (data) {\n          var lastSync = data.rows.item[0].lastSync;\n          defer.resolve(lastSync);\n        });\n      return defer.promise;\n    }\n\n    function insert(obj) {\n      var defer    = $q.defer();\n      var _columns = [];\n      var _values  = [];\n\n      angular.forEach(obj.columns, function (value, key) {\n        _columns.push(key);\n        if (typeof  value === 'number') {\n          _values.push(value);\n        } else {\n          _values.push(\"'\" + value + \"'\");\n        }\n      });\n\n      var _query = \"INSERT OR REPLACE INTO \" + obj.table + \" (\" + _columns.join(',') + \") VALUES (\" + _values.join(',') + \")\"\n      // console.info(_query);\n      query(_query).then(defer.resolve).catch(defer.reject);\n      return defer.promise;\n\n    }\n\n    function query(query, bindings) {\n      bindings  = typeof bindings !== 'undefined' ? bindings : [];\n      var defer = $q.defer();\n\n      _db.transaction(function (transaction) {\n        transaction.executeSql(query, bindings, function (transaction, result) {\n          // console.log(result);\n          var results = {\n            rows: []\n          };\n          if (result && result.rows) {\n            for (var i = 0; i < result.rows.length; i++) {\n              results.rows.push(angular.copy(result.rows[i]));\n            }\n          }\n          // console.log(results);\n          defer.resolve(results);\n        }, function (transaction, error) {\n          console.log(transaction, error);\n          defer.reject(error);\n        });\n      });\n\n      return defer.promise;\n    }\n\n    function paginate(_table, columns, _where, _join, _order, limit, page) {\n      var defer = $q.defer();\n      if (page === undefined) page = -1;\n      var _columns = columns;\n      var _limit   = limit ? limit : 10;\n      var _query1  = \"SELECT SUM(id) as TOTAL FROM \" + _table + \"  \" + _where;\n      var _query   = \"SELECT \" + _columns + \" FROM \" + _table + \"  \" + _where + \" \" + _join + \" \" + _order + \" LIMIT \" + _limit + \" OFFSET \" + page;\n\n      console.log('query', _query1);\n      console.log('query', _query);\n\n      query(_query1).then(function (data) {\n        var result = {\n          page : page,\n          total: data.rows[0].TOTAL,\n          rows : []\n        };\n\n        query(_query).then(function (data) {\n          console.log(data);\n\n          result.rows = data.rows;\n          defer.resolve(result);\n        });\n      });\n      return defer.promise;\n    }\n\n    function fetchAll(result) {\n      var output = [];\n\n      for (var i = 0; i < result.rows.length; i++) {\n        output.push(result.rows.item(i));\n      }\n\n      return output;\n    }\n\n    function fetch(result) {\n      return result.rows.item(0);\n    }\n  }\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('DataUtil', DataUtilFactory);\n\n    function DataUtilFactory() {\n\n        return {\n            parseData: parseData,\n            parseString: parseString,\n            getDate: getDate,\n            formatDate: formatDate,\n            getMonthName: getMonthName,\n            getFirstDay: getFirstDay,\n            getLastDay: getLastDay\n        };\n\n        function parseData(string) {\n            var parts = string.split('-');\n            return new Date(parts[0], parts[1] - 1, parts[2]);\n        }\n\n        function parseString(data) {\n            return new Date(data).toLocaleDateString();\n        }\n\n\n        function getDate() {\n            var data   = new Date();\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function formatDate(milliseconds) {\n            var data   = new Date(milliseconds);\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function getMonthName(data) {\n            var meses = ['Janeiro', 'Feveiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];\n            return meses[data.getMonth()];\n        }\n\n        function getFirstDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth();\n            return new Date(year, month, 1);\n        }\n\n        function getLastDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth() + 1;\n            return new Date(year, month, 0);\n        }\n\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').service('Dialog', DialogFactory);\n\n    function DialogFactory($cordovaDialogs, $ionicPopup, $q) {\n\n        return {\n            alert  : alert,\n            confirm: confirm\n        };\n\n        function alert(message, title) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaDialogs.alert(message, title).then(defer.resolve);\n            } else {\n                $ionicPopup.alert({\n                    title   : title,\n                    template: message\n                });\n            }\n            return defer.promise;\n        }\n\n        function confirm(message, title, buttonsText) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaDialogs.confirm(message, title, buttonsText).then(function (result) {\n                    if (result === 2) {\n                        defer.resolve(true);\n                    }\n                    defer.reject(true);\n                });\n\n            } else {\n                $ionicPopup.confirm({\n                    title   : title,\n                    template: message\n                }).then(function (res) {\n                    if (res) {\n                        defer.resolve(true);\n                    } else {\n                        defer.reject(true);\n                    }\n                });\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').service('Facebook', FacebookFactory);\n\n    function FacebookFactory($q, $facebook, $cordovaFacebook) {\n\n        var facebook = window.cordova ? $cordovaFacebook : $facebook;\n\n        return {\n            getCurrentUser: getCurrentUser,\n            logIn         : logIn,\n            logOut        : logOut,\n            me            : me,\n            invite        : invite,\n            friends       : friends,\n            api           : api,\n            link          : link\n        };\n\n        function getCurrentUser() {\n            var defer = $q.defer();\n            facebook.getLoginStatus().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function logIn() {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaFacebook\n                    .login(['public_profile', 'email'])\n                    .then(defer.resolve, defer.reject);\n\n            } else {\n                facebook\n                    .login(['public_profile', 'email'])\n                    .then(defer.resolve, defer.reject);\n                //\n                //Parse.FacebookUtils.logIn(null, {\n                //  success: defer.resolve,\n                //  error  : defer.reject\n                //});\n            }\n            return defer.promise;\n        }\n\n        function logOut() {\n            var defer = $q.defer();\n            $cordovaFacebook.logout().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function me() {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                $cordovaFacebook.api('me?fields=name,first_name,last_name,gender,email', ['public_profile'])\n                                .then(defer.resolve, defer.reject);\n\n            } else {\n                facebook.api('/me', {fields: 'name, first_name, last_name, gender, email'})\n                        .then(function (response) {\n                            if (!response || response.error) {\n                                defer.reject(response.error);\n                            } else {\n                                defer.resolve(response);\n                            }\n                        });\n            }\n\n            return defer.promise;\n        }\n\n        function invite() {\n            var defer = $q.defer();\n            if (window.cordova) {\n                facebook.showDialog({\n                    method : 'apprequests',\n                    message: 'Venha para o nosso clube!'\n                }).then(defer.resolve, defer.reject);\n            } else {\n                facebook.ui({\n                    method : 'apprequests',\n                    message: 'Venha para o nosso clube!'\n                }).then(defer.resolve, defer.reject);\n            }\n            return defer.promise;\n        }\n\n\n        function friends() {\n            var defer = $q.defer();\n            facebook.api('me/friends').then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function api(api) {\n            var defer = $q.defer();\n            facebook.api(api).then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function link(user) {\n            var defer = $q.defer();\n            if (user) {\n                facebook.login(['email']).then(function (response) {\n                    console.log('facebook login', response);\n                    //Pega o Status do Login\n                    var data = new Date(new Date().getTime() + response['authResponse']['expiresIn'] * 1000);\n\n                    console.log(user, response, data);\n\n                    Parse.FacebookUtils.link(user, {\n                        id             : response['authResponse']['userID'],\n                        access_token   : response['authResponse']['accessToken'],\n                        expiration_date: data\n                    }, {\n                        success: function (user) {\n                            // Função caso tenha logado tanto no face quanto no Parse\n                            console.log('User', user);\n                            user.set('facebook', response['authResponse']['userID']);\n                            user.set('facebookimg', 'https://graph.facebook.com/' + response['authResponse']['userID'] + '/picture?width=250&height=250');\n                            user.set('facebook_complete', Boolean(true));\n                            user.save().then(defer.resolve);\n                        }\n                    });\n                }, defer.resolve);\n            } else {\n                defer.reject('not logged');\n            }\n\n            return defer.promise;\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryActivity', function ($q, ParseCloud, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryActivity', {\n            getStatus: function () {\n                if (this.isApproved) {\n                    return 'Approved';\n                } else if (this.isApproved === false) {\n                    return 'Rejected';\n                } else {\n                    return 'Pending';\n                }\n            }\n        }, {\n            update : function (item) {\n                var defer = $q.defer();\n                item.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy: function (item) {\n                var defer = $q.defer();\n                item.destroy({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            feed   : function (params) {\n                return ParseCloud.run('feedActivity', params);\n            },\n            all    : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n                // Order Table\n                if (params.order) {\n                    if (params.order.indexOf('-') < -1) {\n                        query.ascending(params.order);\n                    } else {\n                        query.descending(params.order.replace('-'));\n                    }\n                }\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n\n                }\n\n                query.include('gallery')\n                query.include('user')\n                query.limit(params.limit);\n                query.skip((params.page * params.limit) - params.limit);\n                query.find({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            count  : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n                }\n\n                query.count({\n                    success: function (count) {\n                        defer.resolve(count);\n                    },\n                    error  : function (error) {\n                        defer.reject(error);\n                    }\n                });\n\n                return defer.promise;\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'fromUser', {\n            get: function () {\n                return this.get('fromUser');\n            },\n            set: function (value) {\n                this.set('fromUser', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'toUser', {\n            get: function () {\n                return this.get('toUser');\n            },\n            set: function (value) {\n                this.set('toUser', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'gallery', {\n            get: function () {\n                return this.get('gallery');\n            },\n            set: function (value) {\n                this.set('gallery', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'hashtags', {\n            get: function () {\n                return this.get('hashtags');\n            },\n            set: function (value) {\n                this.set('hashtags', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'words', {\n            get: function () {\n                return this.get('words');\n            },\n            set: function (value) {\n                this.set('words', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'address', {\n            get: function () {\n                return this.get('address');\n            },\n            set: function (value) {\n                this.set('address', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'location', {\n            get: function () {\n                return this.get('location');\n            },\n            set: function (val) {\n                this.set('location', new Parse.GeoPoint({\n                    latitude : val.latitude,\n                    longitude: val.longitude\n                }));\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryComment', function ($q, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryComment', {\n            getStatus: function () {\n                if (this.isApproved) {\n                    return 'Approved';\n                } else if (this.isApproved === false) {\n                    return 'Rejected';\n                } else {\n                    return 'Pending';\n                }\n            }\n        }, {\n            create : function (item) {\n                var defer = $q.defer();\n                new ParseObject().save(item, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            update : function (item) {\n                var defer = $q.defer();\n                item.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy: function (item) {\n                var defer = $q.defer();\n                item.destroy({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            all    : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                // Order Table\n\n                query.include('user');\n                query.ascending('createdAt');\n                query.equalTo('gallery', params.gallery);\n                query.limit(params.limit);\n                query.skip((params.page * params.limit) - params.limit);\n                query.find({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            count  : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n                }\n\n                query.count({\n                    success: function (count) {\n                        defer.resolve(count);\n                    },\n                    error  : function (error) {\n                        defer.reject(error);\n                    }\n                });\n\n                return defer.promise;\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'user', {\n            get: function () {\n                return this.get('user');\n            },\n            set: function (value) {\n                this.set('user', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'text', {\n            get: function () {\n                return this.get('text');\n            },\n            set: function (value) {\n                this.set('text', value);\n            }\n        });\n\n        return ParseObject;\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Gallery', GalleryFactory);\n\n    function GalleryFactory($q, ParseCloud, moment) {\n\n        const ParseObject = Parse.Object.extend('Gallery', {\n                getStatus: function () {\n                    if (this.isApproved) {\n                        return 'Approved';\n                    } else if (this.isApproved === false) {\n                        return 'Rejected';\n                    } else {\n                        return 'Pending';\n                    }\n                }\n            },\n            {\n                create     : function (item) {\n                    var defer    = $q.defer();\n                    var objPlace = new ParseObject();\n\n                    if (item.location) {\n                        item.location = new Parse.GeoPoint({\n                            latitude : item.location.lat,\n                            longitude: item.location.lng\n                        });\n                    }\n                    objPlace.save(item, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                    return defer.promise;\n                },\n                update     : function (item) {\n                    var defer = $q.defer();\n                    item.save(null, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                destroy    : function (item) {\n                    var defer = $q.defer();\n                    item.destroy({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                comments       : function (params) {\n                    return ParseCloud.run('commentGallery', params);\n                },\n                feed       : function (params) {\n                    return ParseCloud.run('feedGallery', params);\n                },\n                follow     : function (params) {\n                    console.log('Follow', params);\n                    return ParseCloud.run('followUser', params);\n                },\n                likeGallery: function (params) {\n                    console.log(params);\n                    return ParseCloud.run('likeGallery', {galleryId: params.galleryId});\n                },\n                all        : function (params) {\n                    var defer = $q.defer();\n                    var query = new Parse.Query(this);\n\n                    if (params.filter != '') {\n                        query.contains('words', params.filter);\n                    }\n\n                    // Order Table\n                    if (params.order) {\n                        if (params.order.indexOf('-') < -1) {\n                            query.ascending(params.order);\n                        } else {\n                            query.descending(params.order.replace('-'));\n                        }\n                    }\n\n                    // Status\n                    if (params.status && params.status !== null) {\n                        if (params.status === 'pending') {\n                            query.doesNotExist('isApproved');\n                        } else if (params.status === 'rejected') {\n                            query.equalTo('isApproved', false);\n                        } else if (params.status === 'approved') {\n                            query.equalTo('isApproved', true);\n                        }\n                    }\n\n                    // Limit by page\n                    query.limit(params.limit);\n\n                    // Paginate\n                    query.skip((params.page * params.limit) - params.limit);\n                    query.find({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                    return defer.promise;\n                },\n                count      : function (params) {\n                    var defer = $q.defer();\n                    var query = new Parse.Query(this);\n\n                    if (params.filter != '') {\n                        query.contains('words', params.filter);\n                    }\n\n                    if (params.date && params.date !== null) {\n                        var start = moment(params.date).startOf('day');\n                        var end   = moment(params.date).endOf('day');\n                        query.greaterThanOrEqualTo('createdAt', start.toDate());\n                        query.lessThanOrEqualTo('createdAt', end.toDate());\n                    }\n\n                    if (params.status && params.status !== null) {\n\n                        if (params.status === 'pending') {\n                            query.doesNotExist('isApproved');\n                        } else if (params.status === 'rejected') {\n                            query.equalTo('isApproved', false);\n                        } else if (params.status === 'approved') {\n                            query.equalTo('isApproved', true);\n                        }\n                    }\n\n                    query.count({\n                        success: function (count) {\n                            defer.resolve(count);\n                        },\n                        error  : function (error) {\n                            defer.reject(error);\n                        }\n                    });\n\n                    return defer.promise;\n                }\n            });\n\n        Object.defineProperty(ParseObject.prototype, 'likesTotal', {\n            get: function () {\n                return this.get('likesTotal');\n            },\n            set: function (value) {\n                this.set('likesTotal', value);\n            }\n        });\n        Object.defineProperty(ParseObject.prototype, 'user', {\n            get: function () {\n                return this.get('user');\n            },\n            set: function (value) {\n                this.set('user', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'hashtags', {\n            get: function () {\n                return this.get('hashtags');\n            },\n            set: function (value) {\n                this.set('hashtags', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'words', {\n            get: function () {\n                return this.get('words');\n            },\n            set: function (value) {\n                this.set('words', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'location', {\n            get: function () {\n                return this.get('location');\n            },\n            set: function (val) {\n                this.set('location', new Parse.GeoPoint({\n                    latitude : val.latitude,\n                    longitude: val.longitude\n                }));\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'address', {\n            get: function () {\n                return this.get('address');\n            },\n            set: function (value) {\n                this.set('address', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('GalleryFeedback', function ($q, moment) {\n\n    var ParseObject = Parse.Object.extend('GalleryFeedback', {\n      getStatus: function () {\n        if (this.isApproved) {\n          return 'Approved';\n        } else if (this.isApproved === false) {\n          return 'Rejected';\n        } else {\n          return 'Pending';\n        }\n      }\n    }, {\n      create : function (item) {\n        var defer    = $q.defer();\n        var objPlace = new ParseObject();\n        item.user    = Parse.User.current();\n        objPlace.save(item, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      update : function (item) {\n        var defer = $q.defer();\n        item.save(null, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      destroy: function (item) {\n        var defer = $q.defer();\n        item.destroy({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      all    : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('words', params.filter);\n        }\n\n        if (params.date && params.date !== null) {\n          var start = moment(params.date).startOf('day');\n          var end   = moment(params.date).endOf('day');\n          query.greaterThanOrEqualTo('createdAt', start.toDate());\n          query.lessThanOrEqualTo('createdAt', end.toDate());\n        }\n\n        if (params.status && params.status !== null) {\n\n          if (params.status === 'pending') {\n            query.doesNotExist('isApproved');\n          } else if (params.status === 'rejected') {\n            query.equalTo('isApproved', false);\n          } else if (params.status === 'approved') {\n            query.equalTo('isApproved', true);\n          }\n\n        }\n\n        query.include('gallery')\n        query.include('User')\n        query.descending('createdAt');\n        query.limit(params.limit);\n        query.skip((params.page * params.limit) - params.limit);\n        query.find({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      count  : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('words', params.filter);\n        }\n\n        if (params.date && params.date !== null) {\n          var start = moment(params.date).startOf('day');\n          var end   = moment(params.date).endOf('day');\n          query.greaterThanOrEqualTo('createdAt', start.toDate());\n          query.lessThanOrEqualTo('createdAt', end.toDate());\n        }\n\n        // Order Table\n        if (params.order) {\n          if (params.order.indexOf('-') < -1) {\n            query.ascending(params.order);\n          } else {\n            query.descending(params.order.replace('-'));\n          }\n        }\n\n        if (params.status && params.status !== null) {\n\n          if (params.status === 'pending') {\n            query.doesNotExist('isApproved');\n          } else if (params.status === 'rejected') {\n            query.equalTo('isApproved', false);\n          } else if (params.status === 'approved') {\n            query.equalTo('isApproved', true);\n          }\n        }\n\n        query.count({\n          success: function (count) {\n            defer.resolve(count);\n          },\n          error  : function (error) {\n            defer.reject(error);\n          }\n        });\n\n        return defer.promise;\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'user', {\n      get: function () {\n        return this.get('user');\n      },\n      set: function (value) {\n        this.set('user', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'subject', {\n      get: function () {\n        return this.get('subject');\n      },\n      set: function (value) {\n        this.set('subject', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'title', {\n      get: function () {\n        return this.get('title');\n      },\n      set: function (value) {\n        this.set('title', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'hashtags', {\n      get: function () {\n        return this.get('hashtags');\n      },\n      set: function (value) {\n        this.set('hashtags', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'words', {\n      get: function () {\n        return this.get('words');\n      },\n      set: function (value) {\n        this.set('words', value);\n      }\n    });\n\n\n    Object.defineProperty(ParseObject.prototype, 'isApproved', {\n      get: function () {\n        return this.get('isApproved');\n      },\n      set: function (value) {\n        this.set('isApproved', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n      get: function () {\n        return this.get('expiresAt');\n      },\n      set: function (value) {\n        this.set('expiresAt', value);\n      }\n    });\n\n    return ParseObject;\n\n  });\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('GallerySetting', function ($q, moment) {\n\n    var ParseObject = Parse.Object.extend('GallerySetting', {\n      getStatus: function () {\n        if (moment().toDate() >= this.expiresAt) {\n          return 'Expired';\n        }\n        else if (this.isApproved) {\n          return 'Approved';\n        } else if (this.isApproved === false) {\n          return 'Rejected';\n        } else {\n          return 'Pending';\n        }\n      }\n    }, {\n      create : function (item) {\n        var defer    = $q.defer();\n        var objPlace = new ParseObject();\n\n        objPlace.save(item, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      update : function (item) {\n        var defer = $q.defer();\n        item.save(null, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      destroy: function (item) {\n        var defer = $q.defer();\n        item.destroy({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      all    : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('canonical', params.filter);\n        }\n\n        query.descending('createdAt');\n        query.limit(params.limit);\n        query.skip((params.page * params.limit) - params.limit);\n        query.find({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      count  : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        query.count({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      }\n\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'key', {\n      get: function () {\n        return this.get('key');\n      },\n      set: function (value) {\n        this.set('key', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'value', {\n      get: function () {\n        return this.get('value');\n      },\n      set: function (value) {\n        this.set('value', value);\n      }\n    });\n\n    return ParseObject;\n\n  });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Geolocation', GeolocationFactory);\n\n    function GeolocationFactory($ionicPlatform, $q) {\n        return {\n            getCurrentPosition: getCurrentPosition\n        };\n\n        function getCurrentPosition() {\n            var defer = $q.defer();\n\n            $ionicPlatform.ready(function () {\n                var options = {\n                    maximumAge        : 3000,\n                    timeout           : 5000,\n                    enableHighAccuracy: true\n                };\n                navigator.geolocation.getCurrentPosition(\n                    defer.resolve,\n                    defer.reject,\n                    options);\n            });\n\n            return defer.promise;\n        }\n    }\n\n})();\n(function () {\n  'use strict';\n  angular.module('starter').factory('GoogleAnalytics', GoogleAnalyticsFactory);\n\n  function GoogleAnalyticsFactory($cordovaGoogleAnalytics) {\n    var TAG      = 'AnalyticsService';\n    var canTrack = false;\n    return {\n      init          : init,\n      trackView     : trackView,\n      trackEvent    : trackEvent,\n      trackException: trackException\n    };\n\n    function init(trackingId) {\n      if (trackingId !== null && trackingId !== '' && window.cordova) {\n        $cordovaGoogleAnalytics.debugMode();\n        $cordovaGoogleAnalytics.startTrackerWithId(trackingId);\n        canTrack = true;\n      } else {\n        console.warn('[' + TAG + ']: Invalid Tracker ID or not using emulator');\n      }\n    }\n\n    function trackEvent(category, action, label) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackEvent(category, action, label);\n      }\n    }\n\n    function trackView(viewName) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackView(viewName);\n      }\n    }\n\n    function trackException(description, isFatal) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackException(description, isFatal)\n      }\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Install', InstallFactory);\n\n    function InstallFactory(ParseCloud) {\n        return {\n            start : start,\n            status: status,\n        };\n\n        function start(data) {\n            return ParseCloud.run('install', data);\n        }\n\n        function status(data) {\n            return ParseCloud.run('status', data);\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('OneSignal', OneSignalFactory);\n\n  function OneSignalFactory($q) {\n\n    return {\n      init: init\n    };\n\n    function init(id, google) {\n      var defer = $q.defer();\n\n      if (window.cordova) {\n        // Enable to debug issues.\n        window.plugins.OneSignal.setLogLevel({\n          logLevel   : 4,\n          visualLevel: 4\n        });\n\n        // Update with your OneSignal AppId and googleProjectNumber before running.\n        window.plugins.OneSignal.init(id, {googleProjectNumber: google}, function (jsonData) {\n          // alert(\"Notification received:\\n\" + JSON.stringify(jsonData));\n          console.log('didReceiveRemoteNotificationCallBack: ' + JSON.stringify(jsonData));\n          defer.resolve(jsonData);\n        });\n\n        window.plugins.OneSignal.enableInAppAlertNotification(true);\n      } else {\n        defer.reject('not cordova app');\n      }\n      return defer.promise;\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ParseCloud', ParseCloudFactory);\n\n    function ParseCloudFactory($q) {\n        return {\n            run: run\n        };\n\n        function run(action, data) {\n            var defer = $q.defer();\n            Parse.Cloud.run(action, data, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('ParseFile', function ($q) {\n    return {\n      upload: upload\n    };\n\n    function upload(file, ext) {\n      var defer = $q.defer();\n      var filename = 'file.jpg';\n\n      if (ext) {\n        filename.replace('.jpg', ext);\n      }\n      \n      new Parse.File(filename, file)\n        .save({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n      return defer.promise;\n    }\n  });\n\n})();\n\n/*\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .factory('starter', PhotogramFactory);\n\n  function PhotogramFactory($q, Parse, DAO, $rootScope, User, Loading) {\n\n    var limitComment = 3;\n\n    return {\n      // Feed\n      feed             : feed,\n      getOfflineFeed   : _getOfflineFeed,\n      feedGrid         : feedGrid,\n      post             : post,\n      get              : get,\n      deletePhoto      : deletePhoto,\n      find             : find,\n      nearby           : nearby,\n      // Activity\n      addActivity      : addActivity,\n      listActivity     : listActivity,\n      // User\n      getUserGallery   : getUserGallery,\n      getUserGalleryQtd: getUserGalleryQtd,\n      // Comment\n      allComment       : allComment,\n      addComment       : addComment,\n      getComments      : getComments,\n      updateComment    : updateComment,\n      deleteComment    : deleteComment,\n      // Like\n      getLikes         : getLikes,\n      likeGallery      : likeGallery,\n      // Follow\n      getFollow        : getFollow,\n      search           : search\n    };\n\n\n    function deletePhoto(galleryId) {\n      var defer = $q.defer();\n\n      new Parse\n        .Query('Gallery')\n        .get(galleryId, function (resp) {\n          resp.destroy();\n          defer.resolve(resp);\n        });\n\n      return defer.promise;\n    }\n\n    function post(_params, image) {\n      var defer   = $q.defer();\n      var Gallery = Parse.Object.extend('Gallery');\n\n      // create object to hold caption and file reference\n      var imageObject = new Gallery();\n\n      // set object properties\n      imageObject.set('title', _params.title);\n      imageObject.set('image', image);\n\n      //if (_params.location !== undefined) {\n      //  imageObject.set('location', new Parse.GeoPoint(_params.location.latitude, _params.location.longitude));//}\n\n      // save object to parse backend\n      imageObject\n        .save()\n        .then(function (resp) {\n          console.log('Posted Photo', resp);\n          // Add User QtdPhoto\n          defer.resolve(resp);\n        });\n\n\n      return defer.promise;\n    }\n\n    function allComment(galleryId) {\n      var defer = $q.defer();\n\n      var gallery = new Parse\n        .Query('Gallery')\n        .get(galleryId, function (resp) {\n          console.log(resp);\n          return resp;\n        });\n\n      new Parse\n        .Query('GalleryComment')\n        .equalTo('galery', gallery)\n        //.include ('commentBy')\n        .descending('createdAt')\n        .find()\n        .then(function (resp) {\n          var objs = [];\n          angular.forEach(resp, function (item) {\n            var obj  = item.attributes;\n            obj.id   = item.id;\n            obj.user = item.attributes.commentBy;\n            objs.push(obj);\n          });\n          Loading.end();\n          defer.resolve(objs);\n        });\n      return defer.promise;\n    }\n\n    function getComments(obj) {\n      var defer = $q.defer();\n\n      new Parse\n        .Query('Gallery')\n        .get(obj)\n        .then(function (gallery) {\n          new Parse\n            .Query('GalleryComment')\n            .equalTo('gallery', gallery)\n            .include('commentBy')\n            .ascending('createdAt')\n            .find()\n            .then(function (resp) {\n              var comments = [];\n              resp.map(function (item) {\n                console.warn(item);\n                var obj        = {\n                  id     : item.id,\n                  text   : item.attributes.text,\n                  created: item.createdAt,\n                  user   : item.attributes.commentBy\n                };\n                obj.userAvatar = User.avatar(obj.user.attributes)\n                comments.push(obj);\n              });\n              defer.resolve(comments);\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function updateComment(obj) {\n      var defer = $q.defer();\n      console.log('updateComment', obj);\n      new Parse\n        .Query('GalleryComment')\n        .get(obj.id, function (comment) {\n          console.log('updateComment comment', comment);\n          comment.set('text', obj.text);\n          comment.save();\n          defer.resolve();\n        });\n      return defer.promise;\n    }\n\n    function deleteComment(item) {\n      var defer = $q.defer();\n      new Parse\n        .Query('GalleryComment')\n        .get(item.id, deleteItem);\n\n      function deleteItem(comment) {\n        comment.destroy(function () {\n          defer.resolve();\n        });\n      }\n\n      return defer.promise;\n    }\n\n    function getFollow(userId) {\n      var defer = $q.defer();\n\n      User\n        .find(userId)\n        .then(function (user) {\n\n          new Parse\n            .Query('UserFollow')\n            .equalTo('user', user)\n            .include('follow')\n            .find()\n            .then(function (resp) {\n              var data = [];\n              angular.forEach(resp, function (item) {\n                console.warn(item);\n                var obj        = {\n                  id     : item.id,\n                  text   : item.attributes.text,\n                  user   : item.attributes.follow.attributes,\n                  created: item.createdAt\n                };\n                obj.userAvatar = User.avatar(obj.user.attributes);\n\n                data.push(obj.user);\n              });\n              defer.resolve(data);\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function getLikes(obj) {\n      var defer = $q.defer();\n\n      new Parse\n        .Query('Gallery')\n        .get(obj)\n        .then(function (gallery) {\n          if (gallery.length) {\n            new Parse\n              .Query('GalleryLike')\n              .equalTo('gallery', gallery)\n              .include('user')\n              .ascending('createdAt')\n              .find()\n              .then(function (resp) {\n                var objs = [];\n                angular.forEach(resp, function (item) {\n                  console.warn(item);\n                  var obj        = {\n                    id     : item.id,\n                    text   : item.attributes.text,\n                    user   : item.attributes.user.attributes,\n                    created: item.createdAt\n                  };\n                  obj.userAvatar = User.avatar(obj.user.attributes);\n                  objs.push(obj);\n                });\n                console.log(objs);\n                defer.resolve(objs);\n              });\n          } else {\n            defer.reject(true);\n          }\n        });\n\n      return defer.promise;\n    }\n\n\n    function nearby(position) {\n      var defer = $q.defer();\n      var data  = [];\n\n      var point       = new Parse.GeoPoint(position);\n      var maxDistance = 10;\n\n      new Parse\n        .Query('Gallery')\n        .near('location', point)\n        .withinRadians('location', point, maxDistance)\n        .include('user')\n        // .limit(10)\n        .find()\n        .then(function (resp) {\n          if (resp.length) {\n            resp.map(function (value) {\n              var size     = 100;\n              var obj      = angular.copy(value.attributes);\n              obj.id       = value.id;\n              obj.img      = User.avatar(value.attributes);\n              obj.created  = value.createdAt;\n              obj.icon     = {\n                size: {\n                  width : 100,\n                  height: 100\n                },\n\n                scaledSize: {\n                  width : size / 2,\n                  height: size / 2\n                },\n                url       : 'img/icon.png'\n              };\n              obj.icon.url = obj.img;\n              obj.coords   = {\n                latitude : obj.location._latitude,\n                longitude: obj.location._longitude\n              };\n              data.push(obj);\n            });\n\n\n            defer.resolve(data);\n          } else {\n            defer.reject(true);\n          }\n        });\n\n      return defer.promise;\n    }\n\n    function search(string, page) {\n      var defer = $q.defer();\n      var data  = [];\n      var limit = 15;\n\n      new Parse\n        .Query('Gallery')\n        .limit(limit)\n        .skip(page * limit)\n        .matches('title', '* ' + string + '.*')\n        .include('user')\n        .find()\n        .then(function (resp) {\n          resp.map(function (value) {\n            console.log('gallery search item', value);\n            var obj = {\n              id     : value.id,\n              item   : value.attributes,\n              src    : value.attributes.img.url(),\n              created: value.createdAt,\n              user   : value.attributes.user.id\n            };\n            data.push(obj);\n          });\n          defer.resolve(data);\n        });\n\n      return defer.promise;\n    }\n\n\n    function _getOfflineFeed(page, user, _limit) {\n      var defer = $q.defer();\n      var queryUser;\n\n      if (user) {\n        queryUser = 'WHERE user_id =\"' + user + '\"';\n      }\n\n      DAO.paginate('Gallery',\n        'User.name as userName, User.status as userStatus, User.img as userAvatar, Gallery.*',\n        '',\n        'INNER JOIN User ON Gallery.user_id = User.id',\n        queryUser + ' ORDER BY Gallery.createdAt DESC',\n        _limit,\n        page).then(function (data) {\n        console.log(data);\n        defer.resolve(data);\n      });\n\n      return defer.promise;\n    }\n\n    function _getOnlineFeed(page, user, _limit) {\n      var defer   = $q.defer();\n      \n      new Parse.Cloud.run('feed', {\n        page: page,\n        user: user,\n        limi: _limit\n      })\n        .then(defer.resolve, defer.reject);\n      return defer.promise;\n    }\n\n    function feed(page, user) {\n      var _limit = 15;\n      // Offline Feed\n      if ($rootScope.onLine) {\n        return _getOnlineFeed(page, user, _limit);\n      } else {\n        return _getOfflineFeed(page, user, _limit);\n      }\n    }\n\n    function feedGrid(page, user, options) {\n      var defer   = $q.defer();\n      var _limit  = 30;\n      var _result = {\n        total: 0,\n        rows : []\n      };\n\n      function _query() {\n        if (user) {\n          return new Parse\n            .Query('Gallery')\n            .descending('createdAt')\n            .equalTo('user', user);\n        } else {\n          return new Parse\n            .Query('Gallery')\n            .descending('createdAt');\n        }\n      }\n\n      _query()\n        .count()\n        .then(function (totalGallery) {\n          console.log('results', totalGallery);\n          _result.total = totalGallery;\n          _query()\n            .include('user')\n            .limit(_limit)\n            .skip(page * _limit)\n            .find()\n            .then(function (resp) {\n\n              var qtd = resp.length;\n\n              if (!qtd) {\n                defer.reject(true);\n              }\n\n              var cb = _.after(resp.length, function () {\n                defer.resolve(_result);\n              });\n\n              _.each(resp, function (item) {\n                var obj = {\n                  id        : item.id,\n                  item      : angular.copy(item.attributes),\n                  created   : item.createdAt,\n                  likes     : item.attributes.qtdLike || 0,\n                  img       : item.attributes.img.url(),\n                  user      : item.attributes.user,\n                  user_id   : item.attributes.user.id,\n                  userAvatar: User.avatar(item.attributes.user.attributes)\n                };\n                _result.rows.push(obj);\n                cb();\n              });\n            });\n        });\n      return defer.promise;\n    }\n\n\n    function get(item) {\n      var defer = $q.defer();\n\n      console.log(item);\n      Loading.start();\n\n      find(item)\n        .then(function (resp) {\n          console.log(resp);\n\n          var likes    = resp.relation('likes');\n          var comments = resp.relation('comments');\n\n          likes\n            .query()\n            .equalTo('gallery', item)\n            .equalTo('user', Parse.User.current())\n            .count()\n            .then(function (liked) {\n\n              likes\n                .query()\n                .count()\n                .then(function (likes) {\n\n                  comments\n                    .query()\n                    .include('commentBy')\n                    .descending('createdAt')\n                    .limit(limitComment)\n                    .find()\n                    .then(function (comments) {\n                      console.log(comments);\n\n                      var commentsData = [];\n\n                      angular.forEach(comments, function (item) {\n                        var comment        = {\n                          id  : item.id,\n                          text: item.attributes.text,\n                          user: item.attributes.commentBy.attributes\n                        };\n                        comment.userAvatar = User.avatar(comment.user);\n                        commentsData.push(comment);\n                      });\n\n                      var obj        = {\n                        id      : item.id,\n                        item    : item.attributes,\n                        created : item.createdAt,\n                        likes   : likes,\n                        liked   : liked,\n                        user    : item.attributes.user.attributes,\n                        comments: commentsData\n                      };\n                      obj.userAvatar = User.avatar(obj.user);\n\n                      defer.resolve(obj);\n                      Loading.end();\n                    });\n                });\n            });\n\n        });\n\n      return defer.promise;\n    }\n\n\n    function find(id) {\n      var defer = $q.defer();\n      new Parse\n        .Query('Gallery')\n        .include('user')\n        .get(id)\n        .then(function (resp) {\n          defer.resolve(resp);\n        });\n      return defer.promise;\n    }\n\n\n    function addComment(form) {\n      var defer = $q.defer();\n      console.log('addComent', form);\n\n      find(form.galleryId)\n        .then(function (gallery) {\n          var Object = Parse.Object.extend('GalleryComment');\n          var item   = new Object({});\n\n          angular.forEach(form, function (value, key) {\n            item.set(key, value);\n          });\n          item.set('commentBy', Parse.User.current());\n          item.set('gallery', gallery);\n\n          item.save(null)\n              .then(function (resp) {\n                console.log(resp);\n\n                addActivity({\n                  galleryId: gallery.id,\n                  action   : 'add comment'\n                });\n\n                gallery\n                  .relation('comments')\n                  .add(resp);\n\n                gallery\n                  .save()\n                  .then(function (resp) {\n                    console.log(resp);\n                    defer.resolve(resp);\n                  });\n              });\n        });\n\n\n      return defer.promise;\n    }\n\n    function isLiked(galleryId) {\n      var defer = $q.defer();\n\n      find(galleryId)\n        .then(function (gallery) {\n          new Parse\n            .Query('GalleryLike')\n            .equalTo('gallery', gallery)\n            .equalTo('user', Parse.User.current())\n            .first()\n            .then(function (resp) {\n              console.warn(resp);\n              if (resp === undefined) {\n                defer.reject(resp);\n              } else {\n                defer.resolve(resp);\n              }\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function addLike(galleryId) {\n      var defer = $q.defer();\n\n      find(galleryId)\n        .then(function (gallery) {\n          var Object = new Parse.Object.extend('GalleryLike');\n          var item   = new Object({});\n\n          item.set('user', Parse.User.current());\n          item.set('gallery', gallery);\n\n          console.log(gallery);\n\n          item.save(null)\n              .then(function (resp) {\n                console.log(resp);\n\n                // Gallery Increment Like\n                var likes = parseInt(gallery.attributes.qtdLike) ? parseInt(gallery.attributes.qtdLike + 1) : 1;\n                console.log('Qtd Like', likes);\n\n                // Increment Like\n                gallery.set('qtdLike', likes);\n\n                // Add Relation\n                gallery.relation('likes').add(resp);\n\n                console.log('Save Gallery', gallery);\n\n                // Save Gallery\n                gallery\n                  .save()\n                  .then(function (newGallery) {\n                    console.log(newGallery);\n                    defer.resolve({\n                      liked: true,\n                      likes: likes\n                    });\n                  }, function (err) {\n                    console.error(err);\n                    defer.reject(err);\n                  });\n              });\n        });\n      return defer.promise;\n    }\n\n    function removeLike(galleryId) {\n\n      var defer = $q.defer();\n      find(galleryId)\n        .then(function (gallery) {\n\n          new Parse\n            .Query('GalleryLike')\n            .equalTo('gallery', gallery)\n            .equalTo('user', Parse.User.current())\n            .first()\n            .then(function (like) {\n\n              var likes = parseInt(gallery.attributes.qtdLike - 1);\n              if (likes < 0) {\n                likes = 0;\n              }\n\n              console.log('Remove like', likes, gallery);\n\n\n              // Gallery Decrement Like\n              gallery.set('qtdLike', likes);\n\n              // Remove Relation\n              gallery.relation('likes').remove(like);\n\n              like\n                .destroy(function (resp) {\n                  if (resp) {\n                    console.log('Remove like');\n                    // Save Gallery\n                    gallery\n                      .save()\n                      .then(function (newGallery) {\n                        console.log('New Gallery', newGallery);\n\n                        defer.resolve({\n                          liked: false,\n                          likes: newGallery.attributes.qtdLike\n                        });\n\n                      }, function (err) {\n                        console.error(err);\n                        defer.reject(err);\n                      });\n                  }\n                });\n\n\n            });\n\n        });\n      return defer.promise;\n    }\n\n    function likeGallery(gallery) {\n      var defer = $q.defer();\n\n      isLiked(gallery)\n        .then(function (resp) {\n          console.warn(resp);\n          var promise = '';\n\n          if (resp) {\n            console.log('Remove Like');\n            promise = removeLike(gallery);\n            addActivity({\n              galleryId: gallery,\n              action   : 'unlike like'\n            });\n\n          } else {\n            console.log('Add like');\n            promise = addLike(gallery);\n            addActivity({\n              galleryId: gallery,\n              action   : 'add like'\n            });\n          }\n\n          promise\n            .then(function (resp) {\n              console.log(resp);\n              defer.resolve(resp);\n            });\n\n        })\n        .catch(function (err) {\n          console.log('Add like', err);\n\n          addActivity({\n            galleryId: gallery,\n            action   : 'add like'\n          });\n\n          addLike(gallery)\n            .then(function (resp) {\n              console.log(resp);\n              defer.resolve(resp);\n            });\n        });\n      return defer.promise;\n    }\n\n    function getUserGalleryQtd(userId) {\n      var defer = $q.defer();\n      if (userId === undefined) {\n        userId = Parse.User.current().id;\n      }\n\n      User\n        .find(userId)\n        .then(function (user) {\n          new Parse\n            .Query('Gallery')\n            .equalTo('user', user)\n            .count()\n            .then(function (qtdGalleries) {\n              defer.resolve(qtdGalleries);\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function getUserGallery(userId, page) {\n      var defer = $q.defer();\n      var data  = [];\n      var limit = 9;\n\n      if (userId === undefined) {\n        userId = Parse.User.current().id;\n      }\n\n      User\n        .find(userId)\n        .then(function (user) {\n\n          new Parse\n            .Query('Gallery')\n            .equalTo('user', user)\n            .descending('createdAt')\n            //.containedIn('ref', following)\n            //.containsAll('ref', following)\n            .include('user')\n            .limit(limit)\n            .skip(page * limit)\n            .find()\n            .then(function (resp) {\n\n              if (resp.length) {\n                var cb = _.after(resp.length, function () {\n                  defer.resolve(data);\n                });\n\n                _.each(resp, function (item) {\n                  //grab relations\n\n                  var likes    = item.relation('likes');\n                  var comments = item.relation('comments');\n\n                  likes\n                    .query()\n                    .equalTo('gallery', item)\n                    .equalTo('user', Parse.User.current())\n                    .count()\n                    .then(function (liked) {\n\n                      likes\n                        .query()\n                        .count()\n                        .then(function (likes) {\n\n                          comments\n                            .query()\n                            .include('commentBy')\n                            .descending('createdAt')\n                            .limit(limitComment)\n                            .find()\n                            .then(function (comments) {\n                              // console.log(comments);\n                              var commentsData = [];\n\n                              angular.forEach(comments, function (item) {\n                                var comment        = {\n                                  id  : item.id,\n                                  text: item.attributes.text,\n                                  user: item.attributes.commentBy.attributes\n                                };\n                                comment.userAvatar = User.avatar(comment.user);\n                                commentsData.push(comment);\n                              });\n\n                              var obj        = {\n                                id      : item.id,\n                                item    : item.attributes,\n                                src     : item.attributes.img.url(),\n                                created : item.createdAt,\n                                likes   : likes,\n                                liked   : liked,\n                                comments: commentsData,\n                                user    : item.attributes.user.attributes\n                              };\n                              // obj.user.id = item.attributes.user.id;\n                              obj.userAvatar = User.avatar(obj.user);\n\n                              data.push(obj);\n                              cb();\n                            });\n                        });\n                    });\n\n                });\n              } else {\n                defer.reject(true);\n              }\n            }, function () {\n              defer.reject(true);\n            });\n        });\n\n      return defer.promise;\n    }\n\n    function listActivity(page) {\n      var defer  = $q.defer();\n      var limit  = 20;\n      var _table = 'GalleryActivity';\n\n      console.info(page, limit);\n\n\n      DAO.query(\"SELECT * FROM \" + _table).then(function (data) {\n        if (data.rows.length) {\n          defer.resolve(data.rows);\n        } else {\n          new Parse\n            .Query('GalleryActivity')\n            .include('user')\n            .include('gallery')\n            .descending('createdAt')\n            .limit(limit)\n            .skip(page * limit)\n            .find()\n            .then(function (resp) {\n              if (resp.length) {\n                var data = [];\n                resp.map(function (item) {\n                  var _insert = {\n                    table  : _table,\n                    columns: {\n                      id        : item.id,\n                      action    : item.attributes.action,\n                      user_id   : item.attributes.user.id,\n                      userName  : item.attributes.user.attributes.name,\n                      userAvatar: User.avatar(item.attributes.user.attributes),\n                      gallery_id: item.attributes.gallery ? item.attributes.gallery.id : null,\n                      img       : item.attributes.gallery ? item.attributes.gallery.attributes.img._url : null,\n                      createdAt : new Date(item.attributes.createdAt).getTime()\n                    }\n                  }\n                  DAO.insert(_insert).then(console.log(data));\n                  data.push(_insert.columns);\n                });\n                defer.resolve(data);\n              } else {\n                defer.reject(true);\n              }\n            });\n        }\n      })\n\n\n      return defer.promise;\n    }\n\n    function addActivity(data) {\n      /!*\n       * ACTIONS\n       * add photo\n       * add comment\n       * like photo\n       * unlike photo\n       * register\n       * *!/\n\n      console.info(data);\n\n      if (data.galleryId) {\n        find(data.galleryId)\n          .then(function (gallery) {\n            var Object = Parse.Object.extend('GalleryActivity');\n            var item   = new Object({});\n\n            item.set('user', Parse.User.current());\n            item.set('gallery', gallery);\n            item.set('action', data.action);\n\n            item.save()\n                .then(function (resp) {\n                  console.warn(resp);\n                });\n          });\n      } else {\n        var Object = Parse.Object.extend('GalleryActivity');\n        var item   = new Object({});\n\n        item.set('user', Parse.User.current());\n        item.set('action', data.action);\n\n        item.save()\n            .then(function (resp) {\n              console.warn(resp);\n            });\n      }\n    }\n\n\n  }\n\n\n})();\n*/\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('Share', PhotogramShareFactory);\n\n  function PhotogramShareFactory(AppConfig, $q, $ionicActionSheet, Toast, $cordovaSocialSharing) {\n\n    var message = {\n      title  : ('Join me from ') + AppConfig.app.name + '!',\n      subject: (\"I'm at \") + AppConfig.app.name + '!. ' + (\n        'Install the application and follow me!') + ' ' + AppConfig.app.url,\n      image  : AppConfig.app.image,\n      link   : AppConfig.app.url\n    };\n\n    return {\n      share: share,\n      open : open\n    };\n\n    function share(social, option) {\n      var defer = $q.defer();\n\n      function success(resp) {\n        Toast.alert({\n          title: ('Thanks'),\n          text : ('Thank you for sharing!!')\n        });\n        defer.resolve(resp);\n      }\n\n      function error(err) {\n        console.error(err);\n        defer.reject();\n      }\n\n      var detail = option ? option : message;\n\n      switch (social) {\n        case 'instagram':\n          window\n            .plugins\n            .socialsharing\n            .shareViaInstagram(message.text, message.image, message.link)\n            .then(success, error);\n          break;\n\n        case 'facebook':\n          $cordovaSocialSharing\n            .shareViaFacebook(detail.text, detail.image, detail.link)\n            .then(success, error);\n          break;\n\n        case 'twitter':\n          $cordovaSocialSharing\n            .shareViaTwitter(detail.text, detail.image, detail.link)\n            .then(success, error);\n          break;\n\n        case 'whatsapp':\n          $cordovaSocialSharing\n            .shareViaWhatsApp(detail.text, detail.image, detail.link)\n            .then(success, error);\n          break;\n\n        case 'email':\n          $cordovaSocialSharing\n            .shareViaEmail(detail.title, detail.subject ? detail.subject : detail.title)\n            .then(success, error);\n          break;\n      }\n\n      return defer.promise;\n    }\n\n    function open() {\n      var modal = $ionicActionSheet\n        .show({\n          buttons      : [{\n            text: '<i class=\"icon ion-social-instagram\"></i>' + ('Instagram')\n          }, {\n            text: '<i class=\"icon ion-social-facebook\"></i>' + ('Facebook')\n          }, {\n            text: '<i class=\"icon ion-social-twitter\"></i>' + ('Twitter')\n          }, {\n            text: '<i class=\"icon ion-social-whatsapp\"></i>' + ('Whatsapp')\n          }, {\n            text: '<i class=\"icon ion-email\"></i>' + ('Email')\n          }],\n          titleText    : ('Share'),\n          cancelText   : ('Cancel'),\n          cancel       : function () {\n            return false;\n          },\n          buttonClicked: function (index) {\n            console.log(index);\n            switch (index) {\n              case 0:\n                share('instagram');\n                break;\n              case 1:\n                share('facebook');\n                break;\n              case 2:\n                share('twitter');\n                break;\n              case 3:\n                share('whatsapp');\n                break;\n              case 4:\n                share('email');\n                break;\n            }\n            modal();\n            //share(index);\n          }\n        });\n\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('starter')\n    .service('StatusBar', StatusBarFactory);\n\n  function StatusBarFactory($cordovaStatusbar) {\n\n    var TAG = 'StatusBarService';\n\n    return {\n      init: init\n    };\n\n    function init(color) {\n\n      if (window.StatusBar) {\n        $cordovaStatusbar.overlaysWebView(true);\n\n        if (window.ionic.Platform.isAndroid()) {\n          color = luminance(color, -0.4);\n        }\n        $cordovaStatusbar.styleHex(color);\n      } else {\n        console.warn('[' + TAG + ']: Unsupported platform');\n      }\n    }\n\n    function luminance(hex, lum) {\n\n      // validate hex string\n      hex = String(hex).replace(/[^0-9a-f]/gi, '');\n\n      if (hex.length < 6) {\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n      }\n\n      lum = lum || 0;\n\n      // convert to decimal and change luminosity\n      var rgb = '#', c, i;\n\n      for (i = 0; i < 3; i++) {\n        c = parseInt(hex.substr(i * 2, 2), 16);\n        c = Math.round(Math.min(Math.max(0, c + (c * lum)), 255)).toString(16);\n        rgb += ('00' + c).substr(c.length);\n      }\n      return rgb;\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular.module('starter').factory('Toast', ToastFactory);\n\n  function ToastFactory($cordovaToast, $ionicPopup) {\n\n    return {\n      alert  : alert,\n      confirm: confirm\n    };\n\n    function alert(params) {\n      if (window.cordova) {\n        $cordovaToast.show(params.text, 'short', 'bottom');\n      } else {\n        $ionicPopup.alert({\n          title   : params.title,\n          template: params.text,\n          okType  : 'button button-clear button-assertive',\n        });\n      }\n    }\n\n    function confirm(title, msg) {\n      return $ionicPopup.confirm({\n        title   : title,\n        template: msg\n      });\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('User', UserFactory);\n\n    function UserFactory($q, $cordovaDevice, ParseCloud) {\n\n        var User = Parse.User.extend({}, {\n            signIn                : function (data) {\n                var defer = $q.defer();\n                Parse.User.logIn(data.email, data.password, {\n                    success: function (currentUser) {\n                        // Update device after login\n                        if (window.cordova) {\n                            var cordovaDevice = {\n                                device  : $cordovaDevice.getDevice(),\n                                cordova : $cordovaDevice.getCordova(),\n                                model   : $cordovaDevice.getModel(),\n                                platform: $cordovaDevice.getPlatform(),\n                                uuid    : $cordovaDevice.getUUID(),\n                                version : $cordovaDevice.getVersion()\n                            }.forEach(function (value, index) {\n                                currentUser.set(index, value);\n                            });\n                            console.log('updateUser', cordovaDevice);\n                            currentUser.save();\n                        }\n                        defer.resolve(currentUser);\n                    },\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            profile               : function (userId) {\n                var defer = $q.defer();\n                var User  = new Parse.User();\n                User.get(userId);\n                new Parse.Query('UserData')\n                    .equalTo('user', userId)\n                    .first()\n                    .then(defer.resolve, defer.reject);\n                return defer.promise;\n            },\n            signUp                : function (data) {\n                var defer = $q.defer();\n                var user  = new Parse.User();\n                user.set({'name': data.name});\n                user.set({'username': data.username});\n                user.set({'email': data.email});\n                user.set({'password': data.password});\n                user.set({'roleName': 'User'});\n\n                var acl = new Parse.ACL();\n                acl.setPublicReadAccess(false);\n                acl.setPublicWriteAccess(false);\n                user.setACL(acl);\n                user.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            signInViaFacebook     : function (authData) {\n                var defer      = $q.defer();\n                var expiration = new Date();\n                expiration.setSeconds(expiration.getSeconds() + authData.authResponse.expiresIn);\n                expiration = expiration.toISOString();\n\n                var facebookAuthData = {\n                    'id'             : authData.authResponse.userID,\n                    'access_token'   : authData.authResponse.accessToken,\n                    'expiration_date': expiration\n                };\n                Parse.FacebookUtils.logIn(facebookAuthData, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            findByEmail           : function (email) {\n                return ParseCloud.run('findUserByEmail', {email: email});\n            },\n            updateWithFacebookData: function (data) {\n                var defer = $q.defer();\n                ParseCloud.run('saveFacebookPicture', {}).then(function () {\n                    var user = Parse.User.current();\n                    user.set({'email': data.email});\n                    user.set({'username': data.email});\n                    user.set({'name': data.name});\n                    user.setACL(new Parse.ACL(user));\n                    user.save(null, {\n                        success: function () {\n                            user.fetch().then(function (userFetched) {\n                                defer.resolve(userFetched);\n                            }, function (error) {\n                                defer.reject(error);\n                            });\n                        }\n                    });\n                }).catch(defer.reject);\n                return defer.promise;\n            },\n            getPublicData         : function (user) {\n                console.log(user);\n                var defer = $q.defer();\n                new Parse.Query('UserData').equalTo('user', user).first().then(function (userData) {\n                    if (userData) {\n                        defer.resolve(userData);\n                    } else {\n                        defer.reject(Parse.Promise.error({\n                            code   : 1,\n                            message: 'User Data not found'\n                        }));\n                    }\n                }, defer.reject);\n                return defer.promise;\n            },\n            recoverPassword       : function (email) {\n                var defer = $q.defer();\n                Parse.User.requestPasswordReset(email, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy               : function () {\n                var defer = $q.defer();\n                Parse.User.current().destroy().then(defer.resolve, defer.reject);\n                return defer.promise;\n            },\n            setPhoto              : function (parseFile) {\n                var defer = $q.defer();\n                var user  = Parse.User.current();\n                user.set({'photo': parseFile});\n                user.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            follow                : function (otherUser) {\n                // create an entry in the Follow table\n                var follow = new Parse.Object('UserFolow');\n                follow.set('from', Parse.User.current());\n                follow.set('to', otherUser);\n                follow.set('date', Date());\n                follow.save();\n            },\n            all                   : function (params) {\n                return ParseCloud.run('getUsers', params);\n            },\n            create                : function (data) {\n                return ParseCloud.run('createUser', data);\n            },\n            validateUsername      : function (input) {\n                var defer = $q.defer();\n                defer.resolve(true);\n\n                //ParseCloud.run('validateUsername', input).then(function (data) {\n                //    console.log(data);\n                //    if (data == true) {\n                //        defer.resolve();\n                //    } else {\n                //        defer.reject();\n                //    }\n                //});\n                return defer.promise;\n            },\n            validateEmail         : function (input) {\n                var defer = $q.defer();\n                defer.resolve(true);\n                //ParseCloud\n                //    .run('validateEmail', input)\n                //    .then(function (data) {\n                //        console.log(data);\n                //        if (data == true) {\n                //            defer.resolve();\n                //        } else {\n                //            defer.reject();\n                //        }\n                //    });\n                return defer.promise;\n            },\n            findUsername          : function (username) {\n                var defer = $q.defer();\n                new Parse.Query(this).equalTo('username', username).first({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            update                : function (params) {\n                var defer = $q.defer();\n                var user  = Parse.User.current();\n                angular.forEach(params, function (value, key) {\n                    user.set(key, value);\n                });\n                user.save({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            delete                : function (data) {\n                return ParseCloud.run('destroyUser', data);\n            },\n            fetch                 : function () {\n                var defer = $q.defer();\n                if (Parse.User.current()) {\n                    Parse.User.current().fetch().then(defer.resolve, defer.reject);\n                } else {\n                    defer.reject();\n                }\n                return defer.promise;\n            }\n\n        });\n\n        Object.defineProperty(User.prototype, 'name', {\n            get: function () {\n                return this.get('name');\n            },\n            set: function (val) {\n                this.set('name', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'username', {\n            get: function () {\n                return this.get('username');\n            },\n            set: function (val) {\n                this.set('username', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'status', {\n            get: function () {\n                return this.get('status');\n            },\n            set: function (val) {\n                this.set('status', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'gender', {\n            get: function () {\n                return this.get('gender');\n            },\n            set: function (val) {\n                this.set('gender', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'email', {\n            get: function () {\n                return this.get('email');\n            },\n            set: function (val) {\n                this.set('email', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'photo', {\n            get: function () {\n                return this.get('photo');\n            },\n            set: function (val) {\n                this.set('photo', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'photoThumb', {\n            get: function () {\n                return this.get('photoThumb');\n            },\n            set: function (val) {\n                this.set('photoThumb', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'roleName', {\n            get: function () {\n                return this.get('roleName');\n            },\n            set: function (val) {\n                this.set('roleName', val);\n            }\n        });\n\n        return User;\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name modalLanguage\n     *\n     * @description\n     * _Please update the description and restriction._\n     *\n     * @restrict A\n     * */\n\n    var path = 'app/component/ion-language';\n\n    angular\n        .module('ion-language')\n        .directive('ionLanguage', ionLanguageDirective);\n\n    function ionLanguageDirective(AppConfig, $translate, $timeout, Loading, $ionicModal) {\n        return {\n            restrict: 'E',\n            link: modalLanguageLink,\n            templateUrl: path + '/ion-language.html'\n        };\n\n        function modalLanguageLink(scope, elem, attr) {\n\n\n            scope.languages = AppConfig.locales;\n            scope.language  = scope.languages.filter(function (item) {\n                return item.code === $translate.use()\n            })[0];\n\n            console.log(scope.language);\n\n            elem.bind('click', openModal);\n\n            function openModal() {\n\n                scope.closeModal = function () {\n                    scope.modal.hide();\n                    // scope.modal.remove();\n                };\n\n\n                scope.searchValue = '';\n\n                scope.selectLanguage = function (language) {\n                    console.log(language);\n                    $translate.use(language.code);\n                    moment.locale(language.code);\n                    scope.language = language;\n                    Loading.start();\n                    scope.closeModal();\n                    $timeout(function () {\n                        Loading.end();\n                    }, 1000);\n                };\n\n                $ionicModal\n                    .fromTemplateUrl(path + '/modal-language.html', {\n                        scope: scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n\n                    });\n            }\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n\n    angular\n        .module('ion-location')\n        .factory('GeoService', GeoServiceFactory);\n\n    function GeoServiceFactory($http, $window, $cordovaGeolocation, $ionicPopup,  $timeout, $q) {\n\n        /**\n         'street_address', //indicates a precise street address.\n         'route', //indicates a named route (such as \"US 101\").\n         'intersection', //indicates a major intersection, usually of two major roads.\n         'political', //indicates a political entity. Usually, this type indicates a polygon of some civil administration.\n         'country', //indicates the national political entity, and is typically the highest order type returned by the Geocoder.\n         'administrative_area_level_1', //indicates a first-order civil entity below the country level. Within the United States, these administrative levels are states. Not all nations exhibit these administrative levels.\n         'administrative_area_level_2', //indicates a second-order civil entity below the country level. Within the United States, these administrative levels are counties. Not all nations exhibit these administrative levels.\n         'administrative_area_level_3', //indicates a third-order civil entity below the country level. This type indicates a minor civil division. Not all nations exhibit these administrative levels.\n         'colloquial_area', //indicates a commonly-used alternative name for the entity.\n         'locality', //indicates an incorporated city or town political entity.\n         'sublocality', //indicates an first-order civil entity below a locality\n         'neighborhood', //indicates a named neighborhood\n         'premise', //indicates a named location, usually a building or collection of buildings with a common name\n         'subpremise', //indicates a first-order entity below a named location, usually a singular building within a collection of buildings with a common name\n         'postal_code', //indicates a postal code as used to address postal mail within the country.\n         'natural_feature', //indicates a prominent natural feature.\n         'airport', //indicates an airport.\n         'park', //indicates a named park.\n         'point_of_interest', //indicates a named point of interest. Typically, these \"POI\"s are prominent local entities that don't easily fit in another category such as \"Empire State Building\" or \"Statue of Liberty.\"\n\n         //In addition to the above, address components may exhibit the following types:\n\n         'post_box', //indicates a specific postal box.\n         'street_number', //indicates the precise street number.\n         'floor indicates', //the floor of a building address.\n         'room indicates'; //the room of a building address.'\n         */\n        var options             = {\n            types: ['geocode']\n        };\n        var autocompleteService = new $window.google.maps.places.AutocompleteService();\n        var detailsService      = new $window.google.maps.places.PlacesService($window.document.createElement('input'),\n            options);\n        var componentForm       = {\n            street_number: 'long_name',\n            //number\n            route: 'long_name',\n            //street\n            locality: 'long_name',\n            // district\n            sublocality: 'long_name',\n            // district\n            neighborhood: 'long_name',\n            //state\n            political: 'long_name',\n            //state\n            administrative_area_level_1: 'long_name',\n            //state\n            country: 'long_name',\n            //country\n            postal_code: 'long_name' //zipcode\n        };\n        var componentFormName   = {\n            street_number: 'number',\n            //number\n            route: 'street',\n            //street\n            locality: 'city',\n            // district\n            administrative_area_level_1: 'state',\n            //state\n            country: 'country',\n            //country\n            postal_code: 'zipcode',\n            //zipcode\n            neighborhood: 'district' //zipcode\n        };\n\n        var data = {\n            coords: {},\n            src: ''\n        };\n\n\n        return {\n            src: src,\n            getDetails: getDetails,\n            searchAddress: searchAddress,\n            parseAddress: parseAddress,\n            findMe: findMe\n        };\n\n        function getLocation() {\n            // Pega a Localização da Pessoa\n            var defer = $q.defer();\n\n            if (data.location) {\n                $timeout(function () {\n                    defer.resolve(data.location);\n                }, 1000);\n            } else {\n                var posOptions = {\n                    timeout: 10000,\n                    enableHighAccuracy: false\n                };\n                $cordovaGeolocation\n                    .getCurrentPosition(posOptions)\n                    .then(function (position) {\n                        // console.log('Fez a requisição', position);\n                        data.location = {\n                            latitude: position.coords.latitude,\n                            longitude: position.coords.longitude\n                        };\n                        defer.resolve(data.location);\n                    }, function (err) {\n                        // error\n                        // console.log('Error na geolocalização', err);\n                        $ionicPopup.alert({\n                            title: 'Geo Error',\n                            template: err.message\n                        });\n                        defer.reject(err);\n                    });\n            }\n\n\n            return defer.promise;\n        }\n\n\n        function findMe() {\n            var defer = $q.defer();\n\n            getLocation()\n                .then(function (pos) {\n                    console.log(pos);\n                    getGoogleAddress(pos.latitude, pos.longitude)\n                        .success(function (resp) {\n                            resp.geolocation = pos;\n                            console.log(resp);\n                            defer.resolve(resp);\n                        })\n                        .error(logErr);\n                });\n            return defer.promise;\n        }\n\n\n        function logErr(error) {\n            console.log(error);\n        }\n\n        function getGoogleAddress(lat, lng) {\n            return $http.get('http://maps.google.com/maps/api/geocode/json?latlng=' + lat + ',' + lng + '&sensor=true')\n                        .success(function (data) {\n                            data.address_normal = data.results[0].formatted_address;\n                            data.address        = address(data.results[0].address_components);\n                            data.src            = imagem(lat, lng, 18, 500, 300);\n                        });\n        }\n\n        function address(data) {\n            if (!data) {\n                return false;\n            } else {\n                return {\n                    numero: data[0].short_name,\n                    rua: data[1].long_name,\n                    bairro: data[2].short_name,\n                    cidade: data[3].short_name,\n                    estado: data[5].long_name,\n                    uf: data[5].short_name,\n                    pais: data[6].long_name,\n                    paisCode: data[6].short_name,\n                    cep: data[7].short_name\n                };\n            }\n\n        }\n\n        function imagem(lat, lng, zoom, w, h) {\n            return 'http://maps.google.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom + '&size=' +\n                w + 'x' + h + '&maptype=roadmap&sensor=true';\n        }\n\n        function parseAddress(place) {\n            console.log('parseAddress', place);\n            var address = {\n                resume: '',\n                geo: {\n                    latitude: place.geometry.location.H,\n                    longitude: place.geometry.location.L\n                }\n            };\n            var image   = src(address.geo.latitude, address.geo.longitude, 16, 900, 200);\n\n            for (var i = 0; i < place.address_components.length; i++) {\n                var addressType = place.address_components[i].types[0];\n                if (componentForm[addressType]) {\n                    var val                                 = place.address_components[i][componentForm[addressType]];\n                    address[componentFormName[addressType]] = val;\n                }\n            }\n            address.street = address.street + ', ' + address.number;\n            address.image  = image;\n            address.resume = address.street + ' - ' + address.city + ', ' + address.state + ', ' + address.country;\n            return address;\n        }\n\n        function searchAddress(input) {\n            var deferred = $q.defer();\n            autocompleteService.getQueryPredictions({\n                input: input\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function getDetails(placeId) {\n            var deferred = $q.defer();\n            detailsService.getDetails({\n                placeId: placeId\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function src(lat, lng, zoom, w, h) {\n            console.log('src latitude', lat, lng, zoom, w, h);\n\n            var link = 'http://maps.googleapis.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom +\n                '&scale=1&size=' + w + 'x' + h +\n                '&maptype=roadmap&format=jpg&visual_refresh=true&markers=size:small%7Ccolor:0xff2600%7Clabel:0%7C' + lat +\n                ',' + lng + '&sensor=true';\n            console.log(link);\n            return link;\n        }\n\n    }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-location')\n    .directive('ionLocation', ionLocationDirective);\n\n  function ionLocationDirective($ionicModal, GeoService) {\n    return {\n      restrict: 'A',\n      scope: {\n        location: '='\n      },\n      link: ionLocationLink\n    };\n\n    function ionLocationLink($scope, element) {\n\n      function init() {\n        $scope.search = {};\n        $scope.search.suggestions = [];\n        $scope.search.query = '';\n      }\n\n\n      function selectPlace(place_id) {\n        GeoService\n          .getDetails(place_id)\n          .then(function (location) {\n\n            console.info(location);\n\n            var address = GeoService\n              .parseAddress(location);\n\n            $scope.location = {\n              number: address.number,\n              street: address.street,\n              district: address.district,\n              city: address.city,\n              state: address.state,\n              country: address.country,\n              zipcode: address.zipcode,\n              coords: address.geo,\n              image: address.image,\n              resume: address.resume\n            };\n\n            console.log($scope.location);\n            $scope.closeModalLocation();\n          });\n      }\n\n      element.bind('focus', function () {\n        init();\n        console.log('Start');\n\n        $scope.findMe = findMe;\n        $scope.choosePlace = choosePlace;\n\n\n        $scope.modalLocation = $ionicModal.fromTemplate('<ion-modal-view>' +\n          '<ion-header-bar class=\"bar bar-positive item-input-inset\">' +\n          '<button class=\"button button-clear button-icon ion-pinpoint\" ng-click=\"findMe()\"></button>' +\n          '<label class=\"item-input-wrapper\">' +\n          '<input type=\"search\" ng-model=\"search.query\" placeholder=\"{{ \\'Search\\' | translate }}\"></label>' +\n          '<button class=\"button button-clear button-icon ion-ios-close-empty\" ng-click=\"closeModalLocation()\"></button>' +\n          '</ion-header-bar>' +\n          '<ion-content padding=\"false\">' +\n          '<ion-list>' +\n          '<ion-item ng-repeat=\"suggestion in search.suggestions\" ng-click=\"choosePlace(suggestion)\" ng-bind=\"suggestion.description\"></ion-item>' +\n          '<ion-item class=\"item-divider\"><img src=\"https://developers.google.com/maps/documentation/places/images/powered-by-google-on-white.png\"alt=\"\"/></ion-item>' +\n          '</ion-list>' +\n          '</ion-content>' +\n          '</ion-modal-view>', {\n            scope: $scope,\n            focusFirstInput: true\n          }\n        );\n\n        $scope.modalLocation.show();\n\n        $scope.closeModalLocation = function () {\n          $scope.modalLocation.hide();\n          $scope.modalLocation.remove();\n        };\n\n        GeoService\n          .searchAddress('São Paulo')\n          .then(function (result) {\n            console.log(result);\n            $scope.search.suggestions = result;\n          });\n\n\n        $scope.$watch('search.query', function (newValue) {\n          if (newValue) {\n            GeoService\n              .searchAddress(newValue)\n              .then(function (result) {\n                console.log(result);\n                $scope.search.suggestions = result;\n              });\n          }\n        });\n\n\n        function findMe() {\n          GeoService\n            .findMe()\n            .then(function (location) {\n              console.log(location);\n\n              selectPlace(location.results[0].place_id);\n\n            });\n        }\n\n        function choosePlace(place) {\n          selectPlace(place.place_id);\n\n        }\n\n      });\n\n    }\n  }\n})();\n\n(function () {\n\n    angular\n        .module('starter')\n        .factory('FeedbackModal', FeedbackModalFactory);\n\n    function FeedbackModalFactory($q, AppConfig, GalleryFeedback, $rootScope, GalleryFeedbackForm, $ionicModal, Toast) {\n        var path = AppConfig.path;\n\n        return {\n            modal: modal\n        };\n        function modal(gallery) {\n            var $scope            = $rootScope.$new();\n            $scope.formFields     = GalleryFeedbackForm.form;\n            $scope.submitFeedback = submitFeedback;\n            $scope.closeModal     = closeModal;\n            $scope.form           = {\n                photogramId: gallery.id,\n                subject    : 'complaint'\n            };\n\n            function submitFeedback() {\n                var dataForm = angular.copy($scope.form);\n                GalleryFeedback.create(dataForm).then(function (resp) {\n                    closeModal();\n                });\n            }\n\n\n            function closeModal() {\n                $scope.modal.hide();\n                $scope.modal.remove();\n                delete $scope.modal;\n            }\n\n            $ionicModal\n                .fromTemplateUrl('app/main/feedback/feedback-modal.html', {\n                    scope          : $scope,\n                    focusFirstInput: true\n                })\n                .then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n        }\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .factory('GalleryFeedbackForm', GalleryFeedbackFormFactory);\n\n    function GalleryFeedbackFormFactory($translate) {\n\n        var form = [{\n            key: 'title',\n            type: 'input',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('FEEDBACK.TITLE'),\n                required: true\n            }\n        }, {\n            key: 'subject',\n            type: 'select',\n            templateOptions: {\n                label: $translate.instant('FEEDBACK.SUBJECT'),\n                options: [{\n                    'label': $translate.instant('FEEDBACK.COMPLAINT'),\n                    'id': 'complaint',\n                }, {\n                    'label': $translate.instant('FEEDBACK.BUG'),\n                    'id': 'bug',\n                }, {\n                    'label': $translate.instant('FEEDBACK.SUGGESTION'),\n                    'id': 'suggestion',\n                }],\n                valueProp: 'id',\n                labelProp: 'label',\n                icon: 'icon-list',\n                iconPlaceholder: true\n            }\n        }, {\n            key: 'status',\n            type: 'textarea',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('FEEDBACK.MESSAGE'),\n                icon: 'ion-quote',\n                required: true,\n                iconPlaceholder: true\n            }\n        }];\n\n        return {\n            form: form\n        };\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  \n  angular.module('app.main').directive('feedback', feedbackDirective);\n\n  function feedbackDirective($ionicModal, AppConfig, PhotogramFeedback, PhotogramFeedbackForm, $state) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        photogram: '@'\n      },\n      template: '',\n      link: function (scope, elem, attr) {\n\n        scope.link = link;\n        scope.submitFeedback = submitFeedback;\n        scope.closeModal = closeModal;\n        elem.bind('click', openModal);\n\n        function init() {\n          scope.form = {\n            photogramId: scope.photogram\n          };\n          scope.formFields = PhotogramFeedbackForm.form;\n        }\n\n        function openModal() {\n\n          init();\n          $ionicModal.fromTemplateUrl('app/main/feedback/feedback-modal.html', {\n              scope: scope,\n              focusFirstInput: true\n            })\n            .then(function (modal) {\n              scope.modal = modal;\n              scope.modal.show();\n            });\n        }\n\n        function link(sref) {\n          $state.go(sref)\n          scope.closeModal();\n        }\n\n        function submitFeedback() {\n          var dataForm = angular.copy(scope.form);\n          PhotogramFeedback\n            .submit(dataForm)\n            .then(function (resp) {\n              console.log(resp);\n              init();\n              scope.closeModal();\n            });\n        }\n\n\n        function closeModal() {\n          scope.modal.hide();\n          scope.modal.remove();\n        }\n\n      }\n    };\n  }\n\n})();\n\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name LoadingCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.main')\n        .controller('LoadingCtrl', LoadingController);\n\n    function LoadingController($rootScope, AppConfig, $state) {\n        var user = $rootScope.currentUser;\n        var intro = window.localStorage['walkthrough'];\n\n        if (intro !== 'true') {\n            $state.go('walkthrough', {clear: true});\n        } else {\n            if (user) {\n                console.log(user);\n                if (user.name) {\n                    $state.go(AppConfig.routes.home, {\n                        clear: true\n                    });\n                } else {\n                    $state.go('user.avatar', {\n                        clear: true\n                    });\n                }\n            } else {\n                $state.go(AppConfig.routes.login, {\n                    clear: true\n                });\n            }\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('MainTabCtrl', MainTabController);\n\n    function MainTabController($scope, ActionSheet, $q, Gallery, PhotoFilter, ParseFile, $ionicModal, Loading) {\n        var vm       = this;\n        var tempImage;\n        vm.postPhoto = function () {\n            ActionSheet\n                .image()\n                .then(function (image) {\n                    tempImage = image;\n                    //return PhotoFilter.load(image);\n                    return image;\n                })\n                .then(modalPost)\n                .then(function (form) {\n                    //console.log('Cadastra na Galeria', form);\n                    Loading.start();\n                    ParseFile.upload({base64: form.image}).then(function (imageUploaded) {\n                        form.image = imageUploaded;\n                        Gallery.create(form).then(function (item) {\n                            console.log(item);\n                            $scope.$emit('photoInclude', item);\n                            Loading.end();\n                        });\n                    });\n                });\n\n\n            function modalPost(image) {\n                var defer    = $q.defer();\n                $scope.image = image;\n                $scope.form  = {\n                    title: ''\n                };\n\n                $scope.editFilter = function () {\n                    PhotoFilter.load(tempImage).then(function (image) {\n                        $scope.image = image;\n                    });\n                };\n\n                $ionicModal\n                    .fromTemplateUrl('app/main/share/share-modal.html', {\n                        scope          : $scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        $scope.modalFilter = modal;\n                        $scope.modalFilter.show();\n                    });\n\n\n                $scope.close = function () {\n                    $scope.modalFilter.hide();\n                };\n\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n\n                $scope.submit = function () {\n                    var form   = angular.copy($scope.form);\n                    form.image = $scope.image;\n                    tempImage  = '';\n                    $scope.close();\n                    defer.resolve(form);\n                };\n\n                return defer.promise;\n            }\n        };\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('AccountCtrl', AccountController);\n\n    function AccountController(User) {\n        var vm       = this;\n        vm.changeTab = changeTab;\n\n        User.getPublicData(Parse.User.current()).then(function (user) {\n            console.log('Profile', user.attributes);\n            vm.user = user;\n        });\n\n        init();\n        changeTab('grid');\n\n        function changeTab(tab) {\n            if (tab === 'list') {\n                vm.tab = {\n                    list: true,\n                    grid: false\n                };\n            } else {\n                vm.tab = {\n                    list: false,\n                    grid: true\n                };\n            }\n        }\n\n        function init() {\n            vm.data  = {\n                total    : false,\n                galleries: []\n            };\n            vm.page  = 0;\n            vm.empty = false;\n            vm.more  = false;\n            getFollower();\n        }\n\n        function getFollower() {\n            vm.loadingFollowers = true;\n            vm.loadingFollowing = true;\n            vm.loadingPhotos    = true;\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main').controller('ActivityCtrl', ActivityController);\n\n    function ActivityController($scope, GalleryActivity) {\n        var vm         = this;\n        vm.params      = {};\n        vm.params.page = 1;\n        vm.data        = [];\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                vm.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            vm.params.page = page;\n        }\n\n        function loadFeed() {\n\n            GalleryActivity.feed(vm.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage(vm.params.page + 1);\n                setGalleries(data);\n\n                if (vm.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.$broadcast('scroll.infiniteScrollComplete');\n                $scope.$broadcast('scroll.refreshComplete');\n\n            }).catch(function () {\n                if (vm.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        vm.onLoadMore = function () {\n            loadFeed();\n        };\n\n        vm.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        vm.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        vm.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        vm.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        vm.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        vm.onReload = function () {\n            vm.params.page = 0;\n            vm.data        = [];\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('HomeCtrl', HomeController);\n\n    function HomeController() {\n        var vm = this;\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('app.main')\n        .controller('SearchCtrl', SearchCtrl);\n\n    function SearchCtrl($scope, $filter, $ionicLoading, $state) {\n\n\n        $scope.onSearch = function () {\n\n            if ($scope.params.search !== '') {\n                $scope.params.page   = 0;\n                $scope.places        = [];\n                $scope.params.search = $filter('lowercase')($scope.params.search);\n            }\n        };\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').controller('SearchMapCtrl', SearchMapController);\n\n    function SearchMapController($scope, $rootScope, $ionicLoading, $ionicModal,\n                                 $state, $stateParams, $translate, $timeout, $localStorage, Toast, Gallery, Geolocation, Dialog) {\n\n\n        $scope.maxRating = 5;\n        $scope.storage   = $localStorage;\n        $scope.params    = {\n            location  : null,\n            categoryId: $stateParams.categoryId,\n            distance  : 100.00,\n            page      : 0,\n        };\n        $scope.places    = [];\n\n        var markers = [];\n\n        function setPosition(lat, lng) {\n            return new window.plugin.google.maps.LatLng(lat, lng);\n        }\n\n        var sideMenu           = document.getElementById('side-menu');\n        var div                = document.getElementById('map_canvas');\n        var map;\n        var isLoadingViewShown = false;\n        var isMapViewShown     = false;\n        var isErrorViewShown   = false;\n\n        if (window.cordova) {\n            map = window.plugin.google.maps.Map.getMap(div);\n            // Capturing event when Map load are ready.\n            map.addEventListener(plugin.google.maps.event.MAP_READY, function () {\n                map.setMyLocationEnabled(true);\n                $timeout(function () {\n                    map.refreshLayout();\n                }, 1000)\n\n                var mapType = plugin.google.maps.MapTypeId.ROADMAP\n                if ($scope.storage.mapType === 'satellite') {\n                    mapType = plugin.google.maps.MapTypeId.SATELLITE;\n                }\n                map.setMapTypeId(mapType);\n\n                showLoading();\n\n                Geolocation.getCurrentPosition().then(function (position) {\n\n                    $scope.params.location = {\n                        latitude : position.coords.latitude,\n                        longitude: position.coords.longitude\n                    }\n\n                    loadGallerys();\n                }, function (error) {\n\n                    $scope.params.location = null;\n\n                    var errorMessage;\n\n                    if (error.code === 1 || error.code === 3) {\n                        errorMessage = trans.errorGpsDisabledText;\n                    } else {\n                        errorMessage = trans.errorLocationMissingText;\n                    }\n                    Dialog.alert(errorMessage);\n\n                });\n            });\n        }\n\n        function showLoading() {\n            isLoadingViewShown = true;\n            isMapViewShown     = true;\n            isErrorViewShown   = false;\n        }\n\n        function showMap() {\n            isMapViewShown     = true;\n            isLoadingViewShown = false;\n            isErrorViewShown   = false;\n            $ionicLoading.hide();\n        }\n\n        function setMapPosition(position) {\n            map.moveCamera({\n                target: setPosition(position.lat, position.lng),\n                zoom  : 16,\n            });\n        }\n\n        function animateCameraWithBounds(points) {\n\n            if (points.length > 0) {\n                var latLngBounds = new plugin.google.maps.LatLngBounds(points);\n\n                map.moveCamera({\n                    target: latLngBounds\n                });\n            }\n        }\n\n        function setMapZoomToFit() {\n            var points = [];\n            for (var i = 0; i < $scope.places.length; i++) {\n                var place    = $scope.places[i];\n                var position = setPosition(place.latitude, place.longitude);\n                points.push(position);\n            }\n            points.push(setPosition(\n                $scope.params.location.latitude,\n                $scope.params.location.longitude));\n\n            animateCameraWithBounds(points);\n        }\n\n        function setGallerys(places) {\n            $scope.places = places;\n\n            for (var i = 0; i < places.length; i++) {\n\n                var place = places[i];\n\n                var icon = '#E84545';\n\n                if (place.category.get('icon')) {\n                    icon = {\n                        url : place.category.get('icon').url(),\n                        size: {\n                            width : 32,\n                            height: 32,\n                        }\n                    }\n                }\n\n                map.addMarker({\n                    place      : place,\n                    position   : setPosition(place.latitude, place.longitude),\n                    title      : place.title,\n                    icon       : icon,\n                    animation  : plugin.google.maps.Animation.DROP,\n                    styles     : {\n                        maxWidth: '80%'\n                    },\n                    snippet    : place.description,\n                    placeId    : place.id,\n                    markerClick: function (marker) {\n                        marker.showInfoWindow();\n                    },\n                    infoClick  : function (marker) {\n                        $state.go('app.place', {placeId: marker.get('placeId')});\n                    }\n                }, function (marker) {\n                    markers.push(marker);\n                });\n            }\n        }\n\n        function loadGallerys() {\n\n            Gallery.all($scope.params).then(function (places) {\n                setGallerys(places);\n                showMap();\n\n                if (places.length === 0) {\n                    Dialog.alert(trans.placesNotFoundText);\n                } else {\n                    setMapZoomToFit();\n                }\n\n            }, function () {\n                Toast.show(trans.errorText);\n            });\n        }\n\n        function removeGallerys() {\n            $scope.places = [];\n        }\n\n        function removeMarkers() {\n            for (var i = 0; i < markers.length; i++) {\n                markers[i].remove();\n            }\n        };\n\n        $scope.onSearchGallerys = function () {\n\n            map.getCameraPosition(function (camera) {\n\n                $scope.params.location.latitude  = camera.target.lat;\n                $scope.params.location.longitude = camera.target.lng;\n\n                showLoading();\n                removeMarkers();\n                removeGallerys();\n                loadGallerys();\n            });\n        }\n\n        $scope.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        $scope.showMap = function () {\n            return isMapViewShown;\n        };\n\n        $scope.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        $scope.onReload = function () {\n            //showLoading();\n            //loadGallerys();\n        };\n\n        $scope.onGalleryClicked = function (place) {\n            $scope.closeGallerysModal();\n\n            for (var i = 0; i < markers.length; i++) {\n                if (markers[i].get('place') === place) {\n                    var marker = markers[i];\n                    marker.showInfoWindow();\n                    marker.getPosition(function (position) {\n                        setMapPosition(position);\n                    });\n                }\n            }\n        };\n\n        $scope.openGallerysModal = function () {\n            map.setClickable(false);\n            // Open profile\n        };\n\n        $scope.closeGallerysModal = function () {\n            map.setClickable(true);\n        };\n\n\n        $scope.$on('$ionicView.leave', function () {\n            if (window.cordova) {\n                map.setMyLocationEnabled(false);\n                map.setClickable(false);\n                map.off();\n            }\n        });\n\n        $scope.$on('$ionicView.beforeEnter', function () {\n            if (window.cordova) {\n                // Fix issue with side menu + google maps\n                map.setMyLocationEnabled(true);\n                map.setClickable(true);\n            }\n        });\n\n        $rootScope.$on('$stateChangeStart', function (event, toState) {\n            if (toState.name !== 'tab.map') {\n                if (window.cordova) {\n                    map.clear();\n                    map.moveCamera({\n                        target: setPosition(0.0, 0.0),\n                        zoom  : 1\n                    });\n                }\n            }\n        });\n    }\n\n})();\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name UserAvatarCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.main')\n        .controller('UserAvatarCtrl', UserAvatarController);\n\n    function UserAvatarController(User, Auth, AppConfig, $rootScope, $state, Toast, UserForm) {\n        var vm          = this;\n        vm.submitAvatar = submitAvatar;\n        init();\n\n        function init() {\n            var user      = Auth.getLoggedUser();\n            vm.form       = {\n                name    : user.name,\n                email   : user.email,\n                status  : user.status,\n                gender  : user.gender,\n                img     : user.img,\n                username: user.username\n            };\n            vm.formFields = UserForm.profile;\n            console.log(vm.form);\n            console.log(vm.formFields);\n        }\n\n        function submitAvatar() {\n            console.log(vm.rForm);\n\n            if (vm.rForm.$valid) {\n                var dataForm = angular.copy(vm.form);\n                console.log(dataForm);\n\n                User.update(dataForm).then(function (resp) {\n                    console.log(resp);\n                    $rootScope.currentUser = Parse.User.current();\n                    $state.go(AppConfig.routes.home, {\n                        clear: true\n                    });\n                });\n            } else {\n                Toast.alert({\n                    title: ('Invalid form'),\n                    text : ('Fill out the fields in red')\n                });\n            }\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').directive('userAvatar', userAvatarDirective);\n\n    function userAvatarDirective(ActionSheet, Loading, ParseFile, User) {\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function ($scope, elem) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var tempImage;\n\n                    ActionSheet\n                        .image()\n                        .then(function (image) {\n                            tempImage = image;\n                            //return PhotoFilter.load(image);\n                            return image;\n                        })\n                        .then(function (form) {\n                            Loading.start();\n                            ParseFile.upload({base64: form}).then(function (imageUploaded) {\n                                User.setPhoto(imageUploaded).then(function (user) {\n                                    $scope.ngModel = user;\n                                    Loading.end();\n                                });\n                            });\n                        });\n                }\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main').controller('UserLoginCtrl', UserLoginController);\n\n    function UserLoginController(AppConfig, UserForm, $rootScope, Auth, Loading, $state, Toast, User) {\n        var vm         = this;\n        vm.formFields  = UserForm.login;\n        vm.routeLogged = AppConfig.routes.home;\n        vm.submitLogin = submitLogin;\n        vm.facebook    = facebook;\n\n        init();\n\n        function init() {\n            vm.form = {\n                username: '',\n                password: ''\n            };\n        }\n\n        function submitLogin(rForm, data) {\n\n            var form = angular.copy(data);\n            if (rForm.$valid) {\n                Loading.start();\n\n                console.log(form);\n                Auth.logIn(form).then(function (data) {\n                    console.log(data, data.attributes);\n                    $rootScope.currentUser = data;\n                    console.log(Auth.getLoggedUser().name);\n                    if (Auth.getLoggedUser()) {\n                        $state.go(vm.routeLogged, {\n                            clear: true\n                        });\n                    } else {\n                        $state.go('useravatar', {\n                            clear: true\n                        });\n                    }\n                    Loading.end();\n                }).catch(function (resp) {\n                    Toast.alert({\n                        title: 'Ops',\n                        text : resp.message\n                    });\n                    Loading.end();\n                });\n            } else {\n                return false;\n            }\n        }\n\n        function facebook() {\n            Loading.start();\n            User\n                .facebookLogin()\n                .then(function (resp) {\n                    console.log(resp);\n\n                    Loading.end();\n                    switch (resp.status) {\n                        case 0:\n                            // logado\n                            $state.go(AppConfig.routes.home, {\n                                clear: true\n                            });\n                            break;\n                        case 1:\n                            // novo user\n                            $state.go('useravatar', {\n                                clear: true\n                            });\n                            break;\n                        case 2:\n                            // merge\n                            $state.go('usermerge', {\n                                clear: true\n                            });\n                            break;\n                    }\n                })\n                .catch(function () {\n                    Loading.end();\n                    Toast.alert({\n                        title: 'Ops',\n                        text : ('Facebook error')\n                    });\n                });\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name UserMergeCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.main')\n        .controller('UserMergeCtrl', UserMergeController);\n\n    function UserMergeController(Auth, $rootScope, AppConfig, Facebook, $state, Toast, UserForm) {\n        var vm        = this;\n        vm.formFields = UserForm.register;\n\n        init();\n        function init() {\n            if ($rootScope.tempUser) {\n                vm.form = {\n                    username: $rootScope.tempUser.attributes.email,\n                    password: ''\n                };\n            } else {\n                $state.go('user.intro', {clear: true});\n            }\n        }\n\n        vm.submit = function (rForm, form) {\n\n            console.log(rForm);\n            console.table(form);\n            if (vm.form.password !== '') {\n                console.log(form);\n                Auth.logIn(form).then(function (user) {\n                    console.log(user);\n                    $rootScope.currentUser = user;\n                    if (Auth.getLoggedUser()) {\n                        Facebook.link(Parse.User.current()).then(function (resp) {\n                            console.log(resp);\n                            $state.go(AppConfig.routes.home, {\n                                clear: true\n                            });\n                        }).catch(function (resp) {\n                            console.log(resp);\n                            Toast.alert({\n                                title: 'Ops',\n                                text : resp.message\n                            });\n                        });\n                    }\n\n\n                }).catch(function (resp) {\n                    Toast.alert({\n                        title: 'Ops',\n                        text : resp.message\n                    });\n                });\n            } else {\n                Toast.alert({\n                    title: ('Invalid form'),\n                    text : ('Please enter your email')\n                });\n            }\n\n        };\n\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name recoveryPass\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict E\n   * */\n\n  angular\n    .module('app.main')\n    .directive('recoveryPass', recoveryPassDirective);\n\n  function recoveryPassDirective(User, $ionicPopup, Loading, Toast) {\n    return {\n      restrict: 'A',\n      scope: {\n        login: '@',\n        register: '@',\n      },\n      link: function ($scope, elem) {\n\n        elem.bind('click', openModal);\n\n        function openModal() {\n\n          $scope.form = {\n            recovery: ''\n          };\n\n          $scope.erro = '';\n\n          $scope.text = {\n            button: (''),\n            input: ('Email')\n          };\n\n          $ionicPopup\n            .show({\n              scope: $scope,\n              template: '<div class=\"popup-recovery\"><form name=\"form.recovery\" form-manager><label class=\"item item-input\"><i class=\"icon ion-email placeholder-icon\"></i><input type=\"email\" ng-model=\"email\" id=\"email\" name=\"email\" placeholder=\"{{ text.input }}\" required ng-maxlength=\"80\"></label><span class=\"error-msg\">{{erro}}</span></form></div>',\n              title: ('A new password will be sent to your e-mail address'),\n              buttons: [{\n                text: ('Cancel'),\n                type: 'button-calm'\n              }, {\n                text: ('Send'),\n                type: 'button-positive',\n                onTap: function (e) {\n                  if ($scope.form.recovery.$valid) {\n                    return $scope.form.recovery.email.$viewValue;\n                  } else {\n                    //não permite o usuário fechar até ele digitar o email\n                    e.preventDefault();\n                    $scope.erro = ('Invalid Email');\n                  }\n                }\n              }]\n            })\n            .then(function (res) {\n              if (!angular.isUndefined(res)) {\n                var email = res;\n\n                console.log(res);\n\n                Loading.start();\n\n                User\n                  .forgot(email)\n                  .then(function (resp) {\n                    console.log(resp);\n                    Toast.alert({\n                      login: ('Forgot your password'),\n                      text: ('Access your accout mail')\n                    });\n                    Loading.end();\n                  })\n                  .catch(function (resp) {\n                    Toast.alert({\n                      login: 'Ops',\n                      text: resp\n                    });\n                    Loading.end();\n                  });\n              }\n            });\n\n        }\n      }\n    };\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name UserRecoveryPassCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.main')\n    .controller('UserRecoveryPassCtrl', UserRecoveryPassController);\n\n  function UserRecoveryPassController(User, Toast) {\n    var vm = this;\n    vm.form = {};\n    vm.submitForgot = submitForgot;\n\n    function submitForgot() {\n      User\n        .forgot(vm.form)\n        .then(function (resp) {\n          console.log(resp);\n        })\n        .catch(function (resp) {\n          Toast.alert('Ops', resp);\n        });\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .controller('UserRegisterCtrl', UserRegisterController);\n\n    function UserRegisterController($state, UserForm, $rootScope, Toast, Loading, User) {\n        var vm            = this;\n        vm.formFields     = UserForm.register;\n        vm.submitRegister = submitRegister;\n\n        init();\n\n        function init() {\n            vm.form = {\n                email   : '',\n                password: ''\n            };\n        }\n\n        function submitRegister(rForm, data) {\n\n            if (rForm.$valid) {\n                Loading.start();\n                var form = angular.copy(data);\n                User.signUp(form).then(function (resp) {\n                    console.log(resp);\n\n                    // After register, login\n                    User.signIn({\n                        email   : form.email,\n                        password: form.password\n                    }).then(function (data) {\n                        console.log(data);\n                        $rootScope.currentUser = Parse.User.current();\n                        Loading.end();\n                        $state.go('user.avatar', {\n                            clear: true\n                        });\n                    }).catch(function (resp) {\n                        console.log(resp);\n                        Loading.end();\n                        Toast.alert({\n                            title: 'Ops',\n                            text : resp.message\n                        });\n                    });\n                })\n                    .catch(function (resp) {\n                        console.log(resp);\n                        Loading.end();\n                        Toast.alert({\n                            title: 'Ops',\n                            text : resp.message\n                        });\n                    });\n            }\n        }\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .controller('WalkthroughCtrl', WalkthroughController);\n\n    function WalkthroughController($ionicSlideBoxDelegate, $translate) {\n        var vm              = this;\n        var currentPlatform = window.ionic.Platform.platform();\n        vm.slideIndex       = 0;\n\n        vm.slideChanged = function (index) {\n            vm.slideIndex = index;\n        };\n        vm.next         = function () {\n            $ionicSlideBoxDelegate.next();\n        };\n        vm.previous     = function () {\n            $ionicSlideBoxDelegate.previous();\n        };\n\n        if (currentPlatform) {\n            vm.device = (currentPlatform === 'android') ? 'android' : 'iphone';\n        } else {\n            vm.device = 'android';\n        }\n\n        vm.slides = [{\n            top: $translate.instant('INTRO.STEP1'),\n            img: 'img/intro1.jpg'\n        }, {\n            top: $translate.instant('INTRO.STEP2'),\n            img: 'img/intro2.jpg'\n        }, {\n            top: $translate.instant('INTRO.STEP3'),\n            img: 'img/intro3.jpg'\n        }, {\n            top: $translate.instant('INTRO.STEP4'),\n            img: 'img/intro4.jpg'\n        }, {\n            top: $translate.instant('INTRO.STEP5'),\n            img: 'img/intro5.jpg'\n        }\n\n        ];\n\n\n        window.localStorage['walkthrough'] = true;\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('caman', camanDirective);\n\n  function camanDirective(CamanJs, $timeout) {\n    return {\n      restrict: 'A',\n      scope: {\n        name: '=',\n        image: '=',\n        filter: '=',\n        loading: '='\n      },\n      template: '<img ng-src=\"{{ image }}\" id=\"{{ name }}\">',\n      link: camanDirectiveLink\n    };\n\n    function camanDirectiveLink($scope) {\n      $scope.loading = true;\n      $timeout(function () {\n        CamanJs\n          .effect($scope.name, $scope.filter)\n          .then(function () {\n            $scope.loading = false;\n          });\n      }, 500);\n    }\n  }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('ionCrop', ionCropDirective);\n\n  function ionCropDirective($jrCrop, $translate, $ionicActionSheet) {\n\n    return {\n      restrict: 'A',\n      scope: {\n        ngModel: '=',\n        option: '=',\n        cropSave: '&'\n      },\n      template: '<div><input type=\"file\" id=\"browseBtn\" image=\"image\" accept=\"image/*\" style=\"display: none\"/></div>',\n      link: ionCropLink\n    };\n\n    function ionCropLink($scope, element) {\n\n      // Triggered on a button click, or some other target\n      $scope.action = action;\n      element.bind('click', getElem);\n      $scope.crop = crop;\n      angular.element(document.getElementById('browseBtn'))\n        .on('change', fileUpload);\n\n\n      function getElem() {\n        document.getElementById('browseBtn')\n          .click();\n      }\n\n      function action() {\n\n        // Show the action sheet\n        $ionicActionSheet.show({\n          buttons: [{\n            text: '<i class=\"icon ion-camera\"></i>' + ('Photo Camera')\n          }, {\n            text: '<i class=\"icon ion-images\"></i> ' + ('Photo Album')\n          }],\n          //destructiveText:  ('Delete'),\n          titleText: ('Change Image'),\n          cancelText: ('Cancel'),\n          cancel: function () {\n            // add cancel code..\n          },\n          buttonClicked: function (index) {\n\n            if (index === 0) {\n              console.log('Photo Camera');\n            }\n            // Photo Album\n            if (index === 1) {\n              document.getElementById('browseBtn')\n                .click();\n            }\n            return true;\n          }\n        });\n\n      }\n\n      function fileUpload(e) {\n\n        var file = e.target.files[0];\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n\n        reader.onload = function (event) {\n          var image = event.target.result;\n          $scope.crop(image);\n        };\n\n        // Clear input file\n        angular.element(document.getElementById('browseBtn')).val('');\n\n      }\n\n      function crop(image) {\n\n        console.log($scope.option);\n\n        $jrCrop\n          .crop({\n            url: image,\n            width: $scope.option ? $scope.option.width : 200,\n            height: $scope.option ? $scope.option.height : 200,\n            cancelText: ('Cancel'),\n            chooseText: ('Save')\n          })\n          .then(function (canvas) {\n            var image = canvas.toDataURL();\n            //            var name = $scope.option ? $scope.option.name : 'thumb';\n            //            var filename = ($scope.option ? $scope.option.name : '') + '_' + name + window.Number(new window.Date() + '.jpg';\n\n            //var file = base64ToBlob(image.replace('data:image/png;base64,', ''), 'image/jpeg');\n            //            file.name = filename;\n\n            //upload(file);\n\n            console.log(image);\n            $scope.ngModel = image;\n\n\n          });\n\n      }\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').directive('photoShare', photoShareDirective);\n\n    function photoShareDirective($state, AppConfig, $rootScope, $ionicModal, Loading, PhotogramSetting, PhotoService) {\n        return {\n            restrict: 'A',\n            link: photoShareLink,\n            template: ''\n        };\n\n        function photoShareLink($scope, elem, attr) {\n            var path = AppConfig.path;\n\n            elem.bind('click', open);\n\n            function open() {\n                console.log('Open share');\n                var option = {\n                    crop: PhotogramSetting.get('imageCrop'),\n                    allowEdit: PhotogramSetting.get('imageEdit'),\n                    filter: true,\n                    //filter: PhotogramSetting.get('imageFilter'),\n                    allowRotation: PhotogramSetting.get('imageRotation'),\n                    quality: PhotogramSetting.get('imageQuality'),\n                    correctOrientation: PhotogramSetting.get('imageEdit'),\n                    targetWidth: PhotogramSetting.get('imageWidth'),\n                    targetHeight: PhotogramSetting.get('imageHeight'),\n                    saveToPhotoAlbum: PhotogramSetting.get('imageSaveAlbum')\n                };\n                console.log(option);\n\n                PhotoService\n                    .open(option)\n                    .then(modalPost)\n                    .catch(goHome);\n            }\n\n\n            function goHome() {\n                console.warn('Deu erro');\n                $state.go('photogram.home');\n            }\n\n            function modalPost(image) {\n                $scope.closePost  = closeModalPost;\n                $scope.submitPost = submitPost;\n                $scope.form       = {\n                    title: '',\n                    location: '',\n                    photo: image,\n                    geo: false\n                };\n\n                $ionicModal\n                    .fromTemplateUrl(path + '/module/share/photogram.post.modal.html', {\n                        scope: $scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        $scope.form.photo = image;\n                        $scope.modalPost  = modal;\n                        $scope.modalPost.show();\n                    });\n\n                function closeModalPost() {\n                    $scope.modalPost.hide();\n                    $scope.modalPost.remove();\n                    Loading.end();\n                }\n\n                function submitPost(resp) {\n                    var form = angular.copy(resp);\n                    console.log(form);\n                    Loading.start();\n                    Photogram\n                        .post(form)\n                        .then(function () {\n                            closeModalPost();\n                            $rootScope.$emit('filterModal:close');\n                            $rootScope.$emit('PhotogramHome:reload');\n                        });\n                }\n            }\n        }\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('photoFilterCarousel', photoFilterCarouselDirective);\n\n  function photoFilterCarouselDirective(CamanJs, config) {\n    return {\n      restrict: 'E',\n      scope: {\n        image: '=',\n        apply: '='\n      },\n      templateUrl: config.path + '/view/photo.filter.carousel.html',\n      link: function ($scope) {\n        $scope.filters = CamanJs.filters;\n        $scope.applyFilter = $scope.apply;\n      }\n    };\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('photoFilter', photoFilterDirective);\n\n  function photoFilterDirective(config, CamanJs) {\n    return {\n      restrict: 'E',\n      scope: {\n        image: '='\n      },\n      templateUrl: config.path + '/view/photo.filter.html',\n      link: function ($scope, elem) {\n        $scope.applyFilter = function (elem, effect) {\n          $scope.loading = true;\n          if (effect) {\n            CamanJs\n              .effect(elem, effect, true)\n              .then(function (resp) {\n                $scope.loading = false;\n              });\n          }\n        };\n      }\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n\n  angular\n    .module('ion-photo')\n    .factory('CamanJs', CamanJsFactory);\n\n  function CamanJsFactory($q) {\n    var Caman = window.Caman;\n    var filters = [\n      'normal',\n      'vintage',\n      'lomo',\n      'clarity',\n      'sinCity',\n      'sunrise',\n      'crossProcess',\n      'orangePeel',\n      'love',\n      'grungy',\n      'jarques',\n      'pinhole',\n      'oldBoot',\n      'glowingSun',\n      'hazyDays',\n      'herMajesty',\n      'nostalgia',\n      'hemingway',\n      'concentrate'\n    ];\n\n    return {\n      filters: filters,\n      effect: filter,\n      reset: resetEffect\n    };\n\n    function filter(elem, effect, status) {\n      var defer = $q.defer();\n      var image = window.document.getElementById(elem);\n\n      if (image) {\n        Caman(image, function () {\n          if (effect === 'normal') {\n            this.revert();\n            this.render(function () {\n              defer.resolve(effect);\n            });\n          }\n\n          if (effect in this) {\n            this[effect]();\n\n            if (status) {\n              this.revert();\n            }\n            this.render(function () {\n              defer.resolve(effect);\n            });\n          }\n\n        });\n      } else {\n        defer.reject();\n      }\n      return defer.promise;\n    }\n\n    function resetEffect(elem) {\n\n      var defer = $q.defer();\n      var image = window.document.getElementById(elem);\n\n      Caman(image, function () {\n        this.revert();\n        defer.resolve(true);\n      });\n\n      return defer.promise;\n    }\n  }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .factory('PhotoFilter', PhotoFilterFactory);\n\n  function PhotoFilterFactory($rootScope, $q, $ionicModal) {\n\n    return {\n      load: modalFilter\n    };\n\n    function modalFilter(image) {\n      var defer    = $q.defer();\n      var template = '<ion-modal-view class=\"modal-capture\"><ion-header-bar class=\"bar-light\"><button class=\"button button-clear button-icon ion-ios-close-empty\" ng-click=\"close()\"></button><div class=\"title text-left\">{{ \\'ION-PHOTO.FILTERS\\' | translate }}</div><button class=\"button button-clear\" ng-click=\"submitCapture()\">{{ \\'ION-PHOTO.NEXT\\' | translate }}</button></ion-header-bar><ion-content scroll=\"false\"><photo-filter image=\"form.photo\"></photo-filter></ion-content></ion-modal-view>';\n      var scope    = $rootScope.$new(true);\n\n      scope.form = {\n        photo: image\n      };\n\n      scope.modal = $ionicModal.fromTemplate(template, {\n        scope: scope\n      });\n\n      scope.modal.show();\n\n\n      scope.submitCapture = function () {\n        var canvas  = window.document.getElementById('image');\n        var dataUrl = canvas.toDataURL();\n        scope.close();\n        defer.resolve(dataUrl);\n      };\n\n      scope.close = function () {\n        scope.modal.hide();\n      };\n\n      // Cleanup the modal when we're done with it!\n      scope.$on('$destroy', function() {\n        scope.modal.remove();\n      });\n\n\n      return defer.promise;\n\n    }\n\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .factory('PhotoService', PhotoServiceFactory);\n\n  function PhotoServiceFactory($ionicActionSheet, $translate, AppConfig, Share, $jrCrop, $rootScope, $ionicModal, $cordovaCamera, $cordovaCapture, $q) {\n\n    // Default Setting\n    var tempImage;\n    var cordova = window.cordova;\n    var setting = {\n      jrCrop            : true,\n      quality           : 90,\n      allowEdit         : false,\n      filter            : true,\n      correctOrientation: true,\n      targetWidth       : 300,\n      targetHeight      : 300,\n      saveToPhotoAlbum  : false,\n      allowRotation     : false,\n      aspectRatio       : 0\n    };\n\n    return {\n      open  : openModal,\n      crop  : cropModal,\n      filter: filterModal,\n      share : shareModal,\n    };\n\n    function openModal(option) {\n      var defer       = $q.defer();\n      var options     = {\n        jrCrop            : option.jrCrop ? option.jrCrop : setting.jrCrop,\n        filter            : option.filter ? option.filter : setting.filter,\n        quality           : option.quality ? option.quality : setting.quality,\n        aspectRatio       : option.aspectRatio ? option.aspectRatio : setting.aspectRatio,\n        allowRotation     : option.allowRotation ? option.allowRotation : setting.allowRotation,\n        allowEdit         : option.allowEdit ? option.allowEdit : setting.allowEdit,\n        correctOrientation: option.correctOrientation ? option.correctOrientation : setting.correctOrientation,\n        targetWidth       : option.width ? option.width : setting.targetWidth,\n        targetHeight      : option.height ? option.height : setting.targetHeight,\n        saveToPhotoAlbum  : option.saveToPhotoAlbum ? option.saveToPhotoAlbum : setting.saveToPhotoAlbum,\n        destinationType   : window.cordova ? Camera.DestinationType.DATA_URL : null,\n        encodingType      : window.cordova ? Camera.EncodingType.JPEG : null,\n        popoverOptions    : window.cordova ? CameraPopoverOptions : null,\n      };\n      var buttons     = [{\n        text: '<i class=\"icon ion-ios-camera\"></i>' + $translate.instant('ION-PHOTO.CAMERA')\n      }, {\n        text: '<i class=\"icon ion-images\"></i>' + $translate.instant('ION-PHOTO.GALLERY')\n      },\n        // {text: '<i class=\"icon ion-ios-videocam\"></i>' + $translate.instant('ION-PHOTO.VIDEO')}\n      ];\n      var actionSheet = $ionicActionSheet.show({\n        buttons      : buttons,\n        titleText    : $translate.instant('ION-PHOTO.SHARE'),\n        cancelText   : $translate.instant('ION-PHOTO.CANCEL'),\n        cancel       : buttonCancel,\n        buttonClicked: buttonClicked\n      });\n\n      function buttonClicked(index) {\n        console.log(index);\n        actionSheet();\n        capture(index, options)\n          .then(cropModal)\n          .then(filterModal)\n          .then(function (resp) {\n            console.log('Final rest');\n            defer.resolve(resp);\n          })\n          .catch(buttonCancel);\n      }\n\n\n      function buttonCancel(resp) {\n        actionSheet(resp);\n      }\n\n      return defer.promise;\n    }\n\n    function cropModal(image) {\n      var defer = $q.defer();\n\n      if (setting.jrCrop) {\n        $jrCrop\n          .crop({\n            url          : image,\n            aspectRatio  : setting.aspectRatio ? setting.aspectRatio : false,\n            allowRotation: setting.allowRotation ? setting.allowRotation : false,\n            width        : setting.width ? setting.width : setting.targetWidth,\n            height       : setting.height ? setting.height : setting.targetHeight,\n            cancelText   : $translate.instant('ION-PHOTO.CANCEL'),\n            chooseText   : $translate.instant('ION-PHOTO.CROP')\n          })\n          .then(function (canvas) {\n            defer.resolve(canvas.toDataURL());\n          })\n          .catch(defer.reject);\n      } else {\n        defer.resolve(image);\n      }\n      return defer.promise;\n    }\n\n    function shareModal(image) {\n      var template =\n            '<ion-modal-view class=\"modal-share\"> <ion-header-bar class=\"bar-dark\"> <div class=\"title\">{{ \\'ION-PHOTO.SHARE\\' | translate }}</div> <button class=\"button button-positive\" ng-click=\"modal.hide()\"> <i class=\"icon ion-arrow-right-b\"></i> </button> </ion-header-bar> <ion-content ng-cloak> <div id=\"image\"> <img ng-src=\"{{form.photo}}\"> <div class=\"title\">{{ form.title }}</div></div> <ul class=\"list\"> <li class=\"padding\"> <button ng-repeat=\"social in sociais\" ng-click=\"share(form, social)\"class=\"button button-block button-{{ social }}\"><i class=\"icon ion-social-{{ social }}\"></i>{{ social | uppercase }} </button> </li> </ul> </ion-content> </ion-modal-view>';\n\n      if (image === undefined) return false;\n      var scope   = $rootScope.$new(true);\n      var socials = [\n        'facebook',\n        'instagram',\n        'whatsapp',\n        'twitter'\n      ];\n      //image = image.attributes;\n\n      scope.sociais = socials;\n      scope.share   = shareSocial;\n      scope.form    = {\n        title: '',\n        photo: image\n      };\n\n      scope.modal = $ionicModal.fromTemplate(template, {\n        scope: scope\n      });\n      scope.modal.show();\n\n\n      function shareSocial(social, form) {\n        console.log('share', social, form);\n        PhotogramShare\n          .share(social, {\n            text : form.title,\n            image: form.photo,\n            link : AppConfig.app.url\n          });\n      }\n\n\n    }\n\n    function filterModal(image) {\n      var defer = $q.defer();\n\n      function openFilter(image) {\n        var templateFilter = '<ion-modal-view class=\"modal-capture\"><ion-header-bar class=\"bar-light\"><button class=\"button button-clear button-icon ion-ios-arrow-thin-left\" ng-click=\"cropImage()\"></button><div class=\"title\">{{ \\'ION-PHOTO.FILTERS\\' | translate }}</div><button class=\"button button-icon \" ng-click=\"submitFilter()\"><i class=\"icon ion-ios-arrow-thin-right\"></i></button></ion-header-bar><ion-content><photo-filter image=\"form.photo\"></photo-filter></ion-content></ion-modal-view>';\n        var scope          = $rootScope.$new(true);\n        scope.closeFilter  = closeFilter;\n        scope.submitFilter = submitFilter;\n        tempImage          = image;\n        scope.form         = {\n          photo: image\n        };\n\n        scope.modalFilter = $ionicModal.fromTemplate(templateFilter, {\n          scope: scope\n        });\n\n        scope.cropImage = function () {\n          scope.modalFilter.remove();\n          cropModal(tempImage)\n            .then(openFilter);\n        };\n\n        scope.modalFilter.show();\n\n        function closeFilter() {\n          defer.reject();\n          scope.modalFilter.hide();\n        }\n\n        function submitFilter() {\n          var canvas  = window.document.getElementById('image');\n          var dataUrl = canvas.toDataURL();\n          scope.modalFilter.remove();\n          defer.resolve(dataUrl);\n        }\n\n      }\n\n      openFilter(image);\n\n      return defer.promise;\n    }\n\n\n    function capture(type, options) {\n      var defer = $q.defer();\n\n      // CAMERA\n      if (type === 0) {\n        getPicture(0);\n      }\n\n      // GALLERY\n      if (type === 1) {\n        getPicture(1);\n      }\n\n      // Video\n      if (type === 2) {\n        getVideo();\n      }\n\n      function getPicture(method) {\n        if (method === 0 && cordova) options.sourceType = Camera.PictureSourceType.CAMERA;\n        if (method === 1 && cordova) options.sourceType = Camera.PictureSourceType.PHOTOLIBRARY;\n\n        if (cordova) {\n          $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n        } else {\n          var fileInput = angular.element('<input type=\"file\" accept=\"image/x-png, image/gif, image/jpeg\" max-size=\"2048\" />');\n          fileInput[0].click();\n          fileInput.on('change', function (evt) {\n            tempImage     = evt.currentTarget.files[0];\n            var reader    = new FileReader();\n            reader.onload = function (evt) {\n              defer.resolve(evt.target.result);\n            };\n            reader.readAsDataURL(tempImage);\n          });\n        }\n      }\n\n      function getVideo() {\n        $cordovaCapture\n          .captureVideo({\n            limit   : 1,\n            duration: 5\n          })\n          .then(function (mediaFiles) {\n            tempImage = mediaFiles[0].fullPath;\n            defer.resolve(tempImage);\n          }, defer.reject);\n      }\n\n\n      return defer.promise;\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .factory('Video', VideoFactory);\n\n  function VideoFactory($window, $q) {\n    var deferred = $q.defer();\n    //https://devdactic.com/capture-and-store-videos-ionic/\n    // Resolve the URL to the local file\n    // Start the copy process\n    function createFileEntry(fileURI) {\n      $window.resolveLocalFileSystemURL(fileURI, function (entry) {\n        return copyFile(entry);\n      }, fail);\n    }\n\n    // Create a unique name for the videofile\n    // Copy the recorded video to the app dir\n    function copyFile(fileEntry) {\n      var name = fileEntry.fullPath.substr(fileEntry.fullPath.lastIndexOf('/') + 1);\n      var newName = makeid() + name;\n\n      $window.resolveLocalFileSystemURL(cordova.file.dataDirectory, function (fileSystem2) {\n          fileEntry.copyTo(fileSystem2, newName, function (succ) {\n            return onCopySuccess(succ);\n          }, fail);\n        },\n        fail\n      );\n    }\n\n    // Called on successful copy process\n    // Creates a thumbnail from the movie\n    // The name is the moviename but with .png instead of .mov\n    function onCopySuccess(entry) {\n      var name = entry.nativeURL.slice(0, -4);\n      $window.PKVideoThumbnail.createThumbnail(entry.nativeURL, name + '.png', function (prevSucc) {\n        return prevImageSuccess(prevSucc);\n      }, fail);\n    }\n\n    // Called on thumbnail creation success\n    // Generates the currect URL to the local moviefile\n    // Finally resolves the promies and returns the name\n    function prevImageSuccess(succ) {\n      var correctUrl = succ.slice(0, -4);\n      correctUrl += '.MOV';\n      deferred.resolve(correctUrl);\n    }\n\n    // Called when anything fails\n    // Rejects the promise with an Error\n    function fail(error) {\n      console.log('FAIL: ' + error.code);\n      deferred.reject('ERROR');\n    }\n\n    // Function to make a unique filename\n    function makeid() {\n      var text = '';\n      var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      for (var i = 0; i < 5; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n      }\n      return text;\n    }\n\n    // The object and functions returned from the Service\n    return {\n      // This is the initial function we call from our controller\n      // Gets the videoData and calls the first service function\n      // with the local URL of the video and returns the promise\n      saveVideo: function (data) {\n        createFileEntry(data[0].localURL);\n        return promise;\n      }\n    };\n  }\n\n})();\n\n;(function() {\n\"use strict\";\n\nangular.module(\"ionic\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/directive/distanceModal.html\",\"<ion-modal-view><ion-header-bar class=\\\"bar-light\\\"><div class=\\\"buttons\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-close-empty\\\" ng-click=\\\"closeDistanceModal()\\\"></button></div><div \\nclass=\\\"title\\\">{{ \\\"chooseDistanceText\\\" | translate }}</div></ion-header-bar><ion-content><ion-list><ion-item \\nclass=\\\"item item-icon-right\\\" ng-repeat=\\\"distance in distances\\\" ng-click=\\\"onDistanceSelected(distance.val)\\\" bindonce><h2\\n bo-bind=\\\"distance.text\\\"></h2><i class=\\\"icon ion-checkmark\\\" ng-show=\\\"params.distance === distance.val\\\"></i></ion-item>\\n</ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/follow.modal.html\",\"<ion-modal-view class=\\\"modal-profile photogram-profile\\\"><ion-header-bar class=\\\"bar-positive\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\nFollow Users</div></ion-header-bar><ion-content><div class=\\\"list\\\"><div class=\\\"item item-avatar item-button-right\\\" \\nng-repeat=\\\"item in data\\\"><img ng-src=\\\"{{ ::item.src }}\\\"><h2>{{ ::item.name }}</h2><p>{{ ::item.status }}</p><button \\nclass=\\\"button\\\" ng-click=\\\"item.follow = !item.follow\\\" ng-class=\\\"item.follow ? \\'button-positive\\' : \\'button-stable\\'\\\"><i \\nclass=\\\"icon\\\" ng-class=\\\"item.follow? \\'ion-thumbsup\\' : \\'ion-plus\\'\\\"></i></button></div></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/likeDirective.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar-dark\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ ::\\'Likes\\' | translate }} ({{ ::likes.length }})</div></ion-header-bar><ion-content><div class=\\\"list step1\\\"><div \\nng-repeat=\\\"item in likes\\\" class=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ ::item.user.img }}\\\"><h2>\\n{{ ::item.user.name }}</h2><div>{{ ::item.text }}</div><p>{{ ::item.created | amTimeAgo }}</p><button \\nclass=\\\"button button-positive button-outline\\\"><i class=\\\"icon ion-ios-plus-empty\\\"></i> {{ ::\\'Follow\\' }}</button></div>\\n</div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/photoCommentDirective.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n<span translate=\\\"commentPhotoText\\\"></span>({{ ::comments.length }})</div></ion-header-bar><ion-content><ion-list \\nclass=\\\"list\\\" ng-show=\\\"comments.length\\\" can-swipe=\\\"true\\\"><ion-item ng-repeat=\\\"item in comments\\\" \\nclass=\\\"item item-avatar\\\"><img ng-src=\\\"{{ ::item.user.photo._url || \\'./img/user.png\\'}}\\\"><div class=\\\"row\\\"><h2>\\n{{ ::item.user.name }}</h2><div>{{ ::item.text }}</div></div><div class=\\\"row\\\"><p>{{ ::item.created | amTimeAgo }}</p>\\n</div><div ng-if=\\\"item.user.id === currentUser.id\\\"><ion-option-button class=\\\"button-info\\\" ng-click=\\\"editComment(item)\\\" \\ntranslate=\\\"edit\\\">Edit</ion-option-button><ion-option-button class=\\\"button-assertive\\\" ng-click=\\\"deleteComment(item)\\\" \\ntranslate=\\\"remove\\\">Remove</ion-option-button></div></ion-item></ion-list><div class=\\\"center-ico\\\" ng-if=\\\"nocomments\\\"><i \\nclass=\\\"icon ion-ios-chatbubble-outline\\\"></i><h1 translate=\\\"noComments\\\"></h1></div></ion-content><ion-footer \\nclass=\\\"step2\\\"><div class=\\\"form\\\"><formly-form model=\\\"form\\\" fields=\\\"formFields\\\" form=\\\"rForm\\\"><button \\nclass=\\\"button button-positive\\\" type=\\\"button\\\" ng-click=\\\"submitComment(rForm, form)\\\"><i class=\\\"icon ion-arrow-right-b\\\">\\n</i></button></formly-form></div></ion-footer></ion-modal-view>\");\n$templateCache.put(\"app/directive/photoGridDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" \\non-refresh=\\\"onReload()\\\"></ion-refresher><div class=\\\"row animated fadeIn\\\" ng-if=\\\"$index % 3 === 0\\\" \\nng-repeat=\\\"image in data\\\"><div class=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index < data.length\\\"><img ng-if=\\\"profile\\\" \\nprofile-modal user=\\\"data[$index].user.obj\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"> <img \\nng-if=\\\"!profile\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 1 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 1].user.obj\\\" \\nng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 2 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 2].user.obj\\\" \\nng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"></div></div><ion-infinite-scroll \\non-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/photoListDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" \\non-refresh=\\\"onReload()\\\"></ion-refresher><div class=\\\"list card animated fadeIn\\\" ng-repeat=\\\"gallery in data\\\" \\nng-if=\\\"showGalleries()\\\"><div class=\\\"item item-avatar\\\" profile-modal user=\\\"gallery.user.obj\\\"><img ng-if=\\\"profile\\\" \\nprofile=\\\"{{ ::gallery.user}}\\\" ng-src=\\\"{{ ::gallery.user.photo._url}}\\\"> <img \\nng-src=\\\"{{ ::gallery.user.photo._url || \\'img/user.png\\'}}\\\"><h2>{{ ::gallery.user.name}}</h2><p>\\n{{ ::gallery.user.status}}</p><span>{{ ::gallery.createdAt | amTimeAgo}}</span></div><div class=\\\"item item-body\\\" \\non-double-tap=\\\"like(gallery.id)\\\" ng-model=\\\"gallery\\\"><div class=\\\"icon ion-ios-heart heart\\\" \\nng-class=\\\"gallery.isLiked ? \\'happy\\' : \\'broken\\' \\\"></div><i class=\\\"icon\\\" ng-if=\\\"like\\\"></i> <img \\nng-src=\\\"{{ gallery.image._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></div><div class=\\\"item item-buttons\\\"><div class=\\\"row\\\"><div \\nclass=\\\"col col-75\\\"><ion-spinner ng-show=\\\"gallery.progress\\\"></ion-spinner><button photo-like ng-model=\\\"gallery\\\" \\nng-if=\\\"!gallery.progress\\\" ng-class=\\\"gallery.isLiked ? \\'ion-ios-heart\\' : \\'ion-ios-heart-outline\\' \\\" \\nclass=\\\"button-clear button-icon button-heart\\\"></button> <button photo-comment ng-model=\\\"gallery\\\" \\nclass=\\\"button-clear button-icon ion-ios-chatbubble-outline\\\"></button> <button ng-click=\\\"action(gallery)\\\" \\nphotogram=\\\"{{ :: gallery.id }}\\\" class=\\\"button-clear button-icon ion-android-share\\\"></button></div><div \\nclass=\\\"col text-right\\\"><button ng-click=\\\"action(gallery)\\\" photogram=\\\"{{ :: gallery.id }}\\\" \\nclass=\\\"button-clear button-icon ion-android-more-vertical\\\"></button></div></div></div><div class=\\\"padding\\\"><span \\nclass=\\\"likes\\\" photo-like ng-model=\\\"gallery\\\"><i class=\\\"icon ion-ios-heart\\\"></i> <span ng-if=\\\"!gallery.progress\\\">\\n{{ gallery.likesTotal }}</span> <span translate=\\\"likesText\\\"></span></span><div class=\\\"list-comments\\\"><div \\nclass=\\\"comment-item\\\" profile-modal user=\\\"gallery.user.obj\\\"><span class=\\\"username\\\">{{ :: gallery.user.attributes.name }}\\n</span> <span class=\\\"comment\\\">{{ :: gallery.title }}</span></div><div class=\\\"comment-item\\\" profile-modal \\nuser=\\\"gallery.user.id\\\" ng-repeat=\\\"item in gallery.comments | limitTo:3 track by item.id\\\"><span class=\\\"username\\\">\\n{{ :: item.user.attributes.name }}</span> <span class=\\\"comment\\\">{{ :: item.text }}</span></div><a class=\\\"comment-item\\\" \\nphoto-comment ng-model=\\\"gallery\\\" ng-if=\\\"gallery.comments.length>3\\\" translate=\\\"seeAllCommentText\\\"></a></div><button \\nclass=\\\"button button-block button-clear button-comment\\\" photo-comment ng-model=\\\"gallery\\\"><span translate=\\\"addComment\\\">\\n</span></button></div></div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner \\ndistance=\\\"1%\\\"></ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/profile-edit-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ ::\\'editProfile\\' | translate }}</div></ion-header-bar><ion-content class=\\\"view-avatar\\\"><div class=\\\"row step1\\\"><div \\nclass=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar ng-src=\\\"{{ form.photo._url || \\'img/user.png\\' }}\\\"></div></div><div \\nclass=\\\"step2\\\"><label class=\\\"item item-input\\\"><i class=\\\"icon icon-envelope placeholder-icon\\\"></i> <input type=\\\"text\\\" \\nng-model=\\\"form.email\\\" disabled=\\\"disabled\\\"></label><formly-form model=\\\"form\\\" fields=\\\"formFields\\\" form=\\\"rForm\\\">\\n</formly-form></div><div class=\\\"padding step3\\\"><button ng-click=\\\"linkFacebook()\\\" ng-disabled=\\\"form.facebook\\\" \\nclass=\\\"button button-block button-facebook\\\"><i class=\\\"icon ion-social-facebook\\\"></i> <span translate=\\\"facebookLink\\\">\\n</span></button> <button class=\\\"button button-block button-positive\\\" ng-click=\\\"submitUpdateProfile()\\\" \\ntranslate=\\\"submit\\\"></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/profile-modal.html\",\"<ion-modal-view id=\\\"account-view\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ user.attributes.name }}</div></ion-header-bar><ion-content overflow-scroll=\\\"true\\\"><div class=\\\"profile-top\\\"><div \\nclass=\\\"row\\\"><div class=\\\"col-25\\\"><img class=\\\"avatar\\\" ng-src=\\\"{{ user.attributes.photo._url}}\\\"></div><div \\nclass=\\\"col col-statics\\\"><div class=\\\"row\\\"><div class=\\\"row\\\"><div class=\\\"col\\\"><span class=\\\"text-center\\\">\\n{{ user.attributes.galleriesTotal || 0}}</span><h3 translate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\"><span \\nclass=\\\"text-center\\\">{{ ::user.attributes.followersTotal || 0}}</span><h3 translate=\\\"followersText\\\"></h3></div><div \\nclass=\\\"col\\\"><span class=\\\"text-center\\\">{{ ::user.attributes.followingsTotal || 0}}</span><h3 translate=\\\"followingText\\\">\\n</h3></div></div></div><div class=\\\"row col-edit\\\"><div class=\\\"col\\\"><photogram-loading loading=\\\"loadingFollow\\\">\\n</photogram-loading><button ng-if=\\\"!loadingFollow\\\" \\nng-class=\\\"{\\'button-unfollow\\': user.follow, \\'button-follow\\': !user.follow}\\\" ng-click=\\\"follow()\\\" class=\\\"button\\\"><span \\nng-show=\\\"!user.follow\\\" translate>Follow</span> <span ng-show=\\\"user.follow\\\" translate>Following</span></button></div>\\n</div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">{{ user.attributes.name }}</span><p \\nclass=\\\"user-status\\\">{{ user.attributes.status }}</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button \\nclass=\\\"button button-icon icon ion-grid\\\" ng-class=\\\"{active: tab.grid}\\\" ng-click=\\\"changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: tab.list}\\\" ng-click=\\\"changeTab(\\'list\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recent\\\"></div><div class=\\\"tab\\\" ng-if=\\\"tab.list\\\"><photo-list user=\\\"user.id\\\"></photo-list></div><div \\nclass=\\\"tab\\\" ng-if=\\\"tab.grid\\\"><photo-grid user=\\\"user.id\\\"></photo-grid></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/search-directive.html\",\"<label class=\\\"item item-input\\\"><i class=\\\"icon ion-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"input\\\" \\nplaceholder=\\\"{{\\'SEARCH.FORM.INPUT\\' | translate }}\\\"> <button class=\\\"button button-icon\\\" ng-if=\\\"input.length\\\" \\nng-click=\\\"clearSearch()\\\"><i class=\\\"icon ion-close\\\"></i></button></label>\");\n$templateCache.put(\"app/directive/settings-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"settingTitle\\\"></div></ion-header-bar><ion-content class=\\\"animated fadeIn\\\"><div class=\\\"list\\\"><ion-language>\\n</ion-language><ion-toggle class=\\\"toggle-positive\\\" ng-model=\\\"form.push\\\"><h3><small translate=\\\"notificationText\\\">\\n</small></h3><p ng-if=\\\"form.push\\\" translate=\\\"on\\\"></p><p ng-if=\\\"!form.push\\\" translate=\\\"off\\\"></p></ion-toggle><ion-item \\nclass=\\\"item-icon-right\\\" href=\\\"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S\\\"><h3>\\n<small translate=\\\"buy\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" href=\\\"http://photogramapp.com\\\"><h3><small translate=\\\"help\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item class=\\\"item-icon-right\\\" href=\\\"http://photogramapp.com\\\"><h3>\\n<small translate=\\\"terms\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" ng-click=\\\"show();\\\"><h3><small translate=\\\"report\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item></div><div class=\\\"padding\\\"><button ng-click=\\\"link(\\'logout\\')\\\" \\nclass=\\\"button button-block button-positive\\\" translat=\\\"logout\\\"></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/component/ion-language/ion-language.html\",\"<button class=\\\"button button-block button-clear button-light button-language\\\">{{language.translation | translate}} <i \\nclass=\\\"icon ion-chevron-down\\\"></i></button>\");\n$templateCache.put(\"app/component/ion-language/modal-language.html\",\"<ion-modal-view><ion-header-bar><h1 class=\\\"title\\\" translate=\\\"selectLanguageText\\\"></h1><a ng-click=\\\"closeModal()\\\" \\nclass=\\\"button button-icon icon ion-close\\\"></a></ion-header-bar><div \\nclass=\\\"bar bar-subheader item-input-inset bar-stable\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" placeholder=\\\"{{\\'searchText\\' | translate}}\\\" \\nng-model=\\\"searchValue\\\"></label><button type=\\\"button\\\" class=\\\"button button-clear\\\" ng-show=\\\"searchValue.length\\\" \\nng-click=\\\"searchValue=\\'\\'\\\">Clear</button></div><ion-content class=\\\"has-subheader has-header\\\"><ion-list><ion-item \\nclass=\\\"item\\\" ng-click=\\\"selectLanguage(item)\\\" ng-repeat=\\\"item in languages | filter:searchValue\\\" \\nng-bind-html=\\\"item.translation | translate\\\"></ion-item></ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/account-friend-list/account-friend-list.html\",\"<ion-view><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/main/feedback/feedback-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"FEEDBACK.TITLE\\\"></div></ion-header-bar><ion-content><formly-form model=\\\"form\\\" form=\\\"rForm\\\" \\nfields=\\\"formFields\\\"></formly-form><div class=\\\"padding\\\"><button class=\\\"button button-block button-positive\\\" \\nng-click=\\\"submitFeedback()\\\"><span translate=\\\"BUTTON.SEND\\\"></span></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/loading/loading.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/main/share/post-modal.html\",\"<ion-modal-view class=\\\"modal-post\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closePost()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"SHARE.TITLE\\\"></div><button class=\\\"button button-positive\\\" ng-click=\\\"submitPost(form)\\\"><i \\nclass=\\\"icon ion-arrow-right-b\\\"></i></button></ion-header-bar><ion-content><div id=\\\"image\\\"><img ng-src=\\\"{{image}}\\\">\\n</div><ul class=\\\"list\\\"><li class=\\\"item\\\"><textarea ng-model=\\\"form.title\\\" \\nplaceholder=\\\"{{ \\'SHARE.FORM.LEGEND\\' | translate }}\\\"></textarea></li></ul></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/share/share-modal.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-close-empty\\\" ng-click=\\\"close()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"shareGalleryText\\\"></div></ion-header-bar><ion-content><div class=\\\"list\\\"><div \\nclass=\\\"item item-thumbnail-left\\\"><img ng-src=\\\"{{image}}\\\" ng-click=\\\"editFilter()\\\"><textarea type=\\\"text\\\" \\nng-model=\\\"form.title\\\" placeholder=\\\"{{ \\'description\\'|translate }}\\\"></textarea></div></div><ul class=\\\"list\\\"><li \\nclass=\\\"item item-input\\\"><input type=\\\"text\\\" placeholder=\\\"{{ \\'locationText\\' | translate }}\\\" ion-location \\nlocation=\\\"form.geo\\\" ng-model=\\\"form.geo.resume\\\"></li><div class=\\\"item nopadding\\\" ng-show=\\\"form.geo.image\\\"><img \\nng-src=\\\"{{ form.geo.image }}\\\"></div></ul><div class=\\\"padding\\\"><button class=\\\"button button-block button-positive\\\" \\ntype=\\\"button\\\" ng-click=\\\"submit(form)\\\" translate=\\\"submit\\\"></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/tab/main-tab.html\",\"<ion-view><ion-nav-bar class=\\\"bar bar-light bar-mop\\\"><ion-nav-back-button></ion-nav-back-button></ion-nav-bar><ion-tabs\\n class=\\\"tabs-light tabs-photogram\\\"><ion-tab title=\\\"{{ \\'PHOTOGRAM.TITLE.HOME\\' | translate }}\\\" icon-on=\\\"ion-ios-home\\\" \\nicon-off=\\\"ion-ios-home-outline\\\" ui-sref=\\\"tab.home\\\"><ion-nav-view name=\\\"tabHome\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SEARCH\\' | translate }}\\\" icon-on=\\\"ion-ios-world\\\" icon-off=\\\"ion-ios-world-outline\\\" \\nui-sref=\\\"tab.search\\\"><ion-nav-view name=\\\"tabSearch\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SHARE\\' | translate }}\\\" icon-on=\\\"ion-ios-camera\\\" icon-off=\\\"ion-ios-camera-outline\\\" \\nng-click=\\\"vm.postPhoto()\\\"><ion-nav-view name=\\\"tabCapture\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.ACTIVITY\\' | translate }}\\\" icon-on=\\\"ion-ios-heart\\\" icon-off=\\\"ion-ios-heart-outline\\\" \\nui-sref=\\\"tab.activity\\\"><ion-nav-view name=\\\"tabActivity\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.PROFILE\\' | translate }}\\\" icon-on=\\\"ion-ios-person\\\" icon-off=\\\"ion-ios-person-outline\\\" \\nui-sref=\\\"tab.account\\\"><ion-nav-view name=\\\"tabProfile\\\"></ion-nav-view></ion-tab></ion-tabs></ion-view>\");\n$templateCache.put(\"app/main/tab-account/account.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-title><span>{{ vm.user.attributes.name }}</span>\\n</ion-nav-title><ion-nav-buttons side=\\\"right\\\"><button settings-modal class=\\\"button button-icon icon ion-gear-a\\\">\\n</button></ion-nav-buttons><ion-content class=\\\"animated fadeIn\\\"><div class=\\\"profile-top\\\"><div class=\\\"row\\\"><div \\nclass=\\\"col-25\\\"><img class=\\\"avatar\\\" user-avatar ng-model=\\\"vm.user\\\" \\nng-src=\\\"{{ vm.user.attributes.photo._url || \\'img/user.png\\' }}\\\"></div><div class=\\\"col col-statics\\\"><div class=\\\"row\\\"><div\\n class=\\\"col\\\"><span class=\\\"text-center\\\">{{ vm.user.attributes.galleriesTotal || 0}}</span><h3 translate=\\\"postsText\\\">\\n</h3></div><div class=\\\"col\\\"><span class=\\\"text-center\\\">{{ vm.user.attributes.followersTotal || 0}}</span><h3 \\ntranslate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\"><span class=\\\"text-center\\\">\\n{{ vm.user.attributes.followingsTotal || 0}}</span><h3 translate=\\\"followingText\\\"></h3></div></div><div \\nclass=\\\"row col-edit\\\"><div class=\\\"col\\\"><button profile-modal-edit user=\\\"vm.user\\\" class=\\\"button\\\"><div \\ntranslate=\\\"editProfile\\\"></div></button></div></div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">\\n{{ vm.user.attributes.name }}</span><p class=\\\"user-status\\\">{{ vm.user.attributes.status }}</p></div></div><div \\nclass=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button class=\\\"button button-icon icon ion-grid\\\" \\nng-class=\\\"{active: vm.tab.grid}\\\" ng-click=\\\"vm.changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: vm.tab.list}\\\" ng-click=\\\"vm.changeTab(\\'list\\')\\\"></button> \\n<button class=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recentText\\\">Recent</div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.list\\\"><photo-list user=\\\"currentUser.id\\\" \\nprofile=\\\"false\\\"></photo-list></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.grid\\\"><photo-grid user=\\\"currentUser.id\\\" \\nprofile=\\\"false\\\"></photo-grid></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-activity/activity.html\",\"<ion-view cache-view=\\\"false\\\" class=\\\"list-activity\\\"><ion-nav-title><span translate=\\\"activity\\\"></span></ion-nav-title>\\n<ion-content><div class=\\\"center padding\\\" ng-if=\\\"vm.showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-{{theme}}\\\" ng-click=\\\"vm.onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"vm.showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i>\\n<p>{{ \\\"activityNotFoundText\\\" | translate }}</p></div></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" \\non-refresh=\\\"onReload()\\\"></ion-refresher><div class=\\\"list\\\"><div class=\\\"item item-avatar item-animate1\\\" \\nng-repeat=\\\"item in vm.data\\\"><img ng-src=\\\"{{ item.user.photo._url  || \\'./img/user.png\\'}}\\\"><h2>{{ item.user.name}}</h2>\\n<div class=\\\"text\\\">{{ item.action | translate }}</div><p>{{ item.createdAt | amTimeAgo }}</p><div class=\\\"img-right\\\" \\nng-if=\\\"item.item.gallery\\\"><img ng-src=\\\"{{ item.item.gallery.attributes.imageThumb._url}}\\\"></div></div></div>\\n<ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" ng-if=\\\"vm.moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\">\\n</ion-infinite-scroll></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-home/home.html\",\"<ion-view class=\\\"view-home\\\"><ion-nav-title><span class=\\\"icon2-logo\\\"></span></ion-nav-title><ion-content><photo-list \\nprofile=\\\"true\\\" user=\\\"\\\"></photo-list></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-search/search.html\",\"<ion-view><ion-nav-title><span>{{ \\'searchText\\' | translate }}</span></ion-nav-title><ion-nav-buttons side=\\\"right\\\">\\n<button class=\\\"button button-icon ion-ios-location\\\" ui-sref=\\\"tab.map\\\"></button></ion-nav-buttons><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"params.search\\\" ng-change=\\\"onSearch()\\\" \\nng-model-options=\\\"{debounce:1000}\\\" style=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\">\\n</label><button class=\\\"button button-clear\\\" ng-if=\\\"search.length\\\" ng-click=\\\"clearSearch()\\\">\\n{{ \\\"cancelText\\\" | translate }}</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><photo-grid profile=\\\"true\\\" \\nuser=\\\"\\\"></photo-grid></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-search-map/searchMap.html\",\"<ion-view><ion-nav-title>{{ \\\"mapTitle\\\" | translate }}</ion-nav-title><ion-nav-buttons side=\\\"right\\\"><button \\nclass=\\\"button button-icon\\\" distance-modal><i class=\\\"icon ion-funnel\\\"></i></button> <button class=\\\"button button-icon\\\" \\nng-disabled=\\\"places.length === 0\\\" ng-click=\\\"openPlacesModal()\\\"><i class=\\\"icon ion-ios-list-outline\\\"></i></button>\\n</ion-nav-buttons><ion-content><div id=\\\"map_canvas\\\"></div></ion-content><ion-footer-bar \\nng-class=\\\"{\\'bar-{{theme}}\\': theme }\\\"><div class=\\\"buttons buttons-center\\\"><button class=\\\"button button-outline\\\" \\nng-click=\\\"onSearchPlaces()\\\">{{ \\\"searchInThisAreaText\\\" | translate }}</button></div></ion-footer-bar></ion-view>\");\n$templateCache.put(\"app/main/user-avatar/user-avatar.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><ion-nav-bar class=\\\"bar bar-positive bar-mop\\\" \\nalign-title=\\\"left\\\"></ion-nav-bar><ion-content class=\\\"view-avatar\\\"><div class=\\\"row step1\\\"><div class=\\\"col\\\"><img \\nclass=\\\"avatar\\\" user-avatar ng-model=\\\"currentUser.photo\\\" ng-src=\\\"{{ ::currentUser.photo._url || \\'img/user.png\\' }}\\\">\\n</div></div><div class=\\\"step2\\\"><label class=\\\"item item-input\\\"><i class=\\\"icon icon-envelope placeholder-icon\\\"></i> \\n<input type=\\\"text\\\" ng-model=\\\"vm.form.email\\\" disabled=\\\"disabled\\\"></label><formly-form model=\\\"vm.form\\\" \\nfields=\\\"vm.formFields\\\" form=\\\"vm.rForm\\\"></formly-form></div><div class=\\\"padding step3\\\"><button \\nng-click=\\\"vm.submitAvatar()\\\" class=\\\"button button-block button-positive\\\" translate=\\\"USER.BUTTON.NEXT\\\"></button></div>\\n</ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-layout/user-layout.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content padding=\\\"false\\\"><ion-nav-view></ion-nav-view></ion-content>\\n</ion-view>\");\n$templateCache.put(\"app/main/user-login/user-login.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><div class=\\\"bar bar-header\\\"><ion-language>\\n</ion-language></div><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step1\\\"><div class=\\\"logo\\\"><span \\nclass=\\\"icon2-logo\\\"></span></div><formly-form model=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"vm.rForm\\\"><button \\nclass=\\\"button button-block button-outline button-light\\\" type=\\\"button\\\" ng-disabled=\\\"vm.rForm.$invalid\\\" \\nng-click=\\\"vm.submitLogin(vm.rForm, vm.form)\\\" translate=\\\"signin\\\"></button></formly-form></div><div class=\\\"step2\\\"><div \\nclass=\\\"or\\\"><div class=\\\"line\\\"></div><span translate=\\\"or\\\"></span><div class=\\\"line\\\"></div></div><facebook-login>\\n</facebook-login><span class=\\\"term\\\">{{::\\'termAccept\\' | translate}} <a href=\\\"http://photogramapp.com\\\">\\n{{::\\'terms\\' | translate}}</a></span></div><button class=\\\"button button-block button-light button-clear button-footer\\\" \\nui-sref=\\\"user.register\\\" translate=\\\"register\\\"></button></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-merge/merge.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><ion-content class=\\\"view-avatar padding\\\"><h1>\\nMerge Account</h1><div class=\\\"step1 padding\\\"><h5 translate>USER.MERGE</h5></div><div class=\\\"row step1\\\"><div \\nclass=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar ng-src=\\\"{{ vm.form.photo._url || \\'./img/user.png\\' }}\\\"></div></div><div \\nclass=\\\"step2\\\"><formly-form model=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"rForm\\\"><input type=\\\"hidden\\\" \\nng-model=\\\"vm.form.facebookimg\\\"></formly-form></div><div class=\\\"padding step3\\\"><button \\nng-click=\\\"vm.submit(rForm, vm.form)\\\" class=\\\"button button-block button-facebook\\\"><i class=\\\"icon ion-social-facebook\\\">\\n</i> <span translate>USER.BUTTON.MERGE</span></button></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-register/user-register.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><div class=\\\"bar bar-header\\\"><ion-language>\\n</ion-language></div><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step1\\\"><div class=\\\"logo\\\"><span \\nclass=\\\"icon2-logo\\\"></span></div><formly-form model=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"vm.rForm\\\"><div \\nclass=\\\"padding\\\"><button class=\\\"button button-block button-positive\\\" type=\\\"button\\\" ng-disabled=\\\"rForm.$invalid\\\" \\nng-click=\\\"vm.submitRegister(vm.rForm, vm.form)\\\" translate=\\\"createAccount\\\"></button></div></formly-form></div><div \\nclass=\\\"step2\\\"><div class=\\\"or\\\"><div class=\\\"line\\\"></div><span translate=\\\"or\\\"></span><div class=\\\"line\\\"></div></div>\\n<facebook-login></facebook-login><span class=\\\"term\\\">{{::\\'termAccept\\' | translate}} <a href=\\\"http://photogramapp.com\\\">\\n{{::\\'terms\\' | translate}}</a></span></div><button class=\\\"button button-block button-light button-clear button-footer\\\" \\nui-sref=\\\"user.login\\\" translate=\\\"signin\\\"></button></ion-content></ion-view>\");\n$templateCache.put(\"app/main/walkthrough/walkthrough.html\",\"<ion-view class=\\\"view-intro bg-animate\\\" can-swipe-back=\\\"false\\\"><ion-content scroll=\\\"false\\\"><div class=\\\"intro-slider\\\">\\n<ion-slide-box active-slide=\\\"slideIndex\\\" show-pager=\\\"true\\\" on-slide-changed=\\\"vm.slideChanged($index)\\\"><ion-slide \\nng-repeat=\\\"item in vm.slides track by $index\\\"><div class=\\\"content\\\" ng-if=\\\"$index == vm.slideIndex\\\"><span class=\\\"top\\\">\\n<h2>{{ item.top }}</h2></span><div class=\\\"phone {{ vm.device }}\\\"><img ng-src=\\\"{{ item.img }}\\\"></div></div></ion-slide>\\n<ion-slide><div class=\\\"content\\\" ng-if=\\\"vm.slides.length == vm.slideIndex\\\"><div class=\\\"last\\\"><div class=\\\"logo2 step1\\\">\\n<img src=\\\"img/icon.png\\\"> <span class=\\\"icon2-logo\\\"></span></div><button class=\\\"button button-block button-clear step2\\\" \\nui-sref=\\\"user.login\\\" translate=\\\"INTRO.BUTTON.ENTER\\\"></button></div></div></ion-slide></ion-slide-box></div><button \\nclass=\\\"button button-positive button-fab left\\\" ng-if=\\\"vm.slideIndex\\\" ng-click=\\\"vm.previous()\\\"><i \\nclass=\\\"icon ion-ios-arrow-left\\\"></i></button> <button class=\\\"button button-positive button-fab right\\\" \\nng-hide=\\\"vm.slideIndex === vm.slides.length\\\" ng-click=\\\"vm.next()\\\"><i class=\\\"icon ion-ios-arrow-right\\\"></i></button>\\n</ion-content></ion-view>\");\n$templateCache.put(\"app/component/ion-photo/view/modal.share.photo.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar-dark\\\"><div class=\\\"title\\\">{{ ::\\'Share\\' | translate }}\\n</div><button class=\\\"button button-positive\\\" ng-click=\\\"modal.hide()\\\"><i class=\\\"icon ion-arrow-right-b\\\"></i></button>\\n</ion-header-bar><ion-content ng-cloak><div id=\\\"image\\\"><img ng-src=\\\"{{ ::form.photo}}\\\"><div class=\\\"title\\\">\\n{{ ::form.title }}</div></div><ul class=\\\"list\\\"><li class=\\\"padding\\\"><button ng-repeat=\\\"social in sociais\\\" \\nng-click=\\\"share(form, social)\\\" class=\\\"button button-block button-{{ social }}\\\"><i class=\\\"icon ion-social-{{ social }}\\\">\\n</i> {{ ::social | uppercase }}</button></li></ul></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/component/ion-photo/view/photo.filter.carousel.html\",\"<div class=\\\"wide-as-needed\\\"><a ng-repeat=\\\"filter in filters\\\" ng-click=\\\"applyFilter(\\'image\\', filter)\\\"><div caman \\nimage=\\\"image\\\" name=\\\"filter\\\" filter=\\\"filter\\\" class=\\\"image\\\" loading=\\\"loading\\\" ng-class=\\\"{disabled: loading}\\\"></div>\\n<ion-spinner ng-if=\\\"loading\\\"></ion-spinner><p>{{ ::filter }}</p></a></div>\");\n$templateCache.put(\"app/component/ion-photo/view/photo.filter.html\",\"<div class=\\\"capture-photo\\\"><div caman filter=\\\"\\'normal\\'\\\" loading=\\\"loadingMaster\\\" class=\\\"image\\\" \\nng-class=\\\"{disabled: loadingMaster}\\\" name=\\\"\\'image\\'\\\" image=\\\"image\\\"></div><ion-spinner ng-show=\\\"loadingMaster\\\">\\n</ion-spinner></div><photo-filter-carousel apply=\\\"applyFilter\\\" image=\\\"image\\\"></photo-filter-carousel>\");}]);\n}());\n"],"sourceRoot":"/source/"}