{"version":3,"sources":["scripts/app.js"],"names":["MarkerClusterer","map","opt_markers","opt_options","this","extend","google","maps","OverlayView","map_","markers_","clusters_","sizes","styles_","ready_","options","gridSize_","minClusterSize_","maxZoom_","imagePath_","MARKER_CLUSTER_IMAGE_PATH_","imageExtension_","MARKER_CLUSTER_IMAGE_EXTENSION_","zoomOnClick_","undefined","averageCenter_","setupStyles_","setMap","prevZoom_","getZoom","that","event","addListener","zoom","resetViewport","redraw","length","addMarkers","Cluster","markerClusterer","markerClusterer_","getMap","getGridSize","getMinClusterSize","isAverageCenter","center_","bounds_","clusterIcon_","ClusterIcon","getStyles","cluster","styles","opt_padding","getMarkerClusterer","padding_","cluster_","div_","sums_","visible_","angular","module","openTermsDirective","restrict","link","scope","elem","attr","openModal","href","window","cordova","ThemeableBrowser","open","statusbar","color","toolbar","height","title","showPageTitle","backButtonCanClose","bind","directive","configLanguage","$translatePartialLoaderProvider","$translateProvider","AppConfig","tmhDynamicLocaleProvider","useLoader","urlTemplate","useSanitizeValueStrategy","useLocalStorage","localeLocationPattern","langvar","navigator","language","userlanguage","userlangvar","split","preferredLocale","searchLang","_","some","locales","code","filter","item","preferredLanguage","moment","locale","$inject","config","constant","path","$ionicModal","$scope","allImages","ngModel","activeSlide","index","console","log","fromTemplateUrl","then","modal","show","closeModal","hide","remove","configCompile","$compileProvider","debugInfoEnabled","startParse","$ionicPlatform","$localStorage","$location","$rootScope","Parse","initialize","parse","appId","serverURL","server","unit","mapType","type","currentUser","User","current","runIonic","$translate","$cordovaGlobalization","$cordovaSplashscreen","ParsePush","ConnectMonitor","theme","ready","plugins","Keyboard","disableScroll","StatusBar","styleLightContent","registerBackButtonAction","preventDefault","lang","use","globalization","getPreferredLanguage","splashscreen","init","configIonic","$ionicConfigProvider","platform","ios","backButton","previousTitleText","icon","android","views","swipeBackEnabled","text","tabs","position","navBar","alignTitle","maxCache","configFacebook","$facebookProvider","setAppId","facebookAppId","setPermissions","runFacebook","LangVar","userLanguage","userLangVar","substring","toUpperCase","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","run","app","name","url","image","routes","home","login","gaTrackingId","translation","DAO","tables","columns","username","email","facebookimg","gender","img","facebook","qtdFollow","status","createdAt","attributes","user_id","followId","location","isLiked","likes","action","userAvatar","userName","gallery_id","key","value","$stateProvider","$urlRouterProvider","addPart","state","templateUrl","controller","controllerAs","abstract","template","$state","localStorage","$reset","go","clear","tabHome","tabSearch","tabActivity","tabProfile","otherwise","prototype","obj1","obj2","object","property","apply","onAdd","setReady_","draw","size","i","push","width","fitMapToMarkers","marker","markers","getMarkers","bounds","LatLngBounds","getPosition","fitBounds","setStyles","isZoomOnClick","getTotalMarkers","setMaxZoom","maxZoom","getMaxZoom","calculator_","numStyles","count","dv","parseInt","Math","min","setCalculator","calculator","getCalculator","opt_nodraw","pushMarkerTo_","isAdded","repaint","addMarker","removeMarker_","indexOf","m","splice","removeMarker","removed","removeMarkers","r","createClusters_","getTotalClusters","setGridSize","setMinClusterSize","getExtendedBounds","projection","getProjection","tr","LatLng","getNorthEast","lat","lng","bl","getSouthWest","trPix","fromLatLngToDivPixel","x","y","blPix","ne","fromDivPixelToLatLng","sw","isMarkerInBounds_","contains","clearMarkers","opt_hide","oldClusters","slice","setTimeout","distanceBetweenPoints_","p1","p2","R","dLat","PI","dLon","a","sin","cos","c","atan2","sqrt","addToClosestCluster_","distance","clusterToAddTo","center","getCenter","isMarkerInClusterBounds","mapBounds","getBounds","isMarkerAlreadyAdded","l","calculateBounds_","len","updateIcon","getSize","mz","sums","setCenter","setSums","triggerClusterClick","trigger","pos","getPosFromLatLng_","style","cssText","createCss","innerHTML","panes","getPanes","overlayMouseTarget","appendChild","isDragging","addDomListener","latlng","iconAnchor_","width_","height_","top","left","display","onRemove","removeChild","text_","index_","useStyle","max","url_","textColor_","anchor_","textSize_","backgroundPosition_","backgroundPosition","txtColor","txtSize","join","signinModalDirective","Loading","Toast","UserForm","signinModalLink","formFields","routeLogged","form","password","submitLogin","rForm","data","copy","$valid","signIn","end","resp","alert","animation","focusFirstInput","$on","signupModalDirective","signupModalLink","register","submitRegister","start","signUp","error","albumGridDirective","GalleryAlbum","$ionicPopup","Share","FeedbackModal","$ionicActionSheet","albumGridLink","showLoading","isLoadingViewShown","isGalleriesViewShown","isErrorViewShown","isEmptyViewShown","showGalleries","showErrorView","showEmptyView","ensureMoreData","isMoreData","setGalleries","setCurrentPage","page","params","loadFeed","list","loading","$broadcast","objectId","unshift","search","onReload","onLoadMore","moreDataCanBeLoaded","showLoadingView","gallery","actionButtons","share","message","confirm","res","Gallery","destroy","$emit","buttons","buttonDelete","actionSheet","titleText","cancelText","buttonClicked","user","profile","albumPhotoGridDirective","albumPhotoGridCtrl","album","getAlbum","photos","buyDirective","$cordovaInAppBrowser","buyLink","closeButton","imagePressed","align","compareToDirective","targetModel","require","element","attrs","ctrl","compare","e1","val","e2","$watch","newValue","$setValidity","distanceModalDirective","distanceModalLink","storage","distances","onDistanceSelected","closeDistanceModal","emailValidatorDirective","emailValidatorLink","$asyncValidators","modelValue","viewValue","validateEmail","facebookLoginDirective","$q","Facebook","Dialog","facebookLoginLink","facebookLogin","logIn","fbAuthData","fbData","me","findByEmail","signInViaFacebook","get","tempUser","updateWithFacebookData","instant","err","facebookStatus","focusMeDirective","$timeout","openKeyboard","focus","click","galleryAlbumModalDirective","galleryAlbumModalLink","defer","selectAlbum","promise","galleryNewAlbumModalDirective","galleryNewAlbumModalLink","description","createAlbum","create","heartDirective","heartLink","addClass","ionLoading","runLoading","$ionicLoading","hideLoading","seconds","factory","PhotogramLoadingDirective","mapPhotoUserDirective","Geolocation","mapPhotoUserLink","galleries","removeGallerys","latitude","longitude","mapOptions","setPosition","mapTypeId","MapTypeId","ROADMAP","Map","myPosition","getCurrentPosition","coords","loadGallerys","errorMessage","markerOption","Animation","DROP","Size","scaledSize","origin","Point","anchor","Marker","imagePath","latlngbounds","setGallerys","imageThumb","feed","maxRating","limit","onSearchHere","onGalleryClicked","load","photogramFollowDirective","Photogram","modalFollow","getFollow","photoCommentDirective","$http","$ionicScrollDelegate","GalleryComment","GalleryForm","nocomments","galleryObj","openModalComment","formComment","submitComment","deleteComment","editComment","getComments","myIndexValue","searchPeople","term","peopleList","getFollowing","response","each","imageUrl","photo","_url","bio","people","when","getPeopleTextRaw","obj","onTap","e","update","comments","galleryId","scrollBottom","dataForm","photoGridDirective","photoGridCtrl","photoLikeDirective","_model","progress","liked","likeGallery","likesTotal","photoListDirective","photoListController","openComment","openLikers","profileModalEditDirective","linkFacebook","logout","submitUpdateProfile","facebookLink","profileModalDirective","profileModalLink","follow","loadingFollow","userObj","isFollow","followersTotal","modalProfile","changeTab","tab","grid","ionSearchDirective","getData","watchSearch","minLength","str","results","placeholder","input","$apply","source","settingsModalDirective","Auth","getLoggedUser","languages","sref","usernameValidatorDirective","usernameValidatorLink","validateUsername","hashtag","$filter","target","replacedText","targetAttr","isDefined","replacePattern1","replace","replacePattern2","words","isNaN","inputWords","f","exports","define","amd","g","global","self","io","t","n","o","u","Error","call","1","_dereq_","lookup","uri","opts","parsed","sameNamespace","cache","nsps","newConnection","forceNew","multiplex","debug","Manager","socket","parser","managers","protocol","connect","Socket","./manager","./socket","./url","socket.io-parser","2","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","Backoff","jitter","timeout","readyState","connecting","lastPing","encoding","packetBuffer","encoder","Encoder","decoder","Decoder","autoConnect","eio","Emitter","on","has","Object","hasOwnProperty","emitAll","emit","arguments","nsp","updateSocketIds","engine","v","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","fn","skipReconnect","openSub","onopen","errorSub","cleanup","timer","close","clearTimeout","onping","Date","onpong","ondata","add","ondecoded","packet","onerror","onConnecting","encode","encodedPackets","write","processPacketQueue","pack","shift","sub","disconnect","reset","onclose","reason","delay","duration","onreconnect","attempt","./on","backo2","component-bind","component-emitter","engine.io-client","indexof","3","ev","removeListener","4","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","toArray","hasBin","events","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ping","pong","subEvents","send","args","parserType","EVENT","BINARY_EVENT","compress","flags","pop","CONNECT","onpacket","onconnect","onevent","ACK","onack","BINARY_ACK","DISCONNECT","ondisconnect","ERROR","ack","sent","emitBuffered","has-binary","to-array","5","loc","host","charAt","test","parseuri","port","ipv6","6","after","callback","err_cb","proxy","result","bail","noop","7","arraybuffer","bytes","byteLength","ArrayBuffer","abv","Uint8Array","ii","buffer","8","ms","factor","pow","rand","random","deviation","floor","9","chars","charCodeAt","base64","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","p","10","mapArrayBufferViews","ary","chunk","buf","set","byteOffset","BlobBuilderConstructor","bb","BlobBuilder","append","getBlob","BlobConstructor","Blob","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","b","blobBuilderSupported","11","concat","12","mixin","addEventListener","_callbacks","once","off","removeAllListeners","removeEventListener","callbacks","cb","listeners","hasListeners","13","constructor","14","useColors","documentElement","firebug","exception","table","userAgent","toLowerCase","match","RegExp","$1","formatArgs","namespace","humanize","diff","Array","lastC","Function","save","namespaces","removeItem","localstorage","chrome","local","colors","formatters","j","JSON","stringify","enable","./debug","15","selectColor","prevColor","disabled","enabled","curr","prevTime","prev","coerce","format","formatter","logFn","skips","substr","names","disable","stack","16","./lib/","17","engine.io-parser","18","hostname","secure","query","agent","parseqs","upgrade","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","transports","writeBuffer","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","freeGlobal","extraHeaders","keys","clone","parsejson","priorWebsocketSuccess","Transport","createTransport","EIO","transport","sid","setTransport","onDrain","onPacket","onError","onClose","probe","onTransportOpen","upgradeLosesBinary","supportsBinary","failed","msg","upgrading","pause","flush","freezeTransport","onTransportClose","onupgrade","to","onOpen","upgrades","onHandshake","setPing","filterUpgrades","pingInterval","pingTimeout","onHeartbeat","pingTimeoutTimer","pingIntervalTimer","sendPacket","prevBufferLen","writable","cleanupAndClose","waitForUpgrade","desc","filteredUpgrades","./transport","./transports","19","doOpen","doClose","packets","onData","decodePacket","20","polling","xhr","xd","xs","isSSL","xdomain","xscheme","XMLHttpRequest","XHR","JSONP","websocket","./polling-jsonp","./polling-xhr","./websocket","xmlhttprequest-ssl","21","empty","JSONPPolling","Polling","___eio","script","inherit","rNewline","rEscapedNewline","iframe","doPoll","async","insertAt","head","body","isUAgecko","doWrite","complete","initIframe","html","iframeId","area","className","method","setAttribute","submit","attachEvent","onreadystatechange","onload","./polling","component-inherit","22","Request","isBinary","unloadHandler","requests","abort","request","req","sendXhr","pollXhr","setDisableHeaderCheck","setRequestHeader","responseType","withCredentials","hasXDR","onLoad","responseText","requestsCount","onSuccess","fromError","contentType","getResponseHeader","String","fromCharCode","ui8Arr","dataArray","idx","XDomainRequest","23","hasXHR2","yeast","poll","onPause","total","decodePayload","callbackfn","encodePayload","schema","b64","../transport","24","WS","BrowserWebSocket","WebSocket","MozWebSocket","check","protocols","headers","ws","supports","binary","addEventListeners","onmessage","done","encodePacket","Buffer","25","hasCORS","ActiveXObject","has-cors","26","27","encodeBase64Object","encodeArrayBuffer","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","FileReader","readAsArrayBuffer","encodeBlob","dontSendBlobs","blob","next","eachWithIndex","el","hasBinary","sliceBuffer","base64encoder","utf8","isAndroid","isPhantomJS","packetslist","utf8encode","encoded","readAsDataURL","b64data","typed","basic","btoa","utf8decode","decodeBase64Packet","Number","asArray","rest","setLengthHeader","encodeOne","doneCallback","encodePayloadAsBlob","encodePayloadAsArrayBuffer","decodePayloadAsBinary","chr","ret","totalLength","reduce","acc","toString","resultArray","bufferIndex","forEach","isString","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","numberTooLong","tailArray","msgLength","./keys","arraybuffer.slice","base64-arraybuffer","28","arr","29","_hasBinary","isBuffer","File","isArray","toJSON","isarray","30","31","32","33","34","runInContext","context","undef","isSupported","serialized","stringifySupported","isExtended","getClass","parseSupported","root","SyntaxError","TypeError","nativeJSON","isProperty","objectProto","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","Months","getDay","year","month","members","__proto__","original","parent","Properties","valueOf","isFunction","isConstructor","hasProperty","objectTypes","Escapes","92","leadingZeroes","toPaddedString","unicodePrefix","quote","useCharIndex","symbols","charCode","serialize","properties","whitespace","indentation","date","time","hours","minutes","milliseconds","prefix","Index","Source","Unescapes","47","98","116","110","102","114","lex","begin","isSigned","hasMembers","walk","isLoader","function","freeExports","nodeType","previousJSON","isRestored","JSON3","noConflict","35","exec","parseFloat","h","short","round","long","plural","ceil","36","rvalidchars","rvalidescape","rvalidtokens","rvalidbraces","rtrimLeft","rtrimRight","37","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","38","re","parts","authority","ipv6uri","39","isBuf","deconstructPacket","_deconstructPacket","_placeholder","num","newData","packetData","attachments","reconstructPacket","_reconstructPacket","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","bloblessData","./is-buffer","40","encodeAsString","encodeAsBinary","writeEncoding","deconstruction","reconstructor","decodeString","types","BinaryReconstructor","reconPack","takeBinaryData","finishedReconstruction","binData","./binary","json3","41","42","dup","43","array","44","ucs2decode","string","extra","output","counter","ucs2encode","stringFromCharCode","checkScalarValue","codePoint","createByte","encodeCodePoint","symbol","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","tmp","freeModule","version","45","alphabet","decoded","now","seed","$provide","PLURAL_CATEGORY","ZERO","ONE","TWO","FEW","MANY","OTHER","DATETIME_FORMATS","AMPMS","DAY","ERANAMES","ERAS","FIRSTDAYOFWEEK","MONTH","SHORTDAY","SHORTMONTH","STANDALONEMONTH","WEEKENDRANGE","fullDate","longDate","medium","mediumDate","mediumTime","shortDate","shortTime","NUMBER_FORMATS","CURRENCY_SYM","DECIMAL_SEP","GROUP_SEP","PATTERNS","gSize","lgSize","maxFrac","minFrac","minInt","negPre","negSuf","posPre","posSuf","pluralCat","opt_precision","pt_br","defineLocale","months","monthsShort","weekdays","weekdaysShort","weekdaysMin","longDateFormat","LT","LTS","L","LL","LLL","LLLL","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","day","sameElse","relativeTime","future","past","mm","hh","dd","M","MM","yy","ordinalParse","ordinal","GalleryFormFactory","templateOptions","required","iconPlaceholder","label","toggleClass","formShare","UserFormFactory","valueProp","labelProp","ActionSheetFactory","Camera","$cordovaActionSheet","option","sourceType","getPicture","resolve","reject","buttonLabels","addCancelButtonWithLabel","androidEnableCancelButton","androidTheme","actionsheet","ANDROID_THEMES","THEME_HOLO_LIGHT","btnIndex","cancel","setSessionToken","sessionToken","mSessionToken","ensureLoggedIn","become","recoverPassword","requestPasswordReset","success","resetPassword","logOut","CameraFactory","$cordovaCamera","PictureSourceType","CAMERA","PHOTOLIBRARY","quality","targetWidth","targetHeight","saveToPhotoAlbum","correctOrientation","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","fileInput","evt","tempImage","currentTarget","files","reader","toBase64Image","img_path","imageResizer","resizeImage","imageDataType","ImageResizer","IMAGE_DATA_TYPE_URL","resizeType","RESIZE_TYPE_FACTOR","RESIZE_TYPE_MIN_PIXEL","pixelDensity","storeImage","photoAlbum","service","ConnectMonitorFactory","$cordovaNetwork","watch","ionic","Platform","isWebView","onLine","isOnline","networkState","DAOFactory","$interval","database","_db","sqlitePlugin","openDatabase","createFromLocation","_promises","_query","_tables","all","getLastSync","column","lastSync","rows","insert","_columns","_values","bindings","transaction","executeSql","paginate","_table","_where","_join","_order","_limit","_query1","TOTAL","fetchAll","DataUtilFactory","parseData","parseString","toLocaleDateString","getDate","inicio","getFullYear","getMonth","formatDate","getMonthName","meses","getFirstDay","getLastDay","DialogFactory","$cordovaDialogs","buttonsText","FacebookFactory","$facebook","$cordovaFacebook","getCurrentUser","getLoginStatus","postImage","api","picture","caption","postImage1","getFriends","getMe","fields","invite","showDialog","ui","friends","FacebookUtils","authResponse","userID","access_token","accessToken","expiration_date","getTime","Boolean","ParseCloud","ParseObject","getStatus","isApproved","Query","order","ascending","descending","startOf","endOf","greaterThanOrEqualTo","toDate","lessThanOrEqualTo","doesNotExist","equalTo","include","skip","find","defineProperty","GeoPoint","GalleryFactory","parseObject","itemId","objPlace","address","geo","expiresAt","GeolocationFactory","$cordovaGeolocation","geolocation","enableHighAccuracy","maximumAge","GoogleAnalyticsFactory","$cordovaGoogleAnalytics","trackingId","debugMode","startTrackerWithId","canTrack","warn","TAG","trackEvent","category","trackView","viewName","trackException","isFatal","InstallFactory","ParseCloudFactory","Cloud","upload","file","ext","filename","ParsePushFactory","$cordovaDevice","installation","installationId","installationObj","getDevice","getCordova","getModel","getPlatform","getUUID","getVersion","ParsePushPlugin","getInstallationId","getSubscriptions","subscriptions","pn","subscribeUser","channel","subscribe","unsubscribe","PhotogramShareFactory","$window","socialsharing","shareWithOptions","subject","ToastFactory","$cordovaToast","okType","UserFactory","getFollowers","getLikers","device","model","uuid","roleName","acl","ACL","setPublicReadAccess","setPublicWriteAccess","setACL","authData","facebookAuthData","fetch","userFetched","getPublicData","first","userData","Promise","setPhoto","parseFile","userId","delete","ionLanguageDirective","modalLanguageLink","styleDefault","searchValue","selectLanguage","GeoServiceFactory","getLocation","posOptions","findMe","getGoogleAddress","logErr","address_normal","formatted_address","address_components","imagem","numero","short_name","rua","long_name","bairro","cidade","estado","uf","pais","paisCode","cep","w","parseAddress","place","resume","geometry","addressType","componentForm","componentFormName","street","number","city","country","searchAddress","deferred","autocompleteService","getQueryPredictions","getDetails","placeId","detailsService","places","AutocompleteService","PlacesService","street_number","route","locality","sublocality","neighborhood","political","administrative_area_level_1","postal_code","ionLocationDirective","GeoService","ionLocationLink","suggestions","selectPlace","place_id","closeModalLocation","choosePlace","modalLocation","fromTemplate","loading1","FeedbackModalFactory","GalleryFeedback","GalleryFeedbackForm","submitFeedback","$new","photogramId","GalleryFeedbackFormFactory","feedbackDirective","PhotogramFeedback","PhotogramFeedbackForm","photogram","GalleryCommentController","$stateParams","$ionicHistory","comment","canEdit","goBack","formEdit","LoadingController","ProfileController","vm","more","isMe","openFollowers","openFollowing","MainTabController","PhotoService","ParseFile","postPhoto","jrCrop","filterImage","modalPost","imageUploaded","AccountController","getFollower","loadingFollowers","loadingFollowing","loadingPhotos","buttonTheme","ActivityController","GalleryActivity","openProfile","HomeController","SearchCtrl","onSearch","SearchMapController","scopes","states","UserAvatarController","submitAvatar","userAvatarDirective","ActionSheet","UserFollowerController","users","clearSearch","UserFollowingController","UserIntroController","currentPlatform","slideIndex","slideChanged","$ionicSlideBoxDelegate","previous","slides","UserLikerController","UserListController","UserMergeController","recoveryPassDirective","recovery","erro","button","$viewValue","isUndefined","forgot","UserRecoveryPassController","submitForgot","ionCropDirective","$jrCrop","ionCropLink","getElem","fileUpload","crop","chooseText","canvas","toDataURL","cropSave","sliderFilterDirective","sliderFilterLink","slider","setSlider","PhotoFilterFactory","elementId","texture","imageFilters","thumbFilter","Image","canvas2","brightnessContrast","brightness","contrast","hueSaturation","hue","saturation","vibrance","denoise","unsharpMask","radius","strength","noise","sepia","vignette","amount","Filter","func","imageFile","nubs","resFilter","imageFilter","filters","Adjust","getImage","img3","image3","texture3","canvas3","fx","addNub","addSlider","step","setCode","values","exponent","q","loadContentsOf","gl","A","fromElement","B","UNSIGNED_BYTE","getExtension","RGBA","FLOAT","drawTo","spareTexture","extraTexture","flippedShader","isInitialized","C","getDefaultShader","drawRect","D","uniforms","swapWith","E","F","G","readPixels","k","z","xa","ya","y2","sort","H","interpolate","I","initFromBytes","curves","textures","J","texSize","K","N","ensureFormat","triangleBlur","originalTexture","unuse","O","P","Q","lensBlurPrePass","lensBlur0","lensBlur1","lensBlur2","texture1","power","delta0","delta1","tiltShift","blurRadius","gradientRadius","delta","S","T","zoomBlur","U","colorHalftone","angle","scale","V","dotScreen","W","edgeWork1","edgeWork2","X","hexagonalPixelate","Y","ink","Z","bulgePinch","$","matrixWarp","matrix","useTextureSpace","aa","ba","swirl","createFramebuffer","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","LINEAR","Float32Array","createProgram","createShader","VERTEX_SHADER","FRAGMENT_SHADER","shaderSource","compileShader","attachShader","linkProgram","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STREAM_DRAW","enableVertexAttribArray","vertexAttribPointer","useProgram","viewport","drawArrays","POINTS","$OES_texture_float_linear$","enumerable","configurable","getContext","getSupportedExtensions","WebGLRenderingContext","premultipliedAlpha","contents","getPixelArray","perspective","edgeWork","lensBlur","splineInterpolate","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","texCoordAttribute","vertexAttribute","program","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","getUniformLocation","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","uniform1f","uniform1i","getParameter","VIEWPORT","vertexBuffer","STATIC_DRAW","texCoordBuffer","getAttribLocation","TRIANGLE_STRIP","defaultShader","clearRect","videoWidth","videoHeight","deleteTexture","activeTexture","TEXTURE0","framebuffer","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","fillUsingCanvas","toImage","createImageData","putImageData","jrCropController","View","imgWidth","imgHeight","imgSelect","imgFull","posX","posY","rotate","last_scale","last_posX","last_posY","last_rotate","loadImage","naturalWidth","naturalHeight","querySelector","cloneNode","bindHandlers","initImage","imgAspectRatio","selectAspectRatio","centerX","centerY","setImageTransform","setPosWithinBoundaries","calcMaxPos","min_pos_x","max_pos_x","min_pos_y","max_pos_y","currWidth","currHeight","scaleMin","transforming_correctX","transforming_correctY","scaleMax","image_ratio","cropper_ratio","prevent_default_directions","onGesture","gesture","deltaX","deltaY","rotation","transform","CSS","TRANSFORM","correctX","correctY","sourceX","sourceY","translate","drawImage","prop","defaultOptions","aspectRatio","initOptions","_options","PhotoServiceFactory","$cordovaCapture","PhotoFilter","filterModal","openFilter","image64","modalFilter","actionShowFilter","showFilter","closeModalFilter","cropImage","cropModal","applyFilter","filterEdit","selectFilter","doneFilter","cancelFilter","sliders","closeFilter","submitFilter","dataUrl","setting","setOptions","capture","buttonCancel","deviceInformation","allowRotation","allowEdit","popoverOptions","CameraPopoverOptions","getVideo","captureVideo","mediaFiles","fullPath","editFilter","closeAddress","isIOS","VideoFactory","createFileEntry","fileURI","resolveLocalFileSystemURL","entry","copyFile","fail","fileEntry","lastIndexOf","newName","makeid","dataDirectory","fileSystem2","copyTo","succ","onCopySuccess","nativeURL","PKVideoThumbnail","createThumbnail","prevSucc","prevImageSuccess","correctUrl","possible","saveVideo","localURL","$templateCache","put"],"mappings":"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EFC,KACE,UACA,gBACA,cACA,eACA,eACA,cACA,UAEFC,UACE,kBACA,iBAEFC,MACE,OACA,QAEFC,eAAkB,EAClBC,OACE,UACA,YACA,QACA,QACA,OACA,QACA,QACA,SACA,WACA,UACA,WACA,YAEFC,UACE,MACA,MACA,MACA,MACA,MACA,MACA,OAEFC,YACE,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEFC,iBACE,UACA,YACA,QACA,QACA,OACA,QACA,QACA,SACA,WACA,UACA,WACA,YAEFC,cACE,EACA,GAEFC,SAAY,2BACZC,SAAY,qBACZC,OAAU,6BACVC,WAAc,oBACdC,WAAc,WACdvH,QAAS,iBACTwH,UAAa,WACbC,UAAa,SAEfC,gBACEC,aAAgB,KAChBC,YAAe,IACfC,UAAa,IACbC,WACEC,MAAS,EACTC,OAAU,EACVC,QAAW,EACXC,QAAW,EACXC,OAAU,EACVC,OAAU,IACVC,OAAU,GACVC,OAAU,GACVC,OAAU,KAEVR,MAAS,EACTC,OAAU,EACVC,QAAW,EACXC,QAAW,EACXC,OAAU,EACVC,OAAU,KACVC,OAAU,GACVC,OAAU,IACVC,OAAU,MAGd5wC,GAAM,QACN6wC,UAAa,SAAUjxB,EAAGkxB,GACxB,MAAIlxB,IAAK,GAAU,GAALA,GAAe,GAALA,EACf0uB,EAAgBE,IAElBF,EAAgBM,YAI7B,WACI,YAKA,IAAImC,GAAQh5C,OAAOsC,OAAO22C,aAAa,MACnCC,OAAQ,2FAA2Ft3C,MAC/F,KACJu3C,YAAa,kDAAkDv3C,MAAM,KACrEw3C,SAAU,iFAAiFx3C,MAAM,KACjGy3C,cAAe,8BAA8Bz3C,MAAM,KACnD03C,YAAa,yBAAyB13C,MAAM,KAC5C23C,gBACIC,GAAI,QACJC,IAAK,WACLC,EAAG,aACHC,GAAI,wBACJC,IAAK,mCACLC,KAAM,0CAEVC,UACIC,QAAS,eACTC,QAAS,iBACTC,SAAU,eACVC,QAAS,gBACTC,SAAU,WACN,MAAuB,KAAfp+C,KAAKq+C,OAA8B,IAAfr+C,KAAKq+C,MAC7B,wBACA,yBAERC,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","file":"scripts/app-f754f2b875.js","sourcesContent":["(function () {\n    'use strict';\n    angular\n        .module('starter', [\n            'ionic',\n            'formlyIonic',\n            'ngMessages',\n            'ngCookies',\n            'ngStorage',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale', // angular-dynamic-locale\n            'angularMoment',\n            'ngFacebook',\n            'angular-cache',\n            'ngSanitize',\n            'mentio',\n            'ion-affix',\n            'jett.ionic.scroll.sista',\n            'ngCordova',\n            'ionic.components',\n            'app.main',\n        ]);\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('ionic.components', [\n            'ion-language',\n            'ion-location',\n            'ion-slideshow',\n            // 'ion-affix',\n            // 'ngCache',\n            'ion-photo'\n        ]);\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('href', openTermsDirective);\n\n    function openTermsDirective() {\n        return {\n            restrict: 'A',\n            link    : function (scope, elem, attr) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var href = attr.href;\n\n                    if (window.cordova) {\n                        // Keep in mind that you must add your own images to native resource.\n                        // Images below are for sample only. They are not imported by this plugin.\n                        window.cordova.ThemeableBrowser.open(href, '_blank', {\n                            statusbar         : {\n                                color: '#ffffffff'\n                            },\n                            toolbar           : {\n                                height: 44,\n                                color : '#f0f0f0ff'\n                            },\n                            title             : {\n                                color        : '#000',\n                                showPageTitle: true\n                            },\n                            backButtonCanClose: true\n                        })\n                        ;\n                    } else {\n                        window.open(href);\n                    }\n\n                    return false;\n                }\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main', [\n            'ionic',\n            'ngCordova',\n        ]);\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('ion-language', [\n            'ngCookies',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale' // angular-dynamic-locale\n        ])\n        .config(configLanguage);\n\n    function configLanguage($translatePartialLoaderProvider, $translateProvider, AppConfig, tmhDynamicLocaleProvider) {\n\n        // angular-translate configuration\n        $translateProvider.useLoader('$translatePartialLoader', {\n            urlTemplate: '{part}/i18n/{lang}.json'\n        });\n        $translateProvider.useSanitizeValueStrategy(null);\n\n        // Translate Config\n        //$translateProvider.useMissingTranslationHandlerLog();\n        $translateProvider.useLocalStorage(); // saves selected language to localStorage\n        tmhDynamicLocaleProvider.localeLocationPattern('../bower_components/angular-i18n/angular-locale_{{locale}}.js');\n\n        var langvar     = navigator.language || navigator.userlanguage;\n        var userlangvar = langvar.split('-')[0];\n        var language    = AppConfig.preferredLocale;\n        var searchLang  = _.some(AppConfig.locales, {\n            code: userlangvar\n        });\n\n        if (searchLang) {\n            language = AppConfig.locales.filter(function (item) {\n                return language == item.code\n            })[0].code;\n        }\n        $translateProvider.preferredLanguage(language);\n        moment.locale(language);\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('ion-location', [\n      'ionic'\n    ]);\n\n})();\n(function () {\n    'use strict';\n    angular.module('ion-photo', [\n        'ionic',\n        'ngCordova',\n        'jrCrop'\n    ]).constant('config', {\n        path: 'app/component/ion-photo'\n    })\n\n})();\n(function () {\n    'use strict';\n    angular.module('ion-slideshow', [])\n           .directive('ionSlideshow', function ($ionicModal) {\n               return {\n                   restrict: 'A',\n                   scope   : {\n                       ngModel: '=',\n                       index  : '='\n                   },\n                   link    : link\n               };\n\n               function link($scope, elem, attr) {\n\n                   elem.bind('click', function () {\n                       $scope.allImages   = $scope.ngModel;\n                       $scope.activeSlide = $scope.index;\n\n                       console.log($scope.index);\n\n                       $ionicModal.fromTemplateUrl('app/component/ion-slideshow/image-popover.html', {\n                           scope: $scope,\n                       }).then(function (modal) {\n                           $scope.modal = modal;\n                           $scope.modal.show();\n                       });\n\n                       // Close the modal\n                       $scope.closeModal = function () {\n                           $scope.modal.hide();\n                           $scope.modal.remove()\n                       };\n                   });\n\n\n               }\n           });\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.main');\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('starter')\n        .run(startParse)\n        .run(runIonic)\n        .run(runFacebook)\n        .config(configCompile)\n        .config(configFacebook)\n        .config(configIonic);\n\n    function configCompile($compileProvider) {\n        $compileProvider.debugInfoEnabled(false);\n    }\n\n\n    function startParse(AppConfig, $ionicPlatform, $localStorage, $location, $rootScope) {\n        Parse.initialize(AppConfig.parse.appId);\n        Parse.serverURL = AppConfig.parse.server;\n\n        if (!$localStorage.unit) {\n            $localStorage.unit = AppConfig.map.unit;\n        }\n\n        if (!$localStorage.mapType) {\n            $localStorage.mapType = AppConfig.map.type;\n        }\n\n        $rootScope.currentUser = Parse.User.current();\n        console.log($rootScope.currentUser);\n        if (!$rootScope.currentUser) {\n            $location.path('/');\n        }\n    }\n\n    function runIonic($ionicPlatform, $rootScope, $localStorage, $translate, $cordovaGlobalization, $cordovaSplashscreen, ParsePush, ConnectMonitor, AppConfig, User) {\n\n        // Set Theme Color\n        $rootScope.theme = AppConfig.theme;\n\n        $ionicPlatform.ready(function () {\n\n            if (window.cordova && window.cordova.plugins.Keyboard) {\n                cordova.plugins.Keyboard.disableScroll(true);\n                window.StatusBar.styleLightContent();\n            }\n\n            // Remove back button android\n            $ionicPlatform.registerBackButtonAction(function (event) {\n                event.preventDefault();\n            }, 100);\n\n            if ($localStorage.lang) {\n                $translate.use($localStorage.lang);\n            } else {\n                if (typeof navigator.globalization !== 'undefined') {\n                    $cordovaGlobalization.getPreferredLanguage().then(function (language) {\n                        $translate.use((language.value).split('-')[0]);\n                    }, null);\n                }\n            }\n\n            // Hide Splash Screen\n            if (navigator && navigator.splashscreen) {\n                $cordovaSplashscreen.hide();\n            }\n\n            // Start Parse Push\n            if (Parse.User.current()) {\n                ParsePush.init();\n            }\n\n            //ConnectMonitor.watch();\n        });\n\n\n    }\n\n    function configIonic($ionicConfigProvider) {\n        $ionicConfigProvider.platform.ios.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n        $ionicConfigProvider.platform.android.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n        $ionicConfigProvider.views.swipeBackEnabled(false);\n        $ionicConfigProvider.backButton.text(' ').icon('ion-ios-arrow-left');\n        //$ionicConfigProvider.backButton.previousTitleText (false).text ('Voltar').icon ('ion-ios-arrow-left');\n        //$ionicConfigProvider.views.transition ('platform');\n        $ionicConfigProvider.tabs.position('bottom');\n        $ionicConfigProvider.navBar.alignTitle('center');\n        $ionicConfigProvider.views.maxCache(1);\n    }\n\n    // Facebook\n    function configFacebook($facebookProvider, AppConfig) {\n        if (!window.cordova) {\n            $facebookProvider.setAppId(AppConfig.facebookAppId);\n            $facebookProvider.setPermissions('id,name,email,user_likes,bio');\n        }\n    }\n\n    function runFacebook() {\n\n        if (!window.cordova) {\n            console.log('Facebook Browser');\n            var LangVar     = window.navigator.language || window.navigator.userLanguage;\n            var userLangVar = LangVar.substring(0, 2) + '_' + LangVar.substring(3, 5).toUpperCase();\n\n            (function (d, s, id) {\n                var js, fjs = d.getElementsByTagName(s)[0];\n                if (d.getElementById(id)) {return;}\n                js     = d.createElement(s);\n                js.id  = id;\n                js.src = 'http://connect.facebook.net/' + userLangVar + '/sdk.js';\n                fjs.parentNode.insertBefore(js, fjs);\n            }(document, 'script', 'facebook-jssdk'));\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('ionic').constant('AppConfig', AppConfig());\n\n    function AppConfig() {\n        return {\n            path           : 'app/module/photogram',\n            app            : {\n                name : 'Photogram',\n                url  : 'http://photogramapp.com',\n                image: 'http://photogramapp.com/social-share.jpg',\n            },\n            routes         : {\n                home : 'tab.home',\n                login: 'intro'\n            },\n            theme : 'positive',\n            gaTrackingId   : 'UA-69485876-2',\n            facebookAppId  : '1024016557617380',\n            parse          : {\n                appId : 'myAppId',\n                server: 'https://photogram.codevibe.io/parse/',\n            },\n            map            : {\n                unit: 'mi',\n                type: 'normal',\n            },\n            locales        : [\n                {\n                    translation: 'portugues',\n                    code       : 'pt'\n                },\n                {\n                    translation: 'english',\n                    code       : 'en'\n                },\n                {\n                    translation: 'turkish',\n                    code       : 'tr'\n                },\n                {\n                    translation: 'persian',\n                    code       : 'fa'\n                },\n                {\n                    translation: 'german',\n                    code       : 'de'\n                }\n            ],\n            preferredLocale: 'en',\n            DAO            : {\n                name  : 'photogram_db',\n                tables: [\n                    {\n                        name   : 'User',\n                        columns: {\n                            id         : 'TEXT PRIMARY KEY',\n                            name       : 'TEXT',\n                            username   : 'TEXT',\n                            email      : 'TEXT',\n                            language   : 'TEXT',\n                            facebookimg: 'TEXT',\n                            gender     : 'TEXT',\n                            img        : 'TEXT',\n                            facebook   : 'INTEGER',\n                            qtdFollow  : 'INTEGER',\n                            status     : 'TEXT',\n                            createdAt  : 'INTEGER',\n                            attributes : 'TEXT'\n                        }\n                    },\n                    {\n                        name   : 'UserFollow',\n                        columns: {\n                            id      : 'TEXT PRIMARY KEY',\n                            user_id : 'TEXT',\n                            followId: 'TEXT'\n                        },\n                    },\n                    {\n                        name   : 'Gallery',\n                        columns: {\n                            id       : 'TEXT PRIMARY KEY',\n                            img      : 'TEXT',\n                            title    : 'TEXT',\n                            user_id  : 'TEXT',\n                            location : 'TEXT',\n                            isLiked  : 'BOOLEAN',\n                            likes    : 'INTEGER',\n                            createdAt: 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GalleryActivity',\n                        columns: {\n                            id        : 'TEXT PRIMARY KEY',\n                            action    : 'TEXT',\n                            img       : 'TEXT',\n                            userAvatar: 'TEXT',\n                            userName  : 'TEXT',\n                            user_id   : 'TEXT',\n                            gallery_id: 'TEXT',\n                            createdAt : 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GalleryComment',\n                        columns: {\n                            id        : 'TEXT PRIMARY KEY',\n                            name      : 'TEXT',\n                            user_id   : 'TEXT',\n                            userName  : 'TEXT',\n                            gallery_id: 'TEXT',\n                            createdAt : 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GallerySetting',\n                        columns: {\n                            key  : 'TEXT',\n                            value: 'TEXT'\n                        }\n                    }\n                ]\n            }\n        };\n    }\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').config(routes);\n\n    function routes($stateProvider, $urlRouterProvider, $translatePartialLoaderProvider) {\n\n        // Translation\n        $translatePartialLoaderProvider.addPart('app');\n\n        $stateProvider\n\n            .state('loading', {\n                url         : '/',\n                templateUrl : 'app/main/loading/loading.html',\n                controller  : 'LoadingCtrl',\n                controllerAs: 'vm'\n            })\n\n\n            .state('intro', {\n                url        : '/intro',\n                templateUrl: 'app/main/user-intro/user-intro.html',\n                controller : 'UserIntroCtrl',\n                controllerAs: 'vm',\n            })\n\n            .state('user.intro', {\n                url        : '/intro',\n                templateUrl: 'app/main/user-intro/user-intro.html',\n                controller : 'UserIntroCtrl'\n            })\n\n            .state('user', {\n                url        : '/user',\n                abstract   : true,\n                templateUrl: 'app/main/user-layout/user-layout.html'\n            })\n\n            .state('user.avatar', {\n                url         : '/avatar',\n                templateUrl : 'app/main/user-avatar/user-avatar.html',\n                controller  : 'UserAvatarCtrl',\n                controllerAs: 'vm'\n            })\n\n\n            .state('user.merge', {\n                url         : '/merge',\n                controller  : 'UserMergeCtrl',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/user-merge/merge.html'\n            })\n\n            .state('logout', {\n                url         : '/logout',\n                template    : '<ion-view view-title=\"Logout\" cache-view=\"false\"><ion-content></ion-content></ion-view>',\n                controller  : function (User, $localStorage, AppConfig, $state) {\n                    //Parse.User.logOut();\n                    delete window.localStorage['Parse/' + AppConfig.parse.appId + '/currentUser'];\n                    delete window.localStorage['Parse/' + AppConfig.parse.appId + '/installationId'];\n                    $localStorage.$reset({});\n                    $state.go('user.intro', {clear: true});\n                },\n                controllerAs: 'vm'\n            })\n\n            .state('profile', {\n                url         : '/profile/:username',\n                templateUrl : 'app/main/profile/profile.html',\n                controllerAs: 'vm',\n            })\n\n            .state('tab', {\n                url         : '/tab',\n                abstract    : true,\n                controller  : 'MainTabCtrl',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/tab/main-tab.html'\n            })\n\n            .state('tab.home', {\n                url  : '/home',\n                views: {\n                    tabHome: {\n                        controller  : 'HomeCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-home/home.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfile', {\n                url  : '/home/:username',\n                views: {\n                    tabHome: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('galleryComments', {\n                url         : '/home/:galleryId/comments',\n                controller  : 'GalleryComment',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/gallery-comment/gallery-comment.html'\n            })\n\n            .state('tab.homeGalleryLikers', {\n                url  : '/home/:galleryId/likers',\n                views: {\n                    tabHome: {\n                        controller  : 'UserLikersCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-likers/user-likers.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfileFollowers', {\n                url  : '/home/:username/followers',\n                views: {\n                    tabHome: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfileFollowing', {\n                url  : '/home/:username/follwing',\n                views: {\n                    tabHome: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.homeUserlist', {\n                url  : '/home/userlist',\n                views: {\n                    tabHome: {\n                        controller  : 'UserListCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-list/user-list.html'\n                    }\n                }\n            })\n\n            .state('tab.search', {\n                url  : '/search/:text',\n                views: {\n                    tabSearch: {\n                        controller  : 'SearchCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-search/search.html',\n                    }\n                }\n            })\n\n            .state('tab.searchProfile', {\n                url  : '/search/:username',\n                views: {\n                    tabSearch: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('tab.searchProfileFollowers', {\n                url  : '/search/:username/followers',\n                views: {\n                    tabSearch: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.map', {\n                url  : '/map',\n                views: {\n                    tabSearch: {\n                        controller  : 'SearchMapCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-search-map/searchMap.html',\n                    }\n                }\n            })\n\n            .state('tab.mapProfile', {\n                url  : '/map/:username',\n                views: {\n                    tabSearch: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('tab.mapProfileFollowers', {\n                url  : '/map/:username/followers',\n                views: {\n                    tabSearch: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.mapProfileFollowing', {\n                url  : '/map/:username/follwing',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.account', {\n                url  : '/account',\n                views: {\n                    tabProfile: {\n                        controller  : 'AccountCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-account/account.html'\n                    }\n                }\n            })\n\n            .state('tab.accountFollowers', {\n                url  : '/account/:username/followers',\n                views: {\n                    tabProfile: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.accountFollowing', {\n                url  : '/account/:username/follwing',\n                views: {\n                    tabProfile: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.activity', {\n                url  : '/activity',\n                views: {\n                    tabActivity: {\n                        controller  : 'ActivityCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-activity/activity.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfile', {\n                url  : '/activity/:username',\n                views: {\n                    tabActivity: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfileFollowers', {\n                url  : '/activity/:username/followers',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfileFollowing', {\n                url  : '/activity/:username/follwing',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n        ;\n\n        // Translation\n        //$translatePartialLoaderProvider.addPart('app/main');\n        $urlRouterProvider.otherwise('/');\n\n    }\n\n\n})();\n// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @externs_url https://raw.githubusercontent.com/google/closure-compiler/master/contrib/externs/maps/google_maps_api_v3.js\n// ==/ClosureCompiler==\n\n/**\n * @name MarkerClusterer for Google Maps v3\n * @version version 1.0\n * @author Luke Mahe\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of\n * markers.\n * <br/>\n * This is a v3 implementation of the\n * <a href=\"http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/\"\n * >v2 MarkerClusterer</a>.\n */\n\n/**\n * @license\n * Copyright 2010 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * A Marker Clusterer that clusters markers.\n *\n * @param {google.maps.Map} map The Google map to attach to.\n * @param {Array.<google.maps.Marker>=} opt_markers Optional markers to add to\n *   the cluster.\n * @param {Object=} opt_options support the following options:\n *     'gridSize': (number) The grid size of a cluster in pixels.\n *     'maxZoom': (number) The maximum zoom level that a marker can be part of a\n *                cluster.\n *     'zoomOnClick': (boolean) Whether the default behaviour of clicking on a\n *                    cluster is to zoom into it.\n *     'averageCenter': (boolean) Whether the center of each cluster should be\n *                      the average of all markers in the cluster.\n *     'minimumClusterSize': (number) The minimum number of markers to be in a\n *                           cluster before the markers are hidden and a count\n *                           is shown.\n *     'styles': (object) An object that has style properties:\n *       'url': (string) The image url.\n *       'height': (number) The image height.\n *       'width': (number) The image width.\n *       'anchor': (Array) The anchor position of the label text.\n *       'textColor': (string) The text color.\n *       'textSize': (number) The text size.\n *       'backgroundPosition': (string) The position of the backgound x, y.\n *       'iconAnchor': (Array) The anchor position of the icon x, y.\n * @constructor\n * @extends google.maps.OverlayView\n */\nfunction MarkerClusterer(map, opt_markers, opt_options) {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    this.extend(MarkerClusterer, google.maps.OverlayView);\n    this.map_ = map;\n\n    /**\n     * @type {Array.<google.maps.Marker>}\n     * @private\n     */\n    this.markers_ = [];\n\n    /**\n     *  @type {Array.<Cluster>}\n     */\n    this.clusters_ = [];\n\n    this.sizes = [53, 56, 66, 78, 90];\n\n    /**\n     * @private\n     */\n    this.styles_ = [];\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.ready_ = false;\n\n    var options = opt_options || {};\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.gridSize_ = options['gridSize'] || 60;\n\n    /**\n     * @private\n     */\n    this.minClusterSize_ = options['minimumClusterSize'] || 2;\n\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.maxZoom_ = options['maxZoom'] || null;\n\n    this.styles_ = options['styles'] || [];\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.imagePath_ = options['imagePath'] ||\n        this.MARKER_CLUSTER_IMAGE_PATH_;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.imageExtension_ = options['imageExtension'] ||\n        this.MARKER_CLUSTER_IMAGE_EXTENSION_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.zoomOnClick_ = true;\n\n    if (options['zoomOnClick'] != undefined) {\n        this.zoomOnClick_ = options['zoomOnClick'];\n    }\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.averageCenter_ = false;\n\n    if (options['averageCenter'] != undefined) {\n        this.averageCenter_ = options['averageCenter'];\n    }\n\n    this.setupStyles_();\n\n    this.setMap(map);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.prevZoom_ = this.map_.getZoom();\n\n    // Add the map event listeners\n    var that = this;\n    google.maps.event.addListener(this.map_, 'zoom_changed', function() {\n        var zoom = that.map_.getZoom();\n\n        if (that.prevZoom_ != zoom) {\n            that.prevZoom_ = zoom;\n            that.resetViewport();\n        }\n    });\n\n    google.maps.event.addListener(this.map_, 'idle', function() {\n        that.redraw();\n    });\n\n    // Finally, add the markers\n    if (opt_markers && opt_markers.length) {\n        this.addMarkers(opt_markers, false);\n    }\n}\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_ = '../images/m';\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_ = 'png';\n\n\n/**\n * Extends a objects prototype by anothers.\n *\n * @param {Object} obj1 The object to be extended.\n * @param {Object} obj2 The object to extend with.\n * @return {Object} The new extended object.\n * @ignore\n */\nMarkerClusterer.prototype.extend = function(obj1, obj2) {\n    return (function(object) {\n        for (var property in object.prototype) {\n            this.prototype[property] = object.prototype[property];\n        }\n        return this;\n    }).apply(obj1, [obj2]);\n};\n\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.onAdd = function() {\n    this.setReady_(true);\n};\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.draw = function() {};\n\n/**\n * Sets up the styles object.\n *\n * @private\n */\nMarkerClusterer.prototype.setupStyles_ = function() {\n    if (this.styles_.length) {\n        return;\n    }\n\n    for (var i = 0, size; size = this.sizes[i]; i++) {\n        this.styles_.push({\n            url: this.imagePath_ + (i + 1) + '.' + this.imageExtension_,\n            height: size,\n            width: size\n        });\n    }\n};\n\n/**\n *  Fit the map to the bounds of the markers in the clusterer.\n */\nMarkerClusterer.prototype.fitMapToMarkers = function() {\n    var markers = this.getMarkers();\n    var bounds = new google.maps.LatLngBounds();\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        bounds.extend(marker.getPosition());\n    }\n\n    this.map_.fitBounds(bounds);\n};\n\n\n/**\n *  Sets the styles.\n *\n *  @param {Object} styles The style to set.\n */\nMarkerClusterer.prototype.setStyles = function(styles) {\n    this.styles_ = styles;\n};\n\n\n/**\n *  Gets the styles.\n *\n *  @return {Object} The styles object.\n */\nMarkerClusterer.prototype.getStyles = function() {\n    return this.styles_;\n};\n\n\n/**\n * Whether zoom on click is set.\n *\n * @return {boolean} True if zoomOnClick_ is set.\n */\nMarkerClusterer.prototype.isZoomOnClick = function() {\n    return this.zoomOnClick_;\n};\n\n/**\n * Whether average center is set.\n *\n * @return {boolean} True if averageCenter_ is set.\n */\nMarkerClusterer.prototype.isAverageCenter = function() {\n    return this.averageCenter_;\n};\n\n\n/**\n *  Returns the array of markers in the clusterer.\n *\n *  @return {Array.<google.maps.Marker>} The markers.\n */\nMarkerClusterer.prototype.getMarkers = function() {\n    return this.markers_;\n};\n\n\n/**\n *  Returns the number of markers in the clusterer\n *\n *  @return {Number} The number of markers.\n */\nMarkerClusterer.prototype.getTotalMarkers = function() {\n    return this.markers_.length;\n};\n\n\n/**\n *  Sets the max zoom for the clusterer.\n *\n *  @param {number} maxZoom The max zoom level.\n */\nMarkerClusterer.prototype.setMaxZoom = function(maxZoom) {\n    this.maxZoom_ = maxZoom;\n};\n\n\n/**\n *  Gets the max zoom for the clusterer.\n *\n *  @return {number} The max zoom level.\n */\nMarkerClusterer.prototype.getMaxZoom = function() {\n    return this.maxZoom_;\n};\n\n\n/**\n *  The function for calculating the cluster icon image.\n *\n *  @param {Array.<google.maps.Marker>} markers The markers in the clusterer.\n *  @param {number} numStyles The number of styles available.\n *  @return {Object} A object properties: 'text' (string) and 'index' (number).\n *  @private\n */\nMarkerClusterer.prototype.calculator_ = function(markers, numStyles) {\n    var index = 0;\n    var count = markers.length;\n    var dv = count;\n    while (dv !== 0) {\n        dv = parseInt(dv / 10, 10);\n        index++;\n    }\n\n    index = Math.min(index, numStyles);\n    return {\n        text: count,\n        index: index\n    };\n};\n\n\n/**\n * Set the calculator function.\n *\n * @param {function(Array, number)} calculator The function to set as the\n *     calculator. The function should return a object properties:\n *     'text' (string) and 'index' (number).\n *\n */\nMarkerClusterer.prototype.setCalculator = function(calculator) {\n    this.calculator_ = calculator;\n};\n\n\n/**\n * Get the calculator function.\n *\n * @return {function(Array, number)} the calculator function.\n */\nMarkerClusterer.prototype.getCalculator = function() {\n    return this.calculator_;\n};\n\n\n/**\n * Add an array of markers to the clusterer.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarkers = function(markers, opt_nodraw) {\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        this.pushMarkerTo_(marker);\n    }\n    if (!opt_nodraw) {\n        this.redraw();\n    }\n};\n\n\n/**\n * Pushes a marker to the clusterer.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.pushMarkerTo_ = function(marker) {\n    marker.isAdded = false;\n    if (marker['draggable']) {\n        // If the marker is draggable add a listener so we update the clusters on\n        // the drag end.\n        var that = this;\n        google.maps.event.addListener(marker, 'dragend', function() {\n            marker.isAdded = false;\n            that.repaint();\n        });\n    }\n    this.markers_.push(marker);\n};\n\n\n/**\n * Adds a marker to the clusterer and redraws if needed.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarker = function(marker, opt_nodraw) {\n    this.pushMarkerTo_(marker);\n    if (!opt_nodraw) {\n        this.redraw();\n    }\n};\n\n\n/**\n * Removes a marker and returns true if removed, false if not\n *\n * @param {google.maps.Marker} marker The marker to remove\n * @return {boolean} Whether the marker was removed or not\n * @private\n */\nMarkerClusterer.prototype.removeMarker_ = function(marker) {\n    var index = -1;\n    if (this.markers_.indexOf) {\n        index = this.markers_.indexOf(marker);\n    } else {\n        for (var i = 0, m; m = this.markers_[i]; i++) {\n            if (m == marker) {\n                index = i;\n                break;\n            }\n        }\n    }\n\n    if (index == -1) {\n        // Marker is not in our list of markers.\n        return false;\n    }\n\n    marker.setMap(null);\n\n    this.markers_.splice(index, 1);\n\n    return true;\n};\n\n\n/**\n * Remove a marker from the cluster.\n *\n * @param {google.maps.Marker} marker The marker to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n * @return {boolean} True if the marker was removed.\n */\nMarkerClusterer.prototype.removeMarker = function(marker, opt_nodraw) {\n    var removed = this.removeMarker_(marker);\n\n    if (!opt_nodraw && removed) {\n        this.resetViewport();\n        this.redraw();\n        return true;\n    } else {\n        return false;\n    }\n};\n\n\n/**\n * Removes an array of markers from the cluster.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n */\nMarkerClusterer.prototype.removeMarkers = function(markers, opt_nodraw) {\n    var removed = false;\n\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        var r = this.removeMarker_(marker);\n        removed = removed || r;\n    }\n\n    if (!opt_nodraw && removed) {\n        this.resetViewport();\n        this.redraw();\n        return true;\n    }\n};\n\n\n/**\n * Sets the clusterer's ready state.\n *\n * @param {boolean} ready The state.\n * @private\n */\nMarkerClusterer.prototype.setReady_ = function(ready) {\n    if (!this.ready_) {\n        this.ready_ = ready;\n        this.createClusters_();\n    }\n};\n\n\n/**\n * Returns the number of clusters in the clusterer.\n *\n * @return {number} The number of clusters.\n */\nMarkerClusterer.prototype.getTotalClusters = function() {\n    return this.clusters_.length;\n};\n\n\n/**\n * Returns the google map that the clusterer is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nMarkerClusterer.prototype.getMap = function() {\n    return this.map_;\n};\n\n\n/**\n * Sets the google map that the clusterer is associated with.\n *\n * @param {google.maps.Map} map The map.\n */\nMarkerClusterer.prototype.setMap = function(map) {\n    this.map_ = map;\n};\n\n\n/**\n * Returns the size of the grid.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getGridSize = function() {\n    return this.gridSize_;\n};\n\n\n/**\n * Sets the size of the grid.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setGridSize = function(size) {\n    this.gridSize_ = size;\n};\n\n\n/**\n * Returns the min cluster size.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getMinClusterSize = function() {\n    return this.minClusterSize_;\n};\n\n/**\n * Sets the min cluster size.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setMinClusterSize = function(size) {\n    this.minClusterSize_ = size;\n};\n\n\n/**\n * Extends a bounds object by the grid size.\n *\n * @param {google.maps.LatLngBounds} bounds The bounds to extend.\n * @return {google.maps.LatLngBounds} The extended bounds.\n */\nMarkerClusterer.prototype.getExtendedBounds = function(bounds) {\n    var projection = this.getProjection();\n\n    // Turn the bounds into latlng.\n    var tr = new google.maps.LatLng(bounds.getNorthEast().lat(),\n        bounds.getNorthEast().lng());\n    var bl = new google.maps.LatLng(bounds.getSouthWest().lat(),\n        bounds.getSouthWest().lng());\n\n    // Convert the points to pixels and the extend out by the grid size.\n    var trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n\n    var blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n\n    // Convert the pixel points back to LatLng\n    var ne = projection.fromDivPixelToLatLng(trPix);\n    var sw = projection.fromDivPixelToLatLng(blPix);\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n\n    return bounds;\n};\n\n\n/**\n * Determins if a marker is contained in a bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @param {google.maps.LatLngBounds} bounds The bounds to check against.\n * @return {boolean} True if the marker is in the bounds.\n * @private\n */\nMarkerClusterer.prototype.isMarkerInBounds_ = function(marker, bounds) {\n    return bounds.contains(marker.getPosition());\n};\n\n\n/**\n * Clears all clusters and markers from the clusterer.\n */\nMarkerClusterer.prototype.clearMarkers = function() {\n    this.resetViewport(true);\n\n    // Set the markers a empty array.\n    this.markers_ = [];\n};\n\n\n/**\n * Clears all existing clusters and recreates them.\n * @param {boolean} opt_hide To also hide the marker.\n */\nMarkerClusterer.prototype.resetViewport = function(opt_hide) {\n    // Remove all the clusters\n    for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n        cluster.remove();\n    }\n\n    // Reset the markers to not be added and to be invisible.\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n        marker.isAdded = false;\n        if (opt_hide) {\n            marker.setMap(null);\n        }\n    }\n\n    this.clusters_ = [];\n};\n\n/**\n *\n */\nMarkerClusterer.prototype.repaint = function() {\n    var oldClusters = this.clusters_.slice();\n    this.clusters_.length = 0;\n    this.resetViewport();\n    this.redraw();\n\n    // Remove the old clusters.\n    // Do it in a timeout so the other clusters have been drawn first.\n    window.setTimeout(function() {\n        for (var i = 0, cluster; cluster = oldClusters[i]; i++) {\n            cluster.remove();\n        }\n    }, 0);\n};\n\n\n/**\n * Redraws the clusters.\n */\nMarkerClusterer.prototype.redraw = function() {\n    this.createClusters_();\n};\n\n\n/**\n * Calculates the distance between two latlng locations in km.\n * @see http://www.movable-type.co.uk/scripts/latlong.html\n *\n * @param {google.maps.LatLng} p1 The first lat lng point.\n * @param {google.maps.LatLng} p2 The second lat lng point.\n * @return {number} The distance between the two points in km.\n * @private\n */\nMarkerClusterer.prototype.distanceBetweenPoints_ = function(p1, p2) {\n    if (!p1 || !p2) {\n        return 0;\n    }\n\n    var R = 6371; // Radius of the Earth in km\n    var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;\n    var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var d = R * c;\n    return d;\n};\n\n\n/**\n * Add a marker to a cluster, or creates a new cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.addToClosestCluster_ = function(marker) {\n    var distance = 40000; // Some large number\n    var clusterToAddTo = null;\n    var pos = marker.getPosition();\n    for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n        var center = cluster.getCenter();\n        if (center) {\n            var d = this.distanceBetweenPoints_(center, marker.getPosition());\n            if (d < distance) {\n                distance = d;\n                clusterToAddTo = cluster;\n            }\n        }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n        clusterToAddTo.addMarker(marker);\n    } else {\n        var cluster = new Cluster(this);\n        cluster.addMarker(marker);\n        this.clusters_.push(cluster);\n    }\n};\n\n\n/**\n * Creates the clusters.\n *\n * @private\n */\nMarkerClusterer.prototype.createClusters_ = function() {\n    if (!this.ready_) {\n        return;\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    var mapBounds = new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),\n        this.map_.getBounds().getNorthEast());\n    var bounds = this.getExtendedBounds(mapBounds);\n\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n        if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n            this.addToClosestCluster_(marker);\n        }\n    }\n};\n\n\n/**\n * A cluster that contains markers.\n *\n * @param {MarkerClusterer} markerClusterer The markerclusterer that this\n *     cluster is associated with.\n * @constructor\n * @ignore\n */\nfunction Cluster(markerClusterer) {\n    this.markerClusterer_ = markerClusterer;\n    this.map_ = markerClusterer.getMap();\n    this.gridSize_ = markerClusterer.getGridSize();\n    this.minClusterSize_ = markerClusterer.getMinClusterSize();\n    this.averageCenter_ = markerClusterer.isAverageCenter();\n    this.center_ = null;\n    this.markers_ = [];\n    this.bounds_ = null;\n    this.clusterIcon_ = new ClusterIcon(this, markerClusterer.getStyles(),\n        markerClusterer.getGridSize());\n}\n\n/**\n * Determins if a marker is already added to the cluster.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker is already added.\n */\nCluster.prototype.isMarkerAlreadyAdded = function(marker) {\n    if (this.markers_.indexOf) {\n        return this.markers_.indexOf(marker) != -1;\n    } else {\n        for (var i = 0, m; m = this.markers_[i]; i++) {\n            if (m == marker) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n\n\n/**\n * Add a marker the cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @return {boolean} True if the marker was added.\n */\nCluster.prototype.addMarker = function(marker) {\n    if (this.isMarkerAlreadyAdded(marker)) {\n        return false;\n    }\n\n    if (!this.center_) {\n        this.center_ = marker.getPosition();\n        this.calculateBounds_();\n    } else {\n        if (this.averageCenter_) {\n            var l = this.markers_.length + 1;\n            var lat = (this.center_.lat() * (l-1) + marker.getPosition().lat()) / l;\n            var lng = (this.center_.lng() * (l-1) + marker.getPosition().lng()) / l;\n            this.center_ = new google.maps.LatLng(lat, lng);\n            this.calculateBounds_();\n        }\n    }\n\n    marker.isAdded = true;\n    this.markers_.push(marker);\n\n    var len = this.markers_.length;\n    if (len < this.minClusterSize_ && marker.getMap() != this.map_) {\n        // Min cluster size not reached so show the marker.\n        marker.setMap(this.map_);\n    }\n\n    if (len == this.minClusterSize_) {\n        // Hide the markers that were showing.\n        for (var i = 0; i < len; i++) {\n            this.markers_[i].setMap(null);\n        }\n    }\n\n    if (len >= this.minClusterSize_) {\n        marker.setMap(null);\n    }\n\n    this.updateIcon();\n    return true;\n};\n\n\n/**\n * Returns the marker clusterer that the cluster is associated with.\n *\n * @return {MarkerClusterer} The associated marker clusterer.\n */\nCluster.prototype.getMarkerClusterer = function() {\n    return this.markerClusterer_;\n};\n\n\n/**\n * Returns the bounds of the cluster.\n *\n * @return {google.maps.LatLngBounds} the cluster bounds.\n */\nCluster.prototype.getBounds = function() {\n    var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    var markers = this.getMarkers();\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        bounds.extend(marker.getPosition());\n    }\n    return bounds;\n};\n\n\n/**\n * Removes the cluster\n */\nCluster.prototype.remove = function() {\n    this.clusterIcon_.remove();\n    this.markers_.length = 0;\n    delete this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {number} The cluster center.\n */\nCluster.prototype.getSize = function() {\n    return this.markers_.length;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {Array.<google.maps.Marker>} The cluster center.\n */\nCluster.prototype.getMarkers = function() {\n    return this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {google.maps.LatLng} The cluster center.\n */\nCluster.prototype.getCenter = function() {\n    return this.center_;\n};\n\n\n/**\n * Calculated the extended bounds of the cluster with the grid.\n *\n * @private\n */\nCluster.prototype.calculateBounds_ = function() {\n    var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n};\n\n\n/**\n * Determines if a marker lies in the clusters bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker lies in the bounds.\n */\nCluster.prototype.isMarkerInClusterBounds = function(marker) {\n    return this.bounds_.contains(marker.getPosition());\n};\n\n\n/**\n * Returns the map that the cluster is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nCluster.prototype.getMap = function() {\n    return this.map_;\n};\n\n\n/**\n * Updates the cluster icon\n */\nCluster.prototype.updateIcon = function() {\n    var zoom = this.map_.getZoom();\n    var mz = this.markerClusterer_.getMaxZoom();\n\n    if (mz && zoom > mz) {\n        // The zoom is greater than our max zoom so show all the markers in cluster.\n        for (var i = 0, marker; marker = this.markers_[i]; i++) {\n            marker.setMap(this.map_);\n        }\n        return;\n    }\n\n    if (this.markers_.length < this.minClusterSize_) {\n        // Min cluster size not yet reached.\n        this.clusterIcon_.hide();\n        return;\n    }\n\n    var numStyles = this.markerClusterer_.getStyles().length;\n    var sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.setSums(sums);\n    this.clusterIcon_.show();\n};\n\n\n/**\n * A cluster icon\n *\n * @param {Cluster} cluster The cluster to be associated with.\n * @param {Object} styles An object that has style properties:\n *     'url': (string) The image url.\n *     'height': (number) The image height.\n *     'width': (number) The image width.\n *     'anchor': (Array) The anchor position of the label text.\n *     'textColor': (string) The text color.\n *     'textSize': (number) The text size.\n *     'backgroundPosition: (string) The background postition x, y.\n * @param {number=} opt_padding Optional padding to apply to the cluster icon.\n * @constructor\n * @extends google.maps.OverlayView\n * @ignore\n */\nfunction ClusterIcon(cluster, styles, opt_padding) {\n    cluster.getMarkerClusterer().extend(ClusterIcon, google.maps.OverlayView);\n\n    this.styles_ = styles;\n    this.padding_ = opt_padding || 0;\n    this.cluster_ = cluster;\n    this.center_ = null;\n    this.map_ = cluster.getMap();\n    this.div_ = null;\n    this.sums_ = null;\n    this.visible_ = false;\n\n    this.setMap(this.map_);\n}\n\n\n/**\n * Triggers the clusterclick event and zoom's if the option is set.\n *\n * @param {google.maps.MouseEvent} event The event to propagate\n */\nClusterIcon.prototype.triggerClusterClick = function(event) {\n    var markerClusterer = this.cluster_.getMarkerClusterer();\n\n    // Trigger the clusterclick event.\n    google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_, event);\n\n    if (markerClusterer.isZoomOnClick()) {\n        // Zoom into the cluster.\n        this.map_.fitBounds(this.cluster_.getBounds());\n    }\n};\n\n\n/**\n * Adding the cluster icon to the dom.\n * @ignore\n */\nClusterIcon.prototype.onAdd = function() {\n    this.div_ = document.createElement('DIV');\n    if (this.visible_) {\n        var pos = this.getPosFromLatLng_(this.center_);\n        this.div_.style.cssText = this.createCss(pos);\n        this.div_.innerHTML = this.sums_.text;\n    }\n\n    var panes = this.getPanes();\n    panes.overlayMouseTarget.appendChild(this.div_);\n\n    var that = this;\n    var isDragging = false;\n    google.maps.event.addDomListener(this.div_, 'click', function(event) {\n        // Only perform click when not preceded by a drag\n        if (!isDragging) {\n            that.triggerClusterClick(event);\n        }\n    });\n    google.maps.event.addDomListener(this.div_, 'mousedown', function() {\n        isDragging = false;\n    });\n    google.maps.event.addDomListener(this.div_, 'mousemove', function() {\n        isDragging = true;\n    });\n};\n\n\n/**\n * Returns the position to place the div dending on the latlng.\n *\n * @param {google.maps.LatLng} latlng The position in latlng.\n * @return {google.maps.Point} The position in pixels.\n * @private\n */\nClusterIcon.prototype.getPosFromLatLng_ = function(latlng) {\n    var pos = this.getProjection().fromLatLngToDivPixel(latlng);\n\n    if (typeof this.iconAnchor_ === 'object' && this.iconAnchor_.length === 2) {\n        pos.x -= this.iconAnchor_[0];\n        pos.y -= this.iconAnchor_[1];\n    } else {\n        pos.x -= parseInt(this.width_ / 2, 10);\n        pos.y -= parseInt(this.height_ / 2, 10);\n    }\n    return pos;\n};\n\n\n/**\n * Draw the icon.\n * @ignore\n */\nClusterIcon.prototype.draw = function() {\n    if (this.visible_) {\n        var pos = this.getPosFromLatLng_(this.center_);\n        this.div_.style.top = pos.y + 'px';\n        this.div_.style.left = pos.x + 'px';\n    }\n};\n\n\n/**\n * Hide the icon.\n */\nClusterIcon.prototype.hide = function() {\n    if (this.div_) {\n        this.div_.style.display = 'none';\n    }\n    this.visible_ = false;\n};\n\n\n/**\n * Position and show the icon.\n */\nClusterIcon.prototype.show = function() {\n    if (this.div_) {\n        var pos = this.getPosFromLatLng_(this.center_);\n        this.div_.style.cssText = this.createCss(pos);\n        this.div_.style.display = '';\n    }\n    this.visible_ = true;\n};\n\n\n/**\n * Remove the icon from the map\n */\nClusterIcon.prototype.remove = function() {\n    this.setMap(null);\n};\n\n\n/**\n * Implementation of the onRemove interface.\n * @ignore\n */\nClusterIcon.prototype.onRemove = function() {\n    if (this.div_ && this.div_.parentNode) {\n        this.hide();\n        this.div_.parentNode.removeChild(this.div_);\n        this.div_ = null;\n    }\n};\n\n\n/**\n * Set the sums of the icon.\n *\n * @param {Object} sums The sums containing:\n *   'text': (string) The text to display in the icon.\n *   'index': (number) The style index of the icon.\n */\nClusterIcon.prototype.setSums = function(sums) {\n    this.sums_ = sums;\n    this.text_ = sums.text;\n    this.index_ = sums.index;\n    if (this.div_) {\n        this.div_.innerHTML = sums.text;\n    }\n\n    this.useStyle();\n};\n\n\n/**\n * Sets the icon to the the styles.\n */\nClusterIcon.prototype.useStyle = function() {\n    var index = Math.max(0, this.sums_.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    var style = this.styles_[index];\n    this.url_ = style['url'];\n    this.height_ = style['height'];\n    this.width_ = style['width'];\n    this.textColor_ = style['textColor'];\n    this.anchor_ = style['anchor'];\n    this.textSize_ = style['textSize'];\n    this.backgroundPosition_ = style['backgroundPosition'];\n    this.iconAnchor_ = style['iconAnchor'];\n};\n\n\n/**\n * Sets the center of the icon.\n *\n * @param {google.maps.LatLng} center The latlng to set as the center.\n */\nClusterIcon.prototype.setCenter = function(center) {\n    this.center_ = center;\n};\n\n\n/**\n * Create the css text based on the position of the icon.\n *\n * @param {google.maps.Point} pos The position.\n * @return {string} The css style text.\n */\nClusterIcon.prototype.createCss = function(pos) {\n    var style = [];\n    style.push('background-image:url(' + this.url_ + ');');\n    var backgroundPosition = this.backgroundPosition_ ? this.backgroundPosition_ : '0 0';\n    style.push('background-position:' + backgroundPosition + ';');\n\n    if (typeof this.anchor_ === 'object') {\n        if (typeof this.anchor_[0] === 'number' && this.anchor_[0] > 0 &&\n            this.anchor_[0] < this.height_) {\n            style.push('height:' + (this.height_ - this.anchor_[0]) +\n                'px; padding-top:' + this.anchor_[0] + 'px;');\n        } else if (typeof this.anchor_[0] === 'number' && this.anchor_[0] < 0 &&\n            -this.anchor_[0] < this.height_) {\n            style.push('height:' + this.height_ + 'px; line-height:' + (this.height_ + this.anchor_[0]) +\n                'px;');\n        } else {\n            style.push('height:' + this.height_ + 'px; line-height:' + this.height_ +\n                'px;');\n        }\n        if (typeof this.anchor_[1] === 'number' && this.anchor_[1] > 0 &&\n            this.anchor_[1] < this.width_) {\n            style.push('width:' + (this.width_ - this.anchor_[1]) +\n                'px; padding-left:' + this.anchor_[1] + 'px;');\n        } else {\n            style.push('width:' + this.width_ + 'px; text-align:center;');\n        }\n    } else {\n        style.push('height:' + this.height_ + 'px; line-height:' +\n            this.height_ + 'px; width:' + this.width_ + 'px; text-align:center;');\n    }\n\n    var txtColor = this.textColor_ ? this.textColor_ : 'black';\n    var txtSize = this.textSize_ ? this.textSize_ : 11;\n\n    style.push('cursor:pointer; top:' + pos.y + 'px; left:' +\n        pos.x + 'px; color:' + txtColor + '; position:absolute; font-size:' +\n        txtSize + 'px; font-family:Arial,sans-serif; font-weight:bold');\n    return style.join('');\n};\n\n\n// Export Symbols for Closure\n// If you are not going to compile with closure then you can remove the\n// code below.\nwindow['MarkerClusterer'] = MarkerClusterer;\nMarkerClusterer.prototype['addMarker'] = MarkerClusterer.prototype.addMarker;\nMarkerClusterer.prototype['addMarkers'] = MarkerClusterer.prototype.addMarkers;\nMarkerClusterer.prototype['clearMarkers'] =\n    MarkerClusterer.prototype.clearMarkers;\nMarkerClusterer.prototype['fitMapToMarkers'] =\n    MarkerClusterer.prototype.fitMapToMarkers;\nMarkerClusterer.prototype['getCalculator'] =\n    MarkerClusterer.prototype.getCalculator;\nMarkerClusterer.prototype['getGridSize'] =\n    MarkerClusterer.prototype.getGridSize;\nMarkerClusterer.prototype['getExtendedBounds'] =\n    MarkerClusterer.prototype.getExtendedBounds;\nMarkerClusterer.prototype['getMap'] = MarkerClusterer.prototype.getMap;\nMarkerClusterer.prototype['getMarkers'] = MarkerClusterer.prototype.getMarkers;\nMarkerClusterer.prototype['getMaxZoom'] = MarkerClusterer.prototype.getMaxZoom;\nMarkerClusterer.prototype['getStyles'] = MarkerClusterer.prototype.getStyles;\nMarkerClusterer.prototype['getTotalClusters'] =\n    MarkerClusterer.prototype.getTotalClusters;\nMarkerClusterer.prototype['getTotalMarkers'] =\n    MarkerClusterer.prototype.getTotalMarkers;\nMarkerClusterer.prototype['redraw'] = MarkerClusterer.prototype.redraw;\nMarkerClusterer.prototype['removeMarker'] =\n    MarkerClusterer.prototype.removeMarker;\nMarkerClusterer.prototype['removeMarkers'] =\n    MarkerClusterer.prototype.removeMarkers;\nMarkerClusterer.prototype['resetViewport'] =\n    MarkerClusterer.prototype.resetViewport;\nMarkerClusterer.prototype['repaint'] =\n    MarkerClusterer.prototype.repaint;\nMarkerClusterer.prototype['setCalculator'] =\n    MarkerClusterer.prototype.setCalculator;\nMarkerClusterer.prototype['setGridSize'] =\n    MarkerClusterer.prototype.setGridSize;\nMarkerClusterer.prototype['setMaxZoom'] =\n    MarkerClusterer.prototype.setMaxZoom;\nMarkerClusterer.prototype['onAdd'] = MarkerClusterer.prototype.onAdd;\nMarkerClusterer.prototype['draw'] = MarkerClusterer.prototype.draw;\n\nCluster.prototype['getCenter'] = Cluster.prototype.getCenter;\nCluster.prototype['getSize'] = Cluster.prototype.getSize;\nCluster.prototype['getMarkers'] = Cluster.prototype.getMarkers;\n\nClusterIcon.prototype['onAdd'] = ClusterIcon.prototype.onAdd;\nClusterIcon.prototype['draw'] = ClusterIcon.prototype.draw;\nClusterIcon.prototype['onRemove'] = ClusterIcon.prototype.onRemove;\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('signinModal', signinModalDirective);\n\n    function signinModalDirective($ionicModal, Loading, User, $state, Toast, UserForm, AppConfig, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : signinModalLink,\n        };\n\n        function signinModalLink($scope, elem, attr) {\n            elem.bind('click', function () {\n\n                $scope.formFields  = UserForm.login;\n                $scope.routeLogged = AppConfig.routes.home;\n\n                $scope.form = {\n                    username: '',\n                    password: ''\n                };\n\n                $scope.submitLogin = function (rForm, data) {\n                    var form = angular.copy(data);\n                    if (rForm.$valid) {\n                        //Loading.start();\n                        console.log(form);\n                        User.signIn(form).then(function (data) {\n                            console.log(data);\n                            $rootScope.currentUser = data;\n                            $state.go($scope.routeLogged, {\n                                clear: true\n                            });\n                            $scope.closeModal();\n                            Loading.end();\n                        }).catch(function (resp) {\n                            Toast.alert({\n                                title: 'Error',\n                                text : 'Incorrect username or password'\n                            });\n                            Loading.end();\n                        });\n                    } else {\n                        return false;\n                    }\n                };\n\n                $ionicModal.fromTemplateUrl('app/directive/SigninModalDirective.html', {\n                    scope          : $scope,\n                    animation      : 'slide-in-up',\n                    focusFirstInput: true,\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n            });\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('signupModal', signupModalDirective);\n\n    function signupModalDirective(UserForm, AppConfig, Loading, User, $state, Toast, $ionicModal, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : signupModalLink,\n        };\n\n        function signupModalLink($scope, elem, attr) {\n            elem.bind('click', function () {\n\n                $scope.formFields  = UserForm.register;\n                $scope.routeLogged = AppConfig.routes.home;\n\n                $scope.form = {\n                    username: '',\n                    email   : '',\n                    password: ''\n                };\n\n                $scope.submitRegister = function (rForm, data) {\n                    if (rForm.$valid) {\n                        Loading.start();\n                        var form = angular.copy(data);\n                        User.signUp(form).then(function (resp) {\n                            console.log(resp);\n\n                            // After register, login\n                            User.signIn({\n                                username: form.username,\n                                password: form.password\n                            }).then(function (data) {\n                                console.log(data);\n                                $rootScope.currentUser = Parse.User.current();\n                                $state.go('user.avatar', {\n                                    clear: true\n                                });\n                                Loading.end();\n                                $scope.closeModal();\n                            }).catch(function (resp) {\n                                console.log(resp);\n                                Toast.alert({\n                                    title: 'Alert',\n                                    text : resp.error\n                                });\n                                Loading.end();\n                            });\n                        }).catch(function (resp) {\n                            console.log(resp);\n                            Toast.alert({\n                                title: 'Alert',\n                                text : resp.error\n                            });\n                            Loading.end();\n                        });\n                    }\n\n\n                };\n\n                $ionicModal.fromTemplateUrl('app/directive/SignupModalDirective.html', {\n                    scope          : $scope,\n                    animation      : 'slide-in-up',\n                    focusFirstInput: true,\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n            });\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('albumGrid', albumGridDirective);\n\n    function albumGridDirective(GalleryAlbum, $rootScope, $ionicPopup, Share, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                username: '=',\n                user    : '=',\n                profile : '=',\n                onReload: '=',\n            },\n            templateUrl: 'app/directive/albumGridDirective.html',\n            link       : albumGridLink\n        };\n\n        function albumGridLink($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 1;\n            $scope.data        = [];\n\n            if ($scope.username) {\n                $scope.params.username = $scope.username;\n            }\n\n            $scope.loading = true;\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n\n            $rootScope.$on('gallery:search', function (elem, item) {\n                console.log(elem, item);\n                $scope.params.search = item.text;\n                $scope.onReload();\n            });\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n\n            var isMoreData = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n\n                GalleryAlbum.list($scope.params).then(function (data) {\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.loading = false;\n                    $rootScope.$broadcast('scroll.infiniteScrollComplete');\n                    $rootScope.$broadcast('scroll.refreshComplete');\n\n                }).catch(function () {\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                $scope.loading     = true;\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $scope.action = function (gallery) {\n\n                var buttons = [\n                    {\n                        text: '<i class=\"icon ion-share\"></i>' + ('Share')\n                    }, {\n                        text: '<i class=\"icon ion-alert-circled\"></i>' + ('Report')\n                    }\n                ];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user_id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + ('Delete your photo')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    titleText    : ('Photo'),\n                    cancelText   : ('Cancel'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            Share.share(message);\n                            break;\n                        case 1:\n                            FeedbackModal.modal(gallery);\n                            break;\n                        case 2:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : ('Delete photo'),\n                                    template: ('Are you sure?')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery).then(function () {\n                                            console.log('Photo deleted');\n                                            $scope.$emit('PhotogramHome:reload');\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('albumPhotoGrid', albumPhotoGridDirective);\n\n    function albumPhotoGridDirective(AppConfig, Gallery, $ionicModal, $rootScope) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                album: '='\n            },\n            link    : albumPhotoGridCtrl\n        };\n\n        function albumPhotoGridCtrl($scope, elem, attr) {\n\n            elem.bind('click', function () {\n                $scope.theme = AppConfig.theme;\n\n                if (!$scope.album) {\n                    return false;\n                }\n\n                $ionicModal.fromTemplateUrl('app/directive/albumPhotoGridDirective.html', {\n                    scope: $scope,\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n\n                Gallery.getAlbum({id: $scope.album}).then(function (data) {\n                    console.log(data);\n                    $scope.title = data.album.attributes.title;\n                    $scope.data  = data.photos;\n                });\n\n            })\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .directive('buy', buyDirective);\n\n    function buyDirective($cordovaInAppBrowser) {\n        return {\n            restrict: 'A',\n            link: buyLink\n        };\n\n        function buyLink(scope, elem) {\n            elem.bind('click', function () {\n                var url     = 'https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S';\n\n                if(window.cordova ) {\n                    cordova\n                        .ThemeableBrowser\n                        .open(url, '_blank', {\n                            statusbar: {\n                                color: '#ffffffff'\n                            },\n                            toolbar: {\n                                height: 44,\n                                color: '#f0f0f0ff'\n                            },\n                            title: {\n                                color: '#333333',\n                                showPageTitle: true\n                            },\n                            closeButton: {\n                                image: 'close',\n                                imagePressed: 'close_pressed',\n                                align: 'left',\n                                event: 'closePressed'\n                            },\n                            backButtonCanClose: true\n                        });\n                } else {\n                    window.open(url,'_blank');\n                }\n            });\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('compareTo', compareToDirective);\n\n    function compareToDirective() {\n        return {\n            restrict: 'A',\n            scope   : {\n                targetModel: '=compareTo'\n            },\n            require : 'ngModel',\n            link    : function postLink(scope, element, attrs, ctrl) {\n\n                var compare = function () {\n\n                    var e1 = element.val();\n                    var e2 = scope.targetModel;\n\n                    if (e2 !== null) {\n                        return e1 === e2;\n                    }\n\n                    return false;\n                };\n\n                scope.$watch(compare, function (newValue) {\n                    ctrl.$setValidity('errorCompareTo', newValue);\n                });\n\n            }\n        };\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('distanceModal', distanceModalDirective);\n\n    function distanceModalDirective($localStorage, $ionicModal) {\n        return {\n            restrict: 'A',\n            link    : distanceModalLink\n        };\n\n        function distanceModalLink($scope, elem, attr) {\n\n            elem.bind('click', function () {\n                    $scope.storage   = $localStorage;\n                    $scope.distances = [\n                        {\n                            val : 0.20,\n                            text: 'perto'\n                        },\n                        {\n                            val : 0.60,\n                            text: 'longe'\n                        },\n                        {\n                            val : 1.00,\n                            text: '1 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 5.00,\n                            text: '5 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 10.00,\n                            text: '10 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 25.00,\n                            text: '25 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 50.00,\n                            text: '50 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 100.00,\n                            text: '100 ' + $scope.storage.unit\n                        },\n                    ];\n\n                    $ionicModal.fromTemplateUrl('app/directive/distanceModal.html', {\n                        scope: $scope\n                    }).then(function (modal) {\n                        $scope.modal = modal;\n                        $scope.modal.show();\n\n                    });\n\n                    $scope.onDistanceSelected = function (distance) {\n                        console.log('Distance', distance);\n                    };\n\n                    $scope.closeDistanceModal = function () {\n                        $scope.modal.hide();\n                        $scope.modal.remove();\n                    };\n\n\n                }\n            );\n        }\n    }\n\n})\n();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('emailValidator', emailValidatorDirective);\n\n    function emailValidatorDirective(User) {\n        return {\n            require: 'ngModel',\n            link    : emailValidatorLink,\n        };\n\n        function emailValidatorLink(scope, elem, attr,ngModel) {\n            ngModel.$asyncValidators.email = function  (modelValue, viewValue) {\n                console.log(viewValue);\n                if(viewValue) {\n                    return User.validateEmail(viewValue);\n                }\n            }\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('facebookLogin', facebookLoginDirective);\n\n    function facebookLoginDirective(Loading, $q, $ionicPlatform, $state, $translate, AppConfig, Facebook, Dialog, User, $rootScope, Toast) {\n        return {\n            restrict: 'E',\n            link    : facebookLoginLink,\n            template: '<button class=\"button button-block button-facebook\"><i class=\"icon ion-social-facebook\"></i> <ion-spinner ng-if=\"loading\"></ion-spinner> <span ng-if=\"!loading\">{{ me.name || \\'loginWithFacebook\\'| translate}}</span> </button>',\n        };\n\n        function facebookLoginLink(scope, elem, attr) {\n\n            scope.facebookStatus = null;\n\n            elem.bind('click', facebookLogin);\n\n            function facebookLogin() {\n                console.log('Facebook login');\n\n                scope.loading = true;\n\n                Facebook.logIn().then(function (fbAuthData) {\n                    console.log(fbAuthData);\n                    if (fbAuthData.status === 'connected') {\n                        var fbData = null;\n                        return Facebook.me().then(function (data) {\n                            fbData = data;\n                            return User.findByEmail(data.email);\n                        }).then(function (user) {\n                            if (!user.id) {\n                                return User.signInViaFacebook(fbAuthData);\n                            } else if (user.get('authData')) {\n                                if (user.get('authData').facebook.id === fbData.id) {\n                                    return User.signInViaFacebook(fbAuthData);\n                                }\n                            } else {\n                                $rootScope.tempUser = user;\n                                $state.go('user.merge', {clear: true});\n                            }\n                        }).then(function () {\n                            return User.updateWithFacebookData(fbData);\n                        }).then(function (user) {\n                            if (user) {\n                                $rootScope.currentUser = user;\n                                $state.go(AppConfig.routes.home, {\n                                    clear: true\n                                });\n                                console.log(user, user.attributes);\n                                $rootScope.$broadcast('onUserLogged');\n                                Loading.end();\n                                Toast.alert({text: $translate.instant('loggedInAsText') + ' ' + user.get('email')});\n                            } else {\n                                console.log('Error ');\n                            }\n                        }, function (error) {\n                            Dialog.alert(error);\n                            Loading.end();\n                            scope.loading = false;\n                        });\n                    }\n\n                }).catch(function (err) {\n                    console.log('err', err);\n                    Loading.end();\n                    scope.loading = false;\n                });\n\n            }\n\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('focusMe', focusMeDirective);\n\n    function focusMeDirective($timeout, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : function (scope, element, attrs) {\n\n                $rootScope.$on('openKeyboard', openKeyboard);\n\n                openKeyboard();\n\n                function openKeyboard() {\n                    $timeout(function () {\n                        element[0].focus();\n                        element[0].click();\n                        if (window.cordova) {\n                            cordova.plugins.Keyboard.show();\n                        }\n                    }, 750);\n                }\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('galleryAlbumModal', galleryAlbumModalDirective);\n\n    function galleryAlbumModalDirective($ionicModal, $q, GalleryAlbum) {\n        return {\n            restrict: 'A',\n            link    : galleryAlbumModalLink,\n            scope   : {\n                ngModel: '='\n            }\n        };\n\n        function galleryAlbumModalLink($scope, elem, attr) {\n\n            elem.bind('click', openModal);\n\n            function openModal() {\n                var defer = $q.defer();\n\n                $scope.loading = true;\n\n                $scope.params      = {};\n                $scope.params.page = 0;\n                GalleryAlbum.list($scope.params).then(function (data) {\n                    $scope.data    = data;\n                    $scope.loading = false;\n                })\n\n                $ionicModal.fromTemplateUrl('app/directive/galleryAlbumModalDirective.html', {\n                    scope          : $scope,\n                    focusFirstInput: true\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.$on('selectAlbum', function (event, album) {\n                    console.log('selectAlbum', event);\n                    console.log('selectAlbum', album);\n                    $scope.ngModel = album;\n                    $scope.closeModal();\n                });\n\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n\n                $scope.selectAlbum = function (album) {\n                    $scope.ngModel = album;\n                    $scope.closeModal();\n                };\n\n                return defer.promise;\n            }\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('galleryNewAlbumModal', galleryNewAlbumModalDirective);\n\n    function galleryNewAlbumModalDirective($ionicModal, $q, GalleryAlbum) {\n        return {\n            restrict: 'A',\n            link    : galleryNewAlbumModalLink,\n            scope   : {\n                ngModel: '='\n            }\n        };\n\n        function galleryNewAlbumModalLink($scope, elem, attr) {\n\n            elem.bind('click', openModal);\n\n            function openModal() {\n                var defer = $q.defer();\n\n                $scope.form = {\n                    title      : '',\n                    description: ''\n                };\n\n\n\n                $ionicModal.fromTemplateUrl('app/directive/galleryNewAlbumModalDirective.html', {\n                    scope          : $scope,\n                    focusFirstInput: true\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.createAlbum = function (rForm, form) {\n                    console.log(rForm, form);\n                    if (rForm.$valid) {\n                        GalleryAlbum.create(angular.copy(form)).then(function (album) {\n                            console.log('album created', album);\n                            $scope.ngModel = album;\n                            $scope.closeModal();\n                            $scope.$emit('selectAlbum', album);\n                        });\n                    } else {\n\n                    }\n                };\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n\n                $scope.selectAlbum = function (album) {\n                    $scope.ngModel = album;\n                    $scope.closeModal();\n                };\n\n                return defer.promise;\n            }\n\n        }\n    }\n\n})();\n(function () {\n  'use strict';\n\n angular\n    .module('starter')\n    .directive('heart', heartDirective);\n\n  function heartDirective() {\n    return {\n      restrict: 'A',\n      scope: {\n        item: '='\n      },\n      link: heartLink\n    };\n\n    function heartLink(scope, elem, attr) {\n      elem.bind('click', function () {\n        console.log(scope.item);\n        elem.addClass('happy');\n      });\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter')\n           .directive('ionLoading', ionLoading)\n           .run(runLoading)\n           .factory('Loading', Loading);\n\n    function ionLoading() {\n        return {\n            restrict: 'E',\n            scope   : {\n                icon   : '@',\n                loading: '='\n            },\n            template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n        };\n    }\n\n    function runLoading($rootScope, $ionicLoading) {\n        //Loading\n        $rootScope.$on('ionicLoading:true', function (text) {\n            $rootScope.loading = true;\n            $ionicLoading.show(text);\n        });\n        $rootScope.$on('ionicLoading:false', function () {\n            $rootScope.loading = false;\n            $ionicLoading.hide();\n        });\n    }\n\n    function Loading($rootScope, $timeout) {\n        var seconds = 0;\n\n        return {\n            start: showLoading,\n            end: hideLoading,\n        };\n\n\n        function showLoading(text) {\n            $rootScope.$broadcast('ionicLoading:true', text);\n        }\n\n        function hideLoading() {\n            $timeout(function () {\n                $rootScope.$broadcast('ionicLoading:false');\n            }, parseInt(seconds + '000'));\n        }\n    }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .directive('loading', PhotogramLoadingDirective);\n\n  function PhotogramLoadingDirective() {\n    return {\n      restrict: 'E',\n      scope   : {\n        loading: '=',\n        icon   : '@'\n      },\n      template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n    };\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('mapPhotoUser', mapPhotoUserDirective);\n\n    function mapPhotoUserDirective($state, $localStorage, Toast, Gallery, Geolocation, Dialog) {\n        return {\n            restrict: 'E',\n            link    : mapPhotoUserLink,\n            scope      : {\n                username  : '=',\n                load      : '=',\n                onReload  : '=',\n            },\n            templateUrl: 'app/directive/mapPhotoUserDirective.html'\n        };\n\n        function mapPhotoUserLink($scope, elem, attr) {\n\n            var markers      = [];\n            var latlngbounds = new google.maps.LatLngBounds();\n            $scope.maxRating = 5;\n            $scope.storage   = $localStorage;\n            $scope.galleries = [];\n            $scope.params    = {\n                location: null,\n                distance: 100.00,\n                page    : 1,\n                limit   : 10,\n                username: $scope.username\n            };\n            $scope.loading   = true;\n            $scope.map\n\n            function init() {\n                $scope.galleries = [];\n                removeGallerys();\n                removeMarkers();\n\n                var position   = {\n                    latitude : -18.8800397,\n                    longitude: -47.05878999999999\n                };\n                var mapOptions = {\n                    center   : setPosition(position),\n                    zoom     : 15,\n                    mapTypeId: google.maps.MapTypeId.ROADMAP\n                };\n\n                $scope.map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);\n            }\n\n            init();\n            myPosition();\n\n\n            function myPosition() {\n                Geolocation.getCurrentPosition().then(function (position) {\n\n                    console.log(position);\n\n                    $scope.params.location = {\n                        latitude : position.coords.latitude,\n                        longitude: position.coords.longitude\n                    };\n\n                    var marker = {\n                        position: setPosition($scope.params.location),\n                        title   : 'I am here',\n                        id      : 0\n                    }\n\n                    addMarker(marker);\n\n                    // Set center locale\n                    $scope.map.setCenter(setPosition($scope.params.location));\n\n                    loadGallerys();\n                }, function (error) {\n                    $scope.params.location = null;\n\n                    var errorMessage;\n                    if (error.code === 1 || error.code === 3) {\n                        errorMessage = 'errorGpsDisabledText';\n                    } else {\n                        errorMessage = 'errorLocationMissingText';\n                    }\n                    Dialog.alert(errorMessage);\n\n                });\n            }\n\n            function setPosition(location) {\n                if (location) {\n                    return new google.maps.LatLng(location.latitude, location.longitude);\n                }\n            }\n\n            function addMarker(item) {\n\n\n                var markerOption = {\n                    id       : item.id,\n                    map      : $scope.map,\n                    position : item.position,\n                    title    : item.title,\n                    animation: google.maps.Animation.DROP\n                };\n\n                if (item.icon) {\n                    var size          = 40;\n                    markerOption.icon = {\n                        url       : item.icon,\n                        size      : new google.maps.Size(size, size),\n                        scaledSize: new google.maps.Size(size, size),\n                        origin    : new google.maps.Point(0, 0),\n                        anchor    : new google.maps.Point(size / 4, size / 4),\n                    };\n                }\n\n                // VariÃ¡vel que define as opÃ§Ãµes do marcador\n                var marker = new google.maps.Marker(markerOption);\n\n                // Procedimento que mostra a Info Window atravÃ©s de um click no marcador\n                google.maps.event.addListener(marker, 'click', function () {\n                    // Open Profile\n                    //if(item.username) {\n                    //    $state.go('tab.mapProfile', {username: item.username})\n                    //}\n\n                    console.log(item.username);\n\n                });\n\n                markers.push(marker);\n\n                new MarkerClusterer($scope.map, markers, {\n                    imagePath: '../img/m'\n                });\n\n                latlngbounds.extend(item.position);\n                $scope.map.fitBounds(latlngbounds);\n            }\n\n            function setGallerys(galleries) {\n                $scope.galleries = galleries;\n                galleries.map(function (item) {\n\n                    if (item.location) {\n                        var marker = {\n                            map     : $scope.map,\n                            id      : item.id,\n                            position: setPosition(item.location),\n                            title   : item.title,\n                            image   : item.image.url(),\n                            icon    : item.imageThumb.url(),\n                            //username: item.user.attributes.username\n                        };\n\n                        addMarker(marker)\n                    }\n                });\n\n\n            }\n\n            function loadGallerys() {\n                $scope.loading = true;\n                Gallery.feed($scope.params).then(function (galleries) {\n\n                    if (galleries.length > 0) {\n                        setGallerys(galleries);\n                    } else {\n                        Dialog.alert('galleriesNotFoundText');\n                    }\n\n                    $scope.loading = false;\n\n                }, function () {\n                    Toast.show('errorText');\n                });\n            }\n\n            function removeGallerys() {\n                $scope.galleries = [];\n            }\n\n            function removeMarkers() {\n                markers.map(function (item) {\n                    item.setMap(null);\n                });\n                markers = [];\n            };\n\n            $scope.onSearchHere = function () {\n                $scope.params.location.latitude  = $scope.map.getCenter().lat();\n                $scope.params.location.longitude = $scope.map.getCenter().lng();\n                removeGallerys();\n                removeMarkers();\n                loadGallerys();\n            }\n\n            $scope.onGalleryClicked = function (item) {\n                console.log(item);\n            };\n        }\n    }\n\n})();\n(function () {\n  'use strict';\n  \n  angular\n    .module('starter')\n    .directive('photogramFollow', photogramFollowDirective);\n\n  function photogramFollowDirective($ionicModal, AppConfig, Photogram) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        user: '='\n      },\n      link: function (scope, elem, attr) {\n        elem.bind('click', openModal);\n        scope.closeModal = closeModal;\n\n        function openModal() {\n          $ionicModal.fromTemplateUrl(path + '/directive/follow/photogram.follow.modal.html', {\n            scope: scope\n          }).then(function (modal) {\n            scope.modalFollow = modal;\n            console.log('Open modal follow', scope.user);\n\n            Photogram\n              .getFollow(scope.user)\n              .then(function (resp) {\n                console.log(resp);\n                scope.data = resp;\n                scope.modalFollow.show();\n              });\n\n          });\n        }\n\n        function closeModal() {\n          scope.modalFollow.hide();\n          scope.modalFollow.remove();\n        }\n      }\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoComment', photoCommentDirective);\n\n    function photoCommentDirective($ionicModal, $http, $q, $ionicScrollDelegate, Loading, $ionicPopup, User, Dialog, $rootScope, Gallery, GalleryComment, GalleryForm) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function ($scope, elem) {\n\n\n                elem.bind('click', openModalComment);\n\n                function init() {\n                    $scope.currentUser = Parse.User.current();\n                    $scope.nocomments  = false;\n                    $scope.loading     = false;\n                    $scope.form        = {\n                        gallery: $scope.ngModel.galleryObj,\n                        text   : ''\n                    };\n                }\n\n                function openModalComment() {\n                    console.log($scope.ngModel);\n\n                    init();\n\n                    $scope.loading       = true;\n                    $scope.formFields    = GalleryForm.formComment;\n                    $scope.submitComment = submitComment;\n                    $scope.deleteComment = deleteComment;\n                    $scope.editComment   = editComment;\n                    $scope.closeModal    = function () {\n                        $scope.modal.hide();\n                        $scope.modal.remove();\n                    };\n\n                    getComments();\n\n                    //Mentios\n                    // shows the use of dynamic values in mentio-id and mentio-for to link elements\n                    $scope.myIndexValue = \"5\";\n\n\n                    $scope.searchPeople = function (term) {\n                        var peopleList = [];\n                        return User.getFollowing().then(function (response) {\n                            _.each(response, function (item) {\n                                item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                                item.bio      = item.status;\n                                if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                                    peopleList.push(item);\n                                }\n                            });\n                            $scope.people = peopleList;\n                            console.log(peopleList);\n                            return $q.when(peopleList);\n                        });\n                    };\n\n                    $scope.getPeopleTextRaw = function (item) {\n                        return '@' + item.username;\n                    };\n\n\n                    //$scope.comments = $scope.ngModel.comments || [];\n                    //$timeout(function () {\n                    //    if ($scope.comments.length === 0) {\n                    //        $scope.nocomments = true;\n                    //    }\n                    //}, 500);\n\n\n                    $ionicModal.fromTemplateUrl('app/directive/photoCommentDirective.html', {\n                        scope          : $scope,\n                        focusFirstInput: true\n                    }).then(function (modal) {\n                        $scope.modal = modal;\n                        $scope.modal.show();\n\n                    });\n                }\n\n                function deleteComment(obj) {\n                    console.log(obj);\n                    Dialog.confirm(('Delete comment'), ('You are sure?')).then(function (resp) {\n                        console.log(resp);\n                        if (resp) {\n                            GalleryComment.destroy(obj).then(function (resp) {\n                                console.log(resp);\n                                getComments();\n                            });\n                        }\n                    });\n                }\n\n                function editComment(obj) {\n                    console.log(obj);\n                    // An elaborate, custom popup\n                    $scope.data = angular.copy(obj);\n                    $ionicPopup\n                        .show({\n                            template: '<input type=\"text\" ng-model=\"data.text\">',\n                            title   : ('Edit comment'),\n                            //subTitle: 'Please use normal things',\n                            scope   : scope,\n                            buttons : [{\n                                text: ('Cancel')\n                            }, {\n                                text : '<b>OK</b>',\n                                type : 'button-positive',\n                                onTap: function (e) {\n                                    console.log($scope.data);\n                                    if (!$scope.data.text) {\n                                        //don't allow the user to close unless he enters wifi password\n                                        e.preventDefault();\n                                    } else {\n                                        return $scope.data;\n                                    }\n                                }\n                            }]\n                        })\n                        .then(function (resp) {\n                            console.log(resp);\n                            if (resp) {\n                                GalleryComment.update(resp)\n                                              .then(function (resp) {\n                                                  console.log(resp);\n                                                  getComments();\n                                              });\n                            }\n                        });\n                }\n\n                function getComments() {\n                    $scope.loading = true;\n\n\n                    Gallery.comments({galleryId: $scope.ngModel.id}).then(function (resp) {\n                        $scope.comments         = resp;\n                        $scope.ngModel.comments = resp;\n                        $scope.loading          = false;\n\n                        $timeout(function () {\n                            // Scroll to bottom\n                            $ionicScrollDelegate.scrollBottom();\n                        }, 1);\n                    });\n                }\n\n                function submitComment(rForm, form) {\n                    if (rForm.$valid) {\n                        var dataForm = angular.copy(form);\n                        console.log(dataForm);\n                        Loading.start();\n                        GalleryComment.create(dataForm).then(function (resp) {\n                            console.log(resp);\n                            getComments();\n                            $rootScope.$emit('openKeyboard');\n                            Loading.end();\n                            $scope.closeModal();\n                        });\n                    }\n                }\n\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoGrid', photoGridDirective);\n\n    function photoGridDirective(Gallery, $rootScope, $ionicPopup, Share, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                username: '=',\n                user    : '=',\n                profile : '=',\n                onReload: '=',\n            },\n            templateUrl: 'app/directive/photoGridDirective.html',\n            link       : photoGridCtrl\n        };\n\n        function photoGridCtrl($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 1;\n            $scope.data        = [];\n\n            if ($scope.username) {\n                $scope.params.username = $scope.username;\n            }\n\n            $scope.loading = true;\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n\n            $rootScope.$on('gallery:search', function (elem, item) {\n                console.log(elem, item);\n                $scope.params.search = item.text;\n                $scope.onReload();\n            });\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n\n            var isMoreData = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n\n                Gallery.feed($scope.params).then(function (data) {\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.loading = false;\n                    $rootScope.$broadcast('scroll.infiniteScrollComplete');\n                    $rootScope.$broadcast('scroll.refreshComplete');\n\n                }).catch(function () {\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                $scope.loading     = true;\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $scope.action = function (gallery) {\n\n                var buttons = [\n                    {\n                        text: '<i class=\"icon ion-share\"></i>' + ('Share')\n                    }, {\n                        text: '<i class=\"icon ion-alert-circled\"></i>' + ('Report')\n                    }\n                ];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user_id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + ('Delete your photo')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    titleText    : ('Photo'),\n                    cancelText   : ('Cancel'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            Share.share(message);\n                            break;\n                        case 1:\n                            FeedbackModal.modal(gallery);\n                            break;\n                        case 2:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : ('Delete photo'),\n                                    template: ('Are you sure?')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery).then(function () {\n                                            console.log('Photo deleted');\n                                            $scope.$emit('PhotogramHome:reload');\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('photoLike', photoLikeDirective);\n\n    function photoLikeDirective(Gallery) {\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function (scope, elem) {\n                elem.bind('click', function () {\n                        var _model      = scope.ngModel;\n                        _model.progress = true;\n                        _model.liked    = !_model.liked;\n\n                        Gallery.likeGallery({galleryId: scope.ngModel.id}).then(function (resp) {\n                            console.log(resp);\n                            _model.likes    = resp.likes;\n                            _model.progress = false;\n                            console.log(_model, resp);\n                            if (resp.action === 'like') {\n                                scope.ngModel.isLiked = true;\n                                scope.ngModel.likesTotal += 1;\n                            }\n\n                            if (resp.action === 'unlike') {\n                                scope.ngModel.isLiked = false;\n                                scope.ngModel.likesTotal -= 1;\n                            }\n                        });\n                    }\n                );\n\n            }\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoList', photoListDirective);\n\n    function photoListDirective(Gallery, $rootScope, $ionicPopup, $translate, $state, Share, Toast, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                username  : '=',\n                profile   : '=',\n                load      : '=',\n                openLikers: '=',\n                onReload  : '=',\n                id        : '='\n            },\n            templateUrl: 'app/directive/photoListDirective.html',\n            link       : photoListController\n        };\n\n        function photoListController($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 0;\n            $scope.data        = [];\n\n\n            if ($scope.username) {\n                $scope.params.username = $scope.username;\n            }\n\n            if ($scope.id) {\n                $scope.params.id = $scope.id;\n            }\n\n            $scope.loading = true;\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n            $scope.openComment = function (galleryId) {\n                $state.go('galleryComments', {galleryId: galleryId})\n            };\n\n            $scope.share = Share.open;\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n            var isMoreData           = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n                Gallery.feed($scope.params).then(function (data) {\n                    console.log(data);\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.loading = false;\n                    $rootScope.$broadcast('scroll.infiniteScrollComplete');\n                    $rootScope.$broadcast('scroll.refreshComplete');\n\n                }).catch(function (err) {\n                    console.log(err);\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $rootScope.$on('onUserLogged', $scope.onReload);\n\n            $scope.action = function (gallery) {\n\n                var buttons = [\n                    {\n                        text: '<i class=\"icon ion-alert-circled\"></i>' + $translate.instant('reportText')\n                    }\n                ];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user.obj.id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + $translate.instant('deleteGallery')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    cancelText   : $translate.instant('cancelText'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            FeedbackModal.modal(gallery.galleryObj);\n                            break;\n                        case 1:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : $translate.instant('deleteGalleryConfirmText'),\n                                    template: $translate.instant('areSure')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery.galleryObj).then(function () {\n                                            console.log('Photo deleted');\n                                            Toast.alert({\n                                                title: 'Photo',\n                                                text : 'Photo deleted'\n                                            })\n                                            $scope.onReload();\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('profileModalEdit', profileModalEditDirective);\n\n    function profileModalEditDirective($ionicModal, $rootScope, $localStorage, User, Loading, UserForm, $state) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                user: '='\n            },\n            template: '',\n            link    : function (scope, elem) {\n\n\n                elem.bind('click', openModal);\n\n\n                function init() {\n                    scope.theme      = $rootScope.theme;\n                    var user         = Parse.User.current().attributes;\n                    scope.form       = {\n                        name    : user.name,\n                        email   : user.email,\n                        status  : user.status,\n                        photo   : user.photo,\n                        username: user.username,\n                        gender  : user.gender,\n                        facebook: user.facebook\n                    };\n                    scope.formFields = UserForm.profile;\n                }\n\n\n                function openModal() {\n\n                    scope.linkFacebook        = linkFacebook;\n                    scope.logout              = logout;\n                    scope.submitUpdateProfile = submitUpdateProfile;\n                    scope.closeModal          = closeModal;\n                    scope.currentUser         = $rootScope.currentUser;\n\n                    init();\n\n                    $ionicModal.fromTemplateUrl('app/directive/profile-edit-modal.html', {\n                        scope: scope\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n                    });\n\n                    // Cleanup the modal when we're done with it!\n                    scope.$on('$destroy', function () {\n                        scope.modal.remove();\n                    });\n\n                }\n\n                function logout() {\n                    delete window.localStorage['Parse/myAppId/currentUser'];\n                    delete window.localStorage['Parse/myAppId/installationId'];\n                    $localStorage.$reset({});\n                    $state.go('user.intro', {clear: true});\n                    scope.closeModal();\n                }\n\n                function linkFacebook() {\n                    User.facebookLink().then(function (resp) {\n                        console.log(resp);\n                    });\n                }\n\n                function submitUpdateProfile() {\n                    var dataForm = angular.copy(scope.form);\n                    Loading.start();\n                    User.update(dataForm).then(function (resp) {\n                        scope.user             = resp;\n                        $rootScope.currentUser = resp;\n                        Loading.end();\n                        scope.closeModal();\n                    });\n                }\n\n                function closeModal() {\n                    scope.modal.hide();\n                }\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('profileModal', profileModalDirective);\n\n    function profileModalDirective($ionicModal, User) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                username: '='\n            },\n            link    : profileModalLink\n        };\n\n        function profileModalLink(scope, elem) {\n            elem.bind('click', function () {\n\n                console.log(scope.username);\n\n                User.profile(scope.username).then(function (data) {\n                    console.log(data);\n                    scope.user = data;\n                    openModal();\n                });\n\n            });\n\n            function openModal() {\n\n                console.log(scope.user.attributes);\n\n                $ionicModal.fromTemplateUrl('app/directive/profile-modal.html', {\n                    scope: scope\n                }).then(function (modal) {\n                    scope.modalProfile  = modal;\n                    scope.loadingFollow = true;\n                    scope.changeTab     = changeTab;\n                    scope.follow        = follow;\n                    scope.closeModal    = closeModal;\n                    scope.modalProfile.show();\n\n                    changeTab('list');\n\n                    function follow() {\n\n                        scope.loadingFollow = true;\n                        var status;\n\n                        if (scope.user.follow) {\n                            status = false;\n                        } else {\n                            status = true;\n                        }\n\n                        User.follow(scope.user.userObj.id).then(function (resp) {\n                            console.log('Follow result', resp);\n                            scope.user.isFollow = (resp === 'follow') ? true : false;\n                            if (resp == 'follow') {\n                                scope.user.followersTotal += 1;\n                            }\n                            if (resp == 'unfollow') {\n                                scope.user.followersTotal -= 1;\n                            }\n                            scope.loadingFollow = false;\n                        });\n\n\n                    }\n\n                    function closeModal() {\n                        delete scope.data;\n                        scope.modalProfile.hide();\n                    }\n                });\n\n                // Cleanup the modal when we're done with it!\n                scope.$on('$destroy', function () {\n                    scope.modalProfile.remove();\n                });\n            }\n\n            function changeTab(tab) {\n                if (tab === 'list') {\n                    scope.tab = {\n                        list: true,\n                        grid: false\n                    };\n                } else {\n                    scope.tab = {\n                        list: false,\n                        grid: true\n                    };\n                }\n            }\n\n\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .directive('ionSearch', ionSearchDirective);\n\n  function ionSearchDirective($timeout) {\n\n    return {\n      restrict   : 'E',\n      scope      : {\n        getData: '&source',\n        ngModel: '=?',\n        search : '=?filter'\n      },\n      templateUrl: 'app/module/photogram/directive/search/search-directive.html',\n      link       : function (scope, element, attrs) {\n        attrs.minLength = attrs.minLength || 0;\n        scope.placeholder = attrs.placeholder || '';\n        scope.clear = function () {\n          console.log('Limpar campo');\n          scope.input = '';\n          scope.$apply();\n        };\n\n        if (attrs.class) {\n          element.addClass(attrs.class);\n        }\n\n        if (attrs.source) {\n          scope.$watch('search.value', watchSearch);\n        }\n\n        function watchSearch(newValue) {\n          if (newValue.length > attrs.minLength) {\n            $timeout(function () {\n              scope\n                .getData({\n                  str: newValue\n                })\n                .then(function (results) {\n                  scope.ngModel = results;\n                });\n            }, 1000);\n          } else {\n            scope.ngModel = [];\n          }\n        }\n\n      }\n\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('starter')\n        .directive('settingsModal', settingsModalDirective);\n\n    function settingsModalDirective($ionicModal, $translate, AppConfig, $cordovaInAppBrowser, Share, Auth, User, UserForm, $state) {\n\n        return {\n            restrict: 'A',\n            template: '',\n            link    : function (scope, elem) {\n\n                elem.bind('click', openModal);\n                scope.closeModal     = closeModal;\n                scope.link           = link;\n                scope.share          = Share.share;\n\n                scope.logout = function  () {\n                    $state.go(AppConfig.routes.login);\n                    scope.closeModal();\n                };\n\n                function init() {\n                    scope.form       = Auth.getLoggedUser();\n                    scope.formFields = UserForm.profile;\n                    scope.languages  = AppConfig.locales;\n                    scope.language   = $translate.use();\n                }\n\n                function openModal() {\n\n                    init();\n                    $ionicModal.fromTemplateUrl('app/directive/settings-modal.html', {\n                        scope: scope\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n                    });\n                }\n\n                function link(sref) {\n                    $state.go(sref);\n                    scope.closeModal();\n                }\n\n                function submitUpdateProfile(form) {\n                    var dataForm = angular.copy(form);\n                    User.update(dataForm).then(function (resp) {\n                        console.log(resp);\n                        init();\n                        scope.closeModal();\n                    });\n                }\n\n                function closeModal() {\n                    scope.modal.hide();\n                    scope.modal.remove();\n                }\n\n            }\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('usernameValidator', usernameValidatorDirective);\n\n    function usernameValidatorDirective(User) {\n        return {\n            require: 'ngModel',\n            restrict: 'A',\n            link    : usernameValidatorLink,\n        };\n\n        function usernameValidatorLink(scope, elem, attr, ngModel) {\n            ngModel.$asyncValidators.username = function  (modelValue, viewValue) {\n                if(viewValue) {\n                    return User.validateUsername(viewValue);\n                }\n            }\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').filter('hashtag', hashtag);\n\n    function hashtag($filter) {\n        return function (text, target) {\n            if (!text) return text;\n\n            var replacedText = $filter('linky')(text, target);\n\n            var targetAttr = \"\";\n            if (angular.isDefined(target)) {\n                targetAttr = target;\n            }\n\n            // replace #hashtags and send them to twitter\n            var replacePattern1 = /(^|\\s)#(\\w*[a-zA-Z_]+\\w*)/gim;\n            replacedText        = text.replace(replacePattern1, '$1<a href=\"#/tab/search/%23$2\"' + targetAttr + '>#$2</a>');\n\n            // replace @mentions but keep them to our site\n            var replacePattern2 = /(^|\\s)\\@(\\w*[a-zA-Z_]+\\w*)/gim;\n            replacedText        = replacedText.replace(replacePattern2, '$1<a href=\"#/tab/home/$2\" >@$2</a>');\n\n            return replacedText;\n        };\n    }\n\n})();\n\n\n(function () {\n    'use strict';\n\n    angular.module('starter').filter('words', words);\n\n    function words() {\n\n        ////////////////\n\n        return function (input, words) {\n            if (isNaN(words)) {\n                return input;\n            }\n            if (words <= 0) {\n                return '';\n            }\n            if (input) {\n                var inputWords = input.split(/\\s+/);\n                if (inputWords.length > words) {\n                    input = inputWords.slice(0, words).join(' ') + '\\u2026';\n                }\n            }\n            return input;\n        };\n    }\n\n})();\n\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.io = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar url = _dereq_('./url');\nvar parser = _dereq_('socket.io-parser');\nvar Manager = _dereq_('./manager');\nvar debug = _dereq_('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup(uri, opts) {\n  if (typeof uri == 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n\n  return io.socket(parsed.path);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = _dereq_('./manager');\nexports.Socket = _dereq_('./socket');\n\n},{\"./manager\":2,\"./socket\":4,\"./url\":5,\"debug\":14,\"socket.io-parser\":40}],2:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar eio = _dereq_('engine.io-client');\nvar Socket = _dereq_('./socket');\nvar Emitter = _dereq_('component-emitter');\nvar parser = _dereq_('socket.io-parser');\nvar on = _dereq_('./on');\nvar bind = _dereq_('component-bind');\nvar debug = _dereq_('debug')('socket.io-client:manager');\nvar indexOf = _dereq_('indexof');\nvar Backoff = _dereq_('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager(uri, opts){\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' == typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  this.encoder = new parser.Encoder();\n  this.decoder = new parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function() {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function(){\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.engine.id;\n    }\n  }\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function(v){\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function(v){\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function(v){\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function(v){\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function(v){\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function(v){\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function() {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function(fn){\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function() {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function(data){\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function(){\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function(){\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function(){\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function(){\n  this.lastPing = new Date;\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function(){\n  this.emitAll('pong', new Date - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function(data){\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function(packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function(err){\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function(nsp){\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function(){\n      socket.id = self.engine.id;\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting evnet is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting() {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function(socket){\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function(packet){\n  debug('writing packet %j', packet);\n  var self = this;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function(encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function() {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function(){\n  debug('cleanup');\n\n  var sub;\n  while (sub = this.subs.shift()) sub.destroy();\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function(){\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' == this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function(reason){\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function(){\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function(){\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function(err){\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function(){\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function(){\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n\n},{\"./on\":3,\"./socket\":4,\"backo2\":8,\"component-bind\":11,\"component-emitter\":12,\"debug\":14,\"engine.io-client\":16,\"indexof\":32,\"socket.io-parser\":40}],3:[function(_dereq_,module,exports){\n\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on(obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function(){\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n\n},{}],4:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar parser = _dereq_('socket.io-parser');\nvar Emitter = _dereq_('component-emitter');\nvar toArray = _dereq_('to-array');\nvar on = _dereq_('./on');\nvar bind = _dereq_('component-bind');\nvar debug = _dereq_('debug')('socket.io-client:socket');\nvar hasBin = _dereq_('has-binary');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket(io, nsp){\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function() {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function(){\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' == this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function(){\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function(ev){\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var parserType = parser.EVENT; // default\n  if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\n  var packet = { type: parserType, data: args };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' == typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  delete this.flags;\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function(packet){\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function(){\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' != this.nsp) {\n    this.packet({ type: parser.CONNECT });\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function(reason){\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function(packet){\n  if (packet.nsp != this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function(packet){\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function(id){\n  var self = this;\n  var sent = false;\n  return function(){\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    var type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n    self.packet({\n      type: type,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function(packet){\n  var ack = this.acks[packet.id];\n  if ('function' == typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function(){\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function(){\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function(){\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function(){\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function(){\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function(compress){\n  this.flags = this.flags || {};\n  this.flags.compress = compress;\n  return this;\n};\n\n},{\"./on\":3,\"component-bind\":11,\"component-emitter\":12,\"debug\":14,\"has-binary\":30,\"socket.io-parser\":40,\"to-array\":43}],5:[function(_dereq_,module,exports){\n(function (global){\n\n/**\n * Module dependencies.\n */\n\nvar parseuri = _dereq_('parseuri');\nvar debug = _dereq_('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url(uri, loc){\n  var obj = uri;\n\n  // default to window.location\n  var loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' == typeof uri) {\n    if ('/' == uri.charAt(0)) {\n      if ('/' == uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' != typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    }\n    else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port == obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"debug\":14,\"parseuri\":38}],6:[function(_dereq_,module,exports){\nmodule.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n\n},{}],7:[function(_dereq_,module,exports){\n/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n\n},{}],8:[function(_dereq_,module,exports){\n\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n\n},{}],9:[function(_dereq_,module,exports){\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n\n},{}],10:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],11:[function(_dereq_,module,exports){\n/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n\n},{}],12:[function(_dereq_,module,exports){\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks['$' + event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n},{}],13:[function(_dereq_,module,exports){\n\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};\n},{}],14:[function(_dereq_,module,exports){\n\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = _dereq_('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage(){\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n},{\"./debug\":15}],15:[function(_dereq_,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = _dereq_('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n},{\"ms\":35}],16:[function(_dereq_,module,exports){\n\nmodule.exports =  _dereq_('./lib/');\n\n},{\"./lib/\":17}],17:[function(_dereq_,module,exports){\n\nmodule.exports = _dereq_('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = _dereq_('engine.io-parser');\n\n},{\"./socket\":18,\"engine.io-parser\":27}],18:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar transports = _dereq_('./transports');\nvar Emitter = _dereq_('component-emitter');\nvar debug = _dereq_('debug')('engine.io-client:socket');\nvar index = _dereq_('indexof');\nvar parser = _dereq_('engine.io-parser');\nvar parseuri = _dereq_('parseuri');\nvar parsejson = _dereq_('parsejson');\nvar parseqs = _dereq_('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Noop function.\n *\n * @api private\n */\n\nfunction noop(){}\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket(uri, opts){\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' == typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol == 'https' || uri.protocol == 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure :\n    (global.location && 'https:' == location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port ?\n       location.port :\n       (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' == typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  var freeGlobal = typeof global == 'object' && global;\n  if (freeGlobal.global === freeGlobal) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n  }\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = _dereq_('./transport');\nSocket.transports = _dereq_('./transports');\nSocket.parser = _dereq_('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    agent: this.agent,\n    hostname: this.hostname,\n    port: this.port,\n    secure: this.secure,\n    path: this.path,\n    query: query,\n    forceJSONP: this.forceJSONP,\n    jsonp: this.jsonp,\n    forceBase64: this.forceBase64,\n    enablesXDR: this.enablesXDR,\n    timestampRequests: this.timestampRequests,\n    timestampParam: this.timestampParam,\n    policyPort: this.policyPort,\n    socket: this,\n    pfx: this.pfx,\n    key: this.key,\n    passphrase: this.passphrase,\n    cert: this.cert,\n    ca: this.ca,\n    ciphers: this.ciphers,\n    rejectUnauthorized: this.rejectUnauthorized,\n    perMessageDeflate: this.perMessageDeflate,\n    extraHeaders: this.extraHeaders\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') != -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function() {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function(transport){\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function(){\n    self.onDrain();\n  })\n  .on('packet', function(packet){\n    self.onPacket(packet);\n  })\n  .on('error', function(e){\n    self.onError(e);\n  })\n  .on('close', function(){\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 })\n    , failed = false\n    , self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen(){\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' == msg.type && 'probe' == msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' == transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' == self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport() {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  //Handle any error that happens while probing\n  function onerror(err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose(){\n    onerror(\"transport closed\");\n  }\n\n  //When the socket is closed while we're probing\n  function onclose(){\n    onerror(\"socket closed\");\n  }\n\n  //When the socket is upgraded while we're probing\n  function onupgrade(to){\n    if (transport && to.name != transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  //Remove all listeners on the transport and on self\n  function cleanup(){\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' == this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' == this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(parsejson(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if  ('closed' == this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' == self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function(){\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function() {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' != this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if('function' == typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' == typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' == this.readyState || 'closed' == this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function() {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close() {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose() {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade() {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' == this.readyState || 'open' == this.readyState || 'closing' == this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i<j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./transport\":19,\"./transports\":20,\"component-emitter\":26,\"debug\":14,\"engine.io-parser\":27,\"indexof\":32,\"parsejson\":36,\"parseqs\":37,\"parseuri\":38}],19:[function(_dereq_,module,exports){\n/**\n * Module dependencies.\n */\n\nvar parser = _dereq_('engine.io-parser');\nvar Emitter = _dereq_('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' == this.readyState || '' == this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function(packets){\n  if ('open' == this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function(data){\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n\n},{\"component-emitter\":26,\"engine.io-parser\":27}],20:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\nvar XHR = _dereq_('./polling-xhr');\nvar JSONP = _dereq_('./polling-jsonp');\nvar websocket = _dereq_('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling(opts){\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname != location.hostname || port != opts.port;\n    xs = opts.secure != isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./polling-jsonp\":21,\"./polling-xhr\":22,\"./websocket\":24,\"xmlhttprequest-ssl\":25}],21:[function(_dereq_,module,exports){\n(function (global){\n\n/**\n * Module requirements.\n */\n\nvar Polling = _dereq_('./polling');\nvar inherit = _dereq_('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Callbacks count.\n */\n\nvar index = 0;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function(e){\n    self.onError('jsonp poll error',e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  }\n  else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' != typeof navigator && /gecko/i.test(navigator.userAgent);\n  \n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"'+ self.iframeId +'\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch(e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function(){\n      if (self.iframe.readyState == 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./polling\":23,\"component-inherit\":13}],22:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\nvar Polling = _dereq_('./polling');\nvar Emitter = _dereq_('component-emitter');\nvar inherit = _dereq_('component-inherit');\nvar debug = _dereq_('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty(){}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR(opts){\n  Polling.call(this, opts);\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname != global.location.hostname ||\n      port != opts.port;\n    this.xs = opts.secure != isSSL;\n  } else {\n    this.extraHeaders = opts.extraHeaders;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function(opts){\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function(data, fn){\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function(err){\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function(){\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function(data){\n    self.onData(data);\n  });\n  req.on('error', function(err){\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request(opts){\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined != opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function(){\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n    if (this.supportsBinary) {\n      // This has to be done after open because Firefox is stupid\n      // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n      xhr.responseType = 'arraybuffer';\n    }\n\n    if ('POST' == this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function(){\n        self.onLoad();\n      };\n      xhr.onerror = function(){\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function(){\n        if (4 != xhr.readyState) return;\n        if (200 == xhr.status || 1223 == xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function(){\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function() {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function(){\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function(data){\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function(err){\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function(fromError){\n  if ('undefined' == typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch(e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function(){\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response;\n    } else {\n      if (!this.supportsBinary) {\n        data = this.xhr.responseText;\n      } else {\n        try {\n          data = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));\n        } catch (e) {\n          var ui8Arr = new Uint8Array(this.xhr.response);\n          var dataArray = [];\n          for (var idx = 0, length = ui8Arr.length; idx < length; idx++) {\n            dataArray.push(ui8Arr[idx]);\n          }\n\n          data = String.fromCharCode.apply(null, dataArray);\n        }\n      }\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function(){\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function(){\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nif (global.document) {\n  Request.requestsCount = 0;\n  Request.requests = {};\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./polling\":23,\"component-emitter\":26,\"component-inherit\":13,\"debug\":14,\"xmlhttprequest-ssl\":25}],23:[function(_dereq_,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Transport = _dereq_('../transport');\nvar parseqs = _dereq_('parseqs');\nvar parser = _dereq_('engine.io-parser');\nvar inherit = _dereq_('component-inherit');\nvar yeast = _dereq_('yeast');\nvar debug = _dereq_('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function() {\n  var XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling(opts){\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function(){\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function(onPause){\n  var pending = 0;\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause(){\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function(){\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function(){\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function(){\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function(data){\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function(packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' == self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' == packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' != this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' == this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function(){\n  var self = this;\n\n  function close(){\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' == this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function(packets){\n  var self = this;\n  this.writable = false;\n  var callbackfn = function() {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  var self = this;\n  parser.encodePayload(packets, this.supportsBinary, function(data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function(){\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' == schema && this.port != 443) ||\n     ('http' == schema && this.port != 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n},{\"../transport\":19,\"component-inherit\":13,\"debug\":14,\"engine.io-parser\":27,\"parseqs\":37,\"xmlhttprequest-ssl\":25,\"yeast\":45}],24:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar Transport = _dereq_('../transport');\nvar parser = _dereq_('engine.io-parser');\nvar parseqs = _dereq_('parseqs');\nvar inherit = _dereq_('component-inherit');\nvar yeast = _dereq_('yeast');\nvar debug = _dereq_('debug')('engine.io-client:websocket');\nvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocket = BrowserWebSocket;\nif (!WebSocket && typeof window === 'undefined') {\n  try {\n    WebSocket = _dereq_('ws');\n  } catch (e) { }\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS(opts){\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function(){\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var self = this;\n  var uri = this.uri();\n  var protocols = void(0);\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n\n  this.ws = BrowserWebSocket ? new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'buffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function(){\n  var self = this;\n\n  this.ws.onopen = function(){\n    self.onOpen();\n  };\n  this.ws.onclose = function(){\n    self.onClose();\n  };\n  this.ws.onmessage = function(ev){\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function(e){\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Override `onData` to use a timer on iOS.\n * See: https://gist.github.com/mloughran/2052006\n *\n * @api private\n */\n\nif ('undefined' != typeof navigator\n  && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\n  WS.prototype.onData = function(data){\n    var self = this;\n    setTimeout(function(){\n      Transport.prototype.onData.call(self, data);\n    }, 0);\n  };\n}\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function(packets){\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function(packet) {\n      parser.encodePacket(packet, self.supportsBinary, function(data) {\n        if (!BrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' == typeof data ? global.Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        //Sometimes the websocket has already been closed but the browser didn't\n        //have a chance of informing us about it yet, in that case send will\n        //throw an error\n        try {\n          if (BrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e){\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done(){\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function(){\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function(){\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function(){\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function(){\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' == schema && this.port != 443)\n    || ('ws' == schema && this.port != 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function(){\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"../transport\":19,\"component-inherit\":13,\"debug\":14,\"engine.io-parser\":27,\"parseqs\":37,\"ws\":undefined,\"yeast\":45}],25:[function(_dereq_,module,exports){\n// browser shim for xmlhttprequest module\nvar hasCORS = _dereq_('has-cors');\n\nmodule.exports = function(opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' != typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' != typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new ActiveXObject('Microsoft.XMLHTTP');\n    } catch(e) { }\n  }\n}\n\n},{\"has-cors\":31}],26:[function(_dereq_,module,exports){\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n},{}],27:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar keys = _dereq_('./keys');\nvar hasBinary = _dereq_('has-binary');\nvar sliceBuffer = _dereq_('arraybuffer.slice');\nvar base64encoder = _dereq_('base64-arraybuffer');\nvar after = _dereq_('after');\nvar utf8 = _dereq_('utf8');\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = navigator.userAgent.match(/Android/i);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = _dereq_('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if ('function' == typeof supportsBinary) {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if ('function' == typeof utf8encode) {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof global.Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  // String data\n  if (typeof data == 'string' || data === undefined) {\n    if (data.charAt(0) == 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      try {\n        data = utf8.decode(data);\n      } catch (e) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!global.ArrayBuffer) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary == 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data != 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data == '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = ''\n    , n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (':' != chr) {\n      length += chr;\n    } else {\n      if ('' == length || (length != (n = Number(length)))) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      msg = data.substr(i + 1, n);\n\n      if (length != msg.length) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      if (msg.length) {\n        packet = exports.decodePacket(msg, binaryType, true);\n\n        if (err.type == packet.type && err.data == packet.data) {\n          // parser error in individual packet - ignoring payload\n          return callback(err, 0, 1);\n        }\n\n        var ret = callback(packet, i + n, l);\n        if (false === ret) return;\n      }\n\n      // advance cursor\n      i += n;\n      length = '';\n    }\n  }\n\n  if (length != '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  var numberTooLong = false;\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] == 255) break;\n\n      if (msgLength.length > 310) {\n        numberTooLong = true;\n        break;\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    if(numberTooLong) return callback(err, 0, 1);\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./keys\":28,\"after\":6,\"arraybuffer.slice\":7,\"base64-arraybuffer\":9,\"blob\":10,\"has-binary\":29,\"utf8\":44}],28:[function(_dereq_,module,exports){\n\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n\n},{}],29:[function(_dereq_,module,exports){\n(function (global){\n\n/*\n * Module requirements.\n */\n\nvar isArray = _dereq_('isarray');\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Right now only Buffer and ArrayBuffer are supported..\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary(data) {\n\n  function _hasBinary(obj) {\n    if (!obj) return false;\n\n    if ( (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n         (global.Blob && obj instanceof Blob) ||\n         (global.File && obj instanceof File)\n        ) {\n      return true;\n    }\n\n    if (isArray(obj)) {\n      for (var i = 0; i < obj.length; i++) {\n          if (_hasBinary(obj[i])) {\n              return true;\n          }\n      }\n    } else if (obj && 'object' == typeof obj) {\n      if (obj.toJSON) {\n        obj = obj.toJSON();\n      }\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return _hasBinary(data);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"isarray\":33}],30:[function(_dereq_,module,exports){\n(function (global){\n\n/*\n * Module requirements.\n */\n\nvar isArray = _dereq_('isarray');\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Right now only Buffer and ArrayBuffer are supported..\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary(data) {\n\n  function _hasBinary(obj) {\n    if (!obj) return false;\n\n    if ( (global.Buffer && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n         (global.Blob && obj instanceof Blob) ||\n         (global.File && obj instanceof File)\n        ) {\n      return true;\n    }\n\n    if (isArray(obj)) {\n      for (var i = 0; i < obj.length; i++) {\n          if (_hasBinary(obj[i])) {\n              return true;\n          }\n      }\n    } else if (obj && 'object' == typeof obj) {\n      // see: https://github.com/Automattic/has-binary/pull/4\n      if (obj.toJSON && 'function' == typeof obj.toJSON) {\n        obj = obj.toJSON();\n      }\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return _hasBinary(data);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"isarray\":33}],31:[function(_dereq_,module,exports){\n\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n\n},{}],32:[function(_dereq_,module,exports){\n\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n},{}],33:[function(_dereq_,module,exports){\nmodule.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n},{}],34:[function(_dereq_,module,exports){\n(function (global){\n/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n        String = context[\"String\"] || root[\"String\"],\n        Object = context[\"Object\"] || root[\"Object\"],\n        Date = context[\"Date\"] || root[\"Date\"],\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n        Math = context[\"Math\"] || root[\"Math\"],\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty, forEach, undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n        // but clips the values returned by the date methods to the range of\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undef &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undef) === undef &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undef &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undef]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                // serialize extended years.\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                // The milliseconds are optional in ES 5, but required in 5.1.\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                // values less than 1000. Credits: @Yaffle.\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {}, constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__, result = property in (this.__proto__ = null, this);\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0, Properties, members, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                  // Months, dates, hours, minutes, and seconds should have two\n                  // digits; milliseconds should have three.\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root[\"JSON3\"],\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],35:[function(_dereq_,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options.long\n    ? long(val)\n    : short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = '' + str;\n  if (str.length > 10000) return;\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n},{}],36:[function(_dereq_,module,exports){\n(function (global){\n/**\n * JSON parse.\n *\n * @see Based on jQuery#parseJSON (MIT) and JSON2\n * @api private\n */\n\nvar rvalidchars = /^[\\],:{}\\s]*$/;\nvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\nvar rtrimLeft = /^\\s+/;\nvar rtrimRight = /\\s+$/;\n\nmodule.exports = function parsejson(data) {\n  if ('string' != typeof data || !data) {\n    return null;\n  }\n\n  data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\n\n  // Attempt to parse using the native JSON parser first\n  if (global.JSON && JSON.parse) {\n    return JSON.parse(data);\n  }\n\n  if (rvalidchars.test(data.replace(rvalidescape, '@')\n      .replace(rvalidtokens, ']')\n      .replace(rvalidbraces, ''))) {\n    return (new Function('return ' + data))();\n  }\n};\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],37:[function(_dereq_,module,exports){\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n\n},{}],38:[function(_dereq_,module,exports){\n/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    return uri;\n};\n\n},{}],39:[function(_dereq_,module,exports){\n(function (global){\n/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = _dereq_('isarray');\nvar isBuf = _dereq_('./is-buffer');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet){\n  var buffers = [];\n  var packetData = packet.data;\n\n  function _deconstructPacket(data) {\n    if (!data) return data;\n\n    if (isBuf(data)) {\n      var placeholder = { _placeholder: true, num: buffers.length };\n      buffers.push(data);\n      return placeholder;\n    } else if (isArray(data)) {\n      var newData = new Array(data.length);\n      for (var i = 0; i < data.length; i++) {\n        newData[i] = _deconstructPacket(data[i]);\n      }\n      return newData;\n    } else if ('object' == typeof data && !(data instanceof Date)) {\n      var newData = {};\n      for (var key in data) {\n        newData[key] = _deconstructPacket(data[key]);\n      }\n      return newData;\n    }\n    return data;\n  }\n\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  var curPlaceHolder = 0;\n\n  function _reconstructPacket(data) {\n    if (data && data._placeholder) {\n      var buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\n      return buf;\n    } else if (isArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        data[i] = _reconstructPacket(data[i]);\n      }\n      return data;\n    } else if (data && 'object' == typeof data) {\n      for (var key in data) {\n        data[key] = _reconstructPacket(data[key]);\n      }\n      return data;\n    }\n    return data;\n  }\n\n  packet.data = _reconstructPacket(packet.data);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((global.Blob && obj instanceof Blob) ||\n        (global.File && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (obj && 'object' == typeof obj && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./is-buffer\":41,\"isarray\":33}],40:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar debug = _dereq_('debug')('socket.io-parser');\nvar json = _dereq_('json3');\nvar isArray = _dereq_('isarray');\nvar Emitter = _dereq_('component-emitter');\nvar binary = _dereq_('./binary');\nvar isBuf = _dereq_('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    encodeAsBinary(obj, callback);\n  }\n  else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n  var str = '';\n  var nsp = false;\n\n  // first is type\n  str += obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    str += obj.attachments;\n    str += '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' != obj.nsp) {\n    nsp = true;\n    str += obj.nsp;\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    if (nsp) {\n      str += ',';\n      nsp = false;\n    }\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    if (nsp) str += ',';\n    str += json.stringify(obj.data);\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if ('string' == typeof obj) {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var p = {};\n  var i = 0;\n\n  // look up type\n  p.type = Number(str.charAt(0));\n  if (null == exports.types[p.type]) return error();\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\n    var buf = '';\n    while (str.charAt(++i) != '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) != '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' == str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' == c) break;\n      p.nsp += c;\n      if (i == str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i == str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    try {\n      p.data = json.parse(str.substr(i));\n    } catch(e){\n      return error();\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length == this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(data){\n  return {\n    type: exports.ERROR,\n    data: 'parser error'\n  };\n}\n\n},{\"./binary\":39,\"./is-buffer\":41,\"component-emitter\":42,\"debug\":14,\"isarray\":33,\"json3\":34}],41:[function(_dereq_,module,exports){\n(function (global){\n\nmodule.exports = isBuf;\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],42:[function(_dereq_,module,exports){\narguments[4][26][0].apply(exports,arguments)\n},{\"dup\":26}],43:[function(_dereq_,module,exports){\nmodule.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n\n},{}],44:[function(_dereq_,module,exports){\n(function (global){\n/*! https://mths.be/utf8js v2.0.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, it’s not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tvar byte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.0.0',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],45:[function(_dereq_,module,exports){\n'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n\n},{}]},{},[1])(1)\n});\n\n'use strict';\nangular.module(\"ngLocale\", [], [\"$provide\", function ($provide) {\n  var PLURAL_CATEGORY = {\n    ZERO: \"zero\",\n    ONE: \"one\",\n    TWO: \"two\",\n    FEW: \"few\",\n    MANY: \"many\",\n    OTHER: \"other\"\n  };\n  $provide.value(\"$locale\", {\n    \"DATETIME_FORMATS\": {\n      \"AMPMS\": [\n        \"AM\",\n        \"PM\"\n      ],\n      \"DAY\": [\n        \"domingo\",\n        \"segunda-feira\",\n        \"ter\\u00e7a-feira\",\n        \"quarta-feira\",\n        \"quinta-feira\",\n        \"sexta-feira\",\n        \"s\\u00e1bado\"\n      ],\n      \"ERANAMES\": [\n        \"Antes de Cristo\",\n        \"Ano do Senhor\"\n      ],\n      \"ERAS\": [\n        \"a.C.\",\n        \"d.C.\"\n      ],\n      \"FIRSTDAYOFWEEK\": 6,\n      \"MONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"SHORTDAY\": [\n        \"dom\",\n        \"seg\",\n        \"ter\",\n        \"qua\",\n        \"qui\",\n        \"sex\",\n        \"s\\u00e1b\"\n      ],\n      \"SHORTMONTH\": [\n        \"jan\",\n        \"fev\",\n        \"mar\",\n        \"abr\",\n        \"mai\",\n        \"jun\",\n        \"jul\",\n        \"ago\",\n        \"set\",\n        \"out\",\n        \"nov\",\n        \"dez\"\n      ],\n      \"STANDALONEMONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"WEEKENDRANGE\": [\n        5,\n        6\n      ],\n      \"fullDate\": \"EEEE, d 'de' MMMM 'de' y\",\n      \"longDate\": \"d 'de' MMMM 'de' y\",\n      \"medium\": \"d 'de' MMM 'de' y HH:mm:ss\",\n      \"mediumDate\": \"d 'de' MMM 'de' y\",\n      \"mediumTime\": \"HH:mm:ss\",\n      \"short\": \"dd/MM/yy HH:mm\",\n      \"shortDate\": \"dd/MM/yy\",\n      \"shortTime\": \"HH:mm\"\n    },\n    \"NUMBER_FORMATS\": {\n      \"CURRENCY_SYM\": \"R$\",\n      \"DECIMAL_SEP\": \",\",\n      \"GROUP_SEP\": \".\",\n      \"PATTERNS\": [{\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 3,\n        \"minFrac\": 0,\n        \"minInt\": 1,\n        \"negPre\": \"-\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\",\n        \"posSuf\": \"\"\n      }, {\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 2,\n        \"minFrac\": 2,\n        \"minInt\": 1,\n        \"negPre\": \"-\\u00a4\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\\u00a4\",\n        \"posSuf\": \"\"\n      }]\n    },\n    \"id\": \"pt-br\",\n    \"pluralCat\": function (n, opt_precision) {\n      if (n >= 0 && n <= 2 && n != 2) {\n        return PLURAL_CATEGORY.ONE;\n      }\n      return PLURAL_CATEGORY.OTHER;\n    }\n  });\n}]);\n(function () {\n    'use strict';\n    //! moment.js locale configuration\n//! locale : brazilian portuguese (pt-br)\n//! author : Caio Ribeiro Pereira : https://github.com/caio-ribeiro-pereira\n    \n    var pt_br = window.moment.defineLocale('pt', {\n        months: 'Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro'.split(\n            '_'),\n        monthsShort: 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),\n        weekdays: 'Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado'.split('_'),\n        weekdaysShort: 'Dom_Seg_Ter_Qua_Qui_Sex_Sáb'.split('_'),\n        weekdaysMin: 'Dom_2ª_3ª_4ª_5ª_6ª_Sáb'.split('_'),\n        longDateFormat: {\n            LT: 'HH:mm',\n            LTS: 'HH:mm:ss',\n            L: 'DD/MM/YYYY',\n            LL: 'D [de] MMMM [de] YYYY',\n            LLL: 'D [de] MMMM [de] YYYY [às] HH:mm',\n            LLLL: 'dddd, D [de] MMMM [de] YYYY [às] HH:mm'\n        },\n        calendar: {\n            sameDay: '[Hoje às] LT',\n            nextDay: '[Amanhã às] LT',\n            nextWeek: 'dddd [às] LT',\n            lastDay: '[Ontem às] LT',\n            lastWeek: function () {\n                return (this.day() === 0 || this.day() === 6) ?\n                    '[Último] dddd [às] LT' : // Saturday + Sunday\n                    '[Última] dddd [às] LT'; // Monday - Friday\n            },\n            sameElse: 'L'\n        },\n        relativeTime: {\n            future: 'em %s',\n            past: '%s atrás',\n            s: 'segs',\n            m: 'um minuto',\n            mm: '%d minutos',\n            h: 'uma hora',\n            hh: '%d horas',\n            d: 'um dia',\n            dd: '%d dias',\n            M: 'um mês',\n            MM: '%d meses',\n            y: 'um ano',\n            yy: '%d anos'\n        },\n        ordinalParse: /\\d{1,2}º/,\n        ordinal: '%dº'\n    });\n\n    return pt_br;\n})();\n(function () {\n  'use strict';\n  angular\n    .module('starter')\n    .factory('GalleryForm', GalleryFormFactory);\n\n  function GalleryFormFactory($translate) {\n\n    var form = [{\n      key: 'title',\n      type: 'input',\n      templateOptions: {\n        type: 'text',\n        placeholder: $translate.instant('PHOTOGRAM.FORM.TITLE'),\n        icon: 'icon-envelope',\n        required: true,\n        iconPlaceholder: true,\n        focus: true\n      }\n    }, {\n      key: 'geo',\n      type: 'toggle',\n      templateOptions: {\n        label: $translate.instant('PHOTOGRAM.FORM.GEOLOCATION'),\n        toggleClass: 'positive'\n      }\n    }];\n\n    var formComment = [{\n      key: 'text',\n      type: 'input',\n      templateOptions: {\n        placeholder: $translate.instant('addComment'),\n        type: 'text',\n        required: true,\n        focus: true\n          //icon           : 'icon-envelope',\n          //iconPlaceholder: true\n      }\n    }];\n\n    var formShare = [{\n      key: 'facebook',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Facebook',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'twitter',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Twitter',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'whatsapp',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Whatsapp',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'SMS',\n      type: 'toggle',\n      templateOptions: {\n        label: 'SMS',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'email',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Email',\n        toggleClass: 'positive'\n      }\n    }, ];\n    return {\n      form: form,\n      formComment: formComment,\n      formShare: formShare\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .factory('UserForm', UserFormFactory);\n\n    function UserFormFactory($translate) {\n\n        return {\n            login   : login(),\n            register: register(),\n            profile : profile()\n        };\n\n        function login() {\n            return [{\n                type           : 'input',\n                key            : 'username',\n                templateOptions: {\n                    type           : 'text',\n                    placeholder    : $translate.instant('username'),\n                    icon           : 'icon-user',\n                    required       : true,\n                    iconPlaceholder: true\n                }\n            }, {\n                type           : 'input',\n                key            : 'password',\n                templateOptions: {\n                    type           : 'password',\n                    placeholder    : $translate.instant('password'),\n                    icon           : 'icon-lock',\n                    required       : true,\n                    iconPlaceholder: true\n                }\n            }];\n        }\n\n        function register() {\n            return [\n                {\n                    type           : 'input',\n                    key            : 'username',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('username'),\n                        icon           : 'icon-user',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    type           : 'input',\n                    key            : 'email',\n                    templateOptions: {\n                        type           : 'email',\n                        placeholder    : $translate.instant('email'),\n                        icon           : 'icon-envelope',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    type           : 'input',\n                    key            : 'password',\n                    templateOptions: {\n                        type           : 'password',\n                        placeholder    : $translate.instant('password'),\n                        icon           : 'icon-lock',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }];\n        }\n\n        function profile() {\n            return [\n                {\n                    key            : 'username',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('username'),\n                        icon           : 'icon-ios-at',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    key            : 'name',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('name'),\n                        icon           : 'icon-user',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }, {\n                    key            : 'status',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('status'),\n                        icon           : 'ion-quote',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }, {\n                    type           : 'select',\n                    key            : 'gender',\n                    templateOptions: {\n                        label          : $translate.instant('gender'),\n                        options        : [{\n                            'label': $translate.instant('man'),\n                            'id'   : 'male',\n                        }, {\n                            'label': $translate.instant('woman'),\n                            'id'   : 'female',\n                        }],\n                        valueProp      : 'id',\n                        labelProp      : 'label',\n                        //icon           : 'ion-ios-body-outline',\n                        //iconPlaceholder: true\n                    }\n                }];\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ActionSheet', ActionSheetFactory);\n\n    function ActionSheetFactory($ionicActionSheet, Camera, $cordovaActionSheet, $q) {\n\n        return {\n            show : show,\n            image: image\n        };\n\n        function image() {\n            var defer = $q.defer();\n            show({\n                title     : 'Choose an option',\n                cancelText: 'Cancel',\n                options   : [{text: 'Photo Library'}, {text: 'Photo'}]\n            }).then(function (option) {\n                var sourceType;\n                if (option === 1) {\n                    sourceType = 'photoLibrary';\n                }\n\n                if (option === 2) {\n                    sourceType = 'camera';\n                }\n                return Camera.getPicture({sourceType: sourceType});\n            }).then(defer.resolve).catch(defer.reject);\n\n            return defer.promise;\n        }\n\n        function show(params) {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                var options = {\n                    title                    : params.title,\n                    buttonLabels             : _.map(params.options, function (item) {return item.text}),\n                    addCancelButtonWithLabel : params.cancelText,\n                    androidEnableCancelButton: true,\n                    androidTheme             : window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT\n                };\n\n                $cordovaActionSheet.show(options).then(function (btnIndex) {\n                    if (btnIndex !== 3) {\n                        defer.resolve(btnIndex);\n                    }\n                    defer.reject('cancel');\n                });\n\n            } else {\n                var actionSheet = $ionicActionSheet.show({\n                    buttons      : params.options,\n                    titleText    : params.title,\n                    cancelText   : params.cancelText,\n                    cancel       : function () {\n                        actionSheet();\n                    },\n                    buttonClicked: function (btnIndex) {\n                        actionSheet();\n                        if (btnIndex !== 3) {\n                            defer.resolve(btnIndex);\n                        }\n                        defer.reject('cancel');\n                    }\n                });\n\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Auth', function ($q) {\n\n        var mSessionToken = null;\n        return {\n            getLoggedUser  : getLoggedUser,\n            setSessionToken: setSessionToken,\n            ensureLoggedIn : ensureLoggedIn,\n            recoverPassword: recoverPassword,\n            resetPassword  : resetPassword,\n            logIn          : logIn,\n            logOut         : logOut\n        };\n\n        function getLoggedUser() {\n            return Parse.User.current();\n        }\n\n        function setSessionToken(sessionToken) {\n            mSessionToken = sessionToken;\n        }\n\n        function ensureLoggedIn() {\n            var defer = $q.defer();\n\n            if (mSessionToken === null) {\n                defer.reject('Session token invalid');\n                return defer.promise;\n            }\n\n            if (!Parse.User.current()) {\n                Parse.User.become(mSessionToken).then(defer.resolve, defer.reject);\n            } else {\n                defer.resolve(Parse.User.current());\n            }\n\n            return defer.promise;\n        }\n\n        function recoverPassword(email) {\n            var defer = $q.defer();\n            Parse.User.requestPasswordReset(email, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function resetPassword(email) {\n\n            var defer = $q.defer();\n\n            Parse.User.requestPasswordReset(email, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function logIn(obj) {\n            var defer = $q.defer();\n\n            Parse.User.logIn(obj.username, obj.password, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function logOut() {\n            var defer = $q.defer();\n            Parse.User.logOut().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').service('Camera', CameraFactory);\n\n    function CameraFactory($cordovaCamera, $q) {\n\n        return {\n            getPicture   : getPicture,\n            resizeImage  : resizeImage,\n            toBase64Image: toBase64Image\n        };\n\n        function getPicture(params) {\n\n            var defer = $q.defer();\n            if (window.cordova) {\n                var sourceType = params.sourceType || Camera.PictureSourceType.CAMERA;\n                if (params.sourceType === 'photoLibrary') {\n                    sourceType = Camera.PictureSourceType.PHOTOLIBRARY;\n                }\n                if (params.sourceType === 'camera') {\n                    sourceType = Camera.PictureSourceType.CAMERA;\n                }\n\n                var options = {\n                    quality           : 70,\n                    targetWidth       : 800,\n                    targetHeight      : 800,\n                    saveToPhotoAlbum  : false,\n                    correctOrientation: true,\n                    sourceType        : sourceType,\n                    destinationType   : Camera.DestinationType.DATA_URL,\n                    encodingType      : Camera.EncodingType.JPEG,\n                };\n\n                $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n            } else {\n                console.log('Input File');\n                //defer.reject('Unsupported platform');\n\n                var fileInput = angular.element('<input type=\"file\" accept=\"image/x-png, image/gif, image/jpeg\" max-size=\"2048\" />');\n                fileInput[0].click();\n                fileInput.on('change', function (evt) {\n                    var tempImage = evt.currentTarget.files[0];\n                    var reader    = new FileReader();\n                    reader.onload = function (evt) {\n                        defer.resolve(evt.target.result);\n                    };\n                    reader.readAsDataURL(tempImage);\n                });\n            }\n\n            return defer.promise;\n        }\n\n        //https://github.com/timkalinowski/PhoneGap-Image-Resizer\n        function toBase64Image(img_path, width, height) {\n            var defer = $q.defer();\n            window.imageResizer.resizeImage(defer.resolve, defer.reject, img_path, width || 1, height || 1, {\n                imageDataType: ImageResizer.IMAGE_DATA_TYPE_URL,\n                resizeType   : ImageResizer.RESIZE_TYPE_FACTOR,\n                format       : 'jpg'\n            });\n\n            return defer.promise;\n        }\n\n        function resizeImage(img_path, width, height) {\n            var defer = $q.defer();\n            window.imageResizer.resizeImage(defer.resolve, defer.reject,  img_path, width || 640, height || 640, {\n                imageDataType: ImageResizer.IMAGE_DATA_TYPE_URL,\n                resizeType   : ImageResizer.RESIZE_TYPE_MIN_PIXEL,\n                pixelDensity : true,\n                storeImage   : false,\n                photoAlbum   : false,\n                format       : 'jpg'\n            });\n\n            return defer.promise;\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('ConnectMonitor', ConnectMonitorFactory);\n\n    function ConnectMonitorFactory($rootScope, $cordovaNetwork) {\n        \n        return {\n            watch: watch\n        };\n\n        function watch() {\n\n            if (ionic.Platform.isWebView()) {\n                $rootScope.onLine = $cordovaNetwork.isOnline();\n                $rootScope.$apply();\n\n\n                $rootScope.$on('$cordovaNetwork:online', function (event, networkState) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                });\n\n                $rootScope.$on('$cordovaNetwork:offline', function (event, networkState) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                });\n            } else {\n                $rootScope.onLine = navigator.onLine;\n                $rootScope.$apply();\n\n                window.addEventListener('online', function (e) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                }, false);\n\n                window.addEventListener('offline', function (e) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                }, false);\n            }\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('DAO', DAOFactory);\n    function DAOFactory($interval, $q) {\n        var _db;\n        var _tables = [];\n\n        return {\n            init       : init,\n            insert     : insert,\n            query      : query,\n            getLastSync: getLastSync,\n            paginate   : paginate,\n            fetchAll   : fetchAll\n        };\n\n        function init(database) {\n\n            if (!_db) {\n                if (window.sqlitePlugin !== undefined) {\n                    _db = window.sqlitePlugin.openDatabase({\n                        name              : database.name,\n                        location          : 2,\n                        createFromLocation: 1\n                    });\n                } else {\n                    // For debugging in the browser\n                    _db = window.openDatabase(database.name, \"1.0\", \"Database\", 200000);\n                }\n            }\n\n            var _promises = [];\n            angular.forEach(database.tables, function (table) {\n                var columns = [];\n                angular.forEach(table.columns, function (type, name) {\n                    columns.push(name + ' ' + type);\n                });\n                query('DROP TABLE ' + table.name);\n                var _query = 'CREATE TABLE IF NOT EXISTS ' + table.name + ' (' + columns.join(',') + ')';\n                _promises.push(query(_query));\n                _tables.push(table);\n                // console.log(_query);\n                // console.log('Table ' + table.name + ' initialized');\n            });\n\n            return $q.all(_promises);\n        }\n\n        function getLastSync(table, column) {\n            var defer = $q.defer();\n            query(\"SELECT MAX(\" + column + \") as lastSync FROM \" + table)\n                .then(function (data) {\n                    var lastSync = data.rows.item[0].lastSync;\n                    defer.resolve(lastSync);\n                });\n            return defer.promise;\n        }\n\n        function insert(obj) {\n            var defer    = $q.defer();\n            var _columns = [];\n            var _values  = [];\n\n            angular.forEach(obj.columns, function (value, key) {\n                _columns.push(key);\n                if (typeof  value === 'number') {\n                    _values.push(value);\n                } else {\n                    _values.push(\"'\" + value + \"'\");\n                }\n            });\n\n            var _query = \"INSERT OR REPLACE INTO \" + obj.table + \" (\" + _columns.join(',') + \") VALUES (\" + _values.join(',') + \")\"\n            // console.info(_query);\n            query(_query).then(defer.resolve).catch(defer.reject);\n            return defer.promise;\n\n        }\n\n        function query(query, bindings) {\n            bindings  = typeof bindings !== 'undefined' ? bindings : [];\n            var defer = $q.defer();\n\n            _db.transaction(function (transaction) {\n                transaction.executeSql(query, bindings, function (transaction, result) {\n                    // console.log(result);\n                    var results = {\n                        rows: []\n                    };\n                    if (result && result.rows) {\n                        for (var i = 0; i < result.rows.length; i++) {\n                            results.rows.push(angular.copy(result.rows[i]));\n                        }\n                    }\n                    // console.log(results);\n                    defer.resolve(results);\n                }, function (transaction, error) {\n                    console.log(transaction, error);\n                    defer.reject(error);\n                });\n            });\n\n            return defer.promise;\n        }\n\n        function paginate(_table, columns, _where, _join, _order, limit, page) {\n            var defer = $q.defer();\n            if (page === undefined) page = -1;\n            var _columns = columns;\n            var _limit   = limit ? limit : 10;\n            var _query1  = \"SELECT SUM(id) as TOTAL FROM \" + _table + \"  \" + _where;\n            var _query   = \"SELECT \" + _columns + \" FROM \" + _table + \"  \" + _where + \" \" + _join + \" \" + _order + \" LIMIT \" + _limit + \" OFFSET \" + page;\n\n            console.log('query', _query1);\n            console.log('query', _query);\n\n            query(_query1).then(function (data) {\n                var result = {\n                    page : page,\n                    total: data.rows[0].TOTAL,\n                    rows : []\n                };\n\n                query(_query).then(function (data) {\n                    console.log(data);\n\n                    result.rows = data.rows;\n                    defer.resolve(result);\n                });\n            });\n            return defer.promise;\n        }\n\n        function fetchAll(result) {\n            var output = [];\n            for (var i = 0; i < result.rows.length; i++) {\n                output.push(result.rows.item(i));\n            }\n            return output;\n        }\n    }\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('DataUtil', DataUtilFactory);\n\n    function DataUtilFactory() {\n\n        return {\n            parseData: parseData,\n            parseString: parseString,\n            getDate: getDate,\n            formatDate: formatDate,\n            getMonthName: getMonthName,\n            getFirstDay: getFirstDay,\n            getLastDay: getLastDay\n        };\n\n        function parseData(string) {\n            var parts = string.split('-');\n            return new Date(parts[0], parts[1] - 1, parts[2]);\n        }\n\n        function parseString(data) {\n            return new Date(data).toLocaleDateString();\n        }\n\n\n        function getDate() {\n            var data   = new Date();\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function formatDate(milliseconds) {\n            var data   = new Date(milliseconds);\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function getMonthName(data) {\n            var meses = ['Janeiro', 'Feveiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];\n            return meses[data.getMonth()];\n        }\n\n        function getFirstDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth();\n            return new Date(year, month, 1);\n        }\n\n        function getLastDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth() + 1;\n            return new Date(year, month, 0);\n        }\n\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').service('Dialog', DialogFactory);\n\n    function DialogFactory($cordovaDialogs, $ionicPopup, $q) {\n\n        return {\n            alert  : alert,\n            confirm: confirm\n        };\n\n        function alert(message, title) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaDialogs.alert(message, title).then(defer.resolve);\n            } else {\n                $ionicPopup.alert({\n                    title   : title,\n                    template: message\n                });\n            }\n            return defer.promise;\n        }\n\n        function confirm(message, title, buttonsText) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaDialogs.confirm(message, title, buttonsText).then(function (result) {\n                    if (result === 2) {\n                        defer.resolve(true);\n                    }\n                    defer.reject(true);\n                });\n\n            } else {\n                $ionicPopup.confirm({\n                    title   : title,\n                    template: message\n                }).then(function (res) {\n                    if (res) {\n                        defer.resolve(true);\n                    } else {\n                        defer.reject(true);\n                    }\n                });\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').service('Facebook', FacebookFactory);\n\n    function FacebookFactory($q, $facebook, $cordovaFacebook) {\n\n        var facebook = window.cordova ? $cordovaFacebook : $facebook;\n        var me;\n\n        return {\n            logIn         : logIn,\n            logOut        : logOut,\n            me            : getMe,\n            invite        : invite,\n            friends       : friends,\n            api           : api,\n            getCurrentUser: getCurrentUser,\n            getFriends    : getFriends,\n            postImage     : postImage,\n            postImage1    : postImage1,\n            link          : link\n        };\n\n        function getCurrentUser() {\n            return facebook.getLoginStatus();\n        }\n\n        function logIn() {\n            console.log('facebook login', facebook);\n            return facebook.login(['public_profile', 'email']);\n        }\n\n        function logOut() {\n            var defer = $q.defer();\n            $cordovaFacebook.logout().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function postImage(image) {\n            var defer = $q.defer();\n            facebook.api('/me/feed', {\n                method     : 'feed',\n                name       : image.title,\n                link       : 'https://photogram.codevibe.io/',\n                picture    : image.image.url(),\n                caption    : image.title,\n                description: image.title\n            }, {scope: 'publish_actions'}, defer.resolve);\n            return defer.promise;\n        }\n\n        function postImage1(image) {\n            var defer = $q.defer();\n            facebook.api('/me/feed', 'post', {\n                message: image.title,\n                picture: image.image.url()\n            }, defer.resolve);\n            return defer.promise;\n        }\n\n        function getFriends() {\n            var defer = $q.defer();\n            facebook.api('/me/friends', defer.resolve)\n            return defer.promise;\n        }\n\n        function getMe() {\n\n            var defer = $q.defer();\n            if (window.cordova) {\n\n                $cordovaFacebook\n                    .api('me?fields=name,first_name,last_name,gender,email', ['public_profile'])\n                    .then(defer.resolve, defer.reject);\n\n            } else {\n                facebook.api('/me', {fields: 'name, first_name, last_name, gender, email'}).then(function (response) {\n                    if (!response || response.error) {\n                        defer.reject(response.error);\n                    } else {\n                        defer.resolve(response);\n                    }\n                });\n            }\n\n            return defer.promise;\n        }\n\n        function invite() {\n            var defer = $q.defer();\n            if (window.cordova) {\n                facebook.showDialog({\n                    method : 'apprequests',\n                    message: 'Venha para o nosso clube!'\n                }).then(defer.resolve, defer.reject);\n            } else {\n                facebook.ui({\n                    method : 'apprequests',\n                    message: 'Venha para o nosso clube!'\n                }).then(defer.resolve, defer.reject);\n            }\n            return defer.promise;\n        }\n\n\n        function friends() {\n            var defer = $q.defer();\n            facebook.api('me/friends').then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function api(api) {\n            var defer = $q.defer();\n            facebook.api(api).then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function link(user) {\n            var defer = $q.defer();\n            if (user) {\n                facebook.login(['email']).then(function (response) {\n                    console.log('facebook login', response);\n                    console.log(user, response, data);\n\n                    Parse.FacebookUtils.link(user, {\n                        id             : String(response.authResponse.userID),\n                        access_token   : response.authResponse.accessToken,\n                        expiration_date: (new Date().getTime() + 1000).toString()\n                    }, {\n                        success: function (user) {\n                            // Função caso tenha logado tanto no face quanto no Parse\n                            console.log('User', user);\n                            user.set('facebook', response['authResponse']['userID']);\n                            user.set('facebookimg', 'https://graph.facebook.com/' + response['authResponse']['userID'] + '/picture?width=250&height=250');\n                            user.set('facebook_complete', Boolean(true));\n                            user.save().then(defer.resolve);\n                        }\n                    });\n                }, defer.resolve);\n            } else {\n                defer.reject('not logged');\n            }\n\n            return defer.promise;\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryActivity', function ($q, ParseCloud, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryActivity', {\n            getStatus: function () {\n                if (this.isApproved) {\n                    return 'Approved';\n                } else if (this.isApproved === false) {\n                    return 'Rejected';\n                } else {\n                    return 'Pending';\n                }\n            }\n        }, {\n            update : function (item) {\n                var defer = $q.defer();\n                item.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy: function (item) {\n                var defer = $q.defer();\n                item.destroy({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            feed   : function (params) {\n                return ParseCloud.run('feedActivity', params);\n            },\n            all    : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n                // Order Table\n                if (params.order) {\n                    if (params.order.indexOf('-') < -1) {\n                        query.ascending(params.order);\n                    } else {\n                        query.descending(params.order.replace('-'));\n                    }\n                }\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n\n                }\n\n                query.include('gallery')\n                query.include('user')\n                query.limit(params.limit);\n                query.skip((params.page * params.limit) - params.limit);\n                query.find({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            count  : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n                }\n\n                query.count({\n                    success: function (count) {\n                        defer.resolve(count);\n                    },\n                    error  : function (error) {\n                        defer.reject(error);\n                    }\n                });\n\n                return defer.promise;\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'fromUser', {\n            get: function () {\n                return this.get('fromUser');\n            },\n            set: function (value) {\n                this.set('fromUser', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'toUser', {\n            get: function () {\n                return this.get('toUser');\n            },\n            set: function (value) {\n                this.set('toUser', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'gallery', {\n            get: function () {\n                return this.get('gallery');\n            },\n            set: function (value) {\n                this.set('gallery', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'hashtags', {\n            get: function () {\n                return this.get('hashtags');\n            },\n            set: function (value) {\n                this.set('hashtags', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'words', {\n            get: function () {\n                return this.get('words');\n            },\n            set: function (value) {\n                this.set('words', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'address', {\n            get: function () {\n                return this.get('address');\n            },\n            set: function (value) {\n                this.set('address', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'location', {\n            get: function () {\n                return this.get('location');\n            },\n            set: function (val) {\n                this.set('location', new Parse.GeoPoint({\n                    latitude : val.latitude,\n                    longitude: val.longitude\n                }));\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryAlbum', GalleryFactory);\n\n    function GalleryFactory($q, ParseCloud, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryAlbum', {\n                getStatus: function () {\n                    if (this.isApproved) {\n                        return 'Approved';\n                    } else if (this.isApproved === false) {\n                        return 'Rejected';\n                    } else {\n                        return 'Pending';\n                    }\n                }\n            },\n            {\n                create : function (item) {\n                    var defer       = $q.defer();\n                    var parseObject = new ParseObject();\n                    parseObject.save(item, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                update : function (item) {\n                    var defer = $q.defer();\n                    item.save(null, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                destroy: function (item) {\n                    var defer = $q.defer();\n                    item.destroy({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                photos : function (params) {\n                    return ParseCloud.run('photoAlbum', params);\n                },\n                list   : function (params) {\n                    return ParseCloud.run('listAlbum', params);\n                },\n                get    : function (objectId) {\n                    var defer = $q.defer();\n                    new Parse.Query(this)\n                        .get(objectId, {\n                            success: defer.resolve,\n                            error  : defer.reject\n                        });\n\n                    return defer.promise;\n                },\n            });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'qtyPhotos', {\n            get: function () {\n                return this.get('qtyPhotos');\n            },\n            set: function (value) {\n                this.set('qtyPhotos', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryComment', function ($q, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryComment', {\n            getStatus: function () {\n                if (this.isApproved) {\n                    return 'Approved';\n                } else if (this.isApproved === false) {\n                    return 'Rejected';\n                } else {\n                    return 'Pending';\n                }\n            }\n        }, {\n            get        : function (itemId) {\n                var defer = $q.defer();\n                new Parse.Query(this)\n                    .get(itemId, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                return defer.promise;\n            },\n            create : function (item) {\n                var defer = $q.defer();\n                new ParseObject().save(item, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            update : function (item) {\n                var defer = $q.defer();\n                item.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy: function (item) {\n                var defer = $q.defer();\n                item.destroy({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            all    : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                // Order Table\n\n                query.include('user');\n                query.ascending('createdAt');\n                query.equalTo('gallery', params.gallery);\n                query.limit(params.limit);\n                query.skip((params.page * params.limit) - params.limit);\n                query.find({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            count  : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n                }\n\n                query.count({\n                    success: function (count) {\n                        defer.resolve(count);\n                    },\n                    error  : function (error) {\n                        defer.reject(error);\n                    }\n                });\n\n                return defer.promise;\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'user', {\n            get: function () {\n                return this.get('user');\n            },\n            set: function (value) {\n                this.set('user', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'text', {\n            get: function () {\n                return this.get('text');\n            },\n            set: function (value) {\n                this.set('text', value);\n            }\n        });\n\n        return ParseObject;\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Gallery', GalleryFactory);\n\n    function GalleryFactory($q, ParseCloud, moment) {\n\n        var ParseObject = Parse.Object.extend('Gallery', {\n                getStatus: function () {\n                    if (this.isApproved) {\n                        return 'Approved';\n                    } else if (this.isApproved === false) {\n                        return 'Rejected';\n                    } else {\n                        return 'Pending';\n                    }\n                }\n            },\n            {\n                create     : function (item) {\n                    var defer    = $q.defer();\n                    var objPlace = new ParseObject();\n\n                    if (item.address.geo) {\n                        item.location = new Parse.GeoPoint(item.address.geo);\n                    }\n\n                    objPlace.save(item, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                    return defer.promise;\n                },\n                update     : function (item) {\n                    var defer = $q.defer();\n                    item.save(null, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                destroy    : function (item) {\n                    var defer = $q.defer();\n                    item.destroy({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                comments   : function (params) {\n                    return ParseCloud.run('commentGallery', params);\n                },\n                getAlbum   : function (params) {\n                    return ParseCloud.run('getAlbum', params);\n                },\n                feed       : function (params) {\n                    return ParseCloud.run('feedGallery', params);\n                },\n                search     : function (params) {\n                    return ParseCloud.run('searchGallery', params);\n                },\n                follow     : function (params) {\n                    console.log('Follow', params);\n                    return ParseCloud.run('followUser', params);\n                },\n                likeGallery: function (params) {\n                    console.log(params);\n                    return ParseCloud.run('likeGallery', {galleryId: params.galleryId});\n                },\n                get        : function (galleryId) {\n                    var defer = $q.defer();\n                    new Parse.Query(this)\n\n                        .get(galleryId, {\n                            success: defer.resolve,\n                            error  : defer.reject\n                        });\n\n                    return defer.promise;\n                },\n                all        : function (params) {\n                    var defer = $q.defer();\n                    var query = new Parse.Query(this);\n\n                    //if (params.filter != '') {\n                    //    query.contains('words', params.filter);\n                    //}\n\n                    // Order Table\n                    if (params.order) {\n                        if (params.order.indexOf('-') < -1) {\n                            query.ascending(params.order);\n                        } else {\n                            query.descending(params.order.replace('-'));\n                        }\n                    }\n\n                    // Status\n                    if (params.status && params.status !== null) {\n                        if (params.status === 'pending') {\n                            query.doesNotExist('isApproved');\n                        } else if (params.status === 'rejected') {\n                            query.equalTo('isApproved', false);\n                        } else if (params.status === 'approved') {\n                            query.equalTo('isApproved', true);\n                        }\n                    }\n\n                    // Limit by page\n                    query.limit(params.limit);\n\n                    // Paginate\n                    query.skip((params.page * params.limit) - params.limit);\n                    query.find({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                    return defer.promise;\n                },\n                count      : function (params) {\n                    var defer = $q.defer();\n                    var query = new Parse.Query(this);\n\n                    if (params.filter != '') {\n                        query.contains('words', params.filter);\n                    }\n\n                    if (params.date && params.date !== null) {\n                        var start = moment(params.date).startOf('day');\n                        var end   = moment(params.date).endOf('day');\n                        query.greaterThanOrEqualTo('createdAt', start.toDate());\n                        query.lessThanOrEqualTo('createdAt', end.toDate());\n                    }\n\n                    if (params.status && params.status !== null) {\n\n                        if (params.status === 'pending') {\n                            query.doesNotExist('isApproved');\n                        } else if (params.status === 'rejected') {\n                            query.equalTo('isApproved', false);\n                        } else if (params.status === 'approved') {\n                            query.equalTo('isApproved', true);\n                        }\n                    }\n\n                    query.count({\n                        success: function (count) {\n                            defer.resolve(count);\n                        },\n                        error  : function (error) {\n                            defer.reject(error);\n                        }\n                    });\n\n                    return defer.promise;\n                }\n            });\n\n        Object.defineProperty(ParseObject.prototype, 'likesTotal', {\n            get: function () {\n                return this.get('likesTotal');\n            },\n            set: function (value) {\n                this.set('likesTotal', value);\n            }\n        });\n        Object.defineProperty(ParseObject.prototype, 'user', {\n            get: function () {\n                return this.get('user');\n            },\n            set: function (value) {\n                this.set('user', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'hashtags', {\n            get: function () {\n                return this.get('hashtags');\n            },\n            set: function (value) {\n                this.set('hashtags', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'words', {\n            get: function () {\n                return this.get('words');\n            },\n            set: function (value) {\n                this.set('words', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'location', {\n            get: function () {\n                return this.get('location');\n            },\n            set: function (val) {\n                this.set('location', new Parse.GeoPoint({\n                    latitude : val.latitude,\n                    longitude: val.longitude\n                }));\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'address', {\n            get: function () {\n                return this.get('address');\n            },\n            set: function (value) {\n                this.set('address', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'icon', {\n            get: function () {\n                return this.get('icon');\n            },\n            set: function (value) {\n                this.set('icon', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('GalleryFeedback', function ($q, moment) {\n\n    var ParseObject = Parse.Object.extend('GalleryFeedback', {\n      getStatus: function () {\n        if (this.isApproved) {\n          return 'Approved';\n        } else if (this.isApproved === false) {\n          return 'Rejected';\n        } else {\n          return 'Pending';\n        }\n      }\n    }, {\n      create : function (item) {\n        var defer    = $q.defer();\n        var objPlace = new ParseObject();\n        item.user    = Parse.User.current();\n        objPlace.save(item, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      update : function (item) {\n        var defer = $q.defer();\n        item.save(null, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      destroy: function (item) {\n        var defer = $q.defer();\n        item.destroy({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      all    : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('words', params.filter);\n        }\n\n        if (params.date && params.date !== null) {\n          var start = moment(params.date).startOf('day');\n          var end   = moment(params.date).endOf('day');\n          query.greaterThanOrEqualTo('createdAt', start.toDate());\n          query.lessThanOrEqualTo('createdAt', end.toDate());\n        }\n\n        if (params.status && params.status !== null) {\n\n          if (params.status === 'pending') {\n            query.doesNotExist('isApproved');\n          } else if (params.status === 'rejected') {\n            query.equalTo('isApproved', false);\n          } else if (params.status === 'approved') {\n            query.equalTo('isApproved', true);\n          }\n\n        }\n\n        query.include('gallery')\n        query.include('User')\n        query.descending('createdAt');\n        query.limit(params.limit);\n        query.skip((params.page * params.limit) - params.limit);\n        query.find({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      count  : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('words', params.filter);\n        }\n\n        if (params.date && params.date !== null) {\n          var start = moment(params.date).startOf('day');\n          var end   = moment(params.date).endOf('day');\n          query.greaterThanOrEqualTo('createdAt', start.toDate());\n          query.lessThanOrEqualTo('createdAt', end.toDate());\n        }\n\n        // Order Table\n        if (params.order) {\n          if (params.order.indexOf('-') < -1) {\n            query.ascending(params.order);\n          } else {\n            query.descending(params.order.replace('-'));\n          }\n        }\n\n        if (params.status && params.status !== null) {\n\n          if (params.status === 'pending') {\n            query.doesNotExist('isApproved');\n          } else if (params.status === 'rejected') {\n            query.equalTo('isApproved', false);\n          } else if (params.status === 'approved') {\n            query.equalTo('isApproved', true);\n          }\n        }\n\n        query.count({\n          success: function (count) {\n            defer.resolve(count);\n          },\n          error  : function (error) {\n            defer.reject(error);\n          }\n        });\n\n        return defer.promise;\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'user', {\n      get: function () {\n        return this.get('user');\n      },\n      set: function (value) {\n        this.set('user', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'subject', {\n      get: function () {\n        return this.get('subject');\n      },\n      set: function (value) {\n        this.set('subject', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'title', {\n      get: function () {\n        return this.get('title');\n      },\n      set: function (value) {\n        this.set('title', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'hashtags', {\n      get: function () {\n        return this.get('hashtags');\n      },\n      set: function (value) {\n        this.set('hashtags', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'words', {\n      get: function () {\n        return this.get('words');\n      },\n      set: function (value) {\n        this.set('words', value);\n      }\n    });\n\n\n    Object.defineProperty(ParseObject.prototype, 'isApproved', {\n      get: function () {\n        return this.get('isApproved');\n      },\n      set: function (value) {\n        this.set('isApproved', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n      get: function () {\n        return this.get('expiresAt');\n      },\n      set: function (value) {\n        this.set('expiresAt', value);\n      }\n    });\n\n    return ParseObject;\n\n  });\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('GallerySetting', function ($q, moment) {\n\n    var ParseObject = Parse.Object.extend('GallerySetting', {\n      getStatus: function () {\n        if (moment().toDate() >= this.expiresAt) {\n          return 'Expired';\n        }\n        else if (this.isApproved) {\n          return 'Approved';\n        } else if (this.isApproved === false) {\n          return 'Rejected';\n        } else {\n          return 'Pending';\n        }\n      }\n    }, {\n      create : function (item) {\n        var defer    = $q.defer();\n        var objPlace = new ParseObject();\n\n        objPlace.save(item, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      update : function (item) {\n        var defer = $q.defer();\n        item.save(null, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      destroy: function (item) {\n        var defer = $q.defer();\n        item.destroy({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      all    : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('canonical', params.filter);\n        }\n\n        query.descending('createdAt');\n        query.limit(params.limit);\n        query.skip((params.page * params.limit) - params.limit);\n        query.find({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      count  : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        query.count({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      }\n\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'key', {\n      get: function () {\n        return this.get('key');\n      },\n      set: function (value) {\n        this.set('key', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'value', {\n      get: function () {\n        return this.get('value');\n      },\n      set: function (value) {\n        this.set('value', value);\n      }\n    });\n\n    return ParseObject;\n\n  });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Geolocation', GeolocationFactory);\n\n    function GeolocationFactory($ionicPlatform, $q) {\n        return {\n            getCurrentPosition: getCurrentPosition\n        };\n\n        function getCurrentPosition($cordovaGeolocation) {\n            var defer = $q.defer();\n\n            $ionicPlatform.ready(function () {\n                var options = {\n                    maximumAge        : 3000,\n                    timeout           : 1000,\n                    enableHighAccuracy: true\n                };\n\n                var options = {timeout: 10000, enableHighAccuracy: true};\n\n                if (navigator.geolocation) {\n                    navigator.geolocation.getCurrentPosition(\n                        function(position) {\n                            // Get current cordinates.\n                            console.log(position);\n                            defer.resolve(position);\n                        },\n                        function(error) {\n                            defer.reject(error);\n                        },\n                        {timeout: 30000, enableHighAccuracy: true, maximumAge: 75000}\n                    );\n                }\n                \n                //$cordovaGeolocation.getCurrentPosition(options).then(defer.resolve).catch(defer.reject);\n\n                //navigator.geolocation.getCurrentPosition(\n                //    defer.resolve,\n                //    defer.reject,\n                //    options);\n            });\n\n            return defer.promise;\n        }\n    }\n\n})();\n(function () {\n  'use strict';\n  angular.module('starter').factory('GoogleAnalytics', GoogleAnalyticsFactory);\n\n  function GoogleAnalyticsFactory($cordovaGoogleAnalytics) {\n    var TAG      = 'AnalyticsService';\n    var canTrack = false;\n    return {\n      init          : init,\n      trackView     : trackView,\n      trackEvent    : trackEvent,\n      trackException: trackException\n    };\n\n    function init(trackingId) {\n      if (trackingId !== null && trackingId !== '' && window.cordova) {\n        $cordovaGoogleAnalytics.debugMode();\n        $cordovaGoogleAnalytics.startTrackerWithId(trackingId);\n        canTrack = true;\n      } else {\n        console.warn('[' + TAG + ']: Invalid Tracker ID or not using emulator');\n      }\n    }\n\n    function trackEvent(category, action, label) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackEvent(category, action, label);\n      }\n    }\n\n    function trackView(viewName) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackView(viewName);\n      }\n    }\n\n    function trackException(description, isFatal) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackException(description, isFatal)\n      }\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Install', InstallFactory);\n\n    function InstallFactory(ParseCloud) {\n        return {\n            start : start,\n            status: status,\n        };\n\n        function start(data) {\n            return ParseCloud.run('install', data);\n        }\n\n        function status(data) {\n            return ParseCloud.run('status', data);\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ParseCloud', ParseCloudFactory);\n\n    function ParseCloudFactory($q) {\n        return {\n            run: run\n        };\n\n        function run(action, data) {\n            var defer = $q.defer();\n            Parse.Cloud.run(action, data, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('ParseFile', function ($q) {\n    return {\n      upload: upload\n    };\n\n    function upload(file, ext) {\n      var defer = $q.defer();\n      var filename = 'file.jpg';\n\n      if (ext) {\n        filename.replace('.jpg', ext);\n      }\n      \n      new Parse.File(filename, file)\n        .save({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n      return defer.promise;\n    }\n  });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ParsePush', ParsePushFactory);\n\n    function ParsePushFactory($q, $cordovaDevice) {\n\n        return {\n            init         : init,\n            on           : on,\n            subscribe    : subscribe,\n            unsubscribe  : unsubscribe,\n            subscribeUser: subscribeUser,\n        };\n\n\n        function installation(installationId) {\n            var installationObj = Parse.Object.extend('UserDevice');\n            return new installationObj()\n                .set('device', $cordovaDevice.getDevice())\n                .set('cordova', $cordovaDevice.getCordova())\n                .set('model', $cordovaDevice.getModel())\n                .set('platform', $cordovaDevice.getPlatform())\n                .set('uuid', $cordovaDevice.getUUID())\n                .set('version', $cordovaDevice.getVersion())\n                .set('user', Parse.User.current())\n                .set('installationId', installationId)\n                .save();\n        }\n\n        function init() {\n            if (window.ParsePushPlugin) {\n\n                ParsePushPlugin.getInstallationId(function (id) {\n                    // note that the javascript client has its own installation id,\n                    // which is different from the device installation id.\n                    console.log(\"device installationId: \" + id);\n                    installation(id);\n                }, function (e) {\n                    console.log('error', e);\n                });\n\n                ParsePushPlugin.getSubscriptions(function (subscriptions) {\n                    console.log(subscriptions);\n                }, function (e) {\n                    console.log('error', e);\n                });\n\n\n                on('receivePN', function (pn) {\n                    console.log('yo i got this push notification:' + JSON.stringify(pn));\n                });\n\n                //\n                // When the app is off or in background, push notifications get added\n                // to the notification tray. When a user open a notification, you\n                // can catch it via openPN\n                on('openPN', function (pn) {\n                    console.log('a notification was opened:' + JSON.stringify(pn));\n                });\n            }\n        }\n\n\n        function subscribeUser() {\n            var user = Parse.User.current();\n            if (window.ParsePushPlugin && user) {\n                var channel = 'user_' + user.attributes.username;\n                subscribe(channel);\n            }\n        }\n\n        function on(event, callback) {\n            if (window.ParsePushPlugin) {\n                ParsePushPlugin.on(event, callback);\n            }\n        }\n\n        function subscribe(channel) {\n            var defer = $q.defer();\n            if (window.ParsePushPlugin) {\n                ParsePushPlugin.subscribe(channel, function (resp) {\n                    console.log('Subcribe in channel', channel);\n                    defer.resolve(resp);\n                }, function (err) {\n                    console.log('Not Subcribe in channel', channel);\n                    defer.reject(err);\n                });\n            }\n            return defer.promise;\n        }\n\n        function unsubscribe(channel) {\n            var defer = $q.defer();\n            if (window.ParsePushPlugin) {\n                ParsePushPlugin.unsubscribe(channel, function (resp) {\n                    console.log('Unsubcribe in channel', channel);\n                    defer.resolve(resp);\n                }, function (err) {\n                    console.log('Not Unsubcribe in channel', channel);\n                    defer.reject(err);\n                });\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').factory('Share', PhotogramShareFactory);\n\n    function PhotogramShareFactory(AppConfig, $q, $translate, $window) {\n\n        var options = {\n            title  : $translate.instant('Join me from ') + AppConfig.app.name + '!',\n            subject: $translate.instant(\"I'm at \") + AppConfig.app.name + '!. ' + (\n                'Install the application and follow me!') + ' ' + AppConfig.app.url,\n            image  : AppConfig.app.image,\n            link   : AppConfig.app.url\n        };\n\n        return {\n            open: open\n        };\n\n        function open(image, title) {\n            var defer = $q.defer();\n\n            if (image) {\n                options.image = image;\n            }\n\n            if (title) {\n                options.title = title;\n            }\n\n            $window.plugins.socialsharing.shareWithOptions(options, defer.success, defer.reject);\n\n            return defer.promise;\n        }\n\n    }\n})();\n\n(function () {\n  'use strict';\n\n  angular.module('starter').factory('Toast', ToastFactory);\n\n  function ToastFactory($cordovaToast, $ionicPopup) {\n\n    return {\n      alert  : alert,\n      confirm: confirm\n    };\n\n    function alert(params) {\n      if (window.cordova) {\n        $cordovaToast.show(params.text, 'short', 'bottom');\n      } else {\n        $ionicPopup.alert({\n          title   : params.title,\n          template: params.text,\n          okType  : 'button button-clear button-assertive',\n        });\n      }\n    }\n\n    function confirm(title, msg) {\n      return $ionicPopup.confirm({\n        title   : title,\n        template: msg\n      });\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('User', UserFactory);\n\n    function UserFactory($q, $cordovaDevice, ParseCloud, ParsePush) {\n\n        var User = Parse.User.extend({}, {\n            profile               : function (username) {\n                return ParseCloud.run('profile', {username: username})\n            },\n            list                  : function (params) {\n                return ParseCloud.run('listUsers', params)\n            },\n            getFollowers          : function (username) {\n                return ParseCloud.run('getFollowers', {username: username})\n            },\n            getLikers             : function (galleryId) {\n                return ParseCloud.run('getLikers', {galleryId: galleryId})\n            },\n            getFollowing          : function (username) {\n                return ParseCloud.run('getFollowing', {username: username})\n            },\n            signIn                : function (obj) {\n                var defer = $q.defer();\n\n                Parse.User.logIn(obj.username, obj.password, {\n                    success: function (currentUser) {\n\n                        // device\n                        var device;\n                        if (window.cordova) {\n                            device = {\n                                device  : $cordovaDevice.getDevice(),\n                                cordova : $cordovaDevice.getCordova(),\n                                model   : $cordovaDevice.getModel(),\n                                platform: $cordovaDevice.getPlatform(),\n                                uuid    : $cordovaDevice.getUUID(),\n                                version : $cordovaDevice.getVersion()\n                            };\n                        } else {\n                            device = {\n                                device  : {device: window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[0]},\n                                cordova : '',\n                                model   : window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[0],\n                                platform: window.navigator.platform,\n                                uuid    : '',\n                                version : window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[1]\n                            };\n                        }\n\n                        console.log(currentUser);\n                        console.log(device);\n\n                        User.update(device).then(function () {\n                            defer.resolve(currentUser);\n                        }).catch(defer.reject)\n\n                        ParsePush.init().then(function () {\n                            ParsePush.subscribeUser();\n                        });\n\n                        console.log('updateUser', device);\n                        //user.save(defer.resolve, defer.reject);\n                    },\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            signUp                : function (data) {\n                var user = new Parse.User()\n                    .set({'name': data.name})\n                    .set({'username': data.username})\n                    .set({'email': data.email})\n                    .set({'password': data.password})\n                    .set({'roleName': 'User'});\n\n                var acl = new Parse.ACL();\n                acl.setPublicReadAccess(false);\n                acl.setPublicWriteAccess(false);\n                user.setACL(acl);\n                return user.save(null);\n\n            },\n            signInViaFacebook     : function (authData) {\n                //var expiration = new Date();\n\n                var facebookAuthData = {\n                    id             : authData.authResponse.userID,\n                    access_token   : authData.authResponse.accessToken,\n                    expiration_date: (new Date().getTime() +1000).toString()\n                };\n\n                console.log(authData, facebookAuthData);\n\n                var defer = $q.defer();\n\n                Parse.FacebookUtils.logIn(facebookAuthData, {\n                    success: function (user) {\n                        console.log('User', user);\n                        defer.resolve(user);\n                    },\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            logOut                : function () {\n                return Parse.User.logOut();\n            },\n            findByEmail           : function (email) {\n                return ParseCloud.run('findUserByEmail', {email: email});\n            },\n            updateWithFacebookData: function (data) {\n                var defer = $q.defer();\n                ParseCloud.run('saveFacebookPicture', {}).then(function () {\n                    var user = Parse.User.current();\n\n                    if (user.attributes.username === '') {\n                        user.set({'username': data.email});\n                    }\n\n                    user.set({'email': data.email});\n                    user.set({'name': data.name});\n                    user.setACL(new Parse.ACL(user));\n                    user.save(null, {\n                        success: function () {\n                            user.fetch().then(function (userFetched) {\n                                defer.resolve(userFetched);\n                            }, function (error) {\n                                defer.reject(error);\n                            });\n                        }\n                    });\n                }).catch(defer.reject);\n                return defer.promise;\n            },\n            getPublicData         : function (user) {\n                console.log(user);\n                var defer = $q.defer();\n                new Parse.Query('UserData').equalTo('user', user).first().then(function (userData) {\n                    if (userData) {\n                        defer.resolve(userData);\n                    } else {\n                        defer.reject(Parse.Promise.error({\n                            code   : 1,\n                            message: 'User Data not found'\n                        }));\n                    }\n                }, defer.reject);\n                return defer.promise;\n            },\n            recoverPassword       : function (email) {\n                return Parse.User.requestPasswordReset(email);\n            },\n            destroy               : function () {\n                return Parse.User.current().destroy();\n            },\n            setPhoto              : function (parseFile) {\n                var defer = $q.defer();\n                var user  = Parse.User.current();\n                user.set({'photo': parseFile});\n                user.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            follow                : function (userId) {\n                return ParseCloud.run('followUser', {userId: userId});\n            },\n            all                   : function (params) {\n                return ParseCloud.run('getUsers', params);\n            },\n            validateUsername      : function (input) {\n                return ParseCloud.run('validateUsername', {username: input});\n            },\n            validateEmail         : function (input) {\n                return ParseCloud.run('validateEmail', {email: input});\n            },\n            update                : function (params) {\n                var user = Parse.User.current();\n                angular.forEach(params, function (value, key) {\n                    user.set(key, value);\n                });\n                return user.save();\n            },\n            delete                : function (data) {\n                return ParseCloud.run('destroyUser', data);\n            },\n            fetch                 : function () {\n                var defer = $q.defer();\n                if (Parse.User.current()) {\n                    Parse.User.current().fetch().then(defer.resolve, defer.reject);\n                } else {\n                    defer.reject();\n                }\n                return defer.promise;\n            }\n\n        });\n\n        Object.defineProperty(User.prototype, 'name', {\n            get: function () {\n                return this.get('name');\n            },\n            set: function (val) {\n                this.set('name', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'username', {\n            get: function () {\n                return this.get('username');\n            },\n            set: function (val) {\n                this.set('username', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'status', {\n            get: function () {\n                return this.get('status');\n            },\n            set: function (val) {\n                this.set('status', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'gender', {\n            get: function () {\n                return this.get('gender');\n            },\n            set: function (val) {\n                this.set('gender', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'email', {\n            get: function () {\n                return this.get('email');\n            },\n            set: function (val) {\n                this.set('email', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'photo', {\n            get: function () {\n                return this.get('photo');\n            },\n            set: function (val) {\n                this.set('photo', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'photoThumb', {\n            get: function () {\n                return this.get('photoThumb');\n            },\n            set: function (val) {\n                this.set('photoThumb', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'roleName', {\n            get: function () {\n                return this.get('roleName');\n            },\n            set: function (val) {\n                this.set('roleName', val);\n            }\n        });\n\n        return User;\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name modalLanguage\n     *\n     * @description\n     * _Please update the description and restriction._\n     *\n     * @restrict A\n     * */\n\n    var path = 'app/component/ion-language';\n\n    angular\n        .module('ion-language')\n        .directive('ionLanguage', ionLanguageDirective);\n\n    function ionLanguageDirective(AppConfig, $translate, $timeout, Loading, $ionicModal) {\n        return {\n            restrict: 'E',\n            link: modalLanguageLink,\n            templateUrl: path + '/ion-language.html'\n        };\n\n        function modalLanguageLink(scope, elem, attr) {\n\n\n            scope.languages = AppConfig.locales;\n            scope.language  = scope.languages.filter(function (item) {\n                return item.code === $translate.use()\n            })[0];\n\n            console.log(scope.language);\n\n            elem.bind('click', openModal);\n\n            function openModal() {\n\n                if(window.cordova) {\n                    window.StatusBar.styleDefault();\n                }\n\n                scope.closeModal = function () {\n                    scope.modal.hide();\n                    // scope.modal.remove();\n                    if(window.cordova) {\n                        window.StatusBar.styleLightContent();\n                    }\n                };\n\n\n                scope.searchValue = '';\n\n                scope.selectLanguage = function (language) {\n                    console.log(language);\n                    $translate.use(language.code);\n                    moment.locale(language.code);\n                    scope.language = language;\n                    Loading.start();\n                    scope.closeModal();\n                    $timeout(function () {\n                        Loading.end();\n                    }, 1000);\n                };\n\n                $ionicModal\n                    .fromTemplateUrl(path + '/modal-language.html', {\n                        scope: scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n\n                    });\n            }\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n\n    angular\n        .module('ion-location')\n        .factory('GeoService', GeoServiceFactory);\n\n    function GeoServiceFactory($http, $window, $cordovaGeolocation, $ionicPopup, $timeout, $q) {\n\n        /**\n         'street_address', //indicates a precise street address.\n         'route', //indicates a named route (such as \"US 101\").\n         'intersection', //indicates a major intersection, usually of two major roads.\n         'political', //indicates a political entity. Usually, this type indicates a polygon of some civil administration.\n         'country', //indicates the national political entity, and is typically the highest order type returned by the Geocoder.\n         'administrative_area_level_1', //indicates a first-order civil entity below the country level. Within the United States, these administrative levels are states. Not all nations exhibit these administrative levels.\n         'administrative_area_level_2', //indicates a second-order civil entity below the country level. Within the United States, these administrative levels are counties. Not all nations exhibit these administrative levels.\n         'administrative_area_level_3', //indicates a third-order civil entity below the country level. This type indicates a minor civil division. Not all nations exhibit these administrative levels.\n         'colloquial_area', //indicates a commonly-used alternative name for the entity.\n         'locality', //indicates an incorporated city or town political entity.\n         'sublocality', //indicates an first-order civil entity below a locality\n         'neighborhood', //indicates a named neighborhood\n         'premise', //indicates a named location, usually a building or collection of buildings with a common name\n         'subpremise', //indicates a first-order entity below a named location, usually a singular building within a collection of buildings with a common name\n         'postal_code', //indicates a postal code as used to address postal mail within the country.\n         'natural_feature', //indicates a prominent natural feature.\n         'airport', //indicates an airport.\n         'park', //indicates a named park.\n         'point_of_interest', //indicates a named point of interest. Typically, these \"POI\"s are prominent local entities that don't easily fit in another category such as \"Empire State Building\" or \"Statue of Liberty.\"\n\n         //In addition to the above, address components may exhibit the following types:\n\n         'post_box', //indicates a specific postal box.\n         'street_number', //indicates the precise street number.\n         'floor indicates', //the floor of a building address.\n         'room indicates'; //the room of a building address.'\n         */\n        var options             = {\n            types: ['geocode']\n        };\n        var autocompleteService = new $window.google.maps.places.AutocompleteService();\n        var detailsService      = new $window.google.maps.places.PlacesService($window.document.createElement('input'),\n            options);\n        var componentForm       = {\n            street_number              : 'long_name',\n            //number\n            route                      : 'long_name',\n            //street\n            locality                   : 'long_name',\n            // district\n            sublocality                : 'long_name',\n            // district\n            neighborhood               : 'long_name',\n            //state\n            political                  : 'long_name',\n            //state\n            administrative_area_level_1: 'long_name',\n            //state\n            country                    : 'long_name',\n            //country\n            postal_code                : 'long_name' //zipcode\n        };\n        var componentFormName   = {\n            street_number              : 'number',\n            //number\n            route                      : 'street',\n            //street\n            locality                   : 'city',\n            // district\n            administrative_area_level_1: 'state',\n            //state\n            country                    : 'country',\n            //country\n            postal_code                : 'zipcode',\n            //zipcode\n            neighborhood               : 'district' //zipcode\n        };\n\n        var data = {\n            coords: {},\n            src   : ''\n        };\n\n\n        return {\n            src          : src,\n            getDetails   : getDetails,\n            searchAddress: searchAddress,\n            parseAddress : parseAddress,\n            findMe       : findMe\n        };\n\n        function getLocation() {\n            // Pega a Localização da Pessoa\n            var defer = $q.defer();\n\n            if (data.location) {\n                $timeout(function () {\n                    defer.resolve(data.location);\n                }, 1000);\n            } else {\n                var posOptions = {\n                    timeout           : 10000,\n                    enableHighAccuracy: false\n                };\n                $cordovaGeolocation.getCurrentPosition(posOptions).then(function (position) {\n                    // console.log('Fez a requisição', position);\n                    data.location = {\n                        latitude : position.coords.latitude,\n                        longitude: position.coords.longitude\n                    };\n                    defer.resolve(data.location);\n                }, function (err) {\n                    // error\n                    // console.log('Error na geolocalização', err);\n                    $ionicPopup.alert({\n                        title   : 'Geo Error',\n                        template: err.message\n                    });\n                    defer.reject(err);\n                });\n            }\n\n\n            return defer.promise;\n        }\n\n\n        function findMe() {\n            var defer = $q.defer();\n\n            getLocation().then(function (pos) {\n                console.log(pos);\n                getGoogleAddress(pos.latitude, pos.longitude).success(function (resp) {\n                    resp.geolocation = pos;\n                    console.log(resp);\n                    defer.resolve(resp);\n                }).error(logErr);\n            });\n            return defer.promise;\n        }\n\n\n        function logErr(error) {\n            console.log(error);\n        }\n\n        function getGoogleAddress(lat, lng) {\n            return $http.get('http://maps.google.com/maps/api/geocode/json?latlng=' + lat + ',' + lng + '&sensor=true')\n                        .success(function (data) {\n                            data.address_normal = data.results[0].formatted_address;\n                            data.address        = address(data.results[0].address_components);\n                            data.src            = imagem(lat, lng, 18, 500, 300);\n                        });\n        }\n\n        function address(data) {\n            if (!data) {\n                return false;\n            } else {\n                return {\n                    numero  : data[0].short_name,\n                    rua     : data[1].long_name,\n                    bairro  : data[2].short_name,\n                    cidade  : data[3].short_name,\n                    estado  : data[5].long_name,\n                    uf      : data[5].short_name,\n                    pais    : data[6].long_name,\n                    paisCode: data[6].short_name,\n                    cep     : data[7].short_name\n                };\n            }\n\n        }\n\n        function imagem(lat, lng, zoom, w, h) {\n            return 'http://maps.google.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom + '&size=' +\n                w + 'x' + h + '&maptype=roadmap&sensor=true';\n        }\n\n        function parseAddress(place) {\n            var defer = $q.defer();\n            console.log('parseAddress', place);\n            if(!place) {\n                defer.reject('not place')\n            }\n            var address = {\n                resume: '',\n                geo   : {\n                    latitude : place.geometry.location.lat(),\n                    longitude: place.geometry.location.lng()\n                }\n            };\n            var image   = src(address.geo.latitude, address.geo.longitude, 16, 900, 200);\n\n            for (var i = 0; i < place.address_components.length; i++) {\n                var addressType = place.address_components[i].types[0];\n                if (componentForm[addressType]) {\n                    var val                                 = place.address_components[i][componentForm[addressType]];\n                    address[componentFormName[addressType]] = val;\n                }\n            }\n            address.name   = place.name;\n            address.street = address.street + ', ' + address.number;\n            address.image  = image;\n            address.resume = address.street + ' - ' + address.city + ', ' + address.state + ', ' + address.country;\n            defer.resolve(address);\n\n            return defer.promise;\n        }\n\n        function searchAddress(input) {\n            var deferred = $q.defer();\n            autocompleteService.getQueryPredictions({\n                input: input\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function getDetails(placeId) {\n            var deferred = $q.defer();\n            detailsService.getDetails({\n                placeId: placeId\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function src(lat, lng, zoom, w, h) {\n            console.log('src latitude', lat, lng, zoom, w, h);\n\n            var link = 'http://maps.googleapis.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom +\n                '&scale=1&size=' + w + 'x' + h +\n                '&maptype=roadmap&format=jpg&visual_refresh=true&markers=size:small%7Ccolor:0xff2600%7Clabel:0%7C' + lat +\n                ',' + lng + '&sensor=true';\n            console.log(link);\n            return link;\n        }\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-location').directive('ionLocation', ionLocationDirective);\n\n    function ionLocationDirective($ionicModal, GeoService) {\n        return {\n            restrict: 'A',\n            scope   : {\n                location: '=ngModel'\n            },\n            link    : ionLocationLink\n        };\n\n        function ionLocationLink($scope, element) {\n\n\n            element.bind('click', function () {\n                function init() {\n                    $scope.search             = {};\n                    $scope.search.suggestions = [];\n                    $scope.search.query       = '';\n                }\n\n\n                function selectPlace(place_id) {\n                    GeoService.getDetails(place_id).then(function (location) {\n                        GeoService.parseAddress(location).then(function (address) {\n                            console.log(address);\n                            $scope.location = address;\n                            $scope.closeModalLocation();\n                        })\n                    });\n                }\n\n                init();\n\n                $scope.findMe = function () {\n                    $scope.loading = true;\n                    GeoService.findMe().then(function (location) {\n                        GeoService.searchAddress(location.address_normal).then(function (result) {\n                            console.log(result);\n                            $scope.search.suggestions = result;\n                            $scope.loading            = false;\n                        });\n                    });\n                };\n\n                $scope.findMe();\n\n                $scope.choosePlace = function (place) {\n                    selectPlace(place.place_id);\n                }\n\n                $scope.modalLocation = $ionicModal.fromTemplate('<ion-modal-view>' +\n                    '<ion-header-bar class=\"bar bar-light item-input-inset\">' +\n                    '<ion-spinner ng-if=\"loading\"></ion-spinner>' +\n                    '<button class=\"button button-clear button-icon ion-navigate\" ng-click=\"findMe()\" ng-hide=\"loading\"></button>' +\n                    '<label class=\"item-input-wrapper\">' +\n                    '<input type=\"search\" ng-model=\"search.query\" ng-model-options=\"{ debounce: 1500 }\" placeholder=\"{{ \\'searchText\\' | translate }}\"></label>' +\n                    '<button class=\"button button-clear\" ng-click=\"closeModalLocation()\" translate=\"cancel\"></button>' +\n                    '</ion-header-bar>' +\n                    '<ion-content padding=\"false\">' +\n                    '<ion-list>' +\n                    '<div class=\"center padding\" ng-if=\"loading1\"><ion-spinner ></ion-spinner></div>' +\n                    '<ion-item ng-repeat=\"suggestion in search.suggestions\" ng-click=\"choosePlace(suggestion)\" ng-bind=\"suggestion.description\"></ion-item>' +\n                    '<ion-item class=\"item-divider\"><img src=\"https://developers.google.com/maps/documentation/places/images/powered-by-google-on-white.png\"alt=\"\"/></ion-item>' +\n                    '</ion-list>' +\n                    '</ion-content>' +\n                    '</ion-modal-view>', {\n                        scope          : $scope,\n                        focusFirstInput: true\n                    }\n                );\n\n                $scope.modalLocation.show();\n\n                $scope.closeModalLocation = function () {\n                    $scope.modalLocation.hide();\n                    $scope.modalLocation.remove();\n                };\n\n                $scope.$watch('search.query', function (newValue) {\n                    if (newValue) {\n                        $scope.loading1           = true;\n                        $scope.search.suggestions = [];\n                        GeoService.searchAddress(newValue).then(function (result) {\n                            console.log(result);\n                            $scope.search.suggestions = result;\n                            $scope.loading1           = false;\n                        });\n                    }\n                });\n\n\n            });\n\n        }\n    }\n})();\n\n(function () {\n\n    angular.module('app.main').factory('FeedbackModal', FeedbackModalFactory);\n\n    function FeedbackModalFactory($q, AppConfig, GalleryFeedback, $rootScope, GalleryFeedbackForm, $ionicModal, Loading, Toast) {\n        var path = AppConfig.path;\n\n        return {\n            modal: modal\n        };\n        function modal(gallery) {\n            var $scope            = $rootScope.$new();\n            $scope.formFields     = GalleryFeedbackForm.form;\n            $scope.submitFeedback = submitFeedback;\n            $scope.closeModal     = closeModal;\n            $scope.form           = {\n                photogramId: gallery.id,\n                subject    : 'complaint'\n            };\n\n            function submitFeedback() {\n                var dataForm = angular.copy($scope.form);\n                Loading.start();\n                GalleryFeedback.create(dataForm).then(function (resp) {\n                    Loading.end();\n                    closeModal();\n\n                });\n            }\n\n\n            function closeModal() {\n                $scope.modal.hide();\n                $scope.modal.remove();\n                delete $scope.modal;\n            }\n\n            $ionicModal\n                .fromTemplateUrl('app/main/feedback/feedback-modal.html', {\n                    scope          : $scope,\n                    focusFirstInput: true\n                })\n                .then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n        }\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .factory('GalleryFeedbackForm', GalleryFeedbackFormFactory);\n\n    function GalleryFeedbackFormFactory($translate) {\n\n        var form = [{\n            key: 'title',\n            type: 'input',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('feedbackTitle'),\n                required: true\n            }\n        }, {\n            key: 'subject',\n            type: 'select',\n            templateOptions: {\n                label: $translate.instant('subject'),\n                options: [{\n                    'label': $translate.instant('complaint'),\n                    'id': 'complaint',\n                }, {\n                    'label': $translate.instant('bug'),\n                    'id': 'bug',\n                }, {\n                    'label': $translate.instant('suggestion'),\n                    'id': 'suggestion',\n                }],\n                valueProp: 'id',\n                labelProp: 'label',\n                icon: 'icon-list',\n                iconPlaceholder: true\n            }\n        }, {\n            key: 'status',\n            type: 'textarea',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('message'),\n                icon: 'ion-quote',\n                required: true,\n                iconPlaceholder: true\n            }\n        }];\n\n        return {\n            form: form\n        };\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  \n  angular.module('app.main').directive('feedback', feedbackDirective);\n\n  function feedbackDirective($ionicModal, AppConfig, PhotogramFeedback, PhotogramFeedbackForm, $state) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        photogram: '@'\n      },\n      template: '',\n      link: function (scope, elem, attr) {\n\n        scope.link = link;\n        scope.submitFeedback = submitFeedback;\n        scope.closeModal = closeModal;\n        elem.bind('click', openModal);\n\n        function init() {\n          scope.form = {\n            photogramId: scope.photogram\n          };\n          scope.formFields = PhotogramFeedbackForm.form;\n        }\n\n        function openModal() {\n\n          init();\n          $ionicModal.fromTemplateUrl('app/main/feedback/feedback-modal.html', {\n              scope: scope,\n              focusFirstInput: true\n            })\n            .then(function (modal) {\n              scope.modal = modal;\n              scope.modal.show();\n            });\n        }\n\n        function link(sref) {\n          $state.go(sref)\n          scope.closeModal();\n        }\n\n        function submitFeedback() {\n          var dataForm = angular.copy(scope.form);\n          PhotogramFeedback\n            .submit(dataForm)\n            .then(function (resp) {\n              console.log(resp);\n              init();\n              scope.closeModal();\n            });\n        }\n\n\n        function closeModal() {\n          scope.modal.hide();\n          scope.modal.remove();\n        }\n\n      }\n    };\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').controller('GalleryComment', GalleryCommentController);\n\n    function GalleryCommentController($scope, $stateParams, $q, $ionicScrollDelegate, $ionicHistory, Loading, $ionicPopup, User, Dialog, $timeout, Gallery, GalleryComment, GalleryForm) {\n\n        $scope.currentUser = Parse.User.current();\n        $scope.loading     = true;\n        $scope.formFields  = GalleryForm.formComment;\n\n        function init() {\n            $scope.nocomments = false;\n            Gallery.get($stateParams.galleryId).then(function (gallery) {\n                $scope.form = {\n                    gallery: gallery,\n                    text   : ''\n                };\n            });\n        }\n\n        $scope.backButton = function () {\n            $ionicHistory.goBack();\n        };\n\n        getComments();\n        init();\n\n        //Mentios\n        // shows the use of dynamic values in mentio-id and mentio-for to link elements\n        $scope.myIndexValue = \"5\";\n\n        $scope.searchPeople = function (term) {\n            var peopleList = [];\n            return User.getFollowing().then(function (response) {\n                _.each(response, function (item) {\n                    item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                    item.bio      = item.status;\n\n                    if (item.name) {\n                        if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                            peopleList.push(item);\n                        }\n                    } else {\n                        item.name = 'Not name';\n                        peopleList.push(item);\n                    }\n                });\n                $scope.people = peopleList;\n                console.log(peopleList);\n                return $q.when(peopleList);\n            });\n        };\n\n        $scope.getPeopleTextRaw = function (item) {\n            return '@' + item.username;\n        };\n\n\n        $scope.deleteComment = function (item, index) {\n            console.log(item);\n            Dialog.confirm(('Delete comment'), ('You are sure?')).then(function (resp) {\n                if (resp) {\n                    GalleryComment.get(item.id).then(function (comment) {\n                        GalleryComment.destroy(comment).then(function (resp) {\n                            $scope.comments.splice(index, 1);\n                        });\n                    })\n                }\n            });\n        }\n\n        $scope.editComment = function (obj, index) {\n            console.log(obj);\n            // An elaborate, custom popup\n            $scope.formEdit = {\n                id  : obj.id,\n                text: obj.text\n            };\n\n            $ionicPopup\n                .show({\n                    template: '<input type=\"text\" ng-model=\"formEdit.text\">',\n                    title   : ('Edit comment'),\n                    //subTitle: 'Please use normal things',\n                    scope   : $scope,\n                    buttons : [{\n                        text: ('Cancel')\n                    }, {\n                        text : '<b>OK</b>',\n                        type : 'button-positive',\n                        onTap: function (e) {\n                            console.log($scope.formEdit);\n                            if (!$scope.formEdit.text) {\n                                //don't allow the user to close unless he enters wifi password\n                                e.preventDefault();\n                            } else {\n                                return $scope.formEdit;\n                            }\n                        }\n                    }]\n                })\n                .then(function (resp) {\n                    console.log(resp);\n                    if (resp) {\n                        GalleryComment.get(obj.id).then(function (comment) {\n                            comment.text                = resp.text;\n                            $scope.comments[index].text = resp.text;\n                            comment.save();\n                        });\n                    }\n                });\n        }\n\n        function getComments() {\n            $scope.loading = true;\n            Gallery.comments({galleryId: $stateParams.galleryId}).then(function (resp) {\n                $scope.comments = [];\n\n                resp.map(function (comment) {\n                    console.log(comment);\n                    comment.canEdit = (comment.user.obj.id === $scope.currentUser.id) ? true : false;\n                    $scope.comments.push(comment);\n                });\n\n                $scope.loading = false;\n                $ionicScrollDelegate.scrollBottom();\n            });\n        }\n\n        $scope.submitComment = function (rForm, form) {\n            if (rForm.$valid) {\n                var dataForm   = angular.copy(form);\n                $scope.loading = true;\n                GalleryComment.create(dataForm).then(function (resp) {\n                    getComments();\n                    $scope.form.text = '';\n                });\n            }\n        }\n\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('LoadingCtrl', LoadingController);\n\n    function LoadingController($scope, $rootScope, $ionicPlatform, $cordovaSplashscreen, AppConfig, $state) {\n        var user  = $rootScope.currentUser;\n\n        if (user) {\n            console.log(user);\n            if (user.name) {\n                $state.go(AppConfig.routes.home, {\n                    clear: true\n                });\n            } else {\n                $state.go('user.avatar', {\n                    clear: true\n                });\n            }\n        } else {\n            $state.go(AppConfig.routes.login, {\n                clear: true\n            });\n        }\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                }\n            });\n        });\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('ProfileCtrl', ProfileController);\n\n    function ProfileController(User, $state, $stateParams) {\n        var vm = this;\n\n        vm.loading = true;\n        User.profile($stateParams.username).then(function (data) {\n            console.log(data);\n            console.log(Parse.User.current());\n            vm.isMe    = Parse.User.current().id === data.id ? true : false;\n            vm.user    = data;\n            vm.loading = false;\n        });\n\n        vm.openFollowers = function () {\n            console.log($state, $stateParams);\n            switch ($state.current.name) {\n                case 'tab.homeProfile':\n                    $state.go('tab.homeProfileFollowers', {username: $stateParams.username});\n                    break;\n                case 'tab.activityProfile':\n                    $state.go('tab.activityProfileFollowers', {username: $stateParams.username});\n                    break;\n            }\n        };\n\n        vm.openFollowing = function () {\n            console.log($state, $stateParams);\n            switch ($state.current.name) {\n                case 'tab.homeProfile':\n                    $state.go('tab.homeProfileFollowing', {username: $stateParams.username});\n                    break;\n                case 'tab.activityProfile':\n                    $state.go('tab.activityProfileFollowing', {username: $stateParams.username});\n                    break;\n            }\n        };\n\n        vm.follow = function () {\n\n            vm.loadingFollow = true;\n\n\n            User.follow(vm.user.obj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                vm.user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    vm.user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    vm.user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n\n        init();\n        vm.tab = {\n            grid : true,\n            list : false,\n            album: false,\n            map  : false\n        };\n\n        vm.changeTab = function changeTab(tab) {\n            Object.keys(vm.tab).map(function (value) {\n                if (value == tab) {\n                    vm.tab[value] = true;\n                } else {\n                    vm.tab[value] = false;\n                }\n            });\n        }\n\n\n        function init() {\n            vm.data  = {\n                total    : false,\n                galleries: []\n            };\n            vm.page  = 0;\n            vm.empty = false;\n            vm.more  = false;\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('ProfilePhotoCtrl', ProfileController);\n\n    function ProfileController($stateParams) {\n        var vm       = this;\n\n        vm.id = $stateParams.id;\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('MainTabCtrl', MainTabController);\n\n    function MainTabController($localStorage, $scope, PhotoService, $ionicPlatform, Gallery, ParseFile, Loading) {\n        var vm = this;\n\n        $scope.storage = $localStorage;\n\n        vm.postPhoto = function () {\n            var options = {\n                jrCrop     : true,\n                filterImage: true\n            }\n            PhotoService.open(options).then(PhotoService.modalPost).then(function (form) {\n                Loading.start();\n                ParseFile.upload({base64: form.image}).then(function (imageUploaded) {\n                    form.image = imageUploaded;\n                    Gallery.create(form).then(function (item) {\n                        $scope.$emit('photoInclude', item);\n                        Loading.end();\n                    });\n                });\n            });\n\n\n        };\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('AccountCtrl', AccountController);\n\n    function AccountController($scope, AppConfig, User, $state, $rootScope) {\n        var vm = this;\n\n        vm.user  = $rootScope.currentUser;\n        vm.photo = $rootScope.currentUser.attributes.photo;\n\n        vm.loading     = true;\n        $scope.buttonTheme = 'button-' + AppConfig.theme;\n\n        User.getPublicData(Parse.User.current()).then(function (user) {\n            console.log('Profile', user.attributes);\n            vm.user    = user;\n            vm.loading = false;\n        });\n\n        vm.openFollowers = function () {\n            $state.go('tab.accountFollowers', {username: $rootScope.currentUser.attributes.username});\n        };\n\n        vm.openFollowing = function () {\n            $state.go('tab.accountFollowing', {username: $rootScope.currentUser.attributes.username});\n        };\n\n        init();\n\n        vm.tab = {\n            grid : true,\n            list : false,\n            album: false,\n            map  : false\n        };\n\n        vm.changeTab = function changeTab(tab) {\n            Object.keys(vm.tab).map(function (value) {\n                if (value == tab) {\n                    vm.tab[value] = true;\n                } else {\n                    vm.tab[value] = false;\n                }\n            });\n        }\n\n        function init() {\n            vm.data  = {\n                total    : false,\n                galleries: []\n            };\n            vm.page  = 0;\n            vm.empty = false;\n            vm.more  = false;\n            getFollower();\n        }\n\n        function getFollower() {\n            vm.loadingFollowers = true;\n            vm.loadingFollowing = true;\n            vm.loadingPhotos    = true;\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main').controller('ActivityCtrl', ActivityController);\n\n    function ActivityController($scope, $state, GalleryActivity) {\n        var vm          = this;\n        vm.params       = {};\n        vm.params.page  = 1;\n        vm.params.limit = 30;\n        vm.data         = [];\n\n        vm.openProfile = function (username) {\n            $state.go('tab.activityProfile', {username: username})\n        };\n\n        $scope.loading = true;\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                vm.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            vm.params.page = page;\n        }\n\n        function loadFeed() {\n\n            GalleryActivity.feed(vm.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage(vm.params.page + 1);\n                setGalleries(data);\n\n                if (vm.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.$broadcast('scroll.infiniteScrollComplete');\n                $scope.$broadcast('scroll.refreshComplete');\n                $scope.loading = false;\n\n            }).catch(function () {\n                if (vm.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        vm.onLoadMore = function () {\n            loadFeed();\n        };\n\n        vm.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        vm.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        vm.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        vm.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        vm.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        vm.onReload = function () {\n            vm.params.page = 0;\n            vm.data        = [];\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('HomeCtrl', HomeController);\n\n    function HomeController($state) {\n        var vm = this;\n\n        vm.openProfile = function (username) {\n            $state.go('tab.homeProfile', {username: username})\n        };\n\n        vm.openLikers = function (galleryId) {\n            $state.go('tab.homeGalleryLikers', {galleryId: galleryId})\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('SearchCtrl', SearchCtrl);\n\n    function SearchCtrl($scope, $filter, Gallery, $rootScope) {\n\n\n        $scope.onSearch = function () {\n            var text             = $filter('lowercase')($scope.params.search);\n            $scope.params.search = text;\n            $scope.onReload();\n        };\n\n        $scope.params      = {};\n        $scope.params.page = 1;\n        $scope.params.text = '';\n        $scope.data        = [];\n\n        if ($scope.username) {\n            $scope.params.username = $scope.username;\n        }\n\n        $scope.loading = true;\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                $scope.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            $scope.params.page = page;\n        }\n\n        function loadFeed() {\n\n            Gallery.search($scope.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage($scope.params.page + 1);\n                setGalleries(data);\n\n                if ($scope.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.loading = false;\n                $rootScope.$broadcast('scroll.infiniteScrollComplete');\n                $rootScope.$broadcast('scroll.refreshComplete');\n\n            }).catch(function () {\n                if ($scope.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        $scope.onLoadMore = function () {\n            loadFeed();\n        };\n\n        $scope.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        $scope.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        $scope.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        $scope.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        $scope.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        $scope.onReload = function () {\n            $scope.params.page = 0;\n            $scope.data        = [];\n            $scope.loading     = true;\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main').controller('SearchMapCtrl', SearchMapController);\n\n    function SearchMapController($scope, $state, $localStorage, Toast, Gallery, Geolocation, Dialog) {\n\n        var markers      = [];\n        var latlngbounds = new google.maps.LatLngBounds();\n        $scope.maxRating = 5;\n        $scope.storage   = $localStorage;\n        $scope.galleries = [];\n        $scope.params    = {\n            location: null,\n            distance: 100.00,\n            page    : 1,\n            limit   : 10\n        };\n        $scope.loading   = true;\n        $scope.map\n\n        function init() {\n            $scope.galleries = [];\n            removeGallerys();\n            removeMarkers();\n\n            var position   = {\n                latitude : -18.8800397,\n                longitude: -47.05878999999999\n            };\n            var mapOptions = {\n                center   : setPosition(position),\n                zoom     : 15,\n                mapTypeId: google.maps.MapTypeId.ROADMAP\n            };\n\n            $scope.map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);\n        }\n\n        $scope.$on('$ionicView.enter', function (scopes, states) {\n            if(!$scope.map) {\n                init();\n                myPosition();\n            }\n        });\n\n\n        function myPosition() {\n            Geolocation.getCurrentPosition().then(function (position) {\n\n                console.log(position);\n\n                $scope.params.location = {\n                    latitude : position.coords.latitude,\n                    longitude: position.coords.longitude\n                };\n\n                var marker = {\n                    position: setPosition($scope.params.location),\n                    title   : 'I am here',\n                    id      : 0\n                }\n\n                addMarker(marker);\n\n                // Set center locale\n                $scope.map.setCenter(setPosition($scope.params.location));\n\n                loadGallerys();\n            }, function (error) {\n                $scope.params.location = null;\n\n                var errorMessage;\n                if (error.code === 1 || error.code === 3) {\n                    errorMessage = 'errorGpsDisabledText';\n                } else {\n                    errorMessage = 'errorLocationMissingText';\n                }\n                Dialog.alert(errorMessage);\n\n            });\n        }\n\n        function setPosition(location) {\n            if (location) {\n                return new google.maps.LatLng(location.latitude, location.longitude);\n            }\n        }\n\n        function addMarker(item) {\n\n\n            var markerOption = {\n                id       : item.id,\n                map      : $scope.map,\n                position : item.position,\n                title    : item.title,\n                animation: google.maps.Animation.DROP\n            };\n\n            if (item.icon) {\n                var size          = 40;\n                markerOption.icon = {\n                    url       : item.icon,\n                    size      : new google.maps.Size(size, size),\n                    scaledSize: new google.maps.Size(size, size),\n                    origin    : new google.maps.Point(0, 0),\n                    anchor    : new google.maps.Point(size / 4, size / 4),\n                };\n            }\n\n            // VariÃ¡vel que define as opÃ§Ãµes do marcador\n            var marker = new google.maps.Marker(markerOption);\n\n            // Procedimento que mostra a Info Window atravÃ©s de um click no marcador\n            google.maps.event.addListener(marker, 'click', function () {\n                // Open Profile\n                if(item.username) {\n                    $state.go('tab.mapProfile', {username: item.username})\n                }\n\n            });\n\n            markers.push(marker);\n\n            new MarkerClusterer($scope.map, markers, {\n                imagePath: '../img/m'\n            });\n\n            latlngbounds.extend(item.position);\n            $scope.map.fitBounds(latlngbounds);\n        }\n\n        function setGallerys(galleries) {\n            $scope.galleries = galleries;\n            galleries.map(function (item) {\n\n                if (item.location) {\n                    var marker = {\n                        map     : $scope.map,\n                        id      : item.id,\n                        position: setPosition(item.location),\n                        title   : item.title,\n                        image   : item.image.url(),\n                        icon    : item.imageThumb.url(),\n                        username: item.attributes.user.attributes.username\n                    };\n\n                    addMarker(marker)\n                }\n            });\n\n\n        }\n\n        function loadGallerys() {\n            $scope.loading = true;\n            Gallery.all($scope.params).then(function (galleries) {\n\n                if (galleries.length > 0) {\n                    setGallerys(galleries);\n                } else {\n                    Dialog.alert('galleriesNotFoundText');\n                }\n\n                $scope.loading = false;\n\n            }, function () {\n                Toast.show('errorText');\n            });\n        }\n\n        function removeGallerys() {\n            $scope.galleries = [];\n        }\n\n        function removeMarkers() {\n            markers.map(function (item) {\n                item.setMap(null);\n            });\n            markers = [];\n        };\n\n        $scope.onSearchHere = function () {\n            $scope.params.location.latitude  = $scope.map.getCenter().lat();\n            $scope.params.location.longitude = $scope.map.getCenter().lng();\n            removeGallerys();\n            removeMarkers();\n            loadGallerys();\n        }\n\n        $scope.onGalleryClicked = function (item) {\n            console.log(item);\n        };\n    }\n\n})();\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name UserAvatarCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.main')\n        .controller('UserAvatarCtrl', UserAvatarController);\n\n    function UserAvatarController(User, Auth, AppConfig, $rootScope, $state, Toast, UserForm) {\n        var vm          = this;\n        vm.submitAvatar = submitAvatar;\n        init();\n\n        vm.photo = Parse.User.current().attributes.photo;\n\n        function init() {\n            var user      = Auth.getLoggedUser();\n            vm.form       = {\n                name    : user.name,\n                email   : user.email,\n                status  : user.status,\n                gender  : user.gender,\n                img     : user.img,\n                username: user.username\n            };\n            vm.formFields = UserForm.profile;\n            console.log(vm.form);\n            console.log(vm.formFields);\n        }\n\n        function submitAvatar() {\n            console.log(vm.rForm);\n\n            if (vm.rForm.$valid) {\n                var dataForm = angular.copy(vm.form);\n                console.log(dataForm);\n\n                User.update(dataForm).then(function (resp) {\n                    console.log(resp);\n                    $rootScope.currentUser = Parse.User.current();\n                    $state.go(AppConfig.routes.home, {\n                        clear: true\n                    });\n                });\n            } else {\n                Toast.alert({\n                    title: ('Invalid form'),\n                    text : ('Fill out the fields in red')\n                });\n            }\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').directive('userAvatar', userAvatarDirective);\n\n    function userAvatarDirective(ActionSheet, $rootScope, ParseFile, User) {\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function ($scope, elem) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var tempImage;\n                    var user        = $scope.ngModel;\n                    var currentUser = $rootScope.currentUser;\n\n                    console.log(user);\n                    console.log(currentUser);\n\n                    if (user.id != currentUser.id) {\n                        return false;\n                    }\n\n                    ActionSheet.image().then(function (image) {\n                        tempImage = image;\n                        //return PhotoFilter.load(image);\n                        return image;\n                    }).then(function (form) {\n                        $scope.loading = true;\n                        ParseFile.upload({base64: form}).then(function (imageUploaded) {\n                            User.setPhoto(imageUploaded).then(function (user) {\n                                $rootScope.currentUser.photo = user.attributes.photo;\n                                $scope.loading = false;\n                            });\n                        });\n                    });\n                }\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserFollowerCtrl', UserFollowerController);\n\n    function UserFollowerController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n        User.getFollowers($stateParams.username).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserFollowingCtrl', UserFollowingController);\n\n    function UserFollowingController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n        User.getFollowing($stateParams.username).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserIntroCtrl', UserIntroController);\n\n    function UserIntroController($scope, $ionicPlatform, $cordovaSplashscreen) {\n        var vm              = this;\n        var currentPlatform = window.ionic.Platform.platform();\n        vm.slideIndex       = 0;\n\n        vm.slideChanged = function (index) {\n            vm.slideIndex = index;\n        };\n        vm.next         = function () {\n            $ionicSlideBoxDelegate.next();\n        };\n        vm.previous     = function () {\n            $ionicSlideBoxDelegate.previous();\n        };\n\n        if (currentPlatform) {\n            vm.device = (currentPlatform === 'android') ? 'android' : 'iphone';\n        } else {\n            vm.device = 'android';\n        }\n\n        vm.slides                          = [\n            {\n                text: 'STEP1',\n                img : 'img/intro1.png'\n            }, {\n                text: 'STEP2',\n                img : 'img/intro2.png'\n            }, {\n                text: 'STEP3',\n                img : 'img/intro3.png'\n            }, {\n                text: 'STEP4',\n                img : 'img/intro4.png'\n            }, {\n                text: 'STEP5',\n                img : 'img/intro5.png'\n            }, {\n                text: 'STEP6',\n                img : 'img/intro6.png'\n            }, {\n                text: 'STEP7',\n                img : 'img/intro7.png'\n            }\n        ];\n        window.localStorage['walkthrough'] = true;\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                    window.StatusBar.styleLightContent()\n                }\n            });\n        });\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserLikersCtrl', UserLikerController);\n\n    function UserLikerController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n\n        User.getLikers($stateParams.galleryId).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserListCtrl', UserListController);\n\n    function UserListController(User, $scope, $state) {\n        var vm          = this;\n        vm.params       = {};\n        vm.params.page  = 1;\n        vm.params.limit = 30;\n        vm.data         = [];\n\n        vm.loading = true;\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                vm.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            vm.params.page = page;\n        }\n\n        function loadFeed() {\n\n            User.list(vm.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage(vm.params.page + 1);\n                setGalleries(data);\n\n                if (vm.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.$broadcast('scroll.infiniteScrollComplete');\n                $scope.$broadcast('scroll.refreshComplete');\n                vm.loading = false;\n\n            }).catch(function () {\n                if (vm.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        vm.onLoadMore = function () {\n            loadFeed();\n        };\n\n        vm.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        vm.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        vm.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        vm.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        vm.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        vm.onReload = function () {\n            vm.params.page = 0;\n            vm.data        = [];\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            user.loading = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                user.loading = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('UserMergeCtrl', UserMergeController);\n\n    function UserMergeController(Auth, $rootScope, AppConfig, Facebook, $state, Toast, UserForm) {\n        var vm        = this;\n        vm.formFields = UserForm.register;\n\n        init();\n        function init() {\n            if ($rootScope.tempUser) {\n                vm.form = {\n                    email   : $rootScope.tempUser.attributes.email,\n                    username: $rootScope.tempUser.attributes.username,\n                    password: ''\n                };\n            } else {\n                $state.go('user.intro', {clear: true});\n            }\n        }\n\n        vm.submit = function (rForm, form) {\n\n            console.log(rForm);\n            console.table(form);\n            if (vm.form.password !== '') {\n                console.log(form);\n                Auth.logIn(form).then(function (user) {\n                    console.log(user);\n                    $rootScope.currentUser = user;\n                    if (Auth.getLoggedUser()) {\n                        Facebook.link(Parse.User.current()).then(function (resp) {\n                            console.log(resp);\n                            $state.go(AppConfig.routes.home, {\n                                clear: true\n                            });\n                        }).catch(function (resp) {\n                            console.log(resp);\n                            Toast.alert({\n                                title: 'Ops',\n                                text : resp.message\n                            });\n                        });\n                    }\n\n\n                }).catch(function (resp) {\n                    Toast.alert({\n                        title: 'Ops',\n                        text : resp.message\n                    });\n                });\n            } else {\n                Toast.alert({\n                    title: ('Invalid form'),\n                    text : ('Please enter your email')\n                });\n            }\n\n        };\n\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name recoveryPass\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict E\n   * */\n\n  angular\n    .module('app.main')\n    .directive('recoveryPass', recoveryPassDirective);\n\n  function recoveryPassDirective(User, $ionicPopup, Loading, Toast) {\n    return {\n      restrict: 'A',\n      scope: {\n        login: '@',\n        register: '@',\n      },\n      link: function ($scope, elem) {\n\n        elem.bind('click', openModal);\n\n        function openModal() {\n\n          $scope.form = {\n            recovery: ''\n          };\n\n          $scope.erro = '';\n\n          $scope.text = {\n            button: (''),\n            input: ('Email')\n          };\n\n          $ionicPopup\n            .show({\n              scope: $scope,\n              template: '<div class=\"popup-recovery\"><form name=\"form.recovery\" form-manager><label class=\"item item-input\"><i class=\"icon ion-email placeholder-icon\"></i><input type=\"email\" ng-model=\"email\" id=\"email\" name=\"email\" placeholder=\"{{ text.input }}\" required ng-maxlength=\"80\"></label><span class=\"error-msg\">{{erro}}</span></form></div>',\n              title: ('A new password will be sent to your e-mail address'),\n              buttons: [{\n                text: ('Cancel'),\n                type: 'button-calm'\n              }, {\n                text: ('Send'),\n                type: 'button-positive',\n                onTap: function (e) {\n                  if ($scope.form.recovery.$valid) {\n                    return $scope.form.recovery.email.$viewValue;\n                  } else {\n                    //não permite o usuário fechar até ele digitar o email\n                    e.preventDefault();\n                    $scope.erro = ('Invalid Email');\n                  }\n                }\n              }]\n            })\n            .then(function (res) {\n              if (!angular.isUndefined(res)) {\n                var email = res;\n\n                console.log(res);\n\n                Loading.start();\n\n                User\n                  .forgot(email)\n                  .then(function (resp) {\n                    console.log(resp);\n                    Toast.alert({\n                      login: ('Forgot your password'),\n                      text: ('Access your accout mail')\n                    });\n                    Loading.end();\n                  })\n                  .catch(function (resp) {\n                    Toast.alert({\n                      login: 'Ops',\n                      text: resp\n                    });\n                    Loading.end();\n                  });\n              }\n            });\n\n        }\n      }\n    };\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name UserRecoveryPassCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.main')\n    .controller('UserRecoveryPassCtrl', UserRecoveryPassController);\n\n  function UserRecoveryPassController(User, Toast) {\n    var vm = this;\n    vm.form = {};\n    vm.submitForgot = submitForgot;\n\n    function submitForgot() {\n      User\n        .forgot(vm.form)\n        .then(function (resp) {\n          console.log(resp);\n        })\n        .catch(function (resp) {\n          Toast.alert('Ops', resp);\n        });\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').directive('ionCrop', ionCropDirective);\n\n    function ionCropDirective($jrCrop, $translate, $ionicActionSheet) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel : '=',\n                option  : '=',\n                cropSave: '&'\n            },\n            template: '<div><input type=\"file\" id=\"browseBtn\" image=\"image\" accept=\"image/*\" style=\"display: none\"/></div>',\n            link    : ionCropLink\n        };\n\n        function ionCropLink($scope, element) {\n\n            // Triggered on a button click, or some other target\n            $scope.action = action;\n            element.bind('click', getElem);\n            $scope.crop = crop;\n            angular.element(document.getElementById('browseBtn'))\n                   .on('change', fileUpload);\n\n\n            function getElem() {\n                document.getElementById('browseBtn')\n                        .click();\n            }\n\n            function action() {\n\n                // Show the action sheet\n                $ionicActionSheet.show({\n                    buttons      : [\n                        {\n                            text: '<i class=\"icon ion-camera\"></i>' + ('Photo Camera')\n                        }, {\n                            text: '<i class=\"icon ion-images\"></i> ' + ('Photo Album')\n                        }\n                    ],\n                    //destructiveText:  ('Delete'),\n                    titleText    : ('Change Image'),\n                    cancelText   : ('Cancel'),\n                    cancel       : function () {\n                        // add cancel code..\n                    },\n                    buttonClicked: function (index) {\n\n                        if (index === 0) {\n                            console.log('Photo Camera');\n                        }\n                        // Photo Album\n                        if (index === 1) {\n                            document.getElementById('browseBtn')\n                                    .click();\n                        }\n                        return true;\n                    }\n                });\n\n            }\n\n            function fileUpload(e) {\n\n                var file   = e.target.files[0];\n                var reader = new FileReader();\n                reader.readAsDataURL(file);\n\n                reader.onload = function (event) {\n                    var image = event.target.result;\n                    $scope.crop(image);\n                };\n\n                // Clear input file\n                angular.element(document.getElementById('browseBtn')).val('');\n\n            }\n\n            function crop(image) {\n\n                console.log($scope.option);\n\n                $jrCrop\n                    .crop({\n                        url       : image,\n                        width     : $scope.option ? $scope.option.width : 200,\n                        height    : $scope.option ? $scope.option.height : 200,\n                        cancelText: ('Cancel'),\n                        chooseText: ('Save')\n                    })\n                    .then(function (canvas) {\n                        var image = canvas.toDataURL();\n                        //            var name = $scope.option ? $scope.option.name : 'thumb';\n                        //            var filename = ($scope.option ? $scope.option.name : '') + '_' + name + window.Number(new window.Date() + '.jpg';\n\n                        //var file = base64ToBlob(image.replace('data:image/png;base64,', ''), 'image/jpeg');\n                        //            file.name = filename;\n\n                        //upload(file);\n\n                        console.log(image);\n                        $scope.ngModel = image;\n\n\n                    });\n\n            }\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').directive('sliderFilter', sliderFilterDirective);\n\n    function sliderFilterDirective() {\n        return {\n            restrict: 'E',\n            link    : sliderFilterLink,\n            scope   : {\n                filter: '='\n            },\n            template: '<div class=\"item range range-positive\"> ' +\n            '<input type=\"range\" name=\"filter.slider.name\" min=\"-100\" max=\"100\" step=\"1\" ng-model=\"filter.slider.value\"  > ' +\n            '</div>'\n        };\n\n        function sliderFilterLink(scope, elem, attr) {\n\n            console.log(scope.filter);\n\n            scope.$watch('filter.slider.value', function (value) {\n                if (value) {\n                    scope.filter.slider.value = parseInt(value);\n                    scope.filter.setSlider(scope.filter.slider);\n                }\n            });\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('ion-photo').factory('PhotoFilter', PhotoFilterFactory);\n\n    function PhotoFilterFactory($q, $timeout) {\n\n        var image, image3, texture, texture3;\n        // Try Canvas\n        try {\n            var canvas  = fx.canvas();\n            var canvas2 = fx.canvas();\n            var canvas3 = fx.canvas();\n        } catch (err) {\n            alert(err);\n            return;\n        }\n\n        var imageFilter = {\n            brightness: 0,\n            contrast  : 0,\n            hue       : 0,\n            denoise   : 20,\n            saturation: 0,\n            vibrance  : 0,\n            radius    : 0,\n            strength  : 0,\n            noise     : 0,\n            sepia     : 0,\n            size      : 0,\n            amount    : 0,\n        };\n\n        var imageFilters = [\n            {\n                name  : 'Normal',\n                id    : 'normal',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: 0,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Claredon',\n                id    : 'claredon',\n                filter: {\n                    brightness: 0.3,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: 0,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Gingham',\n                id    : 'gingham',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0.5,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: 0.1,\n                    vibrance  : 0.3,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0.3,\n                }\n            },\n            {\n                name  : 'Moon',\n                id    : 'moon',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: -1,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0.8,\n                }\n            },\n            {\n                name  : 'Lark',\n                id    : 'lark',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: 0,\n                    vibrance  : -0.3,\n                    radius    : 0.2,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Reyes',\n                id    : 'reyes',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: -1,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Juno',\n                id    : 'juno',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: -1,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Slumber',\n                id    : 'slumber',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: -1,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            },\n            {\n                name  : 'Crema',\n                id    : 'crema',\n                filter: {\n                    brightness: 0,\n                    contrast  : 0,\n                    hue       : 0,\n                    denoise   : 20,\n                    saturation: -1,\n                    vibrance  : 0,\n                    radius    : 0,\n                    strength  : 0,\n                    noise     : 0,\n                    sepia     : 0,\n                    size      : 0,\n                    amount    : 0,\n                }\n            }\n        ];\n\n        function init(elementId) {\n            var defer = $q.defer();\n            // convert the image to a texture\n            image     = document.getElementById(elementId);\n            // convert the image to a texture\n            texture   = canvas.texture(image);\n            // replace the image with the canvas\n            canvas.draw(texture).update();\n            image.src = canvas.toDataURL('image/jpeg', 0.8);\n\n            $timeout(function () {\n\n                // Generate Filters Thumb\n                imageFilters.map(function (imageThumb) {\n                    var thumbFilter = document.getElementById(imageThumb.id);\n                    if (thumbFilter) {\n                        var img = new Image();\n                        img.src = image.src;\n                        canvas2\n                            .draw(canvas2.texture(img))\n                            .brightnessContrast(imageThumb.filter.brightness, imageThumb.filter.contrast)\n                            .hueSaturation(imageThumb.filter.hue, imageThumb.filter.saturation)\n                            .vibrance(imageThumb.filter.vibrance)\n                            .denoise(imageThumb.filter.denoise * 100)\n                            .unsharpMask(imageThumb.filter.radius * 100, imageThumb.filter.strength)\n                            .noise(imageThumb.filter.noise)\n                            .sepia(imageThumb.filter.sepia)\n                            .vignette(imageThumb.filter.size, imageThumb.filter.amount)\n                            .update();\n                        thumbFilter.src = canvas2.toDataURL('image/jpeg', 0.7);\n                    }\n                });\n                defer.resolve();\n            }, 100);\n\n            return defer.promise;\n\n        }\n\n        function Filter(name, icon, func, init, update, imageFile) {\n            this.name      = name;\n            this.icon      = icon;\n            this.func      = func;\n            this.update    = update;\n            this.imageFile = imageFile;\n            this.slider    = {};\n            this.nubs      = [];\n            init.call(this);\n        }\n\n        Filter.prototype.addNub = function (name, x, y) {\n            this.nubs.push({\n                name: name,\n                x   : x,\n                y   : y\n            });\n        };\n\n        Filter.prototype.addSlider = function (name, label, min, max, value, step) {\n            this.slider = {\n                name : name,\n                label: label,\n                min  : min,\n                max  : max,\n                value: value,\n                step : step\n            };\n        };\n\n        Filter.prototype.setSlider = function (slider) {\n            this[slider.name] = slider.value / 100;\n            this.update();\n        };\n\n        Filter.prototype.setCode = function (values) {\n            imageFilter[Object.keys(values)[0]] = values[Object.keys(values)[0]];\n\n            canvas\n                .draw(texture)\n                .brightnessContrast(imageFilter.brightness, imageFilter.contrast)\n                .hueSaturation(imageFilter.hue, imageFilter.saturation)\n                .vibrance(imageFilter.vibrance)\n                .denoise(imageFilter.denoise * 100)\n                .unsharpMask(imageFilter.radius * 100, imageFilter.strength)\n                .noise(imageFilter.noise)\n                .sepia(imageFilter.sepia)\n                .vignette(imageFilter.size, imageFilter.amount)\n                .update();\n\n            image.src = canvas.toDataURL('image/jpeg', 0.8);\n        };\n\n        var perspectiveNubs = [175, 156, 496, 55, 161, 279, 504, 330];\n        var filters         = {\n            'Adjust': [\n                new Filter('Brightness', 'ion-ios-sunny-outline', 'brightnessContrast', function () {\n                    this.addSlider('brightness', 'Brightness', -100, 100, 0, 0.1);\n                }, function () {\n                    this.setCode({\n                        brightness: this.brightness\n                    });\n                }),\n                new Filter('Contrast', 'ion-contrast', 'brightnessContrast', function () {\n                    this.addSlider('contrast', 'Contrast', -100, 100, 0, 0.1);\n                }, function () {\n                    this.setCode({\n                        contrast: this.contrast,\n                    });\n                }),\n                new Filter('Hue', 'ion-ios-color-filter-outline', 'hueSaturation', function () {\n                    this.addSlider('hue', 'Hue', -100, 100, 0, 0.1);\n                }, function () {\n                    this.setCode({\n                        hue: this.hue\n                    });\n                }),\n                new Filter('Saturation', 'ion-ios-partlysunny-outline', 'hueSaturation', function () {\n                    this.addSlider('saturation', 'Saturation', -100, 100, 0, 0.1);\n                }, function () {\n                    this.setCode({\n                        saturation: this.saturation,\n                    });\n                }),\n                new Filter('Vibrance', 'ion-ios-flower-outline', 'vibrance', function () {\n                    this.addSlider('amount', 'Amount', -100, 100, 0.5, 0.1);\n                }, function () {\n                    this.setCode({\n                        vibrance: this.amount\n                    });\n                }),\n                new Filter('Denoise', 'ion-ios-eye-outline', 'denoise', function () {\n                    this.addSlider('exponent', 'Exponent', 0, 50, 20, 1);\n                }, function () {\n                    this.setCode({\n                        denoise: this.exponent\n                    });\n                }),\n                //new Filter('Unsharp Mask', 'ion-ios-rose-outline', 'unsharpMask', function () {\n                //    this.addSlider('radius', 'Radius', 0, 200, 0, 0.1);\n                //    this.addSlider('strength', 'Strength', 0, 50, 0, 0.01);\n                //}, function () {\n                //    //this.setCode('canvas.draw(texture).unsharpMask(' + this.radius + ', ' + this.strength + ').update();');\n                //    this.setCode({\n                //        radius  : this.radius,\n                //        strength: this.strength,\n                //    });\n                //}),\n                new Filter('Noise', 'ion-ios-analytics-outline', 'noise', function () {\n                    this.addSlider('amount', 'Amount', 0, 100, 5, 1);\n                }, function () {\n                    this.setCode({\n                        noise: this.amount,\n                    });\n                }),\n                new Filter('Sepia', 'ion-ios-partlysunny-outline', 'sepia', function () {\n                    this.addSlider('amount', 'Amount', 0, 100, 0, 1);\n                }, function () {\n                    this.setCode({\n                        sepia: this.amount,\n                    });\n                }),\n                //new Filter('Vignette Size', 'ion-ios-glasses-outline', 'vignette', function () {\n                //    this.addSlider('size', 'Size', 0, 100, 0, 1);\n                //}, function () {\n                //    this.setCode({\n                //        amount: this.amount,\n                //    });\n                //}),\n                new Filter('Vignette', 'ion-ios-glasses-outline', 'vignette', function () {\n                    this.addSlider('amount', 'Amount', 0, 100, 0, 1);\n                }, function () {\n                    this.setCode({\n                        amount: this.amount,\n                    });\n                })\n            ],\n            //'Blur'  : [\n            //    new Filter('Zoom Blur', 'zoomBlur', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('strength', 'Strength', 0, 1, 0.3, 0.01);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).zoomBlur(' + this.center.x + ', ' + this.center.y + ', ' + this.strength + ').update();');\n            //    }),\n            //    new Filter('Triangle Blur', 'triangleBlur', function () {\n            //        this.addSlider('radius', 'Radius', 0, 200, 50, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).triangleBlur(' + this.radius + ').update();');\n            //    }),\n            //    new Filter('Tilt Shift', 'tiltShift', function () {\n            //        this.addNub('start', 0.15, 0.75);\n            //        this.addNub('end', 0.75, 0.6);\n            //        this.addSlider('blurRadius', 'Blur Radius', 0, 50, 15, 1);\n            //        this.addSlider('gradientRadius', 'Gradient Radius', 0, 400, 200, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).tiltShift(' + this.start.x + ', ' + this.start.y + ', ' + this.end.x + ', ' + this.end.y + ', ' + this.blurRadius + ', ' + this.gradientRadius + ').update();');\n            //    }),\n            //    new Filter('Lens Blur', 'lensBlur', function () {\n            //        this.addSlider('radius', 'Radius', 0, 50, 10, 1);\n            //        this.addSlider('brightness', 'Brightness', -1, 1, 0.75, 0.01);\n            //        this.addSlider('angle', 'Angle', -Math.PI, Math.PI, 0, 0.01);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).lensBlur(' + this.radius + ', ' + this.brightness + ', ' + this.angle + ').update();');\n            //    }, 'lighthouse.jpg')\n            //],\n            //'Warp'  : [\n            //    new Filter('Swirl', 'swirl', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('angle', 'Angle', -25, 25, 3, 0.1);\n            //        this.addSlider('radius', 'Radius', 0, 600, 200, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).swirl(' + this.center.x + ', ' + this.center.y + ', ' + this.radius + ', ' + this.angle + ').update();');\n            //    }),\n            //    new Filter('Bulge / Pinch', 'bulgePinch', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('strength', 'Strength', -1, 1, 0.5, 0.01);\n            //        this.addSlider('radius', 'Radius', 0, 600, 200, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).bulgePinch(' + this.center.x + ', ' + this.center.y + ', ' + this.radius + ', ' + this.strength + ').update();');\n            //    }),\n            //    new Filter('Perspective', 'perspective', function () {\n            //        var w = 640, h = 425;\n            //        this.addNub('a', perspectiveNubs[0] / w, perspectiveNubs[1] / h);\n            //        this.addNub('b', perspectiveNubs[2] / w, perspectiveNubs[3] / h);\n            //        this.addNub('c', perspectiveNubs[4] / w, perspectiveNubs[5] / h);\n            //        this.addNub('d', perspectiveNubs[6] / w, perspectiveNubs[7] / h);\n            //    }, function () {\n            //        var before = perspectiveNubs;\n            //        var after  = [this.a.x, this.a.y, this.b.x, this.b.y, this.c.x, this.c.y, this.d.x, this.d.y];\n            //        this.setCode('canvas.draw(texture).perspective([' + before + '], [' + after + ']).update();');\n            //    }, 'perspective.jpg')\n            //],\n            //'Fun'   : [\n            //    new Filter('Ink', 'ink', function () {\n            //        this.addSlider('strength', 'Strength', 0, 1, 0.25, 0.01);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).ink(' + this.strength + ').update();');\n            //    }),\n            //    new Filter('Edge Work', 'edgeWork', function () {\n            //        this.addSlider('radius', 'Radius', 0, 200, 10, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).edgeWork(' + this.radius + ').update();');\n            //    }),\n            //    new Filter('Hexagonal Pixelate', 'hexagonalPixelate', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('scale', 'Scale', 10, 100, 20, 1);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).hexagonalPixelate(' + this.center.x + ', ' + this.center.y + ', ' + this.scale + ').update();');\n            //    }),\n            //    new Filter('Dot Screen', 'dotScreen', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('angle', 'Angle', 0, Math.PI / 2, 1.1, 0.01);\n            //        this.addSlider('size', 'Size', 3, 20, 3, 0.01);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).dotScreen(' + this.center.x + ', ' + this.center.y + ', ' + this.angle + ', ' + this.size + ').update();');\n            //    }),\n            //    new Filter('Color Halftone', 'colorHalftone', function () {\n            //        this.addNub('center', 0.5, 0.5);\n            //        this.addSlider('angle', 'Angle', 0, Math.PI / 2, 0.25, 0.01);\n            //        this.addSlider('size', 'Size', 3, 20, 4, 0.01);\n            //    }, function () {\n            //        this.setCode('canvas.draw(texture).colorHalftone(' + this.center.x + ', ' + this.center.y + ', ' + this.angle + ', ' + this.size + ').update();');\n            //    })\n            //]\n        };\n\n        function apply(resFilter) {\n\n            imageFilter = resFilter;\n\n            canvas\n                .draw(texture)\n                .brightnessContrast(imageFilter.brightness, imageFilter.contrast)\n                .hueSaturation(imageFilter.hue, imageFilter.saturation)\n                .vibrance(imageFilter.vibrance)\n                .denoise(imageFilter.denoise * 100)\n                .unsharpMask(imageFilter.radius * 100, imageFilter.strength)\n                .noise(imageFilter.noise)\n                .sepia(imageFilter.sepia)\n                .vignette(imageFilter.size, imageFilter.amount)\n                .update();\n\n            image.src = canvas.toDataURL('image/png');\n        }\n\n        function reset() {\n\n            _.map(filters.Adjust, function (filter) {\n                filter.slider.value = 0;\n                filter.setSlider(filter.slider);\n            });\n\n            imageFilter = {\n                brightness: 0,\n                contrast  : 0,\n                hue       : 0,\n                denoise   : 20,\n                saturation: 0,\n                vibrance  : 0,\n                radius    : 0,\n                strength  : 0,\n                noise     : 0,\n                sepia     : 0,\n                size      : 0,\n                amount    : 0,\n            };\n            canvas\n                .draw(texture)\n                .brightnessContrast(imageFilter.brightness, imageFilter.contrast)\n                .hueSaturation(imageFilter.hue, imageFilter.saturation)\n                .vibrance(imageFilter.vibrance)\n                .denoise(imageFilter.denoise * 100)\n                .unsharpMask(imageFilter.radius * 100, imageFilter.strength)\n                .noise(imageFilter.noise)\n                .sepia(imageFilter.sepia)\n                .vignette(imageFilter.size, imageFilter.amount)\n                .update();\n\n            image.src = canvas.toDataURL('image/jpeg', 0.8);\n        }\n\n        function getImage() {\n            var defer = $q.defer();\n            var img3  = new Image();\n            img3.src  = image.src;\n\n            // Generate Image\n            image3   = document.getElementById('image3');\n            texture3 = canvas3.texture(img3);\n            canvas3.draw(texture3).update();\n            defer.resolve(canvas3.toDataURL('image/jpeg', 0.8));\n            return defer.promise;\n        }\n\n\n        return {\n            filters     : filters,\n            imageFilters: imageFilters,\n            init        : init,\n            reset       : reset,\n            apply       : apply,\n            getImage    : getImage\n        };\n\n\n    }\n\n})();\n/*\n * glfx.js\n * http://evanw.github.com/glfx.js/\n *\n * Copyright 2011 Evan Wallace\n * Released under the MIT license\n */\nvar fx=function(){function q(a,d,c){return Math.max(a,Math.min(d,c))}function w(b){return{_:b,loadContentsOf:function(b){a=this._.gl;this._.loadContentsOf(b)},destroy:function(){a=this._.gl;this._.destroy()}}}function A(a){return w(r.fromElement(a))}function B(b,d){var c=a.UNSIGNED_BYTE;if(a.getExtension(\"OES_texture_float\")&&a.getExtension(\"OES_texture_float_linear\")){var e=new r(100,100,a.RGBA,a.FLOAT);try{e.drawTo(function(){c=a.FLOAT})}catch(g){}e.destroy()}this._.texture&&this._.texture.destroy();\nthis._.spareTexture&&this._.spareTexture.destroy();this.width=b;this.height=d;this._.texture=new r(b,d,a.RGBA,c);this._.spareTexture=new r(b,d,a.RGBA,c);this._.extraTexture=this._.extraTexture||new r(0,0,a.RGBA,c);this._.flippedShader=this._.flippedShader||new h(null,\"uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,vec2(texCoord.x,1.0-texCoord.y));}\");this._.isInitialized=!0}function C(a,d,c){this._.isInitialized&&\na._.width==this.width&&a._.height==this.height||B.call(this,d?d:a._.width,c?c:a._.height);a._.use();this._.texture.drawTo(function(){h.getDefaultShader().drawRect()});return this}function D(){this._.texture.use();this._.flippedShader.drawRect();return this}function f(a,d,c,e){(c||this._.texture).use();this._.spareTexture.drawTo(function(){a.uniforms(d).drawRect()});this._.spareTexture.swapWith(e||this._.texture)}function E(a){a.parentNode.insertBefore(this,a);a.parentNode.removeChild(a);return this}\nfunction F(){var b=new r(this._.texture.width,this._.texture.height,a.RGBA,a.UNSIGNED_BYTE);this._.texture.use();b.drawTo(function(){h.getDefaultShader().drawRect()});return w(b)}function G(){var b=this._.texture.width,d=this._.texture.height,c=new Uint8Array(4*b*d);this._.texture.drawTo(function(){a.readPixels(0,0,b,d,a.RGBA,a.UNSIGNED_BYTE,c)});return c}function k(b){return function(){a=this._.gl;return b.apply(this,arguments)}}function x(a,d,c,e,g,l,n,p){var m=c-g,h=e-l,f=n-g,k=p-l;g=a-c+g-n;l=\nd-e+l-p;var q=m*k-f*h,f=(g*k-f*l)/q,m=(m*l-g*h)/q;return[c-a+f*c,e-d+f*e,f,n-a+m*n,p-d+m*p,m,a,d,1]}function y(a){var d=a[0],c=a[1],e=a[2],g=a[3],l=a[4],n=a[5],p=a[6],m=a[7];a=a[8];var f=d*l*a-d*n*m-c*g*a+c*n*p+e*g*m-e*l*p;return[(l*a-n*m)/f,(e*m-c*a)/f,(c*n-e*l)/f,(n*p-g*a)/f,(d*a-e*p)/f,(e*g-d*n)/f,(g*m-l*p)/f,(c*p-d*m)/f,(d*l-c*g)/f]}function z(a){var d=a.length;this.xa=[];this.ya=[];this.u=[];this.y2=[];a.sort(function(a,b){return a[0]-b[0]});for(var c=0;c<d;c++)this.xa.push(a[c][0]),this.ya.push(a[c][1]);\nthis.u[0]=0;this.y2[0]=0;for(c=1;c<d-1;++c){a=this.xa[c+1]-this.xa[c-1];var e=(this.xa[c]-this.xa[c-1])/a,g=e*this.y2[c-1]+2;this.y2[c]=(e-1)/g;this.u[c]=(6*((this.ya[c+1]-this.ya[c])/(this.xa[c+1]-this.xa[c])-(this.ya[c]-this.ya[c-1])/(this.xa[c]-this.xa[c-1]))/a-e*this.u[c-1])/g}this.y2[d-1]=0;for(c=d-2;0<=c;--c)this.y2[c]=this.y2[c]*this.y2[c+1]+this.u[c]}function u(a,d){return new h(null,a+\"uniform sampler2D texture;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 coord=texCoord*texSize;\"+\nd+\"gl_FragColor=texture2D(texture,coord/texSize);vec2 clampedCoord=clamp(coord,vec2(0.0),texSize);if(coord!=clampedCoord){gl_FragColor.a*=max(0.0,1.0-length(coord-clampedCoord));}}\")}function H(b,d){a.brightnessContrast=a.brightnessContrast||new h(null,\"uniform sampler2D texture;uniform float brightness;uniform float contrast;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.rgb+=brightness;if(contrast>0.0){color.rgb=(color.rgb-0.5)/(1.0-contrast)+0.5;}else{color.rgb=(color.rgb-0.5)*(1.0+contrast)+0.5;}gl_FragColor=color;}\");\nf.call(this,a.brightnessContrast,{brightness:q(-1,b,1),contrast:q(-1,d,1)});return this}function t(a){a=new z(a);for(var d=[],c=0;256>c;c++)d.push(q(0,Math.floor(256*a.interpolate(c/255)),255));return d}function I(b,d,c){b=t(b);1==arguments.length?d=c=b:(d=t(d),c=t(c));for(var e=[],g=0;256>g;g++)e.splice(e.length,0,b[g],d[g],c[g],255);this._.extraTexture.initFromBytes(256,1,e);this._.extraTexture.use(1);a.curves=a.curves||new h(null,\"uniform sampler2D texture;uniform sampler2D map;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.r=texture2D(map,vec2(color.r)).r;color.g=texture2D(map,vec2(color.g)).g;color.b=texture2D(map,vec2(color.b)).b;gl_FragColor=color;}\");\na.curves.textures({map:1});f.call(this,a.curves,{});return this}function J(b){a.denoise=a.denoise||new h(null,\"uniform sampler2D texture;uniform float exponent;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec4 center=texture2D(texture,texCoord);vec4 color=vec4(0.0);float total=0.0;for(float x=-4.0;x<=4.0;x+=1.0){for(float y=-4.0;y<=4.0;y+=1.0){vec4 sample=texture2D(texture,texCoord+vec2(x,y)/texSize);float weight=1.0-abs(dot(sample.rgb-center.rgb,vec3(0.25)));weight=pow(weight,exponent);color+=sample*weight;total+=weight;}}gl_FragColor=color/total;}\");\nfor(var d=0;2>d;d++)f.call(this,a.denoise,{exponent:Math.max(0,b),texSize:[this.width,this.height]});return this}function K(b,d){a.hueSaturation=a.hueSaturation||new h(null,\"uniform sampler2D texture;uniform float hue;uniform float saturation;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float angle=hue*3.14159265;float s=sin(angle),c=cos(angle);vec3 weights=(vec3(2.0*c,-sqrt(3.0)*s-c,sqrt(3.0)*s-c)+1.0)/3.0;float len=length(color.rgb);color.rgb=vec3(dot(color.rgb,weights.xyz),dot(color.rgb,weights.zxy),dot(color.rgb,weights.yzx));float average=(color.r+color.g+color.b)/3.0;if(saturation>0.0){color.rgb+=(average-color.rgb)*(1.0-1.0/(1.001-saturation));}else{color.rgb+=(average-color.rgb)*(-saturation);}gl_FragColor=color;}\");\nf.call(this,a.hueSaturation,{hue:q(-1,b,1),saturation:q(-1,d,1)});return this}function L(b){a.noise=a.noise||new h(null,\"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec4 color=texture2D(texture,texCoord);float diff=(rand(texCoord)-0.5)*amount;color.r+=diff;color.g+=diff;color.b+=diff;gl_FragColor=color;}\");\nf.call(this,a.noise,{amount:q(0,b,1)});return this}function M(b){a.sepia=a.sepia||new h(null,\"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float r=color.r;float g=color.g;float b=color.b;color.r=min(1.0,(r*(1.0-(0.607*amount)))+(g*(0.769*amount))+(b*(0.189*amount)));color.g=min(1.0,(r*0.349*amount)+(g*(1.0-(0.314*amount)))+(b*0.168*amount));color.b=min(1.0,(r*0.272*amount)+(g*0.534*amount)+(b*(1.0-(0.869*amount))));gl_FragColor=color;}\");\nf.call(this,a.sepia,{amount:q(0,b,1)});return this}function N(b,d){a.unsharpMask=a.unsharpMask||new h(null,\"uniform sampler2D blurredTexture;uniform sampler2D originalTexture;uniform float strength;uniform float threshold;varying vec2 texCoord;void main(){vec4 blurred=texture2D(blurredTexture,texCoord);vec4 original=texture2D(originalTexture,texCoord);gl_FragColor=mix(blurred,original,1.0+strength);}\");\nthis._.extraTexture.ensureFormat(this._.texture);this._.texture.use();this._.extraTexture.drawTo(function(){h.getDefaultShader().drawRect()});this._.extraTexture.use(1);this.triangleBlur(b);a.unsharpMask.textures({originalTexture:1});f.call(this,a.unsharpMask,{strength:d});this._.extraTexture.unuse(1);return this}function O(b){a.vibrance=a.vibrance||new h(null,\"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;float mx=max(color.r,max(color.g,color.b));float amt=(mx-average)*(-amount*3.0);color.rgb=mix(color.rgb,vec3(mx),amt);gl_FragColor=color;}\");\nf.call(this,a.vibrance,{amount:q(-1,b,1)});return this}function P(b,d){a.vignette=a.vignette||new h(null,\"uniform sampler2D texture;uniform float size;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float dist=distance(texCoord,vec2(0.5,0.5));color.rgb*=smoothstep(0.8,size*0.799,dist*(amount+size));gl_FragColor=color;}\");\nf.call(this,a.vignette,{size:q(0,b,1),amount:q(0,d,1)});return this}function Q(b,d,c){a.lensBlurPrePass=a.lensBlurPrePass||new h(null,\"uniform sampler2D texture;uniform float power;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color=pow(color,vec4(power));gl_FragColor=vec4(color);}\");var e=\"uniform sampler2D texture0;uniform sampler2D texture1;uniform vec2 delta0;uniform vec2 delta1;uniform float power;varying vec2 texCoord;\"+\ns+\"vec4 sample(vec2 delta){float offset=random(vec3(delta,151.7182),0.0);vec4 color=vec4(0.0);float total=0.0;for(float t=0.0;t<=30.0;t++){float percent=(t+offset)/30.0;color+=texture2D(texture0,texCoord+delta*percent);total+=1.0;}return color/total;}\";\na.lensBlur0=a.lensBlur0||new h(null,e+\"void main(){gl_FragColor=sample(delta0);}\");a.lensBlur1=a.lensBlur1||new h(null,e+\"void main(){gl_FragColor=(sample(delta0)+sample(delta1))*0.5;}\");a.lensBlur2=a.lensBlur2||(new h(null,e+\"void main(){vec4 color=(sample(delta0)+2.0*texture2D(texture1,texCoord))/3.0;gl_FragColor=pow(color,vec4(power));}\")).textures({texture1:1});for(var e=\n[],g=0;3>g;g++){var l=c+2*g*Math.PI/3;e.push([b*Math.sin(l)/this.width,b*Math.cos(l)/this.height])}b=Math.pow(10,q(-1,d,1));f.call(this,a.lensBlurPrePass,{power:b});this._.extraTexture.ensureFormat(this._.texture);f.call(this,a.lensBlur0,{delta0:e[0]},this._.texture,this._.extraTexture);f.call(this,a.lensBlur1,{delta0:e[1],delta1:e[2]},this._.extraTexture,this._.extraTexture);f.call(this,a.lensBlur0,{delta0:e[1]});this._.extraTexture.use(1);f.call(this,a.lensBlur2,{power:1/b,delta0:e[2]});return this}\nfunction R(b,d,c,e,g,l){a.tiltShift=a.tiltShift||new h(null,\"uniform sampler2D texture;uniform float blurRadius;uniform float gradientRadius;uniform vec2 start;uniform vec2 end;uniform vec2 delta;uniform vec2 texSize;varying vec2 texCoord;\"+s+\"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);vec2 normal=normalize(vec2(start.y-end.y,end.x-start.x));float radius=smoothstep(0.0,1.0,abs(dot(texCoord*texSize-start,normal))/gradientRadius)*blurRadius;for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta/texSize*percent*radius);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}\");\nvar n=c-b,p=e-d,m=Math.sqrt(n*n+p*p);f.call(this,a.tiltShift,{blurRadius:g,gradientRadius:l,start:[b,d],end:[c,e],delta:[n/m,p/m],texSize:[this.width,this.height]});f.call(this,a.tiltShift,{blurRadius:g,gradientRadius:l,start:[b,d],end:[c,e],delta:[-p/m,n/m],texSize:[this.width,this.height]});return this}function S(b){a.triangleBlur=a.triangleBlur||new h(null,\"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;\"+s+\"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta*percent);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}\");\nf.call(this,a.triangleBlur,{delta:[b/this.width,0]});f.call(this,a.triangleBlur,{delta:[0,b/this.height]});return this}function T(b,d,c){a.zoomBlur=a.zoomBlur||new h(null,\"uniform sampler2D texture;uniform vec2 center;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;\"+s+\"void main(){vec4 color=vec4(0.0);float total=0.0;vec2 toCenter=center-texCoord*texSize;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=0.0;t<=40.0;t++){float percent=(t+offset)/40.0;float weight=4.0*(percent-percent*percent);vec4 sample=texture2D(texture,texCoord+toCenter*percent*strength/texSize);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}\");\nf.call(this,a.zoomBlur,{center:[b,d],strength:c,texSize:[this.width,this.height]});return this}function U(b,d,c,e){a.colorHalftone=a.colorHalftone||new h(null,\"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(float angle){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);vec3 cmy=1.0-color.rgb;float k=min(cmy.x,min(cmy.y,cmy.z));cmy=(cmy-k)/(1.0-k);cmy=clamp(cmy*10.0-3.0+vec3(pattern(angle+0.26179),pattern(angle+1.30899),pattern(angle)),0.0,1.0);k=clamp(k*10.0-5.0+pattern(angle+0.78539),0.0,1.0);gl_FragColor=vec4(1.0-cmy-k,color.a);}\");\nf.call(this,a.colorHalftone,{center:[b,d],angle:c,scale:Math.PI/e,texSize:[this.width,this.height]});return this}function V(b,d,c,e){a.dotScreen=a.dotScreen||new h(null,\"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;gl_FragColor=vec4(vec3(average*10.0-5.0+pattern()),color.a);}\");\nf.call(this,a.dotScreen,{center:[b,d],angle:c,scale:Math.PI/e,texSize:[this.width,this.height]});return this}function W(b){a.edgeWork1=a.edgeWork1||new h(null,\"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;\"+s+\"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec3 sample=texture2D(texture,texCoord+delta*percent).rgb;float average=(sample.r+sample.g+sample.b)/3.0;color.x+=average*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=average*weight;total.y+=weight;}}gl_FragColor=vec4(color/total,0.0,1.0);}\");\na.edgeWork2=a.edgeWork2||new h(null,\"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;\"+s+\"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec2 sample=texture2D(texture,texCoord+delta*percent).xy;color.x+=sample.x*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=sample.y*weight;total.y+=weight;}}float c=clamp(10000.0*(color.y/total.y-color.x/total.x)+0.5,0.0,1.0);gl_FragColor=vec4(c,c,c,1.0);}\");\nf.call(this,a.edgeWork1,{delta:[b/this.width,0]});f.call(this,a.edgeWork2,{delta:[0,b/this.height]});return this}function X(b,d,c){a.hexagonalPixelate=a.hexagonalPixelate||new h(null,\"uniform sampler2D texture;uniform vec2 center;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 tex=(texCoord*texSize-center)/scale;tex.y/=0.866025404;tex.x-=tex.y*0.5;vec2 a;if(tex.x+tex.y-floor(tex.x)-floor(tex.y)<1.0)a=vec2(floor(tex.x),floor(tex.y));else a=vec2(ceil(tex.x),ceil(tex.y));vec2 b=vec2(ceil(tex.x),floor(tex.y));vec2 c=vec2(floor(tex.x),ceil(tex.y));vec3 TEX=vec3(tex.x,tex.y,1.0-tex.x-tex.y);vec3 A=vec3(a.x,a.y,1.0-a.x-a.y);vec3 B=vec3(b.x,b.y,1.0-b.x-b.y);vec3 C=vec3(c.x,c.y,1.0-c.x-c.y);float alen=length(TEX-A);float blen=length(TEX-B);float clen=length(TEX-C);vec2 choice;if(alen<blen){if(alen<clen)choice=a;else choice=c;}else{if(blen<clen)choice=b;else choice=c;}choice.x+=choice.y*0.5;choice.y*=0.866025404;choice*=scale/texSize;gl_FragColor=texture2D(texture,choice+center/texSize);}\");\nf.call(this,a.hexagonalPixelate,{center:[b,d],scale:c,texSize:[this.width,this.height]});return this}function Y(b){a.ink=a.ink||new h(null,\"uniform sampler2D texture;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 dx=vec2(1.0/texSize.x,0.0);vec2 dy=vec2(0.0,1.0/texSize.y);vec4 color=texture2D(texture,texCoord);float bigTotal=0.0;float smallTotal=0.0;vec3 bigAverage=vec3(0.0);vec3 smallAverage=vec3(0.0);for(float x=-2.0;x<=2.0;x+=1.0){for(float y=-2.0;y<=2.0;y+=1.0){vec3 sample=texture2D(texture,texCoord+dx*x+dy*y).rgb;bigAverage+=sample;bigTotal+=1.0;if(abs(x)+abs(y)<2.0){smallAverage+=sample;smallTotal+=1.0;}}}vec3 edge=max(vec3(0.0),bigAverage/bigTotal-smallAverage/smallTotal);gl_FragColor=vec4(color.rgb-dot(edge,edge)*strength*100000.0,color.a);}\");\nf.call(this,a.ink,{strength:b*b*b*b*b,texSize:[this.width,this.height]});return this}function Z(b,d,c,e){a.bulgePinch=a.bulgePinch||u(\"uniform float radius;uniform float strength;uniform vec2 center;\",\"coord-=center;float distance=length(coord);if(distance<radius){float percent=distance/radius;if(strength>0.0){coord*=mix(1.0,smoothstep(0.0,radius/distance,percent),strength*0.75);}else{coord*=mix(1.0,pow(percent,1.0+strength*0.75)*radius/distance,1.0-percent);}}coord+=center;\");\nf.call(this,a.bulgePinch,{radius:c,strength:q(-1,e,1),center:[b,d],texSize:[this.width,this.height]});return this}function $(b,d,c){a.matrixWarp=a.matrixWarp||u(\"uniform mat3 matrix;uniform bool useTextureSpace;\",\"if(useTextureSpace)coord=coord/texSize*2.0-1.0;vec3 warp=matrix*vec3(coord,1.0);coord=warp.xy/warp.z;if(useTextureSpace)coord=(coord*0.5+0.5)*texSize;\");b=Array.prototype.concat.apply([],b);if(4==b.length)b=\n[b[0],b[1],0,b[2],b[3],0,0,0,1];else if(9!=b.length)throw\"can only warp with 2x2 or 3x3 matrix\";f.call(this,a.matrixWarp,{matrix:d?y(b):b,texSize:[this.width,this.height],useTextureSpace:c|0});return this}function aa(a,d){var c=x.apply(null,d),e=x.apply(null,a),c=y(c);return this.matrixWarp([c[0]*e[0]+c[1]*e[3]+c[2]*e[6],c[0]*e[1]+c[1]*e[4]+c[2]*e[7],c[0]*e[2]+c[1]*e[5]+c[2]*e[8],c[3]*e[0]+c[4]*e[3]+c[5]*e[6],c[3]*e[1]+c[4]*e[4]+c[5]*e[7],c[3]*e[2]+c[4]*e[5]+c[5]*e[8],c[6]*e[0]+c[7]*e[3]+c[8]*e[6],\nc[6]*e[1]+c[7]*e[4]+c[8]*e[7],c[6]*e[2]+c[7]*e[5]+c[8]*e[8]])}function ba(b,d,c,e){a.swirl=a.swirl||u(\"uniform float radius;uniform float angle;uniform vec2 center;\",\"coord-=center;float distance=length(coord);if(distance<radius){float percent=(radius-distance)/radius;float theta=percent*percent*angle;float s=sin(theta);float c=cos(theta);coord=vec2(coord.x*c-coord.y*s,coord.x*s+coord.y*c);}coord+=center;\");\nf.call(this,a.swirl,{radius:c,center:[b,d],angle:e,texSize:[this.width,this.height]});return this}var v={};(function(){function a(b){if(!b.getExtension(\"OES_texture_float\"))return!1;var c=b.createFramebuffer(),e=b.createTexture();b.bindTexture(b.TEXTURE_2D,e);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);\nb.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null);b.bindFramebuffer(b.FRAMEBUFFER,c);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,e,0);c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texImage2D(b.TEXTURE_2D,\n0,b.RGBA,2,2,0,b.RGBA,b.FLOAT,new Float32Array([2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]));var e=b.createProgram(),d=b.createShader(b.VERTEX_SHADER),g=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,\"attribute vec2 vertex;void main(){gl_Position=vec4(vertex,0.0,1.0);}\");b.shaderSource(g,\"uniform sampler2D texture;void main(){gl_FragColor=texture2D(texture,vec2(0.5));}\");b.compileShader(d);b.compileShader(g);b.attachShader(e,d);b.attachShader(e,\ng);b.linkProgram(e);d=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,d);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0]),b.STREAM_DRAW);b.enableVertexAttribArray(0);b.vertexAttribPointer(0,2,b.FLOAT,!1,0,0);d=new Uint8Array(4);b.useProgram(e);b.viewport(0,0,1,1);b.bindTexture(b.TEXTURE_2D,c);b.drawArrays(b.POINTS,0,1);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,d);return 127===d[0]||128===d[0]}function d(){}function c(a){\"OES_texture_float_linear\"===a?(void 0===this.$OES_texture_float_linear$&&Object.defineProperty(this,\n\"$OES_texture_float_linear$\",{enumerable:!1,configurable:!1,writable:!1,value:new d}),a=this.$OES_texture_float_linear$):a=n.call(this,a);return a}function e(){var a=f.call(this);-1===a.indexOf(\"OES_texture_float_linear\")&&a.push(\"OES_texture_float_linear\");return a}try{var g=document.createElement(\"canvas\").getContext(\"experimental-webgl\")}catch(l){}if(g&&-1===g.getSupportedExtensions().indexOf(\"OES_texture_float_linear\")&&a(g)){var n=WebGLRenderingContext.prototype.getExtension,f=WebGLRenderingContext.prototype.getSupportedExtensions;\nWebGLRenderingContext.prototype.getExtension=c;WebGLRenderingContext.prototype.getSupportedExtensions=e}})();var a;v.canvas=function(){var b=document.createElement(\"canvas\");try{a=b.getContext(\"experimental-webgl\",{premultipliedAlpha:!1})}catch(d){a=null}if(!a)throw\"This browser does not support WebGL\";b._={gl:a,isInitialized:!1,texture:null,spareTexture:null,flippedShader:null};b.texture=k(A);b.draw=k(C);b.update=k(D);b.replace=k(E);b.contents=k(F);b.getPixelArray=k(G);b.brightnessContrast=k(H);\nb.hexagonalPixelate=k(X);b.hueSaturation=k(K);b.colorHalftone=k(U);b.triangleBlur=k(S);b.unsharpMask=k(N);b.perspective=k(aa);b.matrixWarp=k($);b.bulgePinch=k(Z);b.tiltShift=k(R);b.dotScreen=k(V);b.edgeWork=k(W);b.lensBlur=k(Q);b.zoomBlur=k(T);b.noise=k(L);b.denoise=k(J);b.curves=k(I);b.swirl=k(ba);b.ink=k(Y);b.vignette=k(P);b.vibrance=k(O);b.sepia=k(M);return b};v.splineInterpolate=t;var h=function(){function b(b,c){var e=a.createShader(b);a.shaderSource(e,c);a.compileShader(e);if(!a.getShaderParameter(e,\na.COMPILE_STATUS))throw\"compile error: \"+a.getShaderInfoLog(e);return e}function d(d,l){this.texCoordAttribute=this.vertexAttribute=null;this.program=a.createProgram();d=d||c;l=l||e;l=\"precision highp float;\"+l;a.attachShader(this.program,b(a.VERTEX_SHADER,d));a.attachShader(this.program,b(a.FRAGMENT_SHADER,l));a.linkProgram(this.program);if(!a.getProgramParameter(this.program,a.LINK_STATUS))throw\"link error: \"+a.getProgramInfoLog(this.program);}var c=\"attribute vec2 vertex;attribute vec2 _texCoord;varying vec2 texCoord;void main(){texCoord=_texCoord;gl_Position=vec4(vertex*2.0-1.0,0.0,1.0);}\",\ne=\"uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,texCoord);}\";d.prototype.destroy=function(){a.deleteProgram(this.program);this.program=null};d.prototype.uniforms=function(b){a.useProgram(this.program);for(var e in b)if(b.hasOwnProperty(e)){var c=a.getUniformLocation(this.program,e);if(null!==c){var d=b[e];if(\"[object Array]\"==Object.prototype.toString.call(d))switch(d.length){case 1:a.uniform1fv(c,new Float32Array(d));break;\ncase 2:a.uniform2fv(c,new Float32Array(d));break;case 3:a.uniform3fv(c,new Float32Array(d));break;case 4:a.uniform4fv(c,new Float32Array(d));break;case 9:a.uniformMatrix3fv(c,!1,new Float32Array(d));break;case 16:a.uniformMatrix4fv(c,!1,new Float32Array(d));break;default:throw\"dont't know how to load uniform \\\"\"+e+'\" of length '+d.length;}else if(\"[object Number]\"==Object.prototype.toString.call(d))a.uniform1f(c,d);else throw'attempted to set uniform \"'+e+'\" to invalid value '+(d||\"undefined\").toString();\n}}return this};d.prototype.textures=function(b){a.useProgram(this.program);for(var c in b)b.hasOwnProperty(c)&&a.uniform1i(a.getUniformLocation(this.program,c),b[c]);return this};d.prototype.drawRect=function(b,c,e,d){var f=a.getParameter(a.VIEWPORT);c=void 0!==c?(c-f[1])/f[3]:0;b=void 0!==b?(b-f[0])/f[2]:0;e=void 0!==e?(e-f[0])/f[2]:1;d=void 0!==d?(d-f[1])/f[3]:1;null==a.vertexBuffer&&(a.vertexBuffer=a.createBuffer());a.bindBuffer(a.ARRAY_BUFFER,a.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,new Float32Array([b,\nc,b,d,e,c,e,d]),a.STATIC_DRAW);null==a.texCoordBuffer&&(a.texCoordBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,a.texCoordBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),a.STATIC_DRAW));null==this.vertexAttribute&&(this.vertexAttribute=a.getAttribLocation(this.program,\"vertex\"),a.enableVertexAttribArray(this.vertexAttribute));null==this.texCoordAttribute&&(this.texCoordAttribute=a.getAttribLocation(this.program,\"_texCoord\"),a.enableVertexAttribArray(this.texCoordAttribute));\na.useProgram(this.program);a.bindBuffer(a.ARRAY_BUFFER,a.vertexBuffer);a.vertexAttribPointer(this.vertexAttribute,2,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,a.texCoordBuffer);a.vertexAttribPointer(this.texCoordAttribute,2,a.FLOAT,!1,0,0);a.drawArrays(a.TRIANGLE_STRIP,0,4)};d.getDefaultShader=function(){a.defaultShader=a.defaultShader||new d;return a.defaultShader};return d}();z.prototype.interpolate=function(a){for(var d=0,c=this.ya.length-1;1<c-d;){var e=c+d>>1;this.xa[e]>a?c=e:d=e}var e=this.xa[c]-\nthis.xa[d],g=(this.xa[c]-a)/e;a=(a-this.xa[d])/e;return g*this.ya[d]+a*this.ya[c]+((g*g*g-g)*this.y2[d]+(a*a*a-a)*this.y2[c])*e*e/6};var r=function(){function b(b,c,d,f){this.gl=a;this.id=a.createTexture();this.width=b;this.height=c;this.format=d;this.type=f;a.bindTexture(a.TEXTURE_2D,this.id);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,\na.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);b&&c&&a.texImage2D(a.TEXTURE_2D,0,this.format,b,c,0,this.format,this.type,null)}function d(a){null==c&&(c=document.createElement(\"canvas\"));c.width=a.width;c.height=a.height;a=c.getContext(\"2d\");a.clearRect(0,0,c.width,c.height);return a}b.fromElement=function(c){var d=new b(0,0,a.RGBA,a.UNSIGNED_BYTE);d.loadContentsOf(c);return d};b.prototype.loadContentsOf=function(b){this.width=b.width||b.videoWidth;this.height=b.height||b.videoHeight;a.bindTexture(a.TEXTURE_2D,\nthis.id);a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,this.type,b)};b.prototype.initFromBytes=function(b,c,d){this.width=b;this.height=c;this.format=a.RGBA;this.type=a.UNSIGNED_BYTE;a.bindTexture(a.TEXTURE_2D,this.id);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,this.type,new Uint8Array(d))};b.prototype.destroy=function(){a.deleteTexture(this.id);this.id=null};b.prototype.use=function(b){a.activeTexture(a.TEXTURE0+(b||0));a.bindTexture(a.TEXTURE_2D,this.id)};b.prototype.unuse=function(b){a.activeTexture(a.TEXTURE0+\n(b||0));a.bindTexture(a.TEXTURE_2D,null)};b.prototype.ensureFormat=function(b,c,d,f){if(1==arguments.length){var h=arguments[0];b=h.width;c=h.height;d=h.format;f=h.type}if(b!=this.width||c!=this.height||d!=this.format||f!=this.type)this.width=b,this.height=c,this.format=d,this.type=f,a.bindTexture(a.TEXTURE_2D,this.id),a.texImage2D(a.TEXTURE_2D,0,this.format,b,c,0,this.format,this.type,null)};b.prototype.drawTo=function(b){a.framebuffer=a.framebuffer||a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,\na.framebuffer);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.id,0);if(a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE)throw Error(\"incomplete framebuffer\");a.viewport(0,0,this.width,this.height);b();a.bindFramebuffer(a.FRAMEBUFFER,null)};var c=null;b.prototype.fillUsingCanvas=function(b){b(d(this));this.format=a.RGBA;this.type=a.UNSIGNED_BYTE;a.bindTexture(a.TEXTURE_2D,this.id);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,c);return this};\nb.prototype.toImage=function(b){this.use();h.getDefaultShader().drawRect();var f=4*this.width*this.height,k=new Uint8Array(f),n=d(this),p=n.createImageData(this.width,this.height);a.readPixels(0,0,this.width,this.height,a.RGBA,a.UNSIGNED_BYTE,k);for(var m=0;m<f;m++)p.data[m]=k[m];n.putImageData(p,0,0);b.src=c.toDataURL()};b.prototype.swapWith=function(a){var b;b=a.id;a.id=this.id;this.id=b;b=a.width;a.width=this.width;this.width=b;b=a.height;a.height=this.height;this.height=b;b=a.format;a.format=\nthis.format;this.format=b};return b}(),s=\"float random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\";return v}();\n\n(function () {\n    'use strict';\n    /**\n     * jr-crop - A simple ionic plugin to crop your images.\n     * @version 1.0.0\n     * @link https://github.com/JrSchild/jr-crop\n     * @author Joram Ruitenschild\n     * @license MIT\n     */\n    angular.module('jrCrop', [])\n           .factory('$jrCrop', function ($ionicModal, $rootScope, $q) {\n\n               var template = '<div class=\"jr-crop modal\">' +\n                   '<div class=\"jr-crop-center-container\">' +\n                   '<div class=\"jr-crop-img\" ng-style=\"{width: width + \\'px\\', height: height + \\'px\\'}\"></div>' +\n                   '</div>' +\n                   '<div class=\"jr-crop-center-container\">' +\n                   '<div class=\"jr-crop-select\" style=\"overflow: hidden\" ng-style=\"{width: width + \\'px\\', height: height + \\'px\\'}\"></div>' +\n                   '</div>' +\n                   '<div class=\"bar bar-footer bar-dark jr-crop-footer\">' +\n                   '<button class=\"button button-clear\" ng-click=\"cancel()\">{{cancelText}}</button>' +\n                   '<div class=\"title\">{{title}}</div>' +\n                   '<button class=\"button button-clear\" ng-click=\"crop()\">{{chooseText}}</button>' +\n                   '</div>' +\n                   '</div>';\n\n               var jrCropController = ionic.views.View.inherit({\n\n                   promise  : null,\n                   imgWidth : null,\n                   imgHeight: null,\n\n                   // Elements that hold the cropped version and the full\n                   // overlaying image.\n                   imgSelect: null,\n                   imgFull  : null,\n\n                   // Values exposed by scaling and moving. Needed\n                   // to calculate the result of cropped image\n                   posX  : 0,\n                   posY  : 0,\n                   scale : 1,\n                   rotate: 0,\n\n                   last_scale : 1,\n                   last_posX  : 0,\n                   last_posY  : 0,\n                   last_rotate: 0,\n\n                   initialize: function (options) {\n                       var self = this;\n\n                       self.options = options;\n                       self.promise = $q.defer();\n                       self.loadImage().then(function (elem) {\n                           self.imgWidth  = elem.naturalWidth;\n                           self.imgHeight = elem.naturalHeight;\n\n                           self.options.modal.el.querySelector('.jr-crop-img')\n                               .appendChild(self.imgSelect = elem.cloneNode());\n                           self.options.modal.el.querySelector('.jr-crop-select')\n                               .appendChild(self.imgFull = elem.cloneNode());\n\n                           self.bindHandlers();\n                           self.initImage();\n                       });\n\n                       // options === scope. Expose actions for modal.\n                       self.options.cancel = this.cancel.bind(this);\n                       self.options.crop   = this.crop.bind(this);\n                   },\n\n                   /**\n                    * Init the image in a center position\n                    */\n                   initImage: function () {\n                       if (this.options.height < this.imgHeight || this.options.width < this.imgWidth) {\n                           var imgAspectRatio    = this.imgWidth / this.imgHeight;\n                           var selectAspectRatio = this.options.width / this.options.height;\n\n                           if (selectAspectRatio > imgAspectRatio) {\n                               this.scale = this.last_scale = this.options.width / this.imgWidth;\n                           } else {\n                               this.scale = this.last_scale = this.options.height / this.imgHeight;\n                           }\n                       }\n\n                       var centerX = (this.imgWidth - this.options.width) / 2;\n                       var centerY = (this.imgHeight - this.options.height) / 2;\n\n                       this.posX = this.last_posX = -centerX;\n                       this.posY = this.last_posY = -centerY;\n\n                       this.setImageTransform();\n                   },\n\n                   cancel: function () {\n                       var self = this;\n\n                       self.options.modal.remove().then(function () {\n                           self.promise.reject('canceled');\n                       });\n                   },\n\n                   /**\n                    * This is where the magic happens\n                    */\n                   bindHandlers: function () {\n                       var self                                             = this,\n\n                           min_pos_x                                        = 0, min_pos_y = 0,\n                           max_pos_x                                        = 0, max_pos_y = 0,\n                           transforming_correctX = 0, transforming_correctY = 0,\n\n                           scaleMax                                         = 1, scaleMin,\n                           image_ratio                                      = self.imgWidth / self.imgHeight,\n                           cropper_ratio                                    = self.options.width / self.options.height;\n\n                       if (cropper_ratio < image_ratio) {\n                           scaleMin = self.options.height / self.imgHeight;\n                       } else {\n                           scaleMin = self.options.width / self.imgWidth;\n                       }\n\n                       function setPosWithinBoundaries() {\n                           calcMaxPos();\n                           if (self.posX > min_pos_x) {\n                               self.posX = min_pos_x;\n                           }\n                           if (self.posX < max_pos_x) {\n                               self.posX = max_pos_x;\n                           }\n                           if (self.posY > min_pos_y) {\n                               self.posY = min_pos_y;\n                           }\n                           if (self.posY < max_pos_y) {\n                               self.posY = max_pos_y;\n                           }\n                       }\n\n                       /**\n                        * Calculate the minimum and maximum positions.\n                        * This took some headaches to write, good luck\n                        * figuring this out.\n                        */\n                       function calcMaxPos() {\n                           // Calculate current proportions of the image.\n                           var currWidth  = self.scale * self.imgWidth;\n                           var currHeight = self.scale * self.imgHeight;\n\n                           // Images are scaled from the center\n                           min_pos_x = (currWidth - self.imgWidth) / 2;\n                           min_pos_y = (currHeight - self.imgHeight) / 2;\n                           max_pos_x = -(currWidth - min_pos_x - self.options.width);\n                           max_pos_y = -(currHeight - min_pos_y - self.options.height);\n                       }\n\n                       // Based on: http://stackoverflow.com/questions/18011099/pinch-to-zoom-using-hammer-js\n                       var options = {\n                           prevent_default_directions: ['left', 'right', 'up', 'down']\n                       };\n                       ionic.onGesture('touch transform drag dragstart dragend rotate', function (e) {\n                           switch (e.type) {\n                               case 'touch':\n                                   self.last_scale = self.scale;\n                                   break;\n                               case 'drag':\n                                   self.posX = self.last_posX + e.gesture.deltaX - transforming_correctX;\n                                   self.posY = self.last_posY + e.gesture.deltaY - transforming_correctY;\n                                   setPosWithinBoundaries();\n                                   break;\n                               case 'transform':\n                                   self.scale = Math.max(scaleMin, Math.min(self.last_scale * e.gesture.scale, scaleMax));\n                                   setPosWithinBoundaries();\n                                   break;\n                               case 'dragend':\n                                   self.last_posX = self.posX;\n                                   self.last_posY = self.posY;\n                                   break;\n                               case 'dragstart':\n                                   self.last_scale = self.scale;\n\n                                   // After scaling, hammerjs needs time to reset the deltaX and deltaY values,\n                                   // when the user drags the image before this is done the image will jump.\n                                   // This is an attempt to fix that.\n                                   if (e.gesture.deltaX > 1 || e.gesture.deltaX < -1) {\n                                       transforming_correctX = e.gesture.deltaX;\n                                       transforming_correctY = e.gesture.deltaY;\n                                   } else {\n                                       transforming_correctX = 0;\n                                       transforming_correctY = 0;\n                                   }\n                                   break;\n                               case 'rotate':\n                                   self.rotate = self.last_rotate + e.gesture.rotation;\n                                   break;\n                           }\n\n                           self.setImageTransform();\n\n                       }, self.options.modal.el, options);\n                   },\n\n                   setImageTransform: function () {\n                       var self = this;\n\n                       var transform =\n                               'translate3d(' + self.posX + 'px,' + self.posY + 'px, 0) ' +\n                               'scale3d(' + self.scale + ',' + self.scale + ', 1)' +\n                               'rotate(' + self.rotate + 'deg)';\n\n                       self.imgSelect.style[ionic.CSS.TRANSFORM] = transform;\n                       self.imgFull.style[ionic.CSS.TRANSFORM]   = transform;\n                   },\n\n                   /**\n                    * Calculate the new image from the values calculated by\n                    * user input. Return a canvas-object with the image on it.\n                    *\n                    * Note: It doesn't actually downsize the image, it only returns\n                    * a cropped version. Since there's inconsistenties in image-quality\n                    * when downsizing it's up to the developer to implement this. Preferably\n                    * on the server.\n                    */\n                   crop: function () {\n                       var canvas  = document.createElement('canvas');\n                       var context = canvas.getContext('2d');\n\n                       // Canvas size is original proportions but scaled down.\n                       canvas.width  = this.options.width / this.scale;\n                       canvas.height = this.options.height / this.scale;\n\n                       // The full proportions\n                       var currWidth  = this.imgWidth * this.scale;\n                       var currHeight = this.imgHeight * this.scale;\n\n                       // Because the top/left position doesn't take the scale of the image in\n                       // we need to correct this value.\n                       var correctX = (currWidth - this.imgWidth) / 2;\n                       var correctY = (currHeight - this.imgHeight) / 2;\n\n                       var sourceX = (this.posX - correctX) / this.scale;\n                       var sourceY = (this.posY - correctY) / this.scale;\n\n                       //see http://creativejs.com/2012/01/day-10-drawing-rotated-images-into-canvas/\n                       //move the origin\n                       context.translate(sourceX, sourceY);\n                       //move to center and rotate\n                       context.translate(this.imgWidth / 2, this.imgHeight / 2);\n                       context.rotate(this.rotate * Math.PI / 180);\n\n                       context.drawImage(this.imgFull, this.imgWidth / 2 * -1, this.imgHeight / 2 * -1);\n\n                       this.options.modal.remove();\n                       this.promise.resolve(canvas);\n                   },\n\n                   /**\n                    * Load the image and return the element.\n                    * Return Promise that will fail when unable to load image.\n                    */\n                   loadImage: function () {\n                       var promise = $q.defer();\n\n                       // Load the image and resolve with the DOM node when done.\n                       angular.element('<img />')\n                              .bind('load', function (e) {\n                                  promise.resolve(this);\n                              })\n                              .bind('error', promise.reject)\n                              .prop('src', this.options.url);\n\n                       // Return the promise\n                       return promise.promise;\n                   }\n               });\n\n               return {\n                   defaultOptions: {\n                       width      : 0,\n                       height     : 0,\n                       aspectRatio: 0,\n                       cancelText : 'Cancel',\n                       chooseText : 'Choose'\n                   },\n\n                   crop: function (options) {\n                       options = this.initOptions(options);\n\n                       var scope = $rootScope.$new(true);\n\n                       ionic.extend(scope, options);\n\n                       scope.modal = $ionicModal.fromTemplate(template, {\n                           scope: scope\n                       });\n\n                       // Show modal and initialize cropper.\n                       return scope.modal.show().then(function () {\n                           return (new jrCropController(scope)).promise.promise;\n                       });\n                   },\n\n                   initOptions: function (_options) {\n                       var options;\n\n                       // Apply default values to options.\n                       options = ionic.extend({}, this.defaultOptions);\n                       options = ionic.extend(options, _options);\n\n                       if (options.aspectRatio) {\n\n                           if (!options.width && options.height) {\n                               options.width = 200;\n                           }\n\n                           if (options.width) {\n                               options.height = options.width / options.aspectRatio;\n                           } else if (options.height) {\n                               options.width = options.height * options.aspectRatio;\n                           }\n                       }\n\n                       return options;\n                   }\n               };\n           });\n})();\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').factory('PhotoService', PhotoServiceFactory);\n\n    function PhotoServiceFactory($ionicActionSheet, $cordovaCapture, User, $cordovaCamera, $timeout, PhotoFilter, $translate, AppConfig, Share, $cordovaActionSheet, $jrCrop, $rootScope, $ionicModal, ActionSheet, $q) {\n\n        var deviceInformation = ionic.Platform.device();\n        var isIOS             = ionic.Platform.isIOS();\n\n        console.log('isIOS', isIOS);\n\n        // Default Setting\n        var tempImage;\n        var cordova = window.cordova;\n        var setting = {\n            jrCrop            : true,\n            filterImage       : true,\n            quality           : 90,\n            allowEdit         : false,\n            filter            : true,\n            correctOrientation: true,\n            targetWidth       : 320,\n            targetHeight      : 320,\n            saveToPhotoAlbum  : false,\n            allowRotation     : false,\n            aspectRatio       : 0\n        };\n\n\n        return {\n            open     : openModal,\n            crop     : cropModal,\n            filter   : filterModal,\n            modalPost: modalPost,\n        };\n\n        function filterModal(image) {\n            var defer = $q.defer();\n\n            if (setting.filterImage) {\n                openFilter(image);\n            } else {\n                defer.resolve(image);\n            }\n\n            function openFilter(image64) {\n                var scope  = $rootScope.$new(true);\n                tempImage  = image64;\n                scope.form = {\n                    photo: image64\n                };\n\n                scope.theme = $rootScope.theme;\n                $ionicModal.fromTemplateUrl('app/component/ion-photo/view/filter.modal.html', {\n                    scope          : scope,\n                    focusFirstInput: true\n                }).then(function (modal) {\n                    scope.modalFilter = modal;\n                    scope.modalFilter.show();\n                    scope.loading = true;\n                    $timeout(function () {\n                        PhotoFilter.init('image', image64).then(function () {\n                            scope.loading = false;\n                        });\n                    }, 500)\n                });\n\n                scope.actionShowFilter = function (option) {\n                    scope.showFilter = option;\n                };\n\n                scope.closeModalFilter = function () {\n                    scope.modalFilter.hide();\n                };\n\n                scope.cropImage = function () {\n                    scope.modalFilter.remove();\n                    cropModal(tempImage)\n                        .then(openFilter);\n                };\n\n                // Filter\n                scope.filters      = PhotoFilter.filters.Adjust;\n                scope.imageFilters = PhotoFilter.imageFilters;\n                scope.reset        = PhotoFilter.reset;\n\n                scope.applyFilter = function (filter) {\n                    PhotoFilter.apply(filter.filter);\n                };\n\n                scope.filterEdit = false;\n                scope.showFilter = true;\n\n                scope.selectFilter = function (filter) {\n                    console.log('filter', filter);\n                    scope.filter     = filter;\n                    scope.filterEdit = true;\n                };\n\n                scope.doneFilter = function () {\n                    scope.filterEdit = false;\n                };\n\n                scope.cancelFilter = function (filter) {\n                    filter.slider.value = 0;\n                    filter.setSlider(filter.slider);\n                    scope.filterEdit = false;\n                };\n\n                scope.$watch('scope.filterSelected', function (item) {\n                    if (item) {\n                        var filter    = _.find(scope.filters, {func: item});\n                        scope.filter  = filter;\n                        scope.sliders = filter.sliders;\n                        console.log(filter);\n                    }\n                });\n\n                scope.$watch('filter.slider.value', function (value) {\n                    if (value) {\n                        scope.filter.slider.value = parseInt(value);\n                        scope.filter.setSlider(scope.filter.slider);\n                    }\n                });\n\n                scope.closeFilter = function () {\n                    defer.reject();\n                    scope.modalFilter.hide();\n                };\n\n                scope.submitFilter = function () {\n                    var dataUrl = PhotoFilter.getImage();\n                    scope.modalFilter.remove();\n                    defer.resolve(dataUrl);\n                };\n\n\n                // Cleanup the modal when we're done with it!\n                scope.$on('$destroy', function () {\n                    scope.modal.remove();\n                });\n            }\n\n            return defer.promise;\n        }\n\n        function openModal(setOptions) {\n            var defer = $q.defer();\n            console.log(deviceInformation);\n\n            // Change Settings\n            if (setOptions) {\n                Object.keys(setOptions).map(function (key, index) {\n                    setting[key] = setOptions[key];\n                });\n\n                console.log(setting);\n            }\n\n            var options     = {\n                quality           : setting.quality,\n                aspectRatio       : setting.aspectRatio,\n                allowRotation     : setting.allowRotation,\n                allowEdit         : setting.allowEdit,\n                correctOrientation: setting.correctOrientation,\n                targetWidth       : setting.targetWidth,\n                targetHeight      : setting.targetHeight,\n                saveToPhotoAlbum  : setting.saveToPhotoAlbum,\n                destinationType   : window.cordova ? Camera.DestinationType.DATA_URL : null,\n                encodingType      : window.cordova ? Camera.EncodingType.JPEG : null,\n                popoverOptions    : window.cordova ? CameraPopoverOptions : null,\n            };\n            var buttons     = [\n                {\n                    text: '<i class=\"icon ion-images\"></i>' + $translate.instant('capturePhoto')\n                },\n                {\n                    text: '<i class=\"icon ion-ios-camera\"></i>' + $translate.instant('captureLibrary')\n                }\n            ];\n            var actionSheet = $ionicActionSheet.show({\n                buttons      : buttons,\n                titleText    : $translate.instant('submit'),\n                cancelText   : $translate.instant('cancel'),\n                cancel       : buttonCancel,\n                buttonClicked: buttonClicked\n            });\n\n            function buttonClicked(index) {\n                console.log(index);\n                actionSheet();\n                capture(index, options)\n                    .then(cropModal)\n                    .then(filterModal)\n                    .then(defer.resolve)\n                    .catch(buttonCancel);\n            }\n\n\n            function buttonCancel(resp) {\n                actionSheet(resp);\n            }\n\n            return defer.promise;\n        }\n\n        function cropModal(image) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                image = 'data:image/jpeg;base64,' + image;\n            }\n\n            if (setting.jrCrop) {\n                $jrCrop.crop({\n                    url          : image,\n                    aspectRatio  : 1,\n                    allowRotation: setting.allowRotation,\n                    width        : setting.targetWidth,\n                    height       : setting.targetHeight,\n                    cancelText   : $translate.instant('cancel'),\n                    chooseText   : $translate.instant('submit')\n                }).then(function (canvas) {\n                    defer.resolve(canvas.toDataURL());\n                }).catch(defer.reject);\n            } else {\n                defer.resolve(image);\n            }\n\n            return defer.promise;\n        }\n\n        function show(params) {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                var options = {\n                    title                    : params.title,\n                    buttonLabels             : _.map(params.options, function (item) {return item.text}),\n                    addCancelButtonWithLabel : params.cancelText,\n                    androidEnableCancelButton: true,\n                    androidTheme             : window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT\n                };\n\n                $cordovaActionSheet.show(options).then(function (btnIndex) {\n                    if (btnIndex !== 3) {\n                        defer.resolve(btnIndex);\n                    }\n                    defer.reject('cancel');\n                });\n\n            } else {\n                var actionSheet = $ionicActionSheet.show({\n                    buttons      : params.options,\n                    titleText    : params.title,\n                    cancelText   : params.cancelText,\n                    cancel       : function () {\n                        actionSheet();\n                    },\n                    buttonClicked: function (btnIndex) {\n                        actionSheet();\n                        if (btnIndex !== 3) {\n                            defer.resolve(btnIndex);\n                        }\n                        defer.reject('cancel');\n                    }\n                });\n\n            }\n            return defer.promise;\n        }\n\n        function capture(type, options) {\n            var defer = $q.defer();\n\n            // CAMERA\n            if (type === 0) {\n                getPicture(0);\n            }\n\n            // GALLERY\n            if (type === 1) {\n                getPicture(1);\n            }\n\n            // Video\n            if (type === 2) {\n                getVideo();\n            }\n\n            function getPicture(method) {\n                if (method === 0 && cordova) options.sourceType = Camera.PictureSourceType.CAMERA;\n                if (method === 1 && cordova) options.sourceType = Camera.PictureSourceType.PHOTOLIBRARY;\n\n                if (cordova) {\n                    $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n                } else {\n                    var fileInput = angular.element('<input type=\"file\" accept=\"image/x-png, image/gif, image/jpeg\" max-size=\"2048\" />');\n                    fileInput[0].click();\n                    fileInput.on('change', function (evt) {\n                        tempImage     = evt.currentTarget.files[0];\n                        var reader    = new FileReader();\n                        reader.onload = function (evt) {\n                            defer.resolve(evt.target.result);\n                        };\n                        reader.readAsDataURL(tempImage);\n                    });\n                }\n            }\n\n            function getVideo() {\n                $cordovaCapture.captureVideo({\n                    limit   : 1,\n                    duration: 5\n                }).then(function (mediaFiles) {\n                    tempImage = mediaFiles[0].fullPath;\n                    defer.resolve(tempImage);\n                }, defer.reject);\n            }\n\n            return defer.promise;\n        }\n\n        function modalPost(image) {\n            var defer  = $q.defer();\n            var $scope = $rootScope.$new();\n\n            $scope.image = image;\n            $scope.form  = {\n                title: ''\n            };\n\n            $scope.editFilter = function () {\n                PhotoFilter.load(tempImage).then(function (image) {\n                    $scope.image = image;\n                });\n            };\n\n            //Mentios\n            // shows the use of dynamic values in mentio-id and mentio-for to link elements\n            $scope.searchPeople = function (term) {\n                var peopleList = [];\n                return User.getFollowing().then(function (response) {\n                    _.each(response, function (item) {\n                        item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                        item.bio      = item.status;\n                        if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                            peopleList.push(item);\n                        }\n                    });\n                    $scope.people = peopleList;\n                    //console.log(peopleList);\n                    return $q.when(peopleList);\n                });\n            };\n\n            $scope.getPeopleTextRaw = function (item) {\n                return '@' + item.username;\n            };\n\n            $scope.theme = $rootScope.theme;\n\n            $ionicModal.fromTemplateUrl('app/main/share/share-modal.html', {\n                scope          : $scope,\n                focusFirstInput: true\n            }).then(function (modal) {\n                $scope.modalFilter = modal;\n                $scope.modalFilter.show();\n            });\n\n\n            $scope.form.address = {};\n            $scope.closeAddress = function () {\n                $scope.form.address = {};\n            };\n\n            $scope.close = function () {\n                $scope.modalFilter.hide();\n            };\n\n            // Cleanup the modal when we're done with it!\n            $scope.$on('$destroy', function () {\n                $scope.modal.remove();\n            });\n\n            $scope.submit = function (rForm, form) {\n                if (rForm.$valid) {\n                    var form   = angular.copy($scope.form);\n                    form.image = $scope.image;\n                    tempImage  = '';\n                    $scope.close();\n                    defer.resolve(form);\n                } else {\n                    console.log('Error', rForm);\n                }\n            };\n\n            return defer.promise;\n        }\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').factory('Video', VideoFactory);\n\n    function VideoFactory($window, $q) {\n        var deferred = $q.defer();\n        //https://devdactic.com/capture-and-store-videos-ionic/\n        // Resolve the URL to the local file\n        // Start the copy process\n        function createFileEntry(fileURI) {\n            $window.resolveLocalFileSystemURL(fileURI, function (entry) {\n                return copyFile(entry);\n            }, fail);\n        }\n\n        // Create a unique name for the videofile\n        // Copy the recorded video to the app dir\n        function copyFile(fileEntry) {\n            var name    = fileEntry.fullPath.substr(fileEntry.fullPath.lastIndexOf('/') + 1);\n            var newName = makeid() + name;\n\n            $window.resolveLocalFileSystemURL(cordova.file.dataDirectory, function (fileSystem2) {\n                    fileEntry.copyTo(fileSystem2, newName, function (succ) {\n                        return onCopySuccess(succ);\n                    }, fail);\n                },\n                fail\n            );\n        }\n\n        // Called on successful copy process\n        // Creates a thumbnail from the movie\n        // The name is the moviename but with .png instead of .mov\n        function onCopySuccess(entry) {\n            var name = entry.nativeURL.slice(0, -4);\n            $window.PKVideoThumbnail.createThumbnail(entry.nativeURL, name + '.png', function (prevSucc) {\n                return prevImageSuccess(prevSucc);\n            }, fail);\n        }\n\n        // Called on thumbnail creation success\n        // Generates the currect URL to the local moviefile\n        // Finally resolves the promies and returns the name\n        function prevImageSuccess(succ) {\n            var correctUrl = succ.slice(0, -4);\n            correctUrl += '.MOV';\n            deferred.resolve(correctUrl);\n        }\n\n        // Called when anything fails\n        // Rejects the promise with an Error\n        function fail(error) {\n            console.log('FAIL: ' + error.code);\n            deferred.reject('ERROR');\n        }\n\n        // Function to make a unique filename\n        function makeid() {\n            var text     = '';\n            var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n            for (var i = 0; i < 5; i++) {\n                text += possible.charAt(Math.floor(Math.random() * possible.length));\n            }\n            return text;\n        }\n\n        // The object and functions returned from the Service\n        return {\n            // This is the initial function we call from our controller\n            // Gets the videoData and calls the first service function\n            // with the local URL of the video and returns the promise\n            saveVideo: function (data) {\n                createFileEntry(data[0].localURL);\n                return promise;\n            }\n        };\n    }\n\n})();\n\n;(function() {\n\"use strict\";\n\nangular.module(\"ionic\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/directive/SigninModalDirective.html\",\"<ion-modal-view id=\\\"user-layout\\\" class=\\\"modal-auth bg-animate\\\" cache-view=\\\"false\\\"><ion-header-bar><h1 class=\\\"title\\\" \\ntranslate=\\\"signin\\\"></h1><a ng-click=\\\"closeModal()\\\" class=\\\"button button-icon icon ion-ios-close-empty\\\"></a>\\n</ion-header-bar><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step2\\\"><form name=\\\"myForm\\\" \\nnovalidate=\\\"novalidate\\\" ng-submit=\\\"submitLogin(myForm, form)\\\"><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-user placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"username\\\" \\nng-model=\\\"form.username\\\" ng-minlength=\\\"4\\\" ng-maxlength=\\\"12\\\" ng-model-options=\\\"{debounce: 1000}\\\" \\nng-pattern=\\\"/^[a-zA-Z\\'. -]+$/\\\" placeholder=\\\"{{\\'yourLogin\\' | translate}}\\\"></label><div ng-if=\\\"myForm.username.$dirty\\\">\\n<div ng-messages=\\\"myForm.email.$error\\\" class=\\\"validation-error\\\"><div ng-message=\\\"required\\\" \\ntranslate=\\\"usernameRequired\\\"></div><div ng-message=\\\"email\\\" translate=\\\"usernameInUse\\\"></div></div><div \\nng-messages=\\\"myForm.email.$pending\\\" class=\\\"validation-pending\\\"><div ng-message=\\\"email\\\" translate=\\\"checkingUsername\\\">\\n</div></div></div><label class=\\\"item item-input\\\"><i class=\\\"icon icon-lock placeholder-icon\\\"></i> <input required \\ntype=\\\"password\\\" name=\\\"password\\\" ng-model=\\\"form.password\\\" placeholder=\\\"{{\\'password\\'|translate}}\\\"></label><button \\nclass=\\\"button button-block button-outline button-light\\\" type=\\\"submit\\\" translate=\\\"{{\\'submit\\' | translate}}\\\"></button>\\n</form><span class=\\\"term\\\">{{\\'termAccept\\' | translate}} <a href=\\\"https://photogramapp.com\\\">{{\\'terms\\' | translate}}</a>\\n</span></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/SignupModalDirective.html\",\"<ion-modal-view id=\\\"user-layout\\\" class=\\\"modal-auth bg-animate\\\" cache-view=\\\"false\\\"><ion-header-bar><h1 class=\\\"title\\\" \\ntranslate=\\\"register\\\"></h1><a ng-click=\\\"closeModal()\\\" class=\\\"button button-icon icon ion-ios-close-empty\\\"></a>\\n</ion-header-bar><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step2\\\"><form name=\\\"myForm\\\" \\nnovalidate=\\\"novalidate\\\" ng-submit=\\\"submitRegister(myForm, form)\\\"><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-envelope placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"email\\\" name=\\\"email\\\" \\nng-model=\\\"form.email\\\" email-validator ng-model-options=\\\"{debounce: 1000}\\\" placeholder=\\\"user@example.com\\\"></label><div \\nng-if=\\\"myForm.email.$dirty\\\"><div ng-messages=\\\"myForm.email.$error\\\" class=\\\"validation-error\\\"><div ng-message=\\\"required\\\" \\ntranslate=\\\"emailRequired\\\"></div><div ng-message=\\\"email\\\" translate=\\\"emailInUse\\\"></div></div><div \\nng-messages=\\\"myForm.email.$pending\\\" class=\\\"validation-pending\\\"><div ng-message=\\\"email\\\" translate=\\\"checkingEmail\\\"></div>\\n</div></div><label class=\\\"item item-input\\\"><i class=\\\"icon icon-user placeholder-icon\\\"></i> <input required=\\\"required\\\" \\ntype=\\\"text\\\" name=\\\"username\\\" ng-model=\\\"form.username\\\" username-validator ng-minlength=\\\"4\\\" ng-maxlength=\\\"12\\\" \\nng-model-options=\\\"{debounce: 1000}\\\" ng-pattern=\\\"/^[a-zA-Z\\'. -]+$/\\\" placeholder=\\\"{{\\'yourLogin\\' | translate}}\\\"></label>\\n<div ng-if=\\\"myForm.username.$dirty\\\"><div ng-messages=\\\"myForm.email.$error\\\" class=\\\"validation-error\\\"><div \\nng-message=\\\"required\\\" translate=\\\"usernameRequired\\\"></div><div ng-message=\\\"email\\\" translate=\\\"usernameInUse\\\"></div></div>\\n<div ng-messages=\\\"myForm.email.$pending\\\" class=\\\"validation-pending\\\"><div ng-message=\\\"email\\\" \\ntranslate=\\\"checkingUsername\\\"></div></div></div><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-lock placeholder-icon\\\"></i> <input required type=\\\"password\\\" name=\\\"password\\\" ng-model=\\\"form.password\\\" \\nplaceholder=\\\"{{\\'password\\'|translate}}\\\"></label><button class=\\\"button button-block button-outline button-light\\\" \\ntype=\\\"submit\\\" translate=\\\"{{\\'submit\\' | translate}}\\\"></button></form><span class=\\\"term\\\">{{\\'termAccept\\' | translate}} <a \\nhref=\\\"https://photogramapp.com\\\">{{\\'terms\\' | translate}}</a></span></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/albumGridDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><div class=\\\"row animated fadeIn\\\" ng-if=\\\"$index % 2 === 0\\\" \\nng-repeat=\\\"image in data | orderBy:\\'createdAt\\':true\\\"><div class=\\\"col col-50 item-animate1\\\" \\nng-if=\\\"$index < data.length\\\" album-photo-grid album=\\\"data[$index].id\\\"><img \\nng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"><div class=\\\"desc\\\"><h2>{{::data[$index].title}}</h2><p>\\n{{::data[$index].qtyPhotos}} photos</p></div></div><div class=\\\"col col-50 item-animate1\\\" \\nng-if=\\\"$index + 1 < data.length\\\" album-photo-grid album=\\\"data[$index+1].id\\\"><img \\nng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"><div class=\\\"desc\\\"><h2>{{::data[$index+1].title}}</h2><p>\\n{{::data[$index+1].qtyPhotos}} photos</p></div></div></div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" \\nng-if=\\\"moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/albumPhotoGridDirective.html\",\"<ion-modal-view cache-view=\\\"false\\\"><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><h1 class=\\\"title\\\" ng-bind=\\\"title\\\"></h1><a \\nng-click=\\\"closeModal()\\\" class=\\\"button button-icon icon ion-ios-close-empty\\\"></a></ion-header-bar><ion-content \\nclass=\\\"padding\\\"><div class=\\\"row\\\" ng-if=\\\"$index % 3 === 0\\\" ng-repeat=\\\"image in data | orderBy:\\'createdAt\\':true\\\"><div \\nclass=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data[$index].user.obj\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nion-slideshow ng-model=\\\"data\\\" index=\\\"$index\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div \\nclass=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index + 1 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data[$index + 1].user.obj\\\" ng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nion-slideshow ng-model=\\\"data\\\" index=\\\"$index+1\\\" ng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div\\n class=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index + 2 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data[$index + 2].user.obj\\\" ng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nion-slideshow ng-model=\\\"data\\\" index=\\\"$index+2\\\" ng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"></div>\\n</div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/distanceModal.html\",\"<ion-modal-view><ion-header-bar class=\\\"bar-light\\\"><div class=\\\"buttons\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-close-empty\\\" ng-click=\\\"closeDistanceModal()\\\"></button></div><div \\nclass=\\\"title\\\">{{ \\\"chooseDistanceText\\\" | translate }}</div></ion-header-bar><ion-content><ion-list><ion-item \\nclass=\\\"item item-icon-right\\\" ng-repeat=\\\"distance in distances\\\" ng-click=\\\"onDistanceSelected(distance.val)\\\" bindonce><h2\\n bo-bind=\\\"distance.text\\\"></h2><i class=\\\"icon ion-checkmark\\\" ng-show=\\\"params.distance === distance.val\\\"></i></ion-item>\\n</ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/follow.modal.html\",\"<ion-modal-view class=\\\"modal-profile photogram-profile\\\"><ion-header-bar class=\\\"bar-positive\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\nFollow Users</div></ion-header-bar><ion-content><div class=\\\"list\\\"><div class=\\\"item item-avatar item-button-right\\\" \\nng-repeat=\\\"item in data\\\"><img ng-src=\\\"{{ ::item.src }}\\\"><h2>{{ ::item.name }}</h2><p>{{ ::item.status }}</p><button \\nclass=\\\"button\\\" ng-click=\\\"item.follow = !item.follow\\\" ng-class=\\\"item.follow ? \\'button-positive\\' : \\'button-stable\\'\\\"><i \\nclass=\\\"icon\\\" ng-class=\\\"item.follow? \\'ion-thumbsup\\' : \\'ion-plus\\'\\\"></i></button></div></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/galleryAlbumModalDirective.html\",\"<ion-modal-view><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><a ng-click=\\\"closeModal()\\\" \\nclass=\\\"button button-clear button-positive\\\" translate=\\\"cancel\\\"></a><h1 class=\\\"title\\\" translate=\\\"selectAlbumText\\\"></h1>\\n</ion-header-bar><ion-content><div class=\\\"list\\\"><div class=\\\"item item-thumbnail-left\\\" gallery-new-album-modal \\nng-model=\\\"ngModel\\\"><img src=\\\"img/albumnew.png\\\"><h2>Create Album</h2></div><div class=\\\"item item-thumbnail-left\\\" \\nng-repeat=\\\"item in data | filter:searchValue\\\" ng-click=\\\"selectAlbum(item)\\\"><img \\nng-src=\\\"{{item.imageThumb._url || \\'img/albumnone.png\\'}}\\\"><h2 ng-bind=\\\"item.title\\\"></h2><p>{{item.qtyPhotos}} photos</p>\\n</div></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/galleryNewAlbumModalDirective.html\",\"<ion-modal-view><form name=\\\"rForm\\\" novalidate><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><a ng-click=\\\"closeModal()\\\" \\nclass=\\\"button button-clear button-positive\\\" translate=\\\"cancel\\\"></a><h1 class=\\\"title\\\" translate=\\\"createAlbum\\\"></h1><a \\nng-click=\\\"createAlbum(rForm, form)\\\" class=\\\"button button-clear button-positive\\\" translate=\\\"submit\\\"></a>\\n</ion-header-bar><ion-content><div class=\\\"list\\\"><label class=\\\"item item-input\\\"><input type=\\\"text\\\" name=\\\"title\\\" \\nplaceholder=\\\"{{\\'albumName\\' | translate}}\\\" ng-model=\\\"form.title\\\" required></label><label class=\\\"item item-input\\\">\\n<textarea name=\\\"description\\\" placeholder=\\\"{{\\'albumDesc\\' | translate}}\\\" ng-model=\\\"form.description\\\"></textarea></label>\\n</div></ion-content></form></ion-modal-view>\");\n$templateCache.put(\"app/directive/likeDirective.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar-dark\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ ::\\'Likes\\' | translate }} ({{ ::likes.length }})</div></ion-header-bar><ion-content><div class=\\\"list step1\\\"><div \\nng-repeat=\\\"item in likes\\\" class=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ ::item.user.img }}\\\"><h2>\\n{{ ::item.user.name }}</h2><div>{{ ::item.text }}</div><p>{{ ::item.created | amTimeAgo }}</p><button \\nclass=\\\"button button-positive button-outline\\\"><i class=\\\"icon ion-ios-plus-empty\\\"></i> {{ ::\\'Follow\\' }}</button></div>\\n</div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/mapPhotoUserDirective.html\",\"<div id=\\\"map_canvas\\\" data-tap-disabled=\\\"true\\\"></div>\");\n$templateCache.put(\"app/directive/photoCommentDirective.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n<span translate=\\\"commentPhotoText\\\"></span>({{ comments.length }})</div></ion-header-bar><ion-content><div \\nclass=\\\"padding center\\\" ng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><ion-list class=\\\"list\\\" \\nng-show=\\\"comments.length\\\" can-swipe=\\\"true\\\"><ion-item ng-repeat=\\\"item in comments | orderBy:createdAt\\\" \\nclass=\\\"item item-avatar\\\"><img ng-src=\\\"{{ ::item.user.photo._url || \\'./img/user.png\\'}}\\\"><div class=\\\"row\\\"><h2>\\n{{ ::item.user.name }}</h2></div><div class=\\\"row\\\"><div class=\\\"text\\\">{{ ::item.text }}</div></div><div class=\\\"row\\\"><p>\\n{{ ::item.createdAt | amTimeAgo }}</p></div><div ng-if=\\\"item.user.id === currentUser.id\\\"><ion-option-button \\nclass=\\\"button-info\\\" ng-click=\\\"editComment(item)\\\" translate=\\\"edit\\\">Edit</ion-option-button><ion-option-button \\nclass=\\\"button-assertive\\\" ng-click=\\\"deleteComment(item)\\\" translate=\\\"remove\\\">Remove</ion-option-button></div></ion-item>\\n</ion-list><div class=\\\"center-ico\\\" ng-if=\\\"nocomments\\\"><i class=\\\"icon ion-ios-chatbubble-outline\\\"></i><h1 \\ntranslate=\\\"noComments\\\"></h1></div></ion-content><form name=\\\"rForm\\\" ng-submit=\\\"submitComment(rForm, form)\\\" novalidate>\\n<ion-footer-bar class=\\\"bar-stable item-input-inset message-footer\\\" keyboard-attach><label class=\\\"item-input-wrapper\\\"><i\\n class=\\\"icon ion-ios-compose-outline placeholder-icon\\\"></i><textarea mentio mentio-trigger-char=\\\"\\'@\\'\\\" \\nmentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" mentio-search=\\\"searchPeople(term)\\\" \\nmentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" ng-model=\\\"form.text\\\" \\nplaceholder=\\\"Send a comment...\\\" required minlength=\\\"1\\\" maxlength=\\\"1500\\\">\\n                </textarea></label><div \\nclass=\\\"footer-btn-wrap\\\"><button class=\\\"button button-positive button-outline\\\" type=\\\"submit\\\" \\nng-disabled=\\\"!form.text || form.text === \\'\\'\\\">Publish</button></div></ion-footer-bar></form></ion-modal-view>\");\n$templateCache.put(\"app/directive/photoGridDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><div class=\\\"row animated fadeIn\\\" ng-if=\\\"$index % 3 === 0\\\" \\nng-repeat=\\\"image in data | orderBy:\\'createdAt\\':true\\\"><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index].user.obj\\\" \\nng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" ion-slideshow ng-model=\\\"data\\\" \\nindex=\\\"$index\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 1 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 1].user.obj\\\" \\nng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" ion-slideshow ng-model=\\\"data\\\" \\nindex=\\\"$index+1\\\" ng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div \\nclass=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index + 2 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data[$index + 2].user.obj\\\" ng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nion-slideshow ng-model=\\\"data\\\" index=\\\"$index+2\\\" ng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"></div>\\n</div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\">\\n</ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/photoListDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><div class=\\\"list card\\\" ng-repeat=\\\"gallery in data | orderBy:\\'createdAt\\':true\\\" \\nng-if=\\\"showGalleries()\\\"><div class=\\\"item item-avatar\\\" ng-click=\\\"load(gallery.user.username)\\\" ion-affix \\ndata-affix-within-parent-with-class=\\\"card\\\"><img ng-if=\\\"profile\\\" ng-src=\\\"{{ ::gallery.user.photo._url}}\\\"> <img \\nng-src=\\\"{{ ::gallery.user.photo._url || \\'img/user.png\\'}}\\\"><h2>{{ ::gallery.user.name}}</h2><p>\\n{{ ::gallery.user.status}}</p><span>{{ ::gallery.createdAt | amTimeAgo}}</span></div><div class=\\\"item item-body\\\" \\non-double-tap=\\\"like(gallery.id)\\\" ng-model=\\\"gallery\\\"><div class=\\\"icon ion-ios-heart heart\\\" \\nng-class=\\\"gallery.isLiked ? \\'happy\\' : \\'broken\\' \\\"></div><i class=\\\"icon\\\" ng-if=\\\"like\\\"></i> <img \\nng-src=\\\"{{ gallery.image._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></div><div class=\\\"item item-buttons\\\"><div class=\\\"row\\\"><div \\nclass=\\\"col col-30\\\"><ion-spinner ng-show=\\\"gallery.progress\\\"></ion-spinner><button photo-like ng-model=\\\"gallery\\\" \\nng-if=\\\"!gallery.progress\\\" ng-class=\\\"gallery.isLiked ? \\'ion-ios-heart\\' : \\'ion-ios-heart-outline\\' \\\" \\nclass=\\\"button-clear button-icon button-heart\\\"></button> <button ng-click=\\\"openComment(gallery.id)\\\" ng-model=\\\"gallery\\\" \\nclass=\\\"button-clear button-icon ion-ios-chatbubble-outline\\\"></button> <button \\nng-click=\\\"share(gallery.image._url, gallery.title)\\\" photogram=\\\"{{ :: gallery.id }}\\\" \\nclass=\\\"button-clear button-icon ion-android-share\\\"></button></div><div class=\\\"col album-name text-center\\\" \\nalbum-photo-grid album=\\\"gallery.album.id\\\"><div ng-bind=\\\"gallery.album.attributes.title\\\"></div></div><div \\nclass=\\\"col text-right\\\"><button ng-click=\\\"action(gallery)\\\" photogram=\\\"{{ :: gallery.id }}\\\" \\nclass=\\\"button-clear button-icon ion-android-more-vertical\\\"></button></div></div></div><div class=\\\"padding\\\"><span \\nclass=\\\"likes\\\" ng-click=\\\"openLikers(gallery.id)\\\"><i class=\\\"icon ion-ios-heart\\\"></i> <span ng-if=\\\"!gallery.progress\\\">\\n{{ gallery.likesTotal }}</span> <span translate=\\\"likesText\\\"></span></span><div class=\\\"list-comments\\\"><div \\nclass=\\\"comment-item\\\"><span profile-modal username=\\\"gallery.user.username\\\" class=\\\"username\\\">{{ :: gallery.user.name }}\\n</span> <span class=\\\"comment\\\" ng-bind-html=\\\"gallery.title | hashtag \\\"></span></div><div class=\\\"comment-item\\\" \\nng-repeat=\\\"item in gallery.comments |limitTo:3 | orderBy:\\'createdAt\\':true\\\"><span class=\\\"username\\\" profile-modal \\nusername=\\\"gallery.user.username\\\">{{ :: item.user.name }}</span> <span class=\\\"comment\\\" \\nng-bind-html=\\\"item.text | hashtag\\\"></span></div><a class=\\\"comment-item\\\" photo-comment ng-model=\\\"gallery\\\" \\nng-if=\\\"gallery.commentsTotal>3\\\" translate=\\\"seeAllCommentText\\\"></a></div><button \\nclass=\\\"button button-block button-clear button-comment\\\" photo-comment ng-model=\\\"gallery\\\"><span translate=\\\"addComment\\\">\\n</span></button></div></div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded() && !id \\\" \\nspinner></ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/profile-edit-modal.html\",\"<ion-modal-view class=\\\"profile-edit\\\"><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><button class=\\\"button button-clear\\\" \\nng-click=\\\"closeModal()\\\" translate=\\\"cancel\\\"></button><div class=\\\"title\\\">{{ ::\\'editProfile\\' | translate }}</div>\\n</ion-header-bar><ion-content class=\\\"view-avatar\\\"><div class=\\\"step2\\\"><form name=\\\"rForm\\\" \\nng-submit=\\\"submitUpdateProfile(rForm, form)\\\" novalidate><img class=\\\"avatar\\\" user-avatar ng-model=\\\"currentUser\\\" \\nng-src=\\\"{{ currentUser.photo.url() || \\'img/user.png\\' }}\\\"><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-clipboard placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"name\\\" \\nng-model=\\\"form.name\\\" placeholder=\\\"{{\\'name\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-pound placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"username\\\" \\nng-model=\\\"form.username\\\" ng-minlength=\\\"4\\\" ng-maxlength=\\\"12\\\" ng-pattern=\\\"/^[a-zA-Z\\'. -]+$/\\\" \\nplaceholder=\\\"{{\\'username\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-earth placeholder-icon\\\"></i> <input type=\\\"url\\\" name=\\\"website\\\" ng-model=\\\"form.website\\\" \\nplaceholder=\\\"{{\\'site\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-information-circled placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"status\\\" \\nng-model=\\\"form.status\\\" placeholder=\\\"{{\\'status\\' | translate}}\\\"></label><ion-item class=\\\"item-divider\\\" \\ntranslate=\\\"privateInformation\\\"></ion-item><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-envelope placeholder-icon\\\"></i> <input type=\\\"email\\\" name=\\\"email\\\" ng-model=\\\"form.email\\\" \\ndisabled=\\\"disabled\\\" ng-model-options=\\\"{debounce: 1000}\\\" placeholder=\\\"user@example.com\\\"></label><label \\nclass=\\\"item item-input\\\"><i class=\\\"icon ion-iphone placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"tel\\\" \\nname=\\\"phone\\\" ng-model=\\\"form.phone\\\" placeholder=\\\"{{\\'phone\\' | translate }}\\\"></label><div class=\\\"padding\\\"><button \\ntype=\\\"submit\\\" class=\\\"button button-block button-positive\\\" translate=\\\"submit\\\"></button></div></form></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/profile-modal.html\",\"<ion-modal-view id=\\\"account-view\\\"><ion-header-bar class=\\\"bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ user.name }}</div></ion-header-bar><ion-content overflow-scroll=\\\"true\\\"><div class=\\\"profile-top\\\"><div class=\\\"row\\\">\\n<div class=\\\"col-25\\\"><img class=\\\"avatar\\\" ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\"></div><div \\nclass=\\\"col col-statics\\\"><div class=\\\"row\\\"><div class=\\\"row\\\"><div class=\\\"col\\\"><span class=\\\"text-center\\\">\\n{{ ::user.galleriesTotal || 0}}</span><h3 translate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\"><span class=\\\"text-center\\\">\\n{{ user.followersTotal || 0}}</span><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\"><span \\nclass=\\\"text-center\\\">{{ ::user.followingsTotal || 0}}</span><h3 translate=\\\"followingText\\\"></h3></div></div></div><div \\nclass=\\\"row col-edit\\\"><div class=\\\"col\\\"><photogram-loading loading=\\\"loadingFollow\\\"></photogram-loading><button \\nng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-follow\\': !user.isFollow}\\\" ng-click=\\\"follow()\\\" class=\\\"button\\\"><span\\n ng-show=\\\"!user.isFollow\\\" translate>Follow</span> <span ng-show=\\\"user.isFollow\\\" translate>Following</span></button>\\n</div></div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">{{ user.name }}</span><p class=\\\"user-status\\\">\\n{{ user.status }}</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button \\nclass=\\\"button button-icon icon ion-grid\\\" ng-class=\\\"{active: tab.grid}\\\" ng-click=\\\"changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: tab.list}\\\" ng-click=\\\"changeTab(\\'list\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recent\\\"></div><div class=\\\"tab\\\" ng-if=\\\"tab.list\\\"></div><div class=\\\"tab\\\" ng-if=\\\"tab.grid\\\"></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/search-directive.html\",\"<label class=\\\"item item-input\\\"><i class=\\\"icon ion-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"input\\\" \\nplaceholder=\\\"{{\\'SEARCH.FORM.INPUT\\' | translate }}\\\"> <button class=\\\"button button-icon\\\" ng-if=\\\"input.length\\\" \\nng-click=\\\"clearSearch()\\\"><i class=\\\"icon ion-close\\\"></i></button></label>\");\n$templateCache.put(\"app/directive/settings-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"settingTitle\\\"></div></ion-header-bar><ion-content class=\\\"animated fadeIn\\\"><div class=\\\"list\\\"><ion-language>\\n</ion-language><ion-toggle class=\\\"toggle-positive\\\" ng-model=\\\"form.push\\\"><h3><small translate=\\\"notificationText\\\">\\n</small></h3><p ng-if=\\\"form.push\\\" translate=\\\"on\\\"></p><p ng-if=\\\"!form.push\\\" translate=\\\"off\\\"></p></ion-toggle><ion-item \\nclass=\\\"item-icon-right\\\" href=\\\"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S\\\"><h3>\\n<small translate=\\\"buy\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" href=\\\"http://photogramapp.com\\\"><h3><small translate=\\\"help\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item class=\\\"item-icon-right\\\" href=\\\"http://photogramapp.com\\\"><h3>\\n<small translate=\\\"terms\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" ng-click=\\\"show();\\\"><h3><small translate=\\\"report\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item></div><div class=\\\"padding\\\"><button ng-click=\\\"logout()\\\" \\nclass=\\\"button button-block button-positive\\\" translate=\\\"logout\\\"></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/mentio/people-mentions.html\",\"<ul class=\\\"list-group user-search\\\"><li mentio-menu-item=\\\"person\\\" ng-repeat=\\\"person in items\\\" class=\\\"list-group-item\\\">\\n<img ng-src=\\\"{{person.imageUrl}}\\\" class=\\\"user-photo\\\"><div class=\\\"description\\\"><span class=\\\"text-primary\\\" \\nng-bind-html=\\\"person.username | mentioHighlight:typedTerm:\\'menu-highlighted\\' | unsafe\\\"></span> <em class=\\\"text-muted\\\" \\nng-bind=\\\"person.status | words:5\\\"></em></div></li></ul>\");\n$templateCache.put(\"app/mentio/photo-mentions.html\",\"<ul class=\\\"list-group product-search demo-scrollable-menu\\\"><li mentio-menu-item=\\\"product\\\" ng-repeat=\\\"product in items\\\" \\nclass=\\\"list-group-item clearfix\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-2 text-center\\\"><img ng-src=\\\"{{product.imageUrl}}\\\" \\nclass=\\\"product-photo\\\"></div><div class=\\\"col-xs-10\\\"><h4 class=\\\"list-group-item-heading\\\">{{product.title | words:5}}</h4>\\n<p class=\\\"list-group-item-text\\\">{{product.description | words:7}}</p></div></div></li></ul>\");\n$templateCache.put(\"app/component/ion-language/ion-language.html\",\"<button class=\\\"button button-block button-clear button-{{theme}} button-language\\\">{{language.translation | translate}} \\n<i class=\\\"icon ion-android-arrow-dropdown\\\"></i></button>\");\n$templateCache.put(\"app/component/ion-language/modal-language.html\",\"<ion-modal-view><ion-header-bar><h1 class=\\\"title\\\" translate=\\\"selectLanguageText\\\"></h1><a ng-click=\\\"closeModal()\\\" \\nclass=\\\"button button-icon icon ion-close\\\"></a></ion-header-bar><div \\nclass=\\\"bar bar-subheader item-input-inset bar-stable\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" placeholder=\\\"{{\\'searchText\\' | translate}}\\\" \\nng-model=\\\"searchValue\\\"></label><button type=\\\"button\\\" class=\\\"button button-clear\\\" ng-show=\\\"searchValue.length\\\" \\nng-click=\\\"searchValue=\\'\\'\\\">Clear</button></div><ion-content class=\\\"has-subheader has-header\\\"><ion-list><ion-item \\nclass=\\\"item\\\" ng-click=\\\"selectLanguage(item)\\\" ng-repeat=\\\"item in languages | filter:searchValue\\\" \\nng-bind-html=\\\"item.translation | translate\\\"></ion-item></ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/component/ion-slideshow/image-popover.html\",\"<div class=\\\"modal image-modal transparent\\\" ng-click=\\\"closeModal()\\\"><ion-slide-box \\non-slide-changed=\\\"slideChanged(index)\\\" show-pager=\\\"true\\\" active-slide=\\\"activeSlide\\\"><ion-slide \\nng-repeat=\\\"item in allImages\\\"><img ng-src=\\\"{{item.image._url}}\\\" class=\\\"fullscreen-image\\\"></ion-slide></ion-slide-box>\\n</div>\");\n$templateCache.put(\"app/component/ion-slideshow/video-popover.html\",\"<div class=\\\"modal transparent fullscreen-player\\\" ng-click=\\\"closeModal()\\\"><video ng-src=\\\"{{clipSrc}}\\\" class=\\\"centerme\\\" \\ncontrols=\\\"controls\\\" autoplay></video></div>\");\n$templateCache.put(\"app/main/account-friend-list/account-friend-list.html\",\"<ion-view><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/main/feedback/feedback-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"feedbackTitle\\\"></div></ion-header-bar><ion-content><formly-form model=\\\"form\\\" form=\\\"rForm\\\" \\nfields=\\\"formFields\\\"></formly-form><div class=\\\"padding\\\"><button class=\\\"button button-block button-positive\\\" \\nng-click=\\\"submitFeedback()\\\"><span translate=\\\"submit\\\"></span></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/gallery-comment/gallery-comment.html\",\"<ion-view class=\\\"modal-comment\\\" cache-view=\\\"false\\\"><ion-nav-bar class=\\\"bar bar-{{theme}}\\\"><ion-nav-buttons side=\\\"left\\\">\\n<button class=\\\"button button-icon button-clear ion-ios-arrow-left\\\" ng-click=\\\"$ionicGoBack()\\\"></button>\\n</ion-nav-buttons><ion-nav-title><div class=\\\"title\\\"><span translate=\\\"commentPhotoText\\\"></span>({{ comments.length }})\\n</div></ion-nav-title></ion-nav-bar><ion-content><div class=\\\"padding center\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><ion-list class=\\\"list\\\" ng-if=\\\"!loading\\\" can-swipe=\\\"true\\\"><ion-item \\nng-repeat=\\\"item in comments | orderBy:\\'createdAt\\':false\\\" class=\\\"item item-avatar\\\"><img \\nng-src=\\\"{{ ::item.user.photo._url || \\'./img/user.png\\'}}\\\"><div class=\\\"row\\\"><h2>{{ ::item.user.name }}</h2></div><div \\nclass=\\\"row\\\"><div class=\\\"text\\\">{{ ::item.text }}</div></div><div class=\\\"row\\\"><p>{{ ::item.createdAt | amTimeAgo }}</p>\\n</div><div ng-if=\\\"item.canEdit\\\"><ion-option-button class=\\\"button-info\\\" ng-click=\\\"editComment(item, $index)\\\" \\ntranslate=\\\"edit\\\">Edit</ion-option-button><ion-option-button class=\\\"button-assertive\\\" \\nng-click=\\\"deleteComment(item, $index)\\\" translate=\\\"remove\\\">Remove</ion-option-button></div></ion-item></ion-list><div \\nclass=\\\"center-ico\\\" ng-if=\\\"nocomments\\\"><i class=\\\"icon ion-ios-chatbubble-outline\\\"></i><h1 translate=\\\"noComments\\\"></h1>\\n</div></ion-content><form name=\\\"rForm\\\" ng-submit=\\\"submitComment(rForm, form)\\\" novalidate><ion-footer-bar \\nng-hide=\\\"loading\\\" class=\\\"bar-stable item-input-inset message-footer\\\" keyboard-attach><label class=\\\"item-input-wrapper\\\">\\n<i class=\\\"icon ion-ios-compose-outline placeholder-icon\\\"></i><textarea mentio mentio-trigger-char=\\\"\\'@\\'\\\" \\nmentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" mentio-search=\\\"searchPeople(term)\\\" \\nmentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" ng-model=\\\"form.text\\\" focus-me \\nid=\\\"textComment\\\" placeholder=\\\"Send a comment...\\\" required minlength=\\\"1\\\" maxlength=\\\"1500\\\">\\n                </textarea>\\n</label><div class=\\\"footer-btn-wrap\\\"><button class=\\\"button button-positive button-outline\\\" type=\\\"submit\\\" \\nng-disabled=\\\"!form.text || form.text === \\'\\'\\\">Publish</button></div></ion-footer-bar></form></ion-view>\");\n$templateCache.put(\"app/main/loading/loading.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/main/profile/profile.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-bar class=\\\"bar bar-{{theme}}\\\"><ion-nav-back-button>\\n</ion-nav-back-button></ion-nav-bar><ion-nav-title><span>{{ vm.user.name }}</span></ion-nav-title><ion-content \\nscroll-sista=\\\"header-tabs\\\" class=\\\"animated fadeIn\\\"><ion-refresher pulling-text=\\\"Loading\\\" on-refresh=\\\"onReload()\\\">\\n</ion-refresher><div class=\\\"profile-top\\\"><div class=\\\"row\\\"><div class=\\\"col-25\\\"><img class=\\\"avatar\\\" user-avatar \\nng-model=\\\"vm.user\\\" ng-src=\\\"{{ vm.user.photo._url || \\'img/user.png\\' }}\\\"></div><div class=\\\"col col-statics\\\"><div \\nclass=\\\"row\\\"><div class=\\\"col\\\"><span class=\\\"text-center\\\">{{ vm.user.galleriesTotal || 0}}</span><h3 \\ntranslate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\" ng-click=\\\"vm.openFollowers()\\\"><span class=\\\"text-center\\\">\\n{{ vm.user.followersTotal || 0}}</span><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\" \\nng-click=\\\"vm.openFollowing()\\\"><span class=\\\"text-center\\\">{{ vm.user.followingsTotal || 0}}</span><h3 \\ntranslate=\\\"followingText\\\"></h3></div></div><div class=\\\"row col-edit\\\"><div class=\\\"col center\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"col\\\" ng-if=\\\"vm.isMe && !vm.loading\\\"><button profile-modal-edit \\nuser=\\\"vm.user\\\" class=\\\"button\\\"><div translate=\\\"editProfile\\\"></div></button></div><div class=\\\"col\\\" \\nng-if=\\\"!vm.isMe && !vm.loading\\\"><button \\nng-class=\\\"{\\'button-unfollow\\': vm.user.isFollow, \\'button-follow\\': !vm.user.isFollow}\\\" ng-click=\\\"vm.follow()\\\" \\nclass=\\\"button\\\"><span ng-show=\\\"!vm.user.isFollow\\\" translate>Follow</span> <span ng-show=\\\"vm.user.isFollow\\\" translate>\\nFollowing</span></button></div></div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">{{ vm.user.name }}\\n</span><p class=\\\"user-status\\\">{{ vm.user.status }}</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button\\n class=\\\"button button-icon icon ion-grid\\\" ng-class=\\\"{\\'active\\': vm.tab.grid}\\\" ng-click=\\\"vm.changeTab(\\'grid\\')\\\"></button> \\n<button class=\\\"button button-icon icon ion-ios-camera-outline\\\" ng-class=\\\"{\\'active\\': vm.tab.album}\\\" \\nng-click=\\\"vm.changeTab(\\'album\\')\\\"></button> <button class=\\\"button button-icon icon ion-drag\\\" \\nng-class=\\\"{\\'active\\': vm.tab.list}\\\" ng-click=\\\"vm.changeTab(\\'list\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-ios-location-outline\\\" ng-class=\\\"{\\'active\\': vm.tab.map}\\\" \\nng-click=\\\"vm.changeTab(\\'map\\')\\\"></button></div></div><div ng-if=\\\"!vm.loading\\\"><div class=\\\"tab\\\" \\nng-if=\\\"vm.tab.grid && !vm.loading\\\"><div class=\\\"item item-divider\\\" translate=\\\"recent\\\"></div><photo-grid \\nusername=\\\"vm.user.username\\\" on-reload=\\\"onReload\\\"></photo-grid></div><div class=\\\"tab\\\" \\nng-if=\\\"vm.tab.album && !vm.loading\\\"><div class=\\\"item item-divider\\\" translate=\\\"albums\\\"></div><album-grid \\nusername=\\\"vm.user.username\\\" on-reload=\\\"onReload\\\"></album-grid></div><div class=\\\"tab\\\" \\nng-if=\\\"vm.tab.list && !vm.loading\\\"><div class=\\\"item item-divider\\\" translate=\\\"recent\\\"></div><photo-list \\nusername=\\\"vm.user.username\\\" on-reload=\\\"onReload\\\"></photo-list></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.map && !vm.loading\\\">\\n<div class=\\\"item item-divider\\\" translate=\\\"map\\\"></div><map-photo-user username=\\\"vm.user.username\\\" on-reload=\\\"onReload\\\">\\n</map-photo-user></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/profile-photo/profile-photo.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-bar class=\\\"bar bar-{{theme}}\\\"><ion-nav-back-button>\\n</ion-nav-back-button></ion-nav-bar><ion-nav-title><span translate=\\\"photo\\\"></span></ion-nav-title><ion-content \\nscroll-sista=\\\"header-tabs\\\" class=\\\"animated fadeIn\\\"><photo-list id=\\\"vm.id\\\" profile=\\\"true\\\" load=\\\"vm.openProfile\\\" \\nopen-likers=\\\"vm.openLikers\\\" on-reload=\\\"onReload\\\"></photo-list></ion-content></ion-view>\");\n$templateCache.put(\"app/main/share/post-modal.html\",\"<ion-modal-view class=\\\"modal-post\\\"><ion-header-bar class=\\\"bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closePost()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"SHARE.TITLE\\\"></div><button class=\\\"button button-positive\\\" ng-click=\\\"submitPost(form)\\\"><i \\nclass=\\\"icon ion-arrow-right-b\\\"></i></button></ion-header-bar><ion-content><div id=\\\"image\\\"><img ng-src=\\\"{{image}}\\\">\\n</div><ul class=\\\"list\\\"><li class=\\\"item\\\"><textarea ng-model=\\\"form.title\\\" \\nplaceholder=\\\"{{ \\'SHARE.FORM.LEGEND\\' | translate }}\\\"></textarea></li></ul></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/share/share-modal.html\",\"<ion-modal-view class=\\\"modal-share\\\"><form name=\\\"rForm\\\" novalidate><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-clear button-light\\\" ng-click=\\\"close()\\\" translate=\\\"cancel\\\"></button><div \\nclass=\\\"title\\\" translate=\\\"shareGalleryText\\\"></div><button class=\\\"button button-clear button-light\\\" \\nng-click=\\\"submit(rForm, form)\\\" translate=\\\"submit\\\"></button></ion-header-bar><ion-content><div class=\\\"list\\\"><div \\nclass=\\\"item item-thumbnail-left\\\"><img ng-src=\\\"{{image}}\\\" ng-click=\\\"editFilter()\\\"><textarea mentio \\nmentio-trigger-char=\\\"\\'@\\'\\\" mentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" \\nmentio-search=\\\"searchPeople(term)\\\" mentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" \\ntype=\\\"text\\\" ng-model=\\\"form.title\\\" placeholder=\\\"{{ \\'description\\'|translate }}\\\"></textarea></div><div \\nclass=\\\"item item-divider\\\" translate=\\\"shareLocation\\\"></div><div class=\\\"item item-icon-left\\\" ion-location \\nng-model=\\\"form.address\\\" ng-if=\\\"!form.address.resume\\\"><i class=\\\"icon ion-ios-location\\\"></i> <span translate=\\\"addLocale\\\">\\n</span></div><a class=\\\"item item-icon-left item-button-right\\\" ng-if=\\\"form.address.resume\\\"><i \\nclass=\\\"icon ion-ios-location\\\"></i><h2>{{form.address.name || form.address.resume}}</h2><p>{{form.address.resume}}</p>\\n<button class=\\\"button button-icon\\\" ng-click=\\\"closeAddress()\\\"><i class=\\\"icon ion-ios-close\\\"></i></button></a><div \\nclass=\\\"item item-divider\\\" translate=\\\"selectAlbumText\\\"></div><div class=\\\"item item-thumbnail-left\\\" gallery-album-modal \\nng-model=\\\"form.album\\\"><img ng-src=\\\"{{form.album.imageThumb._url || \\'img/albumnone.png\\'}}\\\"><h2 \\nng-if=\\\"!form.album.title\\\" translate=\\\"clickSelectAlbum\\\"></h2><h2 ng-if=\\\"form.album\\\" ng-bind=\\\"form.album.title\\\"></h2><p \\nng-if=\\\"form.album\\\">{{form.album.qtyPhotos}} photos</p></div><div class=\\\"item item-divider\\\" translate=\\\"shareSocial\\\">\\n</div><li class=\\\"item item-toggle\\\">Compartilhar no Facebook?<label class=\\\"toggle toggle-assertive\\\"><input \\ntype=\\\"checkbox\\\"><div class=\\\"track\\\"><div class=\\\"handle\\\"></div></div></label></li></div></ion-content></form>\\n</ion-modal-view>\");\n$templateCache.put(\"app/main/tab/main-tab.html\",\"<ion-view><ion-nav-bar class=\\\"bar bar-{{theme}}\\\"><ion-nav-back-button></ion-nav-back-button></ion-nav-bar><ion-tabs \\nclass=\\\"tabs-{{theme}} tabs-photogram\\\"><ion-tab title=\\\"{{ \\'PHOTOGRAM.TITLE.HOME\\' | translate }}\\\" icon-on=\\\"ion-ios-home\\\" \\nicon-off=\\\"ion-ios-home-outline\\\" ui-sref=\\\"tab.home\\\"><ion-nav-view name=\\\"tabHome\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SEARCH\\' | translate }}\\\" icon-on=\\\"ion-ios-world\\\" icon-off=\\\"ion-ios-world-outline\\\" \\nui-sref=\\\"tab.search\\\"><ion-nav-view name=\\\"tabSearch\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SHARE\\' | translate }}\\\" icon-on=\\\"ion-ios-camera\\\" icon-off=\\\"ion-ios-camera-outline\\\" \\nng-click=\\\"vm.postPhoto()\\\"><ion-nav-view name=\\\"tabCapture\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.ACTIVITY\\' | translate }}\\\" icon-on=\\\"ion-ios-heart\\\" icon-off=\\\"ion-ios-heart-outline\\\" \\nui-sref=\\\"tab.activity\\\"><ion-nav-view name=\\\"tabActivity\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.PROFILE\\' | translate }}\\\" icon-on=\\\"ion-ios-person\\\" icon-off=\\\"ion-ios-person-outline\\\" \\nui-sref=\\\"tab.account\\\"><ion-nav-view name=\\\"tabProfile\\\"></ion-nav-view></ion-tab></ion-tabs></ion-view>\");\n$templateCache.put(\"app/main/tab-account/account.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-title><span>{{ vm.user.attributes.name }}</span>\\n</ion-nav-title><ion-nav-buttons side=\\\"right\\\"><button settings-modal class=\\\"button button-icon icon ion-gear-a\\\">\\n</button></ion-nav-buttons><ion-content><div class=\\\"profile-top\\\"><div class=\\\"row\\\"><div class=\\\"col-25\\\"><img \\nclass=\\\"avatar\\\" user-avatar ng-model=\\\"currentUser\\\" ng-src=\\\"{{ currentUser.photo.url() || \\'img/user.png\\' }}\\\"></div><div \\nclass=\\\"col col-statics\\\"><div class=\\\"row\\\"><div class=\\\"col\\\"><span ng-if=\\\"!vm.loading\\\" class=\\\"text-center\\\">\\n{{ vm.user.attributes.galleriesTotal || 0}}</span><ion-spinner ng-if=\\\"vm.loading\\\"></ion-spinner><h3 \\ntranslate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\" ng-click=\\\"vm.openFollowers()\\\"><span ng-if=\\\"!vm.loading\\\" \\nclass=\\\"text-center\\\">{{ vm.user.attributes.followersTotal || 0}}</span><ion-spinner ng-if=\\\"vm.loading\\\"></ion-spinner><h3\\n translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\" ng-click=\\\"vm.openFollowing()\\\"><span ng-if=\\\"!vm.loading\\\" \\nclass=\\\"text-center\\\">{{ vm.user.attributes.followingsTotal || 0}}</span><ion-spinner ng-if=\\\"vm.loading\\\"></ion-spinner>\\n<h3 translate=\\\"followingText\\\"></h3></div></div><div class=\\\"row col-edit\\\"><div class=\\\"col\\\"><button profile-modal-edit \\nuser=\\\"vm.user\\\" class=\\\"button\\\"><div translate=\\\"editProfile\\\"></div></button></div></div></div></div><div class=\\\"padding\\\">\\n<span class=\\\"user-username\\\">{{ vm.user.attributes.name }}</span><p class=\\\"user-status\\\">{{ vm.user.attributes.status }}\\n</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button class=\\\"button button-icon icon ion-grid\\\" \\nng-class=\\\"{\\'active\\': vm.tab.grid}\\\" ng-click=\\\"vm.changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-ios-camera-outline\\\" ng-class=\\\"{\\'active\\': vm.tab.album}\\\" \\nng-click=\\\"vm.changeTab(\\'album\\')\\\"></button> <button class=\\\"button button-icon icon ion-drag\\\" \\nng-class=\\\"{\\'active\\': vm.tab.list}\\\" ng-click=\\\"vm.changeTab(\\'list\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-ios-location-outline\\\" ng-class=\\\"{\\'active\\': vm.tab.map}\\\" \\nng-click=\\\"vm.changeTab(\\'map\\')\\\"></button></div></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.grid && !vm.loading\\\"><div \\nclass=\\\"item item-divider\\\" translate=\\\"recent\\\"></div><photo-grid username=\\\"vm.user.username\\\" on-reload=\\\"onReload\\\">\\n</photo-grid></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.album && !vm.loading\\\"><div class=\\\"item item-divider\\\" \\ntranslate=\\\"albums\\\"></div><album-grid username=\\\"vm.user.username\\\" on-reload=\\\"onReload\\\"></album-grid></div><div \\nclass=\\\"tab\\\" ng-if=\\\"vm.tab.list && !vm.loading\\\"><div class=\\\"item item-divider\\\" translate=\\\"recent\\\"></div><photo-list \\nusername=\\\"vm.user.username\\\" on-reload=\\\"onReload\\\"></photo-list></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.map && !vm.loading\\\">\\n<div class=\\\"item item-divider\\\" translate=\\\"map\\\"></div><map-photo-user username=\\\"vm.user.username\\\" on-reload=\\\"onReload\\\">\\n</map-photo-user></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-activity/activity.html\",\"<ion-view class=\\\"list-activity\\\"><ion-nav-title><span translate=\\\"activities\\\"></span></ion-nav-title><ion-content \\nscroll-sista=\\\"\\\"><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"vm.showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-positive\\\" ng-click=\\\"vm.onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"vm.showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i>\\n<p>{{ \\\"activityNotFoundText\\\" | translate }}</p></div></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" \\non-refresh=\\\"onReload()\\\"></ion-refresher><div class=\\\"list\\\"><div class=\\\"item item-avatar item-animate1\\\" \\nng-repeat=\\\"item in vm.data | orderBy:\\'createdAt\\':true\\\"><img ng-src=\\\"{{ item.user.photo._url  || \\'./img/user.png\\'}}\\\"><h2\\n ng-click=\\\"vm.openProfile(item.user.username)\\\">{{ item.user.name}}</h2><div class=\\\"text\\\">{{ item.action | translate }}\\n</div><p>{{ item.createdAt | amTimeAgo }}</p><div class=\\\"img-right\\\" ng-if=\\\"item.item.gallery\\\"><img \\nng-src=\\\"{{ item.item.gallery.attributes.imageThumb._url}}\\\"></div><div class=\\\"item-button-right\\\" \\nng-if=\\\"!item.item.gallery\\\"><button class=\\\"button button-positive button-outline icon\\\" \\nng-class=\\\"{\\'ion-ios-person-outline\\': item.user.isFollow, \\'ion-ios-personadd-outline\\': !item.user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"></button></div></div></div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" \\nng-if=\\\"vm.moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-home/home.html\",\"<ion-view class=\\\"view-home\\\"><ion-nav-buttons side=\\\"left\\\"><button \\nclass=\\\"button button-icon icon ion-ios-personadd-outline\\\" ui-sref=\\\"tab.homeUserlist\\\"></button></ion-nav-buttons>\\n<ion-nav-title><span class=\\\"icon2-logo\\\"></span></ion-nav-title><ion-content><ion-refresher pulling-text=\\\"Loading\\\" \\non-refresh=\\\"onReload()\\\"></ion-refresher><photo-list profile=\\\"true\\\" load=\\\"vm.openProfile\\\" open-likers=\\\"vm.openLikers\\\" \\non-reload=\\\"onReload\\\"></photo-list></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-search/search.html\",\"<ion-view><ion-nav-title><span>{{ \\'searchText\\' | translate }}</span></ion-nav-title><ion-nav-buttons side=\\\"right\\\">\\n<button class=\\\"button button-icon ion-ios-location\\\" ui-sref=\\\"tab.map\\\"></button></ion-nav-buttons><ion-header-bar \\nclass=\\\"bar bar-{{theme}} bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"params.search\\\" ng-change=\\\"onSearch()\\\" \\nng-model-options=\\\"{debounce:1000}\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-clear\\\" ng-if=\\\"search.length\\\" ng-click=\\\"clearSearch()\\\">{{ \\\"cancelText\\\" | translate }}</button>\\n</ion-header-bar><ion-content class=\\\"has-subheader\\\"><ion-refresher pulling-text=\\\"Loading\\\" on-refresh=\\\"onReload()\\\">\\n</ion-refresher><div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><div class=\\\"row animated fadeIn\\\" ng-if=\\\"$index % 3 === 0\\\" \\nng-repeat=\\\"image in data | orderBy:\\'createdAt\\':true\\\"><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index < data.length\\\" ui-sref=\\\"tab.searchProfile({username: data[$index].user.username})\\\"><img ng-if=\\\"profile\\\" \\nprofile-modal user=\\\"data[$index].user.obj\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"> <img \\nng-if=\\\"!profile\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 1 < data.length\\\" ui-sref=\\\"tab.searchProfile({username: data[$index].user.username})\\\"><img \\nng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 1].user.obj\\\" ng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" \\nwidth=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" ng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div \\nclass=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index + 2 < data.length\\\" \\nui-sref=\\\"tab.searchProfile({username: data[$index].user.username})\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data[$index + 2].user.obj\\\" ng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"></div></div><ion-infinite-scroll \\non-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll></ion-content>\\n</ion-view>\");\n$templateCache.put(\"app/main/tab-search-map/searchMap.html\",\"<ion-view id=\\\"view-map\\\"><ion-nav-title>{{ \\'mapTitle\\' | translate }}</ion-nav-title><ion-content scroll=\\\"false\\\"><div \\nid=\\\"map_canvas\\\" data-tap-disabled=\\\"true\\\"></div></ion-content><ion-footer-bar><div class=\\\"row\\\" ng-if=\\\"loading\\\"><div \\nclass=\\\"col\\\"><div class=\\\"center\\\"><ion-spinner></ion-spinner></div></div></div><button ng-if=\\\"!loading\\\" \\nclass=\\\"button button-positive button-block button-outline\\\" ng-click=\\\"onSearchHere()\\\">{{ \\'searchInHere\\' | translate }}\\n</button></ion-footer-bar></ion-view>\");\n$templateCache.put(\"app/main/user-avatar/user-avatar.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content class=\\\"padding view-avatar\\\"><div class=\\\"row step1\\\"><div \\nclass=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar ng-model=\\\"vm.user\\\" ng-src=\\\"{{ vm.user._url || \\'img/user.png\\' }}\\\"></div>\\n</div><div class=\\\"step2\\\"><form><label class=\\\"item item-input\\\"><i class=\\\"icon icon-envelope placeholder-icon\\\"></i> \\n<input type=\\\"email\\\" name=\\\"email\\\" ng-model=\\\"vm.form.email\\\" disabled=\\\"disabled\\\"></label></form><formly-form \\nmodel=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"vm.rForm\\\"></formly-form></div><div class=\\\"step3\\\"><button \\nng-click=\\\"vm.submitAvatar()\\\" class=\\\"button button-block button-positive\\\" translate=\\\"submit\\\"></button></div>\\n</ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-followers/user-followers.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"followersText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-following/user-following.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"followingText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-intro/user-intro.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"view-intro bg-animate\\\" cache-view=\\\"false\\\"><div class=\\\"bar bar-header\\\"><ion-language>\\n</ion-language></div><ion-content scroll=\\\"false\\\"><div class=\\\"intro-slider\\\"><ion-slide-box active-slide=\\\"slideIndex\\\" \\nshow-pager=\\\"true\\\" on-slide-changed=\\\"vm.slideChanged($index)\\\"><ion-slide ng-repeat=\\\"item in vm.slides track by $index\\\">\\n<div class=\\\"content\\\" ng-if=\\\"$index == vm.slideIndex\\\"><span class=\\\"top\\\"><h2>{{ item.text | translate }}</h2></span><div \\nclass=\\\"phone {{ vm.device }}\\\"><img ng-src=\\\"{{ item.img }}\\\"></div></div></ion-slide></ion-slide-box></div><button \\nclass=\\\"button button-positive button-fab left\\\" ng-if=\\\"vm.slideIndex\\\" ng-click=\\\"vm.previous()\\\"><i \\nclass=\\\"icon ion-ios-arrow-left\\\"></i></button> <button class=\\\"button button-positive button-fab right\\\" \\nng-hide=\\\"vm.slideIndex === vm.slides.length-1\\\" ng-click=\\\"vm.next()\\\"><i class=\\\"icon ion-ios-arrow-right\\\"></i></button>\\n</ion-content><ion-footer-bar><facebook-login></facebook-login><div class=\\\"row\\\"><button \\nclass=\\\"button button-block button-calm\\\" translate=\\\"register\\\" signup-modal></button> <button \\nclass=\\\"button button-block button-positive\\\" translate=\\\"signin\\\" signin-modal></button></div></ion-footer-bar></ion-view>\");\n$templateCache.put(\"app/main/user-layout/user-layout.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content padding=\\\"false\\\"><ion-nav-view></ion-nav-view></ion-content>\\n</ion-view>\");\n$templateCache.put(\"app/main/user-likers/user-likers.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"likersText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-list/user-list.html\",\"<ion-view id=\\\"user-list\\\" cache-view=\\\"false\\\"><ion-nav-title><span translate=\\\"findPeople\\\"></span></ion-nav-title>\\n<ion-header-bar class=\\\"bar bar-{{theme}} bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div \\nclass=\\\"error\\\"><i class=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button\\n class=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\"><ion-spinner>\\n</ion-spinner></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" on-refresh=\\\"vm.onReload()\\\">\\n</ion-refresher><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.data | filter:searchValue | orderBy:\\'createdAt\\':true\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-disabled=\\\"user.loading\\\" \\nng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" ng-click=\\\"vm.follow(user)\\\"><div \\nng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>Unfollow</div></button> </a><span\\n class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img ng-src=\\\"{{ gallery.imageThumb._url}}\\\" \\nid=\\\"{{ ::gallery.id}}\\\"></span></span></div></div><ion-infinite-scroll on-infinite=\\\"vm.onLoadMore()\\\" \\nng-if=\\\"vm.moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-merge/merge.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><ion-content class=\\\"view-avatar padding\\\"><div \\nclass=\\\"row step1\\\"><div class=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar \\nng-src=\\\"{{ tempUser.attributes.photo._url || \\'./img/user.png\\' }}\\\"></div></div><div class=\\\"step2\\\"><formly-form \\nmodel=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"rForm\\\"><input type=\\\"hidden\\\" ng-model=\\\"vm.form.facebookimg\\\"></formly-form>\\n</div><div class=\\\"padding step3\\\"><button ng-click=\\\"vm.submit(rForm, vm.form)\\\" \\nclass=\\\"button button-block button-facebook\\\"><i class=\\\"icon ion-social-facebook\\\"></i> <span translate=\\\"mergeAccount\\\">\\n</span></button></div></ion-content></ion-view>\");\n$templateCache.put(\"app/component/ion-photo/view/filter.modal.html\",\"<ion-modal-view id=\\\"photo-filter\\\"><ion-header-bar class=\\\"bar bar-{{theme}}\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModalFilter()\\\"></button><div \\nclass=\\\"title\\\">{{ \\'Filter\\' | translate }}</div><button class=\\\"button button-icon\\\" ng-click=\\\"submitFilter()\\\"><i \\nclass=\\\"icon ion-ios-arrow-thin-right\\\"></i></button></ion-header-bar><ion-content><div class=\\\"box-image\\\"><img \\nid=\\\"image\\\" src=\\\"{{form.photo}}\\\" ng-hide=\\\"loading\\\"><ion-spinner ng-show=\\\"loading\\\"></ion-spinner></div><img id=\\\"image3\\\" \\nsrc=\\\"\\\" style=\\\"display: none\\\"><div ng-show=\\\"showFilter\\\" class=\\\"slider-filters animate1\\\"><ion-scroll direction=\\\"x\\\" \\nclass=\\\"image-filter\\\"><a ng-repeat=\\\"filter in imageFilters\\\" ng-click=\\\"applyFilter(filter)\\\"><p>{{ filter.name }}</p><img \\nid=\\\"{{filter.id}}\\\" class=\\\"img-filter\\\" src=\\\"\\\"></a></ion-scroll><div class=\\\"row\\\"><div class=\\\"col\\\"><button \\nclass=\\\"button button-block bold\\\">Filter</button></div><div class=\\\"col\\\"><button class=\\\"button button-block\\\" \\nng-click=\\\"actionShowFilter(false)\\\">Edit</button></div></div></div><div ng-hide=\\\"showFilter\\\" class=\\\"slider-filters\\\"><div\\n ng-show=\\\"filterEdit\\\" class=\\\"slider-filters\\\"><p class=\\\"text-center\\\">{{filter.name}}</p><div \\nclass=\\\"item range range-positive\\\"><input type=\\\"range\\\" min=\\\"-100\\\" max=\\\"100\\\" ng-model=\\\"filter.slider.value\\\" \\nng-model-options=\\\"{debounce:100}\\\" step=\\\"0.1\\\"></div><div class=\\\"row\\\"><div class=\\\"col\\\"><button \\nclass=\\\"button button-block\\\" ng-click=\\\"cancelFilter(filter)\\\">Cancel</button></div><div class=\\\"col\\\"><button \\nclass=\\\"button button-block bold\\\" ng-click=\\\"doneFilter()\\\">Done</button></div></div></div><div ng-show=\\\"!filterEdit\\\" \\nclass=\\\"slider-filters\\\"><ion-scroll direction=\\\"x\\\"><a ng-repeat=\\\"filter in filters\\\" ng-click=\\\"selectFilter(filter)\\\"><p>\\n{{ filter.name }}</p><i class=\\\"icon {{filter.icon}}\\\"></i> </a><a ng-click=\\\"reset()\\\"><p>Reset</p><i \\nclass=\\\"icon ion-android-refresh\\\"></i></a></ion-scroll><div class=\\\"row\\\"><div class=\\\"col\\\"><button \\nclass=\\\"button button-block\\\" ng-click=\\\"actionShowFilter(true)\\\">Filter</button></div><div class=\\\"col\\\"><button \\nclass=\\\"button button-block bold\\\">Edit</button></div></div></div></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/component/ion-photo/view/modal.share.photo.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar-dark\\\"><div class=\\\"title\\\">{{ ::\\'Share\\' | translate }}\\n</div><button class=\\\"button button-positive\\\" ng-click=\\\"modal.hide()\\\"><i class=\\\"icon ion-arrow-right-b\\\"></i></button>\\n</ion-header-bar><ion-content ng-cloak><div id=\\\"image\\\"><img ng-src=\\\"{{ ::form.photo}}\\\"><div class=\\\"title\\\">\\n{{ ::form.title }}</div></div><ul class=\\\"list\\\"><li class=\\\"padding\\\"><button ng-repeat=\\\"social in sociais\\\" \\nng-click=\\\"share(form, social)\\\" class=\\\"button button-block button-{{ social }}\\\"><i class=\\\"icon ion-social-{{ social }}\\\">\\n</i> {{ ::social | uppercase }}</button></li></ul></ion-content></ion-modal-view>\");}]);\n}());\n"],"sourceRoot":"/source/"}